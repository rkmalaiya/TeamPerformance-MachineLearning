<!--
RSS generated by JIRA (6.1.5#6160-sha1:a61a0fc278117a0da0ec9b89167b8f29b6afdab2) at Mon Feb 03 15:43:50 UTC 2014

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/sr/jira.issueviews:searchrequest-xml/temp/SearchRequest.xml?jqlQuery=project+%3D+PIG&tempMax=100&field=key&field=summary
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&amp;jqlQuery=project+%3D+PIG</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="100" total="3719"/>
                <build-info>
            <version>6.1.5</version>
            <build-number>6160</build-number>
            <build-date>03-12-2013</build-date>
        </build-info>
<item>
            <title>[PIG-3741] Utils.setTmpFileCompressionOnConf can cause side effect for SequenceFileInterStorage</title>
                <link>https://issues.apache.org/jira/browse/PIG-3741</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently, Utils.setTmpFileCompressionOnConf(pigContext, conf); is invoked for every job. In case of Seqfile, this api sets mapreduce params on conf to assist SequenceFileInterStorage. However, as a side effect, this might change the behavior of other storers due to these mapred properties. This api should only be called for jobs with intermediate storage.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692791">PIG-3741</key>
            <summary>Utils.setTmpFileCompressionOnConf can cause side effect for SequenceFileInterStorage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="aniket486">Aniket Mokashi</assignee>
                                    <reporter username="aniket486">Aniket Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Feb 2014 07:30:12 +0000</created>
                <updated>Mon, 3 Feb 2014 08:36:26 +0000</updated>
                                                            <fixVersion>0.12.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                            <attachment id="12626619" name="PIG-3741.patch" size="4554" author="aniket486" created="Mon, 3 Feb 2014 08:36:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3740] Document direct fetch optimization</title>
                <link>https://issues.apache.org/jira/browse/PIG-3740</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;We should document &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3642&quot; title=&quot;Direct HDFS access for small jobs (fetch) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3642&quot;&gt;&lt;del&gt;PIG-3642&lt;/del&gt;&lt;/a&gt; in the &lt;a href=&quot;http://pig.apache.org/docs/r0.12.0/perf.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;performance and efficiency&lt;/a&gt; section of Pig manual.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692767">PIG-3740</key>
            <summary>Document direct fetch optimization</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="lbendig">Lorand Bendig</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Feb 2014 04:00:36 +0000</created>
                <updated>Mon, 3 Feb 2014 04:02:42 +0000</updated>
                                            <version>0.13.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12686477">PIG-3642</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3739] The Warning_4 e2e test is broken in trunk</title>
                <link>https://issues.apache.org/jira/browse/PIG-3739</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;This is a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2207&quot; title=&quot;Support custom counters for aggregating warnings from different udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2207&quot;&gt;&lt;del&gt;PIG-2207&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The Warning_4 e2e test fails because expected warning messages are not printed to stderr. I confirmed that the following lines are present w/o &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2207&quot; title=&quot;Support custom counters for aggregating warnings from different udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2207&quot;&gt;&lt;del&gt;PIG-2207&lt;/del&gt;&lt;/a&gt;, whereas they are not w/ &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2207&quot; title=&quot;Support custom counters for aggregating warnings from different udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2207&quot;&gt;&lt;del&gt;PIG-2207&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-02-02 04:48:11,211 [main] WARN  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Encountered Warning UDF_WARNING_3 10989 time(s).
2014-02-02 04:48:11,211 [main] WARN  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Encountered Warning UDF_WARNING_4 22 time(s).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is the test query-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
register ./lib/java/testudf.jar;
a = load &apos;/user/pig/tests/data/singlefile/studentnulltab10k&apos; as (name, age: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, gpa: &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;);
b = foreach a generate org.apache.pig.test.udf.evalfunc.TestWarningFunc(name, age, gpa);
store b into &apos;/user/pig/out/cheolsoop-1391202001-cmdline.conf-Warning/Warning_4.out&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12692696">PIG-3739</key>
            <summary>The Warning_4 e2e test is broken in trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="aniket486">Aniket Mokashi</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Feb 2014 05:15:05 +0000</created>
                <updated>Sun, 2 Feb 2014 05:43:42 +0000</updated>
                                                            <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13888836" author="aniket486" created="Sun, 2 Feb 2014 05:43:42 +0000"  >&lt;p&gt;This is expected due to backwards incompatibility of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2207&quot; title=&quot;Support custom counters for aggregating warnings from different udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2207&quot;&gt;&lt;del&gt;PIG-2207&lt;/del&gt;&lt;/a&gt;. I will submit a patch to fix the test.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12518087">PIG-2207</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 2 Feb 2014 05:43:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371297</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371283</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3738] Missing explanation of hidden maven artifacts needed for 2x</title>
                <link>https://issues.apache.org/jira/browse/PIG-3738</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Newcomers to pig will undoubtedly have trouble resolving issues such as this one: &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3729&quot; title=&quot;Need to rebuild pig 0.12.0 jar from mvnrepository.com to resove error in hadoop 2.2 0 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3729&quot;&gt;&lt;del&gt;PIG-3729&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;The reason being that &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;pig compiles differently for 2x and 1x&lt;/li&gt;
	&lt;li&gt;pig has a with and without hadoop artifact&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thus, there are at least 4 different variants of the pig jar which will be relevant to different users.  &lt;/p&gt;

&lt;p&gt;These need to be disambiguated.   And the presence/usage of hidden &quot;provided&quot; maven artifacts should also be illuminated .  &lt;/p&gt;

&lt;p&gt;The place for this is probably &lt;a href=&quot;https://cwiki.apache.org/confluence/display/PIG/Developer+Documentation&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/PIG/Developer+Documentation&lt;/a&gt; , as mentioned in the last comment of the referenced (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3729&quot; title=&quot;Need to rebuild pig 0.12.0 jar from mvnrepository.com to resove error in hadoop 2.2 0 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3729&quot;&gt;&lt;del&gt;PIG-3729&lt;/del&gt;&lt;/a&gt;) JIRA. &lt;/p&gt;

&lt;p&gt;Although this is NOT a code bug... I think this is a very critical missing peice : and thus Ive filed this as a bug, although it really is just a documentation issue in the end. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12692585">PIG-3738</key>
            <summary>Missing explanation of hidden maven artifacts needed for 2x</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jayunit100">jay vyas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jan 2014 20:20:50 +0000</created>
                <updated>Fri, 31 Jan 2014 20:20:50 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371186</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3737] Bundle dependent jars in distribution in %PIG_HOME%/lib folder</title>
                <link>https://issues.apache.org/jira/browse/PIG-3737</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig should bundle with dependencies like avro.jar and json-simple.jar&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692556">PIG-3737</key>
            <summary>Bundle dependent jars in distribution in %PIG_HOME%/lib folder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="shuainie">Shuaishuai Nie</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jan 2014 18:20:12 +0000</created>
                <updated>Fri, 31 Jan 2014 19:13:08 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13888030" author="daijy" created="Fri, 31 Jan 2014 19:10:54 +0000"  >&lt;p&gt;Actually not just avro/json jars. We don&apos;t ship dependent jars (except jython.jar) in Pig releases, user need to find all those jars themselves. I would suggest to bundle more jars in Pig distribution. I am thinking of two ways:&lt;br/&gt;
1. bundle all build dependent jars in distribution&lt;br/&gt;
2. hand pick several jars in distribution (hbase*.jar, json*.jar, avro*.jar, etc)&lt;/p&gt;

&lt;p&gt;#1 is apparently more maintainable, however, more jars means more chance user get a jar conflict. Thoughts?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12626351" name="PIG-3737.1.patch" size="1279" author="shuainie" created="Fri, 31 Jan 2014 19:05:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 Jan 2014 19:10:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371157</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371143</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3736] Refactor configuration management in pig</title>
                <link>https://issues.apache.org/jira/browse/PIG-3736</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently, all the MR properties from Configuration and user defined properties are sync&apos;ed into PigContext&apos;s properties member using Utils.recomputeProperties method. This is done in several places in the code and it is kind of the magic behind how configuration works (I removed a little bit of this magic in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt;). We should refactor the code to separate this so that we can improve configuration settings and precedence can be clearly defined.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692546">PIG-3736</key>
            <summary>Refactor configuration management in pig</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aniket486">Aniket Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jan 2014 17:14:52 +0000</created>
                <updated>Fri, 31 Jan 2014 17:14:52 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371133</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3735] UDF to data cleanse the dirty data with expected pattern</title>
                <link>https://issues.apache.org/jira/browse/PIG-3735</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;In data processing, often the data is not clean.&lt;br/&gt;
This udf works on large scale data and purifies the data with expected pattern&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692464">PIG-3735</key>
            <summary>UDF to data cleanse the dirty data with expected pattern</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rekhajoshm">Rekha Joshi</assignee>
                                    <reporter username="rekhajoshm">Rekha Joshi</reporter>
                        <labels>
                            <label>piggybank</label>
                    </labels>
                <created>Fri, 31 Jan 2014 09:17:46 +0000</created>
                <updated>Fri, 31 Jan 2014 18:49:27 +0000</updated>
                                            <version>0.10.1</version>
                                    <fixVersion>0.10.1</fixVersion>
                                    <component>piggybank</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13887582" author="rekhajoshm" created="Fri, 31 Jan 2014 09:23:33 +0000"  >&lt;p&gt;UDF to cleanse data with expected pattern&lt;/p&gt;</comment>
                            <comment id="13887583" author="rekhajoshm" created="Fri, 31 Jan 2014 09:24:35 +0000"  >&lt;p&gt;UDF to cleanse dirty data with expected pattern&lt;/p&gt;</comment>
                            <comment id="13887995" author="daijy" created="Fri, 31 Jan 2014 18:49:27 +0000"  >&lt;p&gt;Thanks Rekha, can you include some unit tests in patch?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12626280" name="PIG-3735.1.patch" size="3578" author="rekhajoshm" created="Fri, 31 Jan 2014 09:24:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 Jan 2014 18:49:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>UDF to cleanse data with expected pattern</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>piggybank</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[PIG-3734] build.xml jar-all target does not include jython*.jar in lib/ directory</title>
                <link>https://issues.apache.org/jira/browse/PIG-3734</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig package does not include the jython jar within lib/ directory with the jar-all ant target but includes it in the &quot;ant package&quot; target. It should be including it in both targets as often, the build/ directory is excluded from packaging which is where ivy puts all the dependency jars while building under build/ivy/lib/Pig&lt;br/&gt;
To reproduce:&lt;br/&gt;
ant jar-all &lt;br/&gt;
rm -rf build/ &lt;br/&gt;
bin/pig&lt;br/&gt;
grunt&amp;gt; register &apos;/tmp/test.py&apos; using jython as myfunction;&lt;br/&gt;
If done prior to installing jython, here&apos;s the error one gets:&lt;br/&gt;
2013-12-27 18:22:31,145 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR&lt;br/&gt;
2998: Unhandled internal error. org/python/core/PyObject&lt;br/&gt;
Details at logfile: pig_*.log&lt;br/&gt;
Within the pig_*.log =&amp;gt;&lt;br/&gt;
&amp;lt;log&amp;gt;&lt;br/&gt;
Pig Stack Trace&lt;br/&gt;
---------------&lt;br/&gt;
ERROR 2998: Unhandled internal error. org/python/core/PyObject&lt;br/&gt;
java.lang.NoClassDefFoundError: org/python/core/PyObject&lt;br/&gt;
at&lt;br/&gt;
org.apache.pig.scripting.jython.JythonScriptEngine.registerFunctions(JythonScriptEngine.java:304)&lt;br/&gt;
at org.apache.pig.PigServer.registerCode(PigServer.java:501)&lt;br/&gt;
at&lt;br/&gt;
org.apache.pig.tools.grunt.GruntParser.processRegister(GruntParser.java:436)&lt;br/&gt;
at&lt;br/&gt;
org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:445)&lt;br/&gt;
at&lt;br/&gt;
org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:194)&lt;br/&gt;
at&lt;br/&gt;
org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:170)&lt;br/&gt;
at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:69)&lt;br/&gt;
at org.apache.pig.Main.run(Main.java:538)&lt;br/&gt;
at org.apache.pig.Main.main(Main.java:157)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at org.apache.hadoop.util.RunJar.main(RunJar.java:197)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.python.core.PyObject&lt;br/&gt;
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)&lt;br/&gt;
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;br/&gt;
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)&lt;br/&gt;
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)&lt;br/&gt;
... 14 more&lt;br/&gt;
Fix: Including jython*.jar within the lib/ directory gets rid of this issue and the UDF can be loaded- &lt;br/&gt;
grunt&amp;gt; register &apos;/tmp/test.py&apos; using jython as myfuncs;&lt;br/&gt;
2013-12-27 18:37:02,402 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO &lt;br/&gt;
org.apache.pig.scripting.jython.JythonScriptEngine - created tmp&lt;br/&gt;
python.cachedir=/tmp/pig_jython_4887743829482443898&lt;br/&gt;
2013-12-27 18:37:03,448 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN &lt;br/&gt;
org.apache.pig.scripting.jython.JythonScriptEngine - pig.cmd.args.remainders is&lt;br/&gt;
empty. This is not expected unless on testing.&lt;br/&gt;
2013-12-27 18:37:03,724 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO &lt;br/&gt;
org.apache.pig.scripting.jython.JythonScriptEngine - Register scripting UDF:&lt;br/&gt;
myfuncs.helloworld&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692412">PIG-3734</key>
            <summary>build.xml jar-all target does not include jython*.jar in lib/ directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="suhassatish">Suhas Satish</assignee>
                                    <reporter username="suhassatish">Suhas Satish</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jan 2014 00:14:27 +0000</created>
                <updated>Fri, 31 Jan 2014 00:18:38 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13887294" author="suhassatish" created="Fri, 31 Jan 2014 00:18:38 +0000"  >&lt;p&gt;This is a clone of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3667&quot; title=&quot;build.xml jar-all target does not include jython*.jar in lib/ directory &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3667&quot;&gt;&lt;del&gt;PIG-3667&lt;/del&gt;&lt;/a&gt; which was accidentally marked as &quot;closed&quot;.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12626224" name="PIG-3734.patch" size="816" author="suhassatish" created="Fri, 31 Jan 2014 00:17:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371013</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370999</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3733] Pig fails to concatenate semi-colon in generate statement</title>
                <link>https://issues.apache.org/jira/browse/PIG-3733</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig fails to concatenate semi-colon to a column in a generate statement. I&apos;ve tried multiple ways including unicode version (&lt;br class=&quot;atl-forced-newline&quot; /&gt;u003B), but fails.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grunt&amp;gt; a = load &apos;/user/smallem/mem.csv&apos; using PigStorage(&apos;|&apos;) as (uid:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, sid:chararray);
grunt&amp;gt; b = foreach a generate uid as uid, CONCAT(&apos;v=1;&apos;,sid) as sids;
&amp;lt;line 3, column 0&amp;gt;  mismatched character &apos;&amp;lt;EOF&amp;gt;&apos; expecting &apos;&apos;&apos;
2014-01-30 08:51:51,759 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1200: &amp;lt;line 3, column 0&amp;gt;  mismatched character &apos;&amp;lt;EOF&amp;gt;&apos; expecting &apos;&apos;&apos;
Details at logfile: /export/home/smallem/pig_1391071809426.log
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The same however works when used nested statement.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grunt&amp;gt; a = load &apos;/user/smallem/mem.csv&apos; using PigStorage(&apos;|&apos;) as (uid:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, sid:chararray);
grunt&amp;gt; b = foreach a {                                                                    
&amp;gt;&amp;gt;         x = CONCAT(&apos;v=1;&apos;,sid);
&amp;gt;&amp;gt;         generate uid as memberuid, x as sids ;
&amp;gt;&amp;gt; };
grunt&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12692233">PIG-3733</key>
            <summary>Pig fails to concatenate semi-colon in generate statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="smallem">sudhir mallem</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jan 2014 08:56:28 +0000</created>
                <updated>Fri, 31 Jan 2014 00:21:45 +0000</updated>
                                            <version>0.11.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13886525" author="lbendig" created="Thu, 30 Jan 2014 12:22:40 +0000"  >&lt;p&gt;I suspect, that this issue has been fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2507&quot; title=&quot;Semicolon in paramenters for UDF results in parsing error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2507&quot;&gt;&lt;del&gt;PIG-2507&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13886899" author="smallem" created="Thu, 30 Jan 2014 18:46:58 +0000"  >&lt;p&gt;Yes. If the semi-colon is part of REGEX statement, it works. whereas in Function like CONCAT, its not working. I&apos;m not sure if other functions which has &quot;;&quot; has the same problem. &lt;br/&gt;
For example, if there is a variable substitution and the variable has semi-colon, it fails.&lt;br/&gt;
here is an example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[smallem@eat1-hcl4014 ~]$ vi testvar.pig

%declare testVar &apos;hello;&apos;;

a = load &apos;/user/smallem/mem.csv&apos; using PigStorage(&apos;|&apos;) as (uid:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, sid:chararray);
b = foreach a generate uid, sid, $testVar as newcol;
dump b
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13887296" author="daijy" created="Fri, 31 Jan 2014 00:21:45 +0000"  >&lt;p&gt;Works for me on 0.12.0. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jan 2014 12:22:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370820</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3732] Use ONE_TO_ONE edge and IdentityInOut in orderby intermediate vertex</title>
                <link>https://issues.apache.org/jira/browse/PIG-3732</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;  From the first vertex to the intermediate vertex that does the partitioning of the keys based on the WeightedRangePartitioner, use ONE_TO_ONE Tez edge and unsorted output and input instead of using a shuffle edge. Also replace the POPackage-&amp;gt;POForEach-&amp;gt;POLocalRearrange in intermediate vertex with POIdentityInOutTez.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692225">PIG-3732</key>
            <summary>Use ONE_TO_ONE edge and IdentityInOut in orderby intermediate vertex</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jan 2014 07:03:00 +0000</created>
                <updated>Fri, 31 Jan 2014 00:23:52 +0000</updated>
                            <resolved>Fri, 31 Jan 2014 00:23:52 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13886405" author="rohini" created="Thu, 30 Jan 2014 08:30:05 +0000"  >&lt;p&gt;RB link:  &lt;a href=&quot;https://reviews.apache.org/r/17529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17529/&lt;/a&gt; &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;There are some whitespaces in the patch in reviewboard. That is fixed in the uploaded patch.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13887298" author="rohini" created="Fri, 31 Jan 2014 00:23:52 +0000"  >&lt;p&gt;Committed to tez branch. Thanks Daniel for the review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12626080" name="PIG-3732-1.patch" size="32075" author="rohini" created="Thu, 30 Jan 2014 08:30:05 +0000"/>
                            <attachment id="12626227" name="PIG-3732-2.patch" size="35208" author="rohini" created="Fri, 31 Jan 2014 00:23:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370826</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370812</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3731] Ability to specify local-mode specific configuration (useful for local/auto-local mode)</title>
                <link>https://issues.apache.org/jira/browse/PIG-3731</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;This could be done in several ways, however, adding a namespace (pig.local.) for this is better so that only a few number of jobs that require this can make use of it.&lt;/p&gt;

&lt;p&gt;set pig.local.io.sort.mb 50 will set io.sort.mb=50 for local mode jobs allowing many jobs to run in parallel. Another setting that might be required is - io.compression.codecs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692179">PIG-3731</key>
            <summary>Ability to specify local-mode specific configuration (useful for local/auto-local mode)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="aniket486">Aniket Mokashi</assignee>
                                    <reporter username="aniket486">Aniket Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jan 2014 23:33:57 +0000</created>
                <updated>Fri, 31 Jan 2014 17:04:03 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13887898" author="aniket486" created="Fri, 31 Jan 2014 17:04:03 +0000"  >&lt;p&gt;Thinking about this again, there are two problems here-&lt;br/&gt;
1. &quot;io.&quot; settings which are similar to fs settings should not be modified in local mode.&lt;br/&gt;
2. Some of the &quot;io.&quot; or other settings may not be suitable across MR and local mode (eg- io.sort.mb). We should provide a mechanism so that they can be overridden (on per script basis- for users running same script in local mode and for auto local mode).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370776</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370765</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3730] Performance issue in SelfSpillBag</title>
                <link>https://issues.apache.org/jira/browse/PIG-3730</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;We have bunch of joins in our pig scripts (joining 5 to 15 datasets together).  Pig creates a bunch of REPLICATED, HASH_JOINs and we observed heavy performance degradation in one of the launched M/R job.  This was specifically on the reducer side.  Taking multiple threaddumps revealed the following&lt;/p&gt;

&lt;p&gt;&quot;main&quot; prio=10 tid=0x00007fbaa801c000 nid=0x1464 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007fbaaee76000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1781)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00000000b5316370&amp;gt; (a org.apache.hadoop.mapred.JobConf)&lt;br/&gt;
	at org.apache.hadoop.conf.Configuration.get(Configuration.java:712)&lt;br/&gt;
	at org.apache.pig.data.SelfSpillBag$MemoryLimits.init(SelfSpillBag.java:73)&lt;br/&gt;
	at org.apache.pig.data.SelfSpillBag$MemoryLimits.&amp;lt;init&amp;gt;(SelfSpillBag.java:65)&lt;br/&gt;
	at org.apache.pig.data.SelfSpillBag.&amp;lt;init&amp;gt;(SelfSpillBag.java:39)&lt;br/&gt;
	at org.apache.pig.data.InternalCachedBag.&amp;lt;init&amp;gt;(InternalCachedBag.java:63)&lt;br/&gt;
	at org.apache.pig.data.InternalCachedBag.&amp;lt;init&amp;gt;(InternalCachedBag.java:59)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POJoinPackage.getNext(POJoinPackage.java:146)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.processOnePackageOutput(PigGenericMapReduce.java:422)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.reduce(PigGenericMapReduce.java:405)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.reduce(PigGenericMapReduce.java:257)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:164)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:610)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:444)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:268)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1408)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:262)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1781)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00000000b5316388&amp;gt; (a org.apache.hadoop.mapred.JobConf)&lt;br/&gt;
	at org.apache.hadoop.conf.Configuration.get(Configuration.java:712)&lt;br/&gt;
	at org.apache.pig.data.SelfSpillBag$MemoryLimits.init(SelfSpillBag.java:73)&lt;br/&gt;
	at org.apache.pig.data.SelfSpillBag$MemoryLimits.&amp;lt;init&amp;gt;(SelfSpillBag.java:65)&lt;br/&gt;
	at org.apache.pig.data.SelfSpillBag.&amp;lt;init&amp;gt;(SelfSpillBag.java:39)&lt;br/&gt;
	at org.apache.pig.data.InternalCachedBag.&amp;lt;init&amp;gt;(InternalCachedBag.java:63)&lt;br/&gt;
	at org.apache.pig.data.InternalCachedBag.&amp;lt;init&amp;gt;(InternalCachedBag.java:59)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POJoinPackage.getNext(POJoinPackage.java:146)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.processOnePackageOutput(PigGenericMapReduce.java:422)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.reduce(PigGenericMapReduce.java:405)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.reduce(PigGenericMapReduce.java:257)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:164)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:610)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:444)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:268)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1408)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:262)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In certain corner cases (where pig.cachedbag.type is not &quot;default&quot;), InternalCachedBag is initialized in POJoinPackage.  &lt;/p&gt;

&lt;p&gt;InternalCachedBag internally calls SelfSpillBag--&amp;gt; MemoryLimits --&amp;gt; PigMapReduce.sJobConfInternal.get().get(&lt;br/&gt;
                        PigConfiguration.PROP_CACHEDBAG_MEMUSAGE);&lt;/p&gt;

&lt;p&gt;Since this is happening very frequently, the cost of Configuration.get()  itself is increasing causing the degradation.  Here is the counters snippet from one of the reducer.&lt;/p&gt;

&lt;p&gt;E.g : counter snippet from a reducer&lt;br/&gt;
        FILE: Number of bytes read 	57,762,717&lt;br/&gt;
	FILE: Number of bytes written 	25,256,417&lt;br/&gt;
        HDFS: Number of bytes read 	0&lt;br/&gt;
	HDFS: Number of bytes written 	2,521,311&lt;br/&gt;
	HDFS: Number of read operations 	0&lt;br/&gt;
	HDFS: Number of large read operations 	0&lt;br/&gt;
	HDFS: Number of write operations 	1&lt;/p&gt;

&lt;p&gt; 	Reduce input groups 	4,282,722&lt;br/&gt;
	Reduce shuffle bytes 	26,858,192&lt;br/&gt;
	Reduce input records 	4,912,881&lt;br/&gt;
	Reduce output records 	630,159&lt;br/&gt;
	Spilled Records 	4,912,881&lt;/p&gt;</description>
                <environment>&lt;p&gt;Pig 0.11 with MR-V1&lt;/p&gt;</environment>
        <key id="12692067">PIG-3730</key>
            <summary>Performance issue in SelfSpillBag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh.balamohan">Rajesh Balamohan</assignee>
                                    <reporter username="rajesh.balamohan">Rajesh Balamohan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jan 2014 16:06:33 +0000</created>
                <updated>Thu, 30 Jan 2014 20:25:38 +0000</updated>
                            <resolved>Thu, 30 Jan 2014 16:39:14 +0000</resolved>
                                    <version>0.11</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13885467" author="rajesh.balamohan" created="Wed, 29 Jan 2014 16:12:08 +0000"  >&lt;p&gt;v1 patch for trunk&lt;/p&gt;</comment>
                            <comment id="13885569" author="rohini" created="Wed, 29 Jan 2014 17:33:22 +0000"  >&lt;p&gt;Even long max = Runtime.getRuntime().maxMemory(); can be moved to the static block.&lt;/p&gt;</comment>
                            <comment id="13885914" author="rajesh.balamohan" created="Wed, 29 Jan 2014 22:26:49 +0000"  >&lt;p&gt;Thanks Rohini.  Uploading v2 patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13885988" author="rohini" created="Wed, 29 Jan 2014 23:25:46 +0000"  >&lt;p&gt;+1. Will commit after running tests. Also reminded me that I haven&apos;t put up the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3456&quot; title=&quot;Reduce threadlocal conf access in backend for each record&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3456&quot;&gt;PIG-3456&lt;/a&gt;, where I fixed same kind of Threadlocal configuration access in lot of other places.&lt;/p&gt;</comment>
                            <comment id="13886058" author="rajesh.balamohan" created="Thu, 30 Jan 2014 00:13:01 +0000"  >&lt;p&gt;Thanks a lot Rohini.&lt;/p&gt;</comment>
                            <comment id="13886757" author="rohini" created="Thu, 30 Jan 2014 16:39:14 +0000"  >&lt;p&gt;Committed to trunk. Thanks Rajesh.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12667819">PIG-3456</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12625890" name="PIG-3730-trunk-v1.patch" size="1597" author="rajesh.balamohan" created="Wed, 29 Jan 2014 16:12:08 +0000"/>
                            <attachment id="12625994" name="PIG-3730-trunk-v2.patch" size="1951" author="rajesh.balamohan" created="Wed, 29 Jan 2014 22:26:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jan 2014 17:33:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3729] Need to rebuild pig 0.12.0 jar from mvnrepository.com to resove error in hadoop 2.2 0 </title>
                <link>https://issues.apache.org/jira/browse/PIG-3729</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Unable to get pig 0.12.0 to run single node pseudo distributed hadoop 2.2 cluster using the jar from mvnrepository.com &lt;br/&gt;
this is the error&lt;/p&gt;

&lt;p&gt;&quot;org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias&quot;&lt;/p&gt;

&lt;p&gt;if I download the jar from&lt;br/&gt;
&lt;a href=&quot;http://apache.claz.org/pig/pig-0.12.0/pig-0.12.0.tar.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://apache.claz.org/pig/pig-0.12.0/pig-0.12.0.tar.gz&lt;/a&gt;  &lt;/p&gt;

&lt;p&gt;and then recompile the src with  &quot;ant clean jar -Dhadoopversion=23&quot;  &lt;br/&gt;
when I install the recompiled  jar in .m2 everything works&lt;/p&gt;

&lt;p&gt;If it is the case that the Apache hadoop 2.2.0 jars are backwardly compatible then could some one comment on what could be the issue?&lt;/p&gt;
</description>
                <environment>&lt;p&gt;debian single node pseudo distributed hadoop 2.2 cluster&lt;/p&gt;</environment>
        <key id="12691560">PIG-3729</key>
            <summary>Need to rebuild pig 0.12.0 jar from mvnrepository.com to resove error in hadoop 2.2 0 </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nigeljvm">Nigel Savage</reporter>
                        <labels>
                            <label>Hadoop</label>
                            <label>Iteator</label>
                            <label>Pig</label>
                            <label>PigServer</label>
                    </labels>
                <created>Tue, 28 Jan 2014 05:12:21 +0000</created>
                <updated>Fri, 31 Jan 2014 20:26:17 +0000</updated>
                            <resolved>Fri, 31 Jan 2014 20:26:17 +0000</resolved>
                                    <version>0.12.0</version>
                                                    <component>build</component>
                    <component>internal-udfs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13884221" author="cheolsoo" created="Tue, 28 Jan 2014 14:58:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nigeljvm&quot; class=&quot;user-hover&quot; rel=&quot;nigeljvm&quot;&gt;Nigel Savage&lt;/a&gt;, did you try &lt;a href=&quot;http://search.maven.org/#artifactdetails%7Corg.apache.pig%7Cpig%7C0.12.0%7Cjar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;pig-0.12.0-h2.jar&lt;/a&gt;? The -h2 jar is compiled with hadoopversion=23.&lt;/p&gt;</comment>
                            <comment id="13884417" author="nigeljvm" created="Tue, 28 Jan 2014 18:51:23 +0000"  >&lt;p&gt;thank you very much for your prompt and very helpful response, I was hoping that I could find a dependency for the pom that would work, I have searched around for a dependency like this for the pig-h2 jar, searching thru this jira I think I need something like&lt;br/&gt;
  &amp;lt;dependency&amp;gt;&lt;br/&gt;
            &amp;lt;groupId&amp;gt;org.apache.pig&amp;lt;/groupId&amp;gt;&lt;br/&gt;
            &amp;lt;artifactId&amp;gt;pig&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
            &amp;lt;version&amp;gt;0.12.0&amp;lt;/version&amp;gt;&lt;br/&gt;
            &amp;lt;classifier&amp;gt;h23&amp;lt;/classifier&amp;gt;&lt;br/&gt;
  &amp;lt;/dependency&amp;gt;&lt;br/&gt;
however this does not work&lt;br/&gt;
does anyone know the correct for for the maven dependency tag&lt;/p&gt;</comment>
                            <comment id="13884428" author="cheolsoo" created="Tue, 28 Jan 2014 18:57:53 +0000"  >&lt;p&gt;Here I do it-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;org.apache.pig&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;pig&amp;lt;/artifactId&amp;gt;
  &amp;lt;classifier&amp;gt;h2&amp;lt;/classifier&amp;gt;
  &amp;lt;version&amp;gt;0.12.0&amp;lt;/version&amp;gt;
  &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13884440" author="nigeljvm" created="Tue, 28 Jan 2014 19:03:41 +0000"  >&lt;p&gt;thank you once again for your very prompt and helpful response&lt;/p&gt;</comment>
                            <comment id="13884527" author="jayunit100" created="Tue, 28 Jan 2014 19:59:33 +0000"  >&lt;p&gt;Yes....... thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt; !!!&lt;/p&gt;

&lt;p&gt; Next step :  I think there is some confusoin on this : Maybe this JIRA still has an active component, which is to clarify in the pig docs, somewhere, how pig depends on hadoop, and what the pig 0.12.0 artifact is actually designed to be used?  &lt;/p&gt;</comment>
                            <comment id="13886423" author="ashlee3209" created="Thu, 30 Jan 2014 08:58:25 +0000"  >&lt;p&gt;Different situation for me. I tried both pig-0.12.0.jar in mvnrepository and my recomplied pig jar, but when I run my jar which use PigServer to run pigscripts, it failed with ERROR 4010: Cannot find hadoop configurations in classpath (neither hadoop-site.xml nor core-site.xml was found in the classpath). I have PIG_CLASS_PATH and HADOOP_CONF_DIR setted. &lt;/p&gt;

&lt;p&gt;Then I tried above h2 version dependency, it comes error&amp;gt;java.lang.NoClassDefFoundError: org/apache/pig/PigServer.&lt;/p&gt;

&lt;p&gt;My jar is working fine with Pig 0.11.0 and Hadoop 1.2.0, but now I want to run in Pig 0.12.0 and Hadoop 2.2.0.......I need help!&lt;/p&gt;</comment>
                            <comment id="13886724" author="nezihyigitbasi" created="Thu, 30 Jan 2014 16:19:43 +0000"  >&lt;p&gt;Ashlee, seems like your classpath doesn&apos;t contain $HADOOP_HOME/conf so Pig can&apos;t find them. Can you try exporting PIG_CLASSPATH (no underscores between CLASS and PATH) with $HADOOP_HOME/conf and try again (assuming HADOOP_HOME is set properly)? &lt;/p&gt;</comment>
                            <comment id="13886745" author="ashlee3209" created="Thu, 30 Jan 2014 16:28:38 +0000"  >&lt;p&gt;Thanks for your reply! And sorry for the mistyping PIG_CLASS_PATH, I export PIG_CLASSPATH and HADOOP_CONF_DIR (which is equal to $HADOOP_HOME/etc/hadoop in hadoop 2.2.0), I and tried to add $HADOOP_HOME/etc/hadoop (which is not /conf anymore in hadoop 2.2.0) to the classpath, but it is still not working...&lt;/p&gt;</comment>
                            <comment id="13886748" author="ashlee3209" created="Thu, 30 Jan 2014 16:29:35 +0000"  >&lt;p&gt;BTW, I tried using hadoop 1.2.1 + Pig 0.12.0 for my case, it is working......&lt;/p&gt;</comment>
                            <comment id="13886753" author="nezihyigitbasi" created="Thu, 30 Jan 2014 16:34:45 +0000"  >&lt;p&gt;Can you use -secretDebugCmd to see what gets into the classpath (pig -secretDebugCmd)?&lt;/p&gt;
</comment>
                            <comment id="13887805" author="ashlee3209" created="Fri, 31 Jan 2014 14:48:13 +0000"  >&lt;p&gt;Nezih, my application works finally. The only difference that I did is to add a slash to the end of my classpath in my pom.xml. &lt;br/&gt;
It should be  &quot;$HADOOP_HOME/etc/hadoop/&quot;, not  &quot;$HADOOP_HOME/etc/hadoop&quot;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13888022" author="jayunit100" created="Fri, 31 Jan 2014 19:04:45 +0000"  >&lt;p&gt;I think this is a still an open documentation issue. &lt;/p&gt;

&lt;p&gt;The use of this particular maven dependency hook:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;groupId&amp;gt;org.apache.pig&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;pig&amp;lt;/artifactId&amp;gt;
  &amp;lt;classifier&amp;gt;h2&amp;lt;/classifier&amp;gt;
  &amp;lt;version&amp;gt;0.12.0&amp;lt;/version&amp;gt;
  &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Doesnt seem to be explained anywhere. &lt;/p&gt;

&lt;p&gt;What is the right place in the Pig documentation for it?  Then someone can put it in as a wiki update or patch.  &lt;/p&gt;</comment>
                            <comment id="13888033" author="daijy" created="Fri, 31 Jan 2014 19:17:30 +0000"  >&lt;p&gt;Yes, document are definitely desired. Reopen the ticket for that.&lt;/p&gt;

&lt;p&gt;It is a developer document, feel like a new entry in &lt;a href=&quot;https://cwiki.apache.org/confluence/display/PIG/Developer+Documentation&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/PIG/Developer+Documentation&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13888125" author="daijy" created="Fri, 31 Jan 2014 20:26:17 +0000"  >&lt;p&gt;I see &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3738&quot; title=&quot;Missing explanation of hidden maven artifacts needed for 2x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3738&quot;&gt;PIG-3738&lt;/a&gt; opened for documentation. Close this ticket.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Jan 2014 14:58:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370311</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370314</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3728] Fix TestSkewedJoin in tez mode</title>
                <link>https://issues.apache.org/jira/browse/PIG-3728</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;We should get TestSkewedJoin passing in tez mode.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691515">PIG-3728</key>
            <summary>Fix TestSkewedJoin in tez mode</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jan 2014 00:15:36 +0000</created>
                <updated>Tue, 28 Jan 2014 17:09:04 +0000</updated>
                            <resolved>Tue, 28 Jan 2014 16:35:09 +0000</resolved>
                                    <version>tez-branch</version>
                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13883686" author="cheolsoo" created="Tue, 28 Jan 2014 02:48:25 +0000"  >&lt;p&gt;RB link- &lt;a href=&quot;https://reviews.apache.org/r/17439/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17439/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13884304" author="cheolsoo" created="Tue, 28 Jan 2014 16:34:14 +0000"  >&lt;p&gt;Uploading a new patch that incorporate Rohini&apos;s comment in RB. I changed TestSkewedJoin and TestAccumulator to create test files under build/test/data.&lt;/p&gt;</comment>
                            <comment id="13884305" author="cheolsoo" created="Tue, 28 Jan 2014 16:35:09 +0000"  >&lt;p&gt;Committed to tez branch. Thank you Rohini for the review!&lt;/p&gt;</comment>
                            <comment id="13884319" author="cheolsoo" created="Tue, 28 Jan 2014 16:50:54 +0000"  >&lt;p&gt;I missed one thing. I moved the input dir but didn&apos;t move the output dir to build/test in TestSkewedJoin. I will commit this hotfix patch after running tests.&lt;/p&gt;</comment>
                            <comment id="13884335" author="cheolsoo" created="Tue, 28 Jan 2014 17:09:04 +0000"  >&lt;p&gt;Committed the hotfix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625509" name="PIG-3728-1.patch" size="11611" author="cheolsoo" created="Tue, 28 Jan 2014 02:48:25 +0000"/>
                            <attachment id="12625516" name="PIG-3728-2.patch" size="12446" author="cheolsoo" created="Tue, 28 Jan 2014 03:49:18 +0000"/>
                            <attachment id="12625598" name="PIG-3728-3.patch" size="19990" author="cheolsoo" created="Tue, 28 Jan 2014 16:34:14 +0000"/>
                            <attachment id="12625600" name="PIG-3728-hotfix.patch" size="2161" author="cheolsoo" created="Tue, 28 Jan 2014 16:50:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370266</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370269</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3727] Fix split + skewed join</title>
                <link>https://issues.apache.org/jira/browse/PIG-3727</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The e2e SkewedJoin_6 test runs the following query-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a = load &apos;:INPATH:/singlefile/studenttab10k&apos;;
b = filter a by $1 &amp;gt; 25;
c = join a by $0, b by $0 using &apos;skewed&apos; parallel 7;
store c into &apos;:OUTPATH:&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Currently, this fails with a compilation error in TezCompiler. Basically, visitSkewedJoin() doesn&apos;t handle the POSplit that is inserted between load and join.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691497">PIG-3727</key>
            <summary>Fix split + skewed join</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jan 2014 22:58:21 +0000</created>
                <updated>Mon, 27 Jan 2014 22:58:21 +0000</updated>
                                            <version>tez-branch</version>
                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370248</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370251</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3726] Ranking empty records leads to NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/PIG-3726</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;steps to reproduce:&lt;/p&gt;

&lt;p&gt;1) create an empty file on hdfs (e.g. /user/root/test/empty.txt)&lt;br/&gt;
2) execute the following pig script:&lt;/p&gt;

&lt;p&gt;records = LOAD &apos;/user/root/test/empty.txt&apos; AS (Amount: DOUBLE);&lt;br/&gt;
ranked = RANK records BY Amount DESC;&lt;br/&gt;
DUMP ranked;&lt;/p&gt;

&lt;p&gt;3) on console you will get &quot; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 2043: Unexpected error during execution.&quot; and in pig&apos;s logs you will see:&lt;/p&gt;

&lt;p&gt;Pig Stack Trace&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
---------------
ERROR 2043: Unexpected error during execution.

org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; alias ranked
at org.apache.pig.PigServer.openIterator(PigServer.java:880)
at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:774)
at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:372)
at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:198)
at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:173)
at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
at org.apache.pig.Main.run(Main.java:607)
at org.apache.pig.Main.main(Main.java:156)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.RunJar.main(RunJar.java:212)
Caused by: org.apache.pig.PigException: ERROR 1002: Unable to store alias ranked
at org.apache.pig.PigServer.storeEx(PigServer.java:982)
at org.apache.pig.PigServer.store(PigServer.java:942)
at org.apache.pig.PigServer.openIterator(PigServer.java:855)
... 12 more
Caused by: org.apache.pig.backend.executionengine.ExecException: ERROR 2043: Unexpected error during execution.
at org.apache.pig.PigServer.launchPlan(PigServer.java:1333)
at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1307)
at org.apache.pig.PigServer.storeEx(PigServer.java:978)
... 14 more
Caused by: java.lang.RuntimeException: Error to read counters into Rank operation counterSize 0
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.saveCounters(JobControlCompiler.java:386)
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.updateMROpPlan(JobControlCompiler.java:332)
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:387)
at org.apache.pig.PigServer.launchPlan(PigServer.java:1322)
... 16 more
Caused by: java.lang.NullPointerException
at org.apache.hadoop.mapreduce.counters.Limits.filterName(Limits.java:44)
at org.apache.hadoop.mapreduce.counters.Limits.filterGroupName(Limits.java:52)
at org.apache.hadoop.mapreduce.counters.AbstractCounters.getGroup(AbstractCounters.java:220)
at org.apache.hadoop.mapred.Counters.getGroup(Counters.java:113)
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.saveCounters(JobControlCompiler.java:360)
... 19 more
================================================================================
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12691390">PIG-3726</key>
            <summary>Ranking empty records leads to NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jarcec">Jarek Jarcec Cecho</assignee>
                                    <reporter username="mtelizhyn">Mykhaylo Telizhyn</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jan 2014 15:05:44 +0000</created>
                <updated>Fri, 31 Jan 2014 18:54:29 +0000</updated>
                            <resolved>Fri, 31 Jan 2014 18:27:34 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13882896" author="jarcec" created="Mon, 27 Jan 2014 15:36:55 +0000"  >&lt;p&gt;I&apos;ve noticed the same problem as well and have very similar patch to this one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13882905" author="mtelizhyn" created="Mon, 27 Jan 2014 15:49:15 +0000"  >&lt;p&gt;Hi Jarek! You are welcome to submit you patch here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.  &lt;/p&gt;</comment>
                            <comment id="13883773" author="jarcec" created="Tue, 28 Jan 2014 05:17:59 +0000"  >&lt;p&gt;Sure &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mtelizhyn&quot; class=&quot;user-hover&quot; rel=&quot;mtelizhyn&quot;&gt;Mykhaylo Telizhyn&lt;/a&gt;, here is patch that I was working on just yesterday!  As you can see, it&apos;s very similar to yours &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The reason why I did not submitted it yet is that I wasn&apos;t sure whether my (our) approach is entirely correct. Method &lt;tt&gt;saveCounters&lt;/tt&gt; is written in a way to throw an exception if the RANK counters are not present. I&apos;m assuming that the counters might be missing from many reasons and the only valid case that we want to cover is when the input relation is empty. I wanted poke around a bit to see if that is indeed the case. Will be happy to hear others thoughts.&lt;/p&gt;</comment>
                            <comment id="13883896" author="mtelizhyn" created="Tue, 28 Jan 2014 08:30:29 +0000"  >&lt;p&gt;Sure &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jarcec&quot; class=&quot;user-hover&quot; rel=&quot;jarcec&quot;&gt;Jarek Jarcec Cecho&lt;/a&gt;, I think your approach is covering better the case when the input relation is empty. So please free to commit your patch.&lt;/p&gt;</comment>
                            <comment id="13884956" author="jarcec" created="Wed, 29 Jan 2014 03:19:19 +0000"  >&lt;p&gt;Thank you for your feedback &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mtelizhyn&quot; class=&quot;user-hover&quot; rel=&quot;mtelizhyn&quot;&gt;Mykhaylo Telizhyn&lt;/a&gt;. I went ahead and added the check to ensure that the only acceptable option for missing RANK counters is when the relation is empty.&lt;/p&gt;</comment>
                            <comment id="13887963" author="daijy" created="Fri, 31 Jan 2014 18:27:34 +0000"  >&lt;p&gt;+1. Patch committed to trunk. Thanks Jarek!&lt;/p&gt;</comment>
                            <comment id="13888008" author="jarcec" created="Fri, 31 Jan 2014 18:54:29 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mtelizhyn&quot; class=&quot;user-hover&quot; rel=&quot;mtelizhyn&quot;&gt;Mykhaylo Telizhyn&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625779" name="PIG-3726.patch" size="3186" author="jarcec" created="Wed, 29 Jan 2014 03:19:19 +0000"/>
                            <attachment id="12625523" name="PIG-3726.patch" size="2406" author="jarcec" created="Tue, 28 Jan 2014 05:17:59 +0000"/>
                            <attachment id="12625366" name="emptyRecordsNPE.patch" size="3283" author="mtelizhyn" created="Mon, 27 Jan 2014 15:08:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jan 2014 15:36:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370144</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3725] Bunch of e2e tests fail on Hadoop 2 in some setting</title>
                <link>https://issues.apache.org/jira/browse/PIG-3725</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Here is a list of failed tests: Join_6, MergeJoin_5, Join_8, Join_7, MergeJoin_2, MergeJoin_3, MergeJoin_8, MergeJoin_1, MultiQuery_14, MergeJoin_4, MergeJoin_9, MergeJoin_6, MergeJoin_7.&lt;/p&gt;

&lt;p&gt;In these tests, Pig need to read a local file distributed by distribute cache. However, Pig try to read hdfs instead. Here is the stack:&lt;/p&gt;

&lt;p&gt;org.apache.pig.backend.executionengine.ExecException: ERROR 2081: Unable to setup the load function.&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.processInput(PhysicalOperator.java:289)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLocalRearrange.getNextTuple(POLocalRearrange.java:263)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POFRJoin.setUpHashMap(POFRJoin.java:398)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POFRJoin.getNextTuple(POFRJoin.java:231)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.runPipeline(PigGenericMapBase.java:282)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.map(PigGenericMapBase.java:277)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.map(PigGenericMapBase.java:64)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:145)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:340)&lt;br/&gt;
	at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:168)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1548)&lt;br/&gt;
	at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:163)&lt;br/&gt;
Caused by: org.apache.pig.backend.executionengine.ExecException: ERROR 2081: Unable to setup the load function.&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLoad.getNextTuple(POLoad.java:127)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.processInput(PhysicalOperator.java:281)&lt;br/&gt;
	... 14 more&lt;br/&gt;
Caused by: org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: hdfs://hor14n23.gq1.ygridcore.net:8020/user/hrt_qa/pigrepl_scope-75_831941592_1390506968802_1&lt;br/&gt;
	at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:285)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigFileInputFormat.listStatus(PigFileInputFormat.java:37)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:340)&lt;br/&gt;
	at org.apache.pig.impl.io.ReadToEndLoader.init(ReadToEndLoader.java:190)&lt;br/&gt;
	at org.apache.pig.impl.io.ReadToEndLoader.&amp;lt;init&amp;gt;(ReadToEndLoader.java:146)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLoad.setUp(POLoad.java:95)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLoad.getNextTuple(POLoad.java:123)&lt;br/&gt;
	... 15 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691317">PIG-3725</key>
            <summary>Bunch of e2e tests fail on Hadoop 2 in some setting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jan 2014 05:49:55 +0000</created>
                <updated>Mon, 27 Jan 2014 07:32:40 +0000</updated>
                            <resolved>Mon, 27 Jan 2014 06:44:10 +0000</resolved>
                                                    <fixVersion>0.12.1</fixVersion>
                    <fixVersion>0.13.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13882589" author="daijy" created="Mon, 27 Jan 2014 05:55:12 +0000"  >&lt;p&gt;The issue is, in ConfigurationUtil.getLocalFSProperties, we only force setting &quot;fs.default.name&quot; to &quot;file:///&quot;, but not &quot;fs.defaultFS&quot;. In some setting, Pig get a core-site.xml in the backend, which contains &quot;fs.defaultFS&quot;. When Pig set &quot;fs.default.name&quot; to &quot;file:///&quot; in the map, it does not overwrite &quot;fs.defaultFS&quot; since it is already set. That&apos;s why Pig ends up looking for files in hdfs. Attach the patch force setting &quot;fs.defaultFS&quot; to &quot;file:///&quot;.&lt;/p&gt;</comment>
                            <comment id="13882602" author="rohini" created="Mon, 27 Jan 2014 06:44:10 +0000"  >&lt;p&gt;Daniel,&lt;br/&gt;
   Just fixed this a couple of days back with &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3677&quot; title=&quot;ConfigurationUtil.getLocalFSProperties can return an inconsistent property set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3677&quot;&gt;&lt;del&gt;PIG-3677&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13882604" author="rohini" created="Mon, 27 Jan 2014 06:45:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt;,&lt;br/&gt;
      Do you still see the issue? Had the fixed of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3677&quot; title=&quot;ConfigurationUtil.getLocalFSProperties can return an inconsistent property set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3677&quot;&gt;&lt;del&gt;PIG-3677&lt;/del&gt;&lt;/a&gt; verified in the Hadoop 2 build it was failing as well. &lt;/p&gt;</comment>
                            <comment id="13882616" author="daijy" created="Mon, 27 Jan 2014 07:32:40 +0000"  >&lt;p&gt;Yes, that works. Can we commit &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3677&quot; title=&quot;ConfigurationUtil.getLocalFSProperties can return an inconsistent property set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3677&quot;&gt;&lt;del&gt;PIG-3677&lt;/del&gt;&lt;/a&gt; to 12.1?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12689600">PIG-3677</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12625324" name="PIG-3725-1.patch" size="1955" author="daijy" created="Mon, 27 Jan 2014 05:55:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jan 2014 06:44:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370068</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3724] pig e2e tests dont have hadoop libs on classpath</title>
                <link>https://issues.apache.org/jira/browse/PIG-3724</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The following command throws errors in test/e2e/pig/udfs/java/build.xml&lt;br/&gt;
because the hadoop classpaths are not found. &lt;/p&gt;

&lt;p&gt;ant -Dharness.old.pig=~/pig-0.11 &lt;br/&gt;
-Dharness.cluster.conf=/opt/mapr/hadoop/hadoop-0.20.2/conf &lt;br/&gt;
-Dharness.cluster.bin=/usr/bin/hadoop &lt;br/&gt;
-Dharness.hadoop.home=/opt/mapr/hadoop/hadoop-0.20.2  test-e2e&lt;/p&gt;

&lt;p&gt;I have uploaded a patch which includes lib directories from build/ivy/lib/Pig to solve this problem. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12691167">PIG-3724</key>
            <summary>pig e2e tests dont have hadoop libs on classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="suhassatish">Suhas Satish</assignee>
                                    <reporter username="suhassatish">Suhas Satish</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Jan 2014 00:57:22 +0000</created>
                <updated>Mon, 27 Jan 2014 04:00:45 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13882552" author="rohini" created="Mon, 27 Jan 2014 04:00:45 +0000"  >&lt;p&gt;Suhas,&lt;br/&gt;
   The hadoop libs should be picked up from harness.hadoop.home and should not be including anything from ivy/lib as that is only for compile time and should not be used for runtime. If that is not the case you need to see why they are not picked up and if your hadoop home does not have the hadoop jars in the expected location.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625159" name="PIG-3724.patch" size="837" author="suhassatish" created="Sat, 25 Jan 2014 01:02:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jan 2014 04:00:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369916</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369919</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3723] Change tez version dependency as a result of TEZ-739</title>
                <link>https://issues.apache.org/jira/browse/PIG-3723</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;tez version changing from 0.3.0-SNAPSHOT to 0.3.0-incubating-SNAPSHOT&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691162">PIG-3723</key>
            <summary>Change tez version dependency as a result of TEZ-739</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hitesh">Hitesh Shah</assignee>
                                    <reporter username="hitesh">Hitesh Shah</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2014 23:50:30 +0000</created>
                <updated>Mon, 27 Jan 2014 22:48:00 +0000</updated>
                            <resolved>Mon, 27 Jan 2014 19:12:10 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13881544" author="hitesh" created="Fri, 24 Jan 2014 23:52:35 +0000"  >&lt;p&gt;Please note that builds.apache.org has been down for quite some time so 0.3.0-incubating-SNAPSHOT jars are not yet available on nexus.  Please commit only after the latest snapshots are available.&lt;/p&gt;</comment>
                            <comment id="13881950" author="hitesh" created="Sat, 25 Jan 2014 17:11:16 +0000"  >&lt;p&gt;builds.a.o is back up - 0.3.0-incubating-SNAPSHOT jars are now available.&lt;/p&gt;</comment>
                            <comment id="13883135" author="rohini" created="Mon, 27 Jan 2014 19:12:10 +0000"  >&lt;p&gt;+1. Committed to tez-branch.&lt;/p&gt;

&lt;p&gt;Pig folks,&lt;br/&gt;
    If you do not have latest tez installed in your maven repo, do mvn install of latest tez master or revert this patch (one line change) locally to continue working with what you have&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625194" name="PIG-3723.1.patch" size="353" author="hitesh" created="Sat, 25 Jan 2014 17:12:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jan 2014 19:12:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369911</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3722] Udf deserialization for registered classes fails in local_mode</title>
                <link>https://issues.apache.org/jira/browse/PIG-3722</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2532&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-2532&lt;/a&gt;, registered classes are not available if jobs are converted to local_mode.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691160">PIG-3722</key>
            <summary>Udf deserialization for registered classes fails in local_mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aniket486">Aniket Mokashi</assignee>
                                    <reporter username="aniket486">Aniket Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2014 23:40:03 +0000</created>
                <updated>Thu, 30 Jan 2014 20:13:19 +0000</updated>
                            <resolved>Thu, 30 Jan 2014 20:13:19 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13881596" author="aniket486" created="Sat, 25 Jan 2014 01:29:40 +0000"  >&lt;p&gt;This happens because ObjectInputStream doesn&apos;t take into consideration Thread ContextClassLoader when deserializing hence we get following stack trace in local-mode backend-&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-01-24 08:30:33,260 WARN org.apache.hadoop.mapred.LocalJobRunner: job_local_0002
java.io.IOException: Deserialization error: org.apache.hcatalog.data.schema.HCatSchema
 at org.apache.pig.impl.util.ObjectSerializer.deserialize(ObjectSerializer.java:59)
 at org.apache.pig.impl.util.UDFContext.deserialize(UDFContext.java:192)
 at org.apache.pig.backend.hadoop.executionengine.util.MapRedUtil.setupUDFContext(MapRedUtil.java:173)
 at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:229)
 at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.getOutputCommitter(PigOutputFormat.java:275)
 at org.apache.hadoop.mapred.Task.initialize(Task.java:511)
 at org.apache.hadoop.mapred.MapTask.run(MapTask.java:306)
 at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:210)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To fix this, we can use &lt;a href=&quot;http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/ClassLoaderObjectInputStream.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ClassLoaderObjectInputStream&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13882614" author="aniket486" created="Mon, 27 Jan 2014 07:22:38 +0000"  >&lt;p&gt;I tested this on a production job, it works well.&lt;/p&gt;</comment>
                            <comment id="13886991" author="dvryaboy" created="Thu, 30 Jan 2014 19:53:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13887009" author="aniket486" created="Thu, 30 Jan 2014 20:13:07 +0000"  >&lt;p&gt;Committed to trunk. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dvryaboy&quot; class=&quot;user-hover&quot; rel=&quot;dvryaboy&quot;&gt;Dmitriy V. Ryaboy&lt;/a&gt; for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625162" name="PIG-3722.patch" size="4159" author="aniket486" created="Sat, 25 Jan 2014 01:31:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jan 2014 19:53:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369909</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3721] HBaseStorage: setting loadKey to false doesn&apos;t have any affect</title>
                <link>https://issues.apache.org/jira/browse/PIG-3721</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Setting loadKey argument of HBaseStorage to false doesn&apos;t seem to have any affect. This has been reported as a documentation mismatch issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3623&quot; title=&quot;HBaseStorage: setting loadKey and noWAL to false doesn&amp;#39;t have any affect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3623&quot;&gt;PIG-3623&lt;/a&gt; and seems that it hasn&apos;t been fixed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690940">PIG-3721</key>
            <summary>HBaseStorage: setting loadKey to false doesn&apos;t have any affect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="nezihyigitbasi">Nezih Yigitbasi</assignee>
                                    <reporter username="nezihyigitbasi">Nezih Yigitbasi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2014 00:44:22 +0000</created>
                <updated>Wed, 29 Jan 2014 22:54:15 +0000</updated>
                            <resolved>Wed, 29 Jan 2014 22:54:15 +0000</resolved>
                                    <version>0.12.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13880562" author="nezihyigitbasi" created="Fri, 24 Jan 2014 00:45:40 +0000"  >&lt;p&gt;made loadKey option to accept arguments &amp;amp; set it based on user&apos;s input&lt;/p&gt;</comment>
                            <comment id="13885948" author="nezihyigitbasi" created="Wed, 29 Jan 2014 22:54:15 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3623&quot; title=&quot;HBaseStorage: setting loadKey and noWAL to false doesn&amp;#39;t have any affect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3623&quot;&gt;PIG-3623&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624962" name="PIG-3721.patch" size="1385" author="nezihyigitbasi" created="Fri, 24 Jan 2014 00:45:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369686</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369687</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3720] Nested concats of binary conditionals take 1/2 hour to parse</title>
                <link>https://issues.apache.org/jira/browse/PIG-3720</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;This statement takes over 1/2 hour to parse. Seems to be related to the conditionals. Removing them and just running the nested concats, it parses fast:&lt;/p&gt;

&lt;p&gt;fact_tsgsrtd_dim_hash = foreach tsgsrtd generate checksum,&lt;br/&gt;
        UPPER(&lt;br/&gt;
                CONCAT((no_of_rics == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;0&apos; : no_of_rics),&lt;br/&gt;
                CONCAT(request_start_dttm,&lt;br/&gt;
                CONCAT(request_end_dttm,&lt;br/&gt;
                CONCAT((adjs_list == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : adjs_list),&lt;br/&gt;
                CONCAT((event_datatype == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : event_datatype),&lt;br/&gt;
                CONCAT((facts_list == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : facts_list),&lt;br/&gt;
                CONCAT((frequency == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : frequency),&lt;br/&gt;
                CONCAT((points == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;0&apos; : points),&lt;br/&gt;
                CONCAT((multiplier == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;0&apos; : multiplier),&lt;br/&gt;
                CONCAT((qos == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : qos),&lt;br/&gt;
                CONCAT((pe == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;0&apos; : pe),&lt;br/&gt;
                (event_type == &apos;GSREQ&apos; ? &apos;GS&apos; : (event_type == &apos;RICREQ&apos; ? &apos;RTD&apos; : (event_type == &apos;TSREQ&apos; ? &apos;TS&apos; : &apos;UNKNOWN&apos;)))&lt;br/&gt;
                ))))))))))));&lt;/p&gt;


&lt;p&gt;I noticed it I split it, do half the conditionals in one relation, then take the results of that and create another relation and do the other half of the conditionals, it parses in less than a minute:&lt;/p&gt;

&lt;p&gt;fact_tsgsrtd_cat1 = foreach tsgsrtd generate checksum, points, multiplier, qos, pe, event_type,&lt;br/&gt;
                CONCAT(CONCAT((no_of_rics == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;0&apos; : no_of_rics),&apos;.000000000&apos;),&lt;br/&gt;
                CONCAT(request_start_dttm,&lt;br/&gt;
                CONCAT(request_end_dttm,&lt;br/&gt;
                CONCAT((adjs_list == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : adjs_list),&lt;br/&gt;
                CONCAT((event_datatype == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : event_datatype),&lt;br/&gt;
                CONCAT((facts_list == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : facts_list),&lt;br/&gt;
                (frequency == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : frequency)&lt;br/&gt;
                )))))) as cat1;&lt;/p&gt;

&lt;p&gt;fact_tsgsrtd_dim_hash = foreach fact_tsgsrtd_cat1 generate checksum,&lt;br/&gt;
        UPPER(&lt;br/&gt;
                CONCAT(cat1,&lt;br/&gt;
                CONCAT((points == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;0&apos; : points),&lt;br/&gt;
                CONCAT((multiplier == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;0&apos; : multiplier),&lt;br/&gt;
                CONCAT((qos == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;UNKNOWN&apos; : qos),&lt;br/&gt;
                CONCAT(CONCAT((pe == &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&apos; ? &apos;0&apos; : pe), &apos;.0000&apos;),&lt;br/&gt;
                (event_type == &apos;GSREQ&apos; ? &apos;GS&apos; : (event_type == &apos;RICREQ&apos; ? &apos;RTD&apos; : (event_type == &apos;TSREQ&apos; ? &apos;TS&apos; : &apos;UNKNOWN&apos;)))&lt;br/&gt;
                )))))) as ts_dim_hash;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690873">PIG-3720</key>
            <summary>Nested concats of binary conditionals take 1/2 hour to parse</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="steve.ogden@thomsonreuters.com">Steve Ogden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 20:39:39 +0000</created>
                <updated>Thu, 23 Jan 2014 20:39:39 +0000</updated>
                                            <version>0.10.0</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369622</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3719] Fix skewed join e2e tests</title>
                <link>https://issues.apache.org/jira/browse/PIG-3719</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;There are two sets of skewed join e2e tests-&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;tez.conf: Join7 and 8&lt;/li&gt;
	&lt;li&gt;nightly.conf: SkewedJoin&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;We need to get both passing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690795">PIG-3719</key>
            <summary>Fix skewed join e2e tests</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 16:01:54 +0000</created>
                <updated>Mon, 27 Jan 2014 22:35:24 +0000</updated>
                            <resolved>Mon, 27 Jan 2014 22:35:24 +0000</resolved>
                                    <version>tez-branch</version>
                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13882111" author="cheolsoo" created="Sat, 25 Jan 2014 23:35:53 +0000"  >&lt;p&gt;Attaching 1st patch that fixes NPE in tez.conf e2e tests.&lt;/p&gt;

&lt;p&gt;The root cause of NPE was that POShuffleTezLoad was constructing a new instance of NullableWritable for minimum key, but PigNullableWritable.newInstance() didn&apos;t set key for NullablePartitionWritable.&lt;/p&gt;

&lt;p&gt;Looks like there is no need to construct a new instance in the first place, so I am reverting the change made by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3626&quot; title=&quot;Make combiners, custom partitioners and secondary key sort work for multiple outputs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3626&quot;&gt;&lt;del&gt;PIG-3626&lt;/del&gt;&lt;/a&gt; as follows-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@@ -108,8 +108,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class POShuffleTezLoad &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; POPackage &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; TezLoad {
                         hasData = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                         cur = readers.get(i).getCurrentKey();
                         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (min == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || comparator.compare(min, cur) &amp;gt; 0) {
-                            min = PigNullableWritable.newInstance((PigNullableWritable)cur);
-                            cur = min;
+                            min = (PigNullableWritable) cur;
                         }
                     }
                 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am going to commit this change first so that tez.conf will be fixed. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;, please let me know if you have any concerns.&lt;/p&gt;

&lt;p&gt;But nightly.conf SkewedJoin tests still fail because results differ between MR and Tez run. This problem happens when pig.skewedjoin.reduce.maxtuple is set. I will upload another patch for this problem.&lt;/p&gt;</comment>
                            <comment id="13882129" author="cheolsoo" created="Sun, 26 Jan 2014 00:56:56 +0000"  >&lt;p&gt;I realized that reverting PigNullableWritable.newInstance() makes TestAccumulator fail. So I will need to add some special handling for NullablePartitionWritable (skewed join) instead.&lt;/p&gt;</comment>
                            <comment id="13882236" author="cheolsoo" created="Sun, 26 Jan 2014 09:00:49 +0000"  >&lt;p&gt;Attaching 2nd patch with the following change-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@@ -109,7 +110,10 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class POShuffleTezLoad &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; POPackage &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; TezLoad {
                         cur = readers.get(i).getCurrentKey();
                         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (min == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || comparator.compare(min, cur) &amp;gt; 0) {
                             min = PigNullableWritable.newInstance((PigNullableWritable)cur);
-                            cur = min;
+                            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isSkewedJoin) {
+                                ((NullablePartitionWritable)min).setKey(
+                                        ((NullablePartitionWritable)cur).getKey());
+                            }
                         }   
                     }   
                 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Basically, I explicitly set key after copying NullableWritable in case of skewed join. This lets both tez.conf e2e tests and TestAccumulator pass.&lt;/p&gt;</comment>
                            <comment id="13882500" author="cheolsoo" created="Mon, 27 Jan 2014 01:36:57 +0000"  >&lt;p&gt;Attaching a 3rd patch that fixes nightly.conf SkewedJoin_1,2,3,4,5,7,8. Now only remaining failures are 1) self join, 2) right outer, and 3) full outer.&lt;/p&gt;</comment>
                            <comment id="13882597" author="rohini" created="Mon, 27 Jan 2014 06:20:03 +0000"  >&lt;p&gt;Had to create a new instance for the current as moving to the next record in Tez, resets fields on the current instead of creating a new object.  Can you make it cleaner by making PigNullableWritable implement Cloneable and remove the newInstance() method in favor of clone().  NullablePartitionWritable can then override the clone.  I should have done that in the first place.&lt;/p&gt;</comment>
                            <comment id="13882610" author="cheolsoo" created="Mon, 27 Jan 2014 07:15:30 +0000"  >&lt;p&gt;RB link- &lt;a href=&quot;https://reviews.apache.org/r/17375/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17375/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13882612" author="cheolsoo" created="Mon, 27 Jan 2014 07:19:10 +0000"  >&lt;p&gt;Attaching a new patch that fixes right and full outer join cases.&lt;/p&gt;</comment>
                            <comment id="13883451" author="cheolsoo" created="Mon, 27 Jan 2014 22:35:24 +0000"  >&lt;p&gt;Committed to tez branch. Thank you Daniel for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625227" name="PIG-3719-1.patch" size="12747" author="cheolsoo" created="Sat, 25 Jan 2014 23:35:53 +0000"/>
                            <attachment id="12625244" name="PIG-3719-2.patch" size="13537" author="cheolsoo" created="Sun, 26 Jan 2014 09:00:49 +0000"/>
                            <attachment id="12625298" name="PIG-3719-3.patch" size="18773" author="cheolsoo" created="Mon, 27 Jan 2014 01:36:57 +0000"/>
                            <attachment id="12625330" name="PIG-3719-4.patch" size="21703" author="cheolsoo" created="Mon, 27 Jan 2014 07:18:26 +0000"/>
                            <attachment id="12625440" name="PIG-3719-5.patch" size="21019" author="cheolsoo" created="Mon, 27 Jan 2014 21:14:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jan 2014 06:20:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369539</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3718] pig alias overrides work only if there is a space character following the alias</title>
                <link>https://issues.apache.org/jira/browse/PIG-3718</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;when specifying an aliasOverride in registerScript, pig does not replace the override unless there&apos;s a space character after it. &lt;/p&gt;

&lt;p&gt;GruntParser:77 =&lt;br/&gt;
      if (query.toLowerCase().startsWith(alias.getKey().toLowerCase() + &quot; &quot;)) {&lt;/p&gt;

&lt;p&gt;This makes it impossible to make cool uses of this feature, such as removing custom calls to macros. E.g. if I have a macro called store_only_in_debug_mode, and I want to override it and ignore it in production, it would have been nice if I could just add &quot;store_only_in_debug_mode&quot; to my override list. Currently, this will only work if the script has a space char after the macro call. E.g. &lt;/p&gt;

&lt;p&gt;store_only_in_debug_mode (my_alias);    &amp;lt;--- works&lt;/p&gt;

&lt;p&gt;store_only_in_debug_mode(my_alias);    &amp;lt;--- doesn&apos;t work, sad&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690792">PIG-3718</key>
            <summary>pig alias overrides work only if there is a space character following the alias</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ihadanny">Ido Hadanny</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 15:53:50 +0000</created>
                <updated>Thu, 23 Jan 2014 15:53:50 +0000</updated>
                                            <version>0.11.1</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369539</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3717] AvroStorage is not filtering hidden files on directory recursion</title>
                <link>https://issues.apache.org/jira/browse/PIG-3717</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;We&apos;ve noticed that when we generate couple of sub-directories with Oozie and then use AvroStorage (the older version from PiggyBank) to load those directories, hidden files such as &lt;tt&gt;_SUCCESS&lt;/tt&gt; won&apos;t get ignored as they should be and in turn will cause failures in the Pig job. This seems to be regression caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3223&quot; title=&quot;AvroStorage does not handle comma separated input paths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3223&quot;&gt;&lt;del&gt;PIG-3223&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690788">PIG-3717</key>
            <summary>AvroStorage is not filtering hidden files on directory recursion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jarcec">Jarek Jarcec Cecho</assignee>
                                    <reporter username="jarcec">Jarek Jarcec Cecho</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 15:44:11 +0000</created>
                <updated>Fri, 24 Jan 2014 22:25:43 +0000</updated>
                            <resolved>Fri, 24 Jan 2014 22:25:43 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13880165" author="xuefuz" created="Thu, 23 Jan 2014 18:14:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13880337" author="rohini" created="Thu, 23 Jan 2014 20:50:57 +0000"  >&lt;p&gt;I actually fixed this and couple of other issues with AvroStorage as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3661&quot; title=&quot;Piggybank AvroStorage fails if used in more than one load or store statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3661&quot;&gt;&lt;del&gt;PIG-3661&lt;/del&gt;&lt;/a&gt;. Also did some cleanup w.r.t to getAllSubDirs() method. Had the patch done for 0.11. Will rebase and put up the patch soon. &lt;/p&gt;</comment>
                            <comment id="13880347" author="jarcec" created="Thu, 23 Jan 2014 20:57:34 +0000"  >&lt;p&gt;Do you think that we can go ahead and commit this one separately or would you prefer to cover it by your patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13880361" author="rohini" created="Thu, 23 Jan 2014 21:09:38 +0000"  >&lt;p&gt;Will cover in my patch as I have got rid of the getAllSubDirs() method itself.&lt;/p&gt;</comment>
                            <comment id="13880387" author="jarcec" created="Thu, 23 Jan 2014 21:31:50 +0000"  >&lt;p&gt;Thank you for the feedback &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="13881488" author="rohini" created="Fri, 24 Jan 2014 22:25:43 +0000"  >&lt;p&gt;Fix committed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3661&quot; title=&quot;Piggybank AvroStorage fails if used in more than one load or store statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3661&quot;&gt;&lt;del&gt;PIG-3661&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12688111">PIG-3661</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12624831" name="PIG-3717.patch" size="3551" author="jarcec" created="Thu, 23 Jan 2014 17:24:18 +0000"/>
                            <attachment id="12624813" name="PIG-3717.patch" size="3551" author="jarcec" created="Thu, 23 Jan 2014 15:51:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jan 2014 18:14:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369535</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3716] Implement user defined comparators for order by in Tez</title>
                <link>https://issues.apache.org/jira/browse/PIG-3716</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description></description>
                <environment></environment>
        <key id="12690754">PIG-3716</key>
            <summary>Implement user defined comparators for order by in Tez</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 11:52:36 +0000</created>
                <updated>Thu, 23 Jan 2014 11:52:37 +0000</updated>
                                            <version>tez-branch</version>
                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369501</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3715] CLONE - Default split destination</title>
                <link>https://issues.apache.org/jira/browse/PIG-3715</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&quot;split&quot; statement is better to have a default destination, eg:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SPLIT A INTO X IF f1&amp;lt;7, Y IF f2==5, Z IF (f3&amp;lt;6 OR f3&amp;gt;6), OTHER otherwise; -- OTHERS has all tuples with f1&amp;gt;=7 &amp;amp;&amp;amp; f2!=5 &amp;amp;&amp;amp; f3==6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a candidate project for Google summer of code 2011. More information about the program can be found at &lt;a href=&quot;http://wiki.apache.org/pig/GSoc2011&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/pig/GSoc2011&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690647">PIG-3715</key>
            <summary>CLONE - Default split destination</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="azaroth">Gianmarco De Francisci Morales</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                            <label>gsoc2011</label>
                    </labels>
                <created>Thu, 23 Jan 2014 06:40:50 +0000</created>
                <updated>Thu, 23 Jan 2014 06:40:50 +0000</updated>
                                                            <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369434</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This feature introduces a new keyword - OTHERWISE, and that is not backward compatible - it can break scripts that use it as an alias. </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>

<item>
            <title>[PIG-3714] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3714</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit&lt;/p&gt;</environment>
        <key id="12690646">PIG-3714</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:40:31 +0000</created>
                <updated>Thu, 23 Jan 2014 06:40:31 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369435</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3713] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3713</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit&lt;/p&gt;</environment>
        <key id="12690644">PIG-3713</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:35:13 +0000</created>
                <updated>Thu, 23 Jan 2014 06:35:13 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369436</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369439</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3712] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3712</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit.&lt;/p&gt;</environment>
        <key id="12690642">PIG-3712</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:33:21 +0000</created>
                <updated>Thu, 23 Jan 2014 06:33:21 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369440</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3711] 11111Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3711</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description></description>
                <environment></environment>
        <key id="12690641">PIG-3711</key>
            <summary>11111Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:30:29 +0000</created>
                <updated>Thu, 23 Jan 2014 06:30:29 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369441</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3710] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3710</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description></description>
                <environment></environment>
        <key id="12690640">PIG-3710</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:30:16 +0000</created>
                <updated>Thu, 23 Jan 2014 06:30:16 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369439</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3709] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3709</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit.&lt;/p&gt;</environment>
        <key id="12690639">PIG-3709</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:29:46 +0000</created>
                <updated>Thu, 23 Jan 2014 06:29:46 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369440</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3708] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3708</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit.&lt;/p&gt;</environment>
        <key id="12690638">PIG-3708</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:29:44 +0000</created>
                <updated>Thu, 23 Jan 2014 06:29:44 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369441</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369444</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3707] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3707</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit.&lt;/p&gt;</environment>
        <key id="12690637">PIG-3707</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:29:41 +0000</created>
                <updated>Thu, 23 Jan 2014 06:29:41 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3706] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3706</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit&lt;/p&gt;</environment>
        <key id="12690636">PIG-3706</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:29:12 +0000</created>
                <updated>Thu, 23 Jan 2014 06:29:12 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3705] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3705</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit&lt;/p&gt;</environment>
        <key id="12690635">PIG-3705</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:29:09 +0000</created>
                <updated>Thu, 23 Jan 2014 06:29:09 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369444</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3704] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3704</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit&lt;/p&gt;</environment>
        <key id="12690634">PIG-3704</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:28:30 +0000</created>
                <updated>Thu, 23 Jan 2014 06:28:30 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369448</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3703] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3703</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit&lt;/p&gt;</environment>
        <key id="12690633">PIG-3703</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:28:18 +0000</created>
                <updated>Thu, 23 Jan 2014 06:28:18 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3702] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3702</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu v12.04 32bit&lt;/p&gt;</environment>
        <key id="12690632">PIG-3702</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:27:56 +0000</created>
                <updated>Thu, 23 Jan 2014 06:27:56 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3701] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3701</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu 12.04 32bit&lt;/p&gt;</environment>
        <key id="12690631">PIG-3701</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:25:55 +0000</created>
                <updated>Thu, 23 Jan 2014 06:25:55 +0000</updated>
                                            <version>0.10.0</version>
                    <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369448</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369451</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hadoop,pig</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[PIG-3700] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3700</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu 12.04 32bit&lt;/p&gt;</environment>
        <key id="12690630">PIG-3700</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:25:44 +0000</created>
                <updated>Thu, 23 Jan 2014 06:25:44 +0000</updated>
                                            <version>0.10.0</version>
                    <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hadoop,pig</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[PIG-3699] Error while loading data</title>
                <link>https://issues.apache.org/jira/browse/PIG-3699</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I got error while apply this.&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; data = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump data;&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected.&lt;/p&gt;

&lt;p&gt;I am using ubuntu 12.02 32bit.&lt;br/&gt;
I installed hadoop2.2.0 and pig 0.12 successfully.&lt;br/&gt;
Haddop is runnig on my system.&lt;/p&gt;

&lt;p&gt;But, when i try to load a file&lt;/p&gt;

&lt;p&gt;so it gives error.&lt;br/&gt;
Please address me where i am wrong.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; aatoz = load &apos;atoz.csv&apos; using PigStorage(&apos;,&apos;);&lt;br/&gt;
grunt&amp;gt; dump aatoz;                                   &lt;br/&gt;
2014-01-23 10:41:44,950 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig features used in the script: UNKNOWN&lt;br/&gt;
2014-01-23 10:41:44,968 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler - File concatenation threshold: 100 optimistic? false&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size before optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,969 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MultiQueryOptimizer - MR plan size after optimization: 1&lt;br/&gt;
2014-01-23 10:41:44,971 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job&lt;br/&gt;
2014-01-23 10:41:44,972 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3&lt;br/&gt;
2014-01-23 10:41:44,984 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job&lt;br/&gt;
2014-01-23 10:41:44,998 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.&lt;br/&gt;
2014-01-23 10:41:45,000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.metrics.jvm.JvmMetrics - Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - already initialized&lt;br/&gt;
2014-01-23 10:41:45,001 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-9&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl - Error while trying to run jobs.&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
2014-01-23 10:41:45,498 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;br/&gt;
2014-01-23 10:41:45,502 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs&lt;br/&gt;
2014-01-23 10:41:45,503 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;/p&gt;

&lt;p&gt;2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;br/&gt;
2014-01-23 10:41:45,507 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Detected Local mode. Stats reported below may be incomplete&lt;br/&gt;
2014-01-23 10:41:45,508 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:&lt;/p&gt;

&lt;p&gt;HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt    Features&lt;br/&gt;
2.2.0    0.10.1    hardik    2014-01-23 10:41:44    2014-01-23 10:41:45    UNKNOWN&lt;/p&gt;

&lt;p&gt;Failed!&lt;/p&gt;

&lt;p&gt;Failed Jobs:&lt;br/&gt;
JobId    Alias    Feature    Message    Outputs&lt;br/&gt;
N/A    aatoz    MAP_ONLY    Message: Unexpected System Error Occured: java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.JobContext, but class was expected&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.setupUdfEnvAndStores(PigOutputFormat.java:225)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.checkOutputSpecs(PigOutputFormat.java:186)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.checkSpecs(JobSubmitter.java:456)&lt;br/&gt;
at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:342)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:335)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:240)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1.run(MapReduceLauncher.java:260)&lt;br/&gt;
&lt;a href=&quot;file:/tmp/temp1979716161/tmp-189979005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1979716161/tmp-189979005&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Input(s):&lt;br/&gt;
Failed to read data from &quot;file:///home/hardik/pig10/bin/input/atoz.csv&quot;&lt;/p&gt;

&lt;p&gt;Output(s):&lt;br/&gt;
Failed to produce result in &quot;file:/tmp/temp1979716161/tmp-189979005&quot;&lt;/p&gt;

&lt;p&gt;Job DAG:&lt;br/&gt;
null&lt;/p&gt;


&lt;p&gt;2014-01-23 10:41:45,509 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!&lt;br/&gt;
2014-01-23 10:41:45,510 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias aatoz&lt;br/&gt;
Details at logfile: /home/hardik/pig10/bin/pig_1390453192689.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu 12.04 32bit&lt;/p&gt;</environment>
        <key id="12690629">PIG-3699</key>
            <summary>Error while loading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hdbarot">Hardik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jan 2014 06:25:15 +0000</created>
                <updated>Thu, 23 Jan 2014 06:25:15 +0000</updated>
                                            <version>0.10.0</version>
                    <version>0.12.0</version>
                                                    <component>data</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369453</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hadoop,pig</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[PIG-3682] mvn-inst target does not install pig-h2.jar into local .m2</title>
                <link>https://issues.apache.org/jira/browse/PIG-3682</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;ant target &apos;mvn-inst&apos; does not install pig-h2.jar into local .m2, where as deploy does.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690409">PIG-3682</key>
            <summary>mvn-inst target does not install pig-h2.jar into local .m2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="raluri">Raja Aluri</assignee>
                                    <reporter username="raja@cmbasics.com">Raja Aluri</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jan 2014 21:22:38 +0000</created>
                <updated>Thu, 30 Jan 2014 01:11:06 +0000</updated>
                            <resolved>Thu, 30 Jan 2014 01:10:48 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13879469" author="aniket486" created="Thu, 23 Jan 2014 05:55:32 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13886122" author="aniket486" created="Thu, 30 Jan 2014 01:10:40 +0000"  >&lt;p&gt;Committed to trunk! Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=raluri&quot; class=&quot;user-hover&quot; rel=&quot;raluri&quot;&gt;Raja Aluri&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624434" name="0001-PIG-3682-mvn-inst-target-does-not-install-pig-h2.jar.patch" size="863" author="raja@cmbasics.com" created="Wed, 22 Jan 2014 21:26:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jan 2014 05:55:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3681] NullpointerException while processing files in gzip format</title>
                <link>https://issues.apache.org/jira/browse/PIG-3681</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When pig processes a large gzip file with text or mixed text and binary content, it throws a NullPointerException if the property texinputformat.record.delimiter is set to &apos;\n&apos;. This is because pig interprets the specified delimiter as a two character string &quot;\&quot; followed by &quot;n&quot; and not as a new line character.&lt;/p&gt;

&lt;p&gt; If this property is not set, same file unzips without problems, but the diff output of file unzipped using pig and unzipped using the gunzip command differs.&lt;/p&gt;

&lt;p&gt; Steps to recreate:&lt;/p&gt;

&lt;p&gt;1. create a text file that is ~ 4GB - I concatanated some pig/hadoop stdout and syslog files to create this file about 4GB in size.&lt;br/&gt;
2. compress it on unix command line - Ex. gzip abc&lt;br/&gt;
3. upload to hdfs (optional)&lt;br/&gt;
4. run the pig script included below to read/write the file.&lt;/p&gt;

&lt;p&gt;pig --param job_name=&quot;gunzip abc&quot; --param inputfile=&quot;abc.gz&quot; --param outputdir=./test --param outputfile=abc gunzip.pig&lt;/p&gt;

&lt;p&gt;Here are the contents of gunzip.pig:&lt;br/&gt;
set job.name &apos;$job_name&apos; &lt;/p&gt;

&lt;p&gt;set textinputformat.record.delimiter &quot;\n&quot;; &lt;/p&gt;

&lt;p&gt;gzdata = LOAD &apos;$inputfile&apos; USING PigStorage(); &lt;/p&gt;

&lt;p&gt;STORE gzdata INTO &apos;$outputdir/$outputfile&apos; USING PigStorage();&lt;/p&gt;

&lt;p&gt;This will cause the NullPointerException.&lt;/p&gt;

&lt;p&gt;If the second line (set textinputformat.record.delimiter field) is commented out, the Exception won&apos;t occur but the output is not the same as the one produced by gunzip.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Linux CentOS 6.4; CDH-4.x and CDH-5.0 (beta)&lt;/p&gt;</environment>
        <key id="12690132">PIG-3681</key>
            <summary>NullpointerException while processing files in gzip format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kumarr">Kumar Ravi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jan 2014 22:30:49 +0000</created>
                <updated>Fri, 24 Jan 2014 19:01:28 +0000</updated>
                            <resolved>Fri, 24 Jan 2014 19:01:28 +0000</resolved>
                                    <version>0.11</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13877978" author="kumarr" created="Tue, 21 Jan 2014 23:07:51 +0000"  >&lt;p&gt;I need to correct my statement: An OutofMemoryError is seen while using the textinputformat.record.delimiter property not a NullPointerException.&lt;/p&gt;</comment>
                            <comment id="13877984" author="kumarr" created="Tue, 21 Jan 2014 23:11:44 +0000"  >&lt;p&gt;Following is the stack trace when the OutOfMemory Error os seen:&lt;br/&gt;
Pig Stack Trace&lt;br/&gt;
---------------&lt;br/&gt;
ERROR 2244: Job failed, hadoop does not return any error message&lt;/p&gt;

&lt;p&gt;org.apache.pig.backend.executionengine.ExecException: ERROR 2244: Job failed, hadoop does not return any error message&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.executeBatch(GruntParser.java:145)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:198)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:170)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)&lt;br/&gt;
        at org.apache.pig.Main.run(Main.java:604)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:157)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:212)&lt;br/&gt;
================================================================================&lt;/p&gt;</comment>
                            <comment id="13880482" author="rohini" created="Thu, 23 Jan 2014 22:55:55 +0000"  >&lt;p&gt;This is not a pig problem. If you pass it as -Dtextinputformat.record.delimiter=\n in command line shell passes it to pig as two chars - \ and n instead of a newline. If used directly in pig script, it is interpreted again that way as &quot;\n&quot; is not something pig parser understands as a newline.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;An OutofMemoryError is seen while using the textinputformat.record.delimiter property not a NullPointerException.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;   You encounter OOM because pig tries to read the whole file as a single record as it did not encounter \ and n together as a delimiter.&lt;/p&gt;

&lt;p&gt;cat delimiter.properties &lt;br/&gt;
textinputformat.record.delimiter=\n&lt;/p&gt;

&lt;p&gt;pig -P delimiter.properties test.pig&lt;/p&gt;

&lt;p&gt;This works and can be used as a workaround.&lt;/p&gt;

&lt;p&gt;Note:&lt;br/&gt;
 1) You will have a problem if the data is bzip as pig has its own implementation -&lt;br/&gt;
Bzip2TextInputFormat that does not take that setting into account. &lt;br/&gt;
 2) The other problem you will have with textinputformat.record.delimiter=\n is&lt;br/&gt;
that you can only specify one delimiter. If line ends with \r\n (CRLF), then&lt;br/&gt;
the data will have \r in it.&lt;/p&gt;</comment>
                            <comment id="13880699" author="kumarr" created="Fri, 24 Jan 2014 04:07:38 +0000"  >&lt;p&gt;Thanks for the explanation and the workaround Rohini!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jan 2014 22:55:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369094</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3680] A new type of EvalFunc, TransactionalEvalFunc, would be useful</title>
                <link>https://issues.apache.org/jira/browse/PIG-3680</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;I think a new type of EvalFunc that has some notion of a transactional context would be very useful. This new TransactionalEvalFunc abstract class should have methods like initialize, onSuccess, and onFailure to mark the transaction boundaries. Such EvalFuncs would be useful for interacting with external resources. For example, to delete rows from an existing hbase table such a transactional UDF would be useful. Of course we can imitate this with a StoreFunc, but conceptually StoreFunc&apos;s are restricted to writes. If the community thinks this will be useful, I am ready to spend time on this..&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690095">PIG-3680</key>
            <summary>A new type of EvalFunc, TransactionalEvalFunc, would be useful</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="nezihyigitbasi">Nezih Yigitbasi</assignee>
                                    <reporter username="nezihyigitbasi">Nezih Yigitbasi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jan 2014 19:34:01 +0000</created>
                <updated>Tue, 21 Jan 2014 21:40:17 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13877886" author="nezihyigitbasi" created="Tue, 21 Jan 2014 21:40:17 +0000"  >&lt;p&gt;I have seen that EvalFunc class has a finish() method that can be used for cleanup. Initialization can be done in exec() once by keeping track of whether we have already initialized or not. So overall it seems that EvalFunc can already imitate such a transactional context, except finish() doesn&apos;t tell whether there was any error during the map phase. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369057</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369058</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3679] e2e StreamingPythonUDFs_10 fails in trunk</title>
                <link>https://issues.apache.org/jira/browse/PIG-3679</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The e2e test StreamingPythonUDFs_10 fails in trunk with NPE-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.NullPointerException
        at org.apache.pig.builtin.DoubleRound.exec(DoubleRound.java:45)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The test query is as follows-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a = load &apos;/user/pig/tests/data/singlefile/allscalar10k&apos; using PigStorage() as (name:chararray, age:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, gpa:&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;, instate:chararray);
b = foreach a generate name, ((&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;)ROUND((instate==&apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;?gpa:gpa+1)*10000)) / 10000.0;
store b into &apos;/user/pig/out/cheolsoop-1390330024-nightly.conf-StreamingPythonUDFs/StreamingPythonUDFs_10_benchmark.out&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12690085">PIG-3679</key>
            <summary>e2e StreamingPythonUDFs_10 fails in trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jan 2014 19:05:49 +0000</created>
                <updated>Mon, 3 Feb 2014 07:40:35 +0000</updated>
                                                            <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13877778" author="cheolsoo" created="Tue, 21 Jan 2014 19:38:19 +0000"  >&lt;p&gt;The problem is that random-generated allscalar10k may contain null values for instate and gpa columns. For eg,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(fred hernandez,44,0.28,)
(calvin brown,22,1.73,)
(priscilla carson,71,0.0,)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That causes &quot;instate==&apos;true&apos;?gpa:gpa+1&quot; to become null.&lt;/p&gt;

&lt;p&gt;Attaching a fix that adds a filter-by that filters out null values on those two columns. Confirmed the test passes with the fix.&lt;/p&gt;</comment>
                            <comment id="13877951" author="daijy" created="Tue, 21 Jan 2014 22:51:01 +0000"  >&lt;p&gt;A little suprised why we not see it before. We should always has some null in instate and gpa.&lt;/p&gt;</comment>
                            <comment id="13877957" author="cheolsoo" created="Tue, 21 Jan 2014 22:55:25 +0000"  >&lt;p&gt;Good question. I don&apos;t know.&lt;/p&gt;</comment>
                            <comment id="13881561" author="rohini" created="Sat, 25 Jan 2014 00:36:15 +0000"  >&lt;p&gt;In 0.11, null or non-numbers are ignored.&lt;/p&gt;

&lt;p&gt;ROUND.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;{
            &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; d =  DataType.toDouble(input.get(0));
		    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(d);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NumberFormatException nfe){
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to process input; error - &quot;&lt;/span&gt; + nfe.getMessage());
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e){
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Caught exception processing input row &quot;&lt;/span&gt;, e);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13881564" author="cheolsoo" created="Sat, 25 Jan 2014 00:43:01 +0000"  >&lt;p&gt;But ROUND.java hasn&apos;t changed in trunk, has it?&lt;/p&gt;</comment>
                            <comment id="13889253" author="cheolsoo" created="Mon, 3 Feb 2014 06:10:42 +0000"  >&lt;p&gt;OK, I found this is a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3568&quot; title=&quot;Define the semantics of POStatus.STATUS_NULL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3568&quot;&gt;&lt;del&gt;PIG-3568&lt;/del&gt;&lt;/a&gt; (Define the semantics of POStatus.STATUS_NULL). If I drop &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3568&quot; title=&quot;Define the semantics of POStatus.STATUS_NULL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3568&quot;&gt;&lt;del&gt;PIG-3568&lt;/del&gt;&lt;/a&gt; in trunk, the test passes. In shorts, the exec() in DoubleRound was never called with nulls in 0.12, whereas it is in trunk resulting in NPE.&lt;/p&gt;

&lt;p&gt;In terms of the fix, I think we should explicitly handle NullPointerException in addition to NumberFormatException in ROUND, DoubleRound, and FloatRound. Currently, if input.get(0) returns null, Math.round() will throw NPE.&lt;/p&gt;

&lt;p&gt;I am attaching a new patch that adds a null check before calling Math.round(). I also copied the handler for NumberFormatException from ROUND to DoubleRound and FloadRound since it was missing in those functions.&lt;/p&gt;</comment>
                            <comment id="13889262" author="daijy" created="Mon, 3 Feb 2014 06:42:15 +0000"  >&lt;p&gt;Thanks for pursuing this.&lt;/p&gt;

&lt;p&gt;Did a quick check, seems I cannot find another UDF like this. +1 for the patch.&lt;/p&gt;</comment>
                            <comment id="13889285" author="rohini" created="Mon, 3 Feb 2014 07:40:35 +0000"  >&lt;p&gt; If the previous behavior was to not execute in case of null and if we are executing now, isn&apos;t that a big behavior change? There might be other user written UDFs which might encounter issues even if there are no builtin ones. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624182" name="PIG-3679-1.patch" size="1305" author="cheolsoo" created="Tue, 21 Jan 2014 19:38:19 +0000"/>
                            <attachment id="12626609" name="PIG-3679-2.patch" size="2776" author="cheolsoo" created="Mon, 3 Feb 2014 06:10:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Jan 2014 22:51:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369047</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369048</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3678] Jython -- module file does not exist</title>
                <link>https://issues.apache.org/jira/browse/PIG-3678</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;echo $JYTHON_HOME &lt;br/&gt;
/jython-standalone-2.5.3.jar&lt;/p&gt;


&lt;p&gt;/usr/lib/pig/lib# ls -la&lt;br/&gt;
total 16192&lt;br/&gt;
drwxr-xr-x 3 root root     4096 Jan 20 21:47 .&lt;br/&gt;
drwxr-xr-x 6 root root     4096 Jan 16 18:19 ..&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 root root   303139 Nov 20 16:08 avro-1.7.4.jar&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 root root   227500 Nov 20 16:08 jackson-core-asl-1.8.8.jar&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 root root   668564 Nov 20 16:08 jackson-mapper-asl-1.8.8.jar&lt;br/&gt;
drwxr-xr-x 2 root root     4096 Jan 16 18:19 jdiff&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 root root    16046 Nov 20 16:08 json-simple-1.1.jar&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 root root 14340135 Jan 20 21:16 jython-standalone-2.5.3.jar&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 root root   995968 Nov 20 16:08 snappy-java-1.0.4.1.jar&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; register &apos;udf.py&apos; using jython as myfuncs;&lt;/p&gt;

&lt;p&gt;2014-01-20 20:39:00,231 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.scripting.jython.JythonScriptEngine - created tmp python.cachedir=/tmp/pig_jython_4481018396445110764&lt;/p&gt;

&lt;p&gt;2014-01-20 20:39:03,429 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN  org.apache.pig.scripting.jython.JythonScriptEngine - pig.cmd.args.remainders is empty. This is not expected unless on testing.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;/usr/lib/pig/lib/Lib&amp;#39;, &amp;#39;/usr/lib/pig/lib/jython-standalone-2.5.3.jar/Lib&amp;#39;, &amp;#39;__classpath__&amp;#39;, &amp;#39;__pyclasspath__/&amp;#39;, &amp;#39;/root&amp;#39;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;2014-01-20 20:39:06,704 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN  org.apache.pig.scripting.jython.JythonScriptEngine - module file does not exist: datetime, /usr/lib/pig/lib/jython-standalone-2.5.3.jar/Lib/datetime.py&lt;/p&gt;

&lt;p&gt;2014-01-20 20:39:07,297 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.scripting.jython.JythonScriptEngine - Register scripting UDF: myfuncs.to_week&lt;/p&gt;

&lt;p&gt;2014-01-20 20:39:07,299 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.scripting.jython.JythonScriptEngine - Register scripting UDF: myfuncs.get_week_ending&lt;/p&gt;

&lt;p&gt;2014-01-20 20:39:07,301 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.scripting.jython.JythonScriptEngine - Register scripting UDF: myfuncs.to_weekyear&lt;/p&gt;



&lt;p&gt;I can see from the jython-standalone-2.5.3.jar that the folder Lib/ is there and also the Lib/datetime.py&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux test.ent.cloudera.com 3.2.0-23-generic #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;</environment>
        <key id="12689969">PIG-3678</key>
            <summary>Jython -- module file does not exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joaosal">Joao Salcedo</reporter>
                        <labels>
                            <label>jython</label>
                    </labels>
                <created>Tue, 21 Jan 2014 08:21:28 +0000</created>
                <updated>Tue, 21 Jan 2014 08:21:28 +0000</updated>
                                            <version>0.11</version>
                                                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jython </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[PIG-3677] ConfigurationUtil.getLocalFSProperties can return an inconsistent property set</title>
                <link>https://issues.apache.org/jira/browse/PIG-3677</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;From  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Our integration tests with a recent version of Hadoop 2.2 and pig were failing with these kinds of stacktraces for replicated join:&lt;/p&gt;

&lt;p&gt;2014-01-17 17:20:41,811 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR&lt;br/&gt;
org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate&lt;br/&gt;
exception from backed error: AttemptID:attempt_1389973251957_0127_m_000000_3&lt;br/&gt;
Info:Error: org.apache.pig.backend.executionengine.ExecException: ERROR 2081:&lt;br/&gt;
Unable to setup the load function.&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLoad.getNext(POLoad.java:125)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.processInput(PhysicalOperator.java:308)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLocalRearrange.getNext(POLocalRearrange.java:263)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POFRJoin.setUpHashMap(POFRJoin.java:398)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POFRJoin.getNext(POFRJoin.java:231)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.runPipeline(PigGenericMapBase.java:286)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.map(PigGenericMapBase.java:281)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.map(PigGenericMapBase.java:64)&lt;br/&gt;
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:145)&lt;br/&gt;
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)&lt;br/&gt;
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:340)&lt;br/&gt;
    at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:165)&lt;br/&gt;
    at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
    at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1562)&lt;br/&gt;
    at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:160)&lt;br/&gt;
Caused by: org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input&lt;br/&gt;
path does not exist:&lt;br/&gt;
hdfs://cluster-nn1.yahoo.com:8020/user/hitusr_1/pigrepl_scope-24_21617961_1389979200720_1&lt;br/&gt;
    at&lt;br/&gt;
org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:285)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigFileInputFormat.listStatus(PigFileInputFormat.java:37)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:340)&lt;br/&gt;
    at org.apache.pig.impl.io.ReadToEndLoader.init(ReadToEndLoader.java:190)&lt;br/&gt;
    at org.apache.pig.impl.io.ReadToEndLoader.&amp;lt;init&amp;gt;(ReadToEndLoader.java:146)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLoad.setUp(POLoad.java:93)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLoad.getNext(POLoad.java:121)&lt;br/&gt;
    ... 15 more&lt;/p&gt;


&lt;p&gt;Debugged this to find that ConfigurationUtil.getLocalFSProperties can return a&lt;br/&gt;
property set where fs.default.name=&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///&lt;/a&gt; but fs.defaultFS was&lt;br/&gt;
hdfs://cluster-nn1.yahoo.com:8020.  Pig is bypassing&lt;br/&gt;
Configuration.set(), so deprecated names aren&apos;t being handled properly.  Later&lt;br/&gt;
when we try to take these properties and poke them into a Configuration object,&lt;br/&gt;
if we try to set fs.defaultFS &lt;b&gt;after&lt;/b&gt; fs.default.name then both will end up as&lt;br/&gt;
hdfs://... and it breaks.&lt;/p&gt;

&lt;p&gt;We could have pig also set fs.defaultFS.  Problem is that if fs.default.name&lt;br/&gt;
gets yet another alias or is itself deprecated later then pig will have to&lt;br/&gt;
change or we can break again.  In that sense, another fix is to assert that&lt;br/&gt;
Configuration.isDeprecated(&quot;fs.default.name&quot;) is false and then filter out any&lt;br/&gt;
property where Configuration.isDeprecated() is true.  Then we&apos;re left with&lt;br/&gt;
settings that won&apos;t clobber each other when we go to build the configuration&lt;br/&gt;
later.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt; for helping with debugging this. We had a hard time figuring this out as it failed with only 2.2 version of hadoop(+ few patches) and we don&apos;t have an answer to how we did not encounter this issue long ago with hadoop 0.23 and earlier versions of 2.x.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689600">PIG-3677</key>
            <summary>ConfigurationUtil.getLocalFSProperties can return an inconsistent property set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jan 2014 23:42:34 +0000</created>
                <updated>Mon, 27 Jan 2014 08:02:36 +0000</updated>
                            <resolved>Thu, 23 Jan 2014 05:57:33 +0000</resolved>
                                    <version>0.11.1</version>
                                    <fixVersion>0.12.1</fixVersion>
                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13879056" author="rohini" created="Wed, 22 Jan 2014 19:19:00 +0000"  >&lt;p&gt;Doing a unset which takes care of removing all aliased configuration properties.&lt;/p&gt;</comment>
                            <comment id="13879073" author="rohini" created="Wed, 22 Jan 2014 19:30:30 +0000"  >&lt;p&gt;Changed to use set instead of unset which is more simple.&lt;/p&gt;</comment>
                            <comment id="13879077" author="rohini" created="Wed, 22 Jan 2014 19:33:37 +0000"  >&lt;p&gt;Note: If &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9725&quot; title=&quot;Configuration allows final parameters to be changed via set method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9725&quot;&gt;HADOOP-9725&lt;/a&gt; gets fixed and if &quot;fs.default.name&quot; is a final parameter, this will break. There are other places in code like WeightedRangePartitioner, SkewedPartitioner, etc also that do conf.set(&quot;fs.default.name&quot;) directly and will break. &lt;/p&gt;</comment>
                            <comment id="13879465" author="aniket486" created="Thu, 23 Jan 2014 05:49:47 +0000"  >&lt;p&gt;Good catch! +1.&lt;/p&gt;</comment>
                            <comment id="13879471" author="rohini" created="Thu, 23 Jan 2014 05:57:33 +0000"  >&lt;p&gt;Committed to trunk. Thanks Aniket for the review.&lt;/p&gt;</comment>
                            <comment id="13882617" author="daijy" created="Mon, 27 Jan 2014 07:35:32 +0000"  >&lt;p&gt;Can we port it to 12.1?&lt;/p&gt;</comment>
                            <comment id="13882622" author="rohini" created="Mon, 27 Jan 2014 08:02:36 +0000"  >&lt;p&gt;Committed to branch-0.12 as well.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12691317">PIG-3725</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12657311">HADOOP-9725</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12624401" name="PIG-3677-1.patch" size="3537" author="rohini" created="Wed, 22 Jan 2014 19:19:00 +0000"/>
                            <attachment id="12624403" name="PIG-3677-2.patch" size="3541" author="rohini" created="Wed, 22 Jan 2014 19:30:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jan 2014 05:49:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368573</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3676] Put piggybank.jar into lib directory in distribution</title>
                <link>https://issues.apache.org/jira/browse/PIG-3676</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently piggybank.jar is in contrib/piggybank/java. It might be better to put it in a more prominent location. $PIG_HOME/lib might be a good place.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689442">PIG-3676</key>
            <summary>Put piggybank.jar into lib directory in distribution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jan 2014 06:56:14 +0000</created>
                <updated>Fri, 17 Jan 2014 06:56:14 +0000</updated>
                                                            <fixVersion>0.13.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368414</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3675] Documentation for AccumuloStorage</title>
                <link>https://issues.apache.org/jira/browse/PIG-3675</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description></description>
                <environment></environment>
        <key id="12689440">PIG-3675</key>
            <summary>Documentation for AccumuloStorage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jan 2014 06:41:29 +0000</created>
                <updated>Mon, 20 Jan 2014 17:58:58 +0000</updated>
                                                            <fixVersion>0.13.0</fixVersion>
                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13876634" author="elserj" created="Mon, 20 Jan 2014 17:58:58 +0000"  >&lt;p&gt;I&apos;d be happy to write up some docs; what did you have in mind? Something on &lt;a href=&quot;http://pig.apache.org/docs/?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pig.apache.org/docs/?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you can point me to where the doc source is, I&apos;d be happy to supply at patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12679258">PIG-3573</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Jan 2014 17:58:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368413</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3674] Fix TestAccumuloPigCluster on Hadoop 2</title>
                <link>https://issues.apache.org/jira/browse/PIG-3674</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently TestAccumuloPigCluster is disabled for Hadoop 2. We need to fix it and enable it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689439">PIG-3674</key>
            <summary>Fix TestAccumuloPigCluster on Hadoop 2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="elserj">Josh Elser</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jan 2014 06:38:37 +0000</created>
                <updated>Fri, 17 Jan 2014 06:38:37 +0000</updated>
                                                            <fixVersion>0.13.0</fixVersion>
                                    <component>internal-udfs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3673] Divide by zero error in runpigmix.pl script</title>
                <link>https://issues.apache.org/jira/browse/PIG-3673</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;runpigmix.pl script has the following line which does not check against divide by zero. This could fail the launch script unexpectedly. &lt;/p&gt;

&lt;p&gt;my $multiplier = $pig_times/$mr_times;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689415">PIG-3673</key>
            <summary>Divide by zero error in runpigmix.pl script</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="suhassatish">Suhas Satish</assignee>
                                    <reporter username="suhassatish">Suhas Satish</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jan 2014 01:58:46 +0000</created>
                <updated>Fri, 17 Jan 2014 02:00:40 +0000</updated>
                                            <version>0.12.0</version>
                    <version>0.11.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                        <attachments>
                            <attachment id="12623558" name="PIG-3673.patch" size="595" author="suhassatish" created="Fri, 17 Jan 2014 01:59:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368388</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3672] pig should not hardcode &quot;hdfs://&quot; path in code, should be configurable to other file system implementations</title>
                <link>https://issues.apache.org/jira/browse/PIG-3672</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;QueryParserUtils.java has the code - &lt;br/&gt;
result.add(&quot;hdfs://&quot;&lt;ins&gt;thisHost&lt;/ins&gt;&quot;:&quot;+uri.getPort());&lt;/p&gt;

&lt;p&gt;I propose to make it generic like - &lt;br/&gt;
result.add(uri.getScheme() + &quot;://&quot;&lt;ins&gt;thisHost&lt;/ins&gt;&quot;:&quot;+uri.getPort());&lt;/p&gt;

&lt;p&gt;Similarly jobControlCompiler.java has - &lt;br/&gt;
if (!outputPathString.contains(&quot;://&quot;) || outputPathString.startsWith(&quot;hdfs://&quot;)) {&lt;/p&gt;

&lt;p&gt; I have a patch version which I ran passing unit tests on. Will be uploading it shortly.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12689398">PIG-3672</key>
            <summary>pig should not hardcode &quot;hdfs://&quot; path in code, should be configurable to other file system implementations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="suhassatish">Suhas Satish</assignee>
                                    <reporter username="suhassatish">Suhas Satish</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 23:30:30 +0000</created>
                <updated>Thu, 30 Jan 2014 21:43:44 +0000</updated>
                                            <version>0.10.0</version>
                    <version>0.12.0</version>
                    <version>0.11.1</version>
                                                    <component>data</component>
                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13874240" author="suhassatish" created="Fri, 17 Jan 2014 00:58:23 +0000"  >&lt;p&gt;This patch addresses the hdfs:// hardcoding and calls generic uri.getScheme() to get the file system implementation. &lt;/p&gt;</comment>
                            <comment id="13874871" author="rohini" created="Fri, 17 Jan 2014 15:32:21 +0000"  >&lt;p&gt;Few comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;WeightedRangePartitioner.java and MapredUtil.java&lt;br/&gt;
     Please do not add custom file formats. You can iterate through the configuration and if the key starts with &quot;fs.&quot; and ends with &quot;.impl&quot; set that in the new configuration so that it is generic. Wondering how this was working before for s3. &lt;/li&gt;
	&lt;li&gt;QueryParserUtils.java&lt;br/&gt;
    a) Can you add the Utils.hasFileSystemImpl check for the scheme before adding to remote host. hbase:// currently is skipped because there is no host. But this would future proof for other schemes that pig might support in future which has host as well but no filesystem implementation. &lt;br/&gt;
    b) If har is the scheme, then you need to return hdfs:// in the remote host&lt;/li&gt;
	&lt;li&gt;JobControlCompiler.java&lt;br/&gt;
   !fileuri.getScheme().equals(&quot;file:///&quot;) condition is wrong. Even if &lt;a href=&quot;file://&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file://&lt;/a&gt; we should write to output directory. You can just change &lt;br/&gt;
if (!outputPathString.contains(&quot;://&quot;) || outputPathString.startsWith(&quot;hdfs://&quot;)) { &lt;br/&gt;
to &lt;br/&gt;
if (Utils.hasFileSystemImpl(new Path(outputPathString), conf)) {&lt;br/&gt;
   That should take care of fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1424&quot; title=&quot;Error logs of streaming should not be placed in output location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1424&quot;&gt;PIG-1424&lt;/a&gt; as well.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875475" author="suhassatish" created="Sat, 18 Jan 2014 01:32:44 +0000"  >&lt;ul&gt;
	&lt;li&gt;Removed custom file formats from WeightedRangePartitioner.java and MapredUtil.java as I realized this was not really required and was not being used anywhere.&lt;/li&gt;
	&lt;li&gt;QueryParserUtils.java
	&lt;ul&gt;
		&lt;li&gt;a) Do you mean to add the check at the code block shown in the diff below  ? The problem with this is that there is no access to Configuration object in QueryParserUtils.java. Do you have recommendations on how and where to instantiate a conf object to pass into Utils.hasFileSystemImpl as an argument?&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;
&lt;p&gt;                  String scheme = uri.getScheme();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (scheme!=null &amp;amp;&amp;amp; scheme.toLowerCase().equals(&quot;hdfs&quot;)||sc&lt;br/&gt;
+                 if (scheme!=null &amp;amp;&amp;amp; Utils.hasFileSystemImpl(p,conf)) {&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;b) Is this currently being returned correctly for &quot;har&quot; in trunk? If so,  this change would handle it right?
&lt;blockquote&gt;
&lt;p&gt;                 if (scheme!=null &amp;amp;&amp;amp; Utils.hasFileSystemImpl(p,conf)) {&lt;br/&gt;
                     if (uri.getHost()==null)&lt;br/&gt;
                         continue;&lt;br/&gt;
                     String thisHost = uri.getHost().toLowerCase();&lt;br/&gt;
                     if (scheme.toLowerCase().equals(&quot;har&quot;)) {&lt;br/&gt;
                         if (thisHost.startsWith(HAR_PREFIX)) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {
                             thisHost = thisHost.substring(HAR_PREFIX.length());
                         }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;			 scheme=&quot;hdfs&quot;;&lt;br/&gt;
                     }&lt;br/&gt;
                     if (!uri.getHost().isEmpty() &amp;amp;&amp;amp; &lt;br/&gt;
                             !thisHost.equals(defaultHost)) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {
                         if (uri.getPort()!=-1)
                             result.add(scheme + &amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;                 }&lt;/p&gt;&lt;/blockquote&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;JobControlCompiler.java&lt;br/&gt;
This has been taken care of as -
&lt;blockquote&gt;
&lt;p&gt;                String outputPathString = st.getSFile().getFileName();&lt;br/&gt;
 		if (Utils.hasFileSystemImpl(new Path(outputPathString), conf)) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {
                    conf.set(&amp;quot;pig.streaming.log.dir&amp;quot;,
                            new Path(outputPathString, LOG_DIR).toString());
                }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; else {&lt;/p&gt;&lt;/blockquote&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13882557" author="rohini" created="Mon, 27 Jan 2014 04:15:03 +0000"  >&lt;p&gt;Logic looks fine. &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3672&quot; title=&quot;pig should not hardcode &amp;quot;hdfs://&amp;quot; path in code, should be configurable to other file system implementations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3672&quot;&gt;PIG-3672&lt;/a&gt;-2.patch does not compile as it does not include imports for Utils class and conf is a unknown variable (Create configuration from pigContext.getProperties()). Please fix them. Also please format the code. &lt;/p&gt;</comment>
                            <comment id="13887103" author="dvryaboy" created="Thu, 30 Jan 2014 21:43:44 +0000"  >&lt;p&gt;cancelling patch available status given Rohini&apos;s comments &amp;#8211; please make patch available again when a new patch is submitted&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623557" name="PIG-3672-1.patch" size="4587" author="suhassatish" created="Fri, 17 Jan 2014 01:44:00 +0000"/>
                            <attachment id="12623764" name="PIG-3672-2.patch" size="2493" author="suhassatish" created="Sat, 18 Jan 2014 01:41:49 +0000"/>
                            <attachment id="12623552" name="PIG-3672.patch" size="6242" author="suhassatish" created="Fri, 17 Jan 2014 00:57:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Jan 2014 15:32:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368370</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3671] CONCAT operation bleeds into ToDate, making it ERROR</title>
                <link>https://issues.apache.org/jira/browse/PIG-3671</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;date_and_time = LOAD &apos;date_and_time.txt&apos; AS (date:chararray, time:chararray);&lt;br/&gt;
date_time_concat = FOREACH date_and_time GENERATE CONCAT(CONCAT(date, &apos; &apos;), time) AS date_time;&lt;br/&gt;
date_time_problem = FOREACH date_time_concat GENERATE ToDate(date_time) AS date_time:datetime;&lt;br/&gt;
dump date_time_problem&lt;/p&gt;

&lt;p&gt;g.apache.pig.backend.executionengine.ExecException: ERROR 0: Exception while executing [POUserFunc (Name: POUserFunc(org.apache.pig.builtin.ToDateISO)&lt;span class=&quot;error&quot;&gt;&amp;#91;datetime&amp;#93;&lt;/span&gt; - scope-12 Operator Key: scope-12) children: null at []]: java.lang.IllegalArgumentException: Invalid format: &quot;#date time&quot;&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.getNext(PhysicalOperator.java:338)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.processPlan(POForEach.java:378)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.getNextTuple(POForEach.java:298)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.runPipeline(PigGenericMapBase.java:282)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.map(PigGenericMapBase.java:277)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.map(PigGenericMapBase.java:64)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)&lt;br/&gt;
	at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: Invalid format: &quot;#date time&quot;&lt;br/&gt;
	at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:683)&lt;br/&gt;
	at org.apache.pig.builtin.ToDate.extractDateTime(ToDate.java:124)&lt;br/&gt;
	at org.apache.pig.builtin.ToDateISO.exec(ToDateISO.java:38)&lt;br/&gt;
	at org.apache.pig.builtin.ToDateISO.exec(ToDateISO.java:31)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:330)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNextDateTime(POUserFunc.java:422)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.getNext(PhysicalOperator.java:329)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Moonlight on the ocean last night was pretty.&lt;/p&gt;</environment>
        <key id="12689340">PIG-3671</key>
            <summary>CONCAT operation bleeds into ToDate, making it ERROR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="russell.jurney">Russell Jurney</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 19:56:07 +0000</created>
                <updated>Thu, 16 Jan 2014 21:27:44 +0000</updated>
                            <resolved>Thu, 16 Jan 2014 21:27:44 +0000</resolved>
                                    <version>0.12.0</version>
                                                    <component>internal-udfs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13873863" author="russell.jurney" created="Thu, 16 Jan 2014 20:02:45 +0000"  >&lt;p&gt;Attaching date and time file for reproducing bug.&lt;/p&gt;</comment>
                            <comment id="13873871" author="russell.jurney" created="Thu, 16 Jan 2014 20:10:42 +0000"  >&lt;p&gt;This file reproduces the bug with the attached file.&lt;/p&gt;</comment>
                            <comment id="13873876" author="russell.jurney" created="Thu, 16 Jan 2014 20:12:52 +0000"  >&lt;p&gt;Note: Workaround is to STORE the entire relation after the CONCAT, and LOAD it as a datetime, or load it as a chararray and apply ToDate() without a problem.&lt;/p&gt;

&lt;p&gt;Thus the plan is borked.&lt;/p&gt;</comment>
                            <comment id="13873935" author="russell.jurney" created="Thu, 16 Jan 2014 21:04:29 +0000"  >&lt;p&gt;Also note: StringConcat, if done on the PREVIOUS line (not the current one), will not bleed through:&lt;/p&gt;

&lt;p&gt;bluecoat_datetime = FOREACH bluecoat GENERATE StringConcat(date, &apos;T&apos;, time, &apos;Z&apos;) AS date_time, *;&lt;br/&gt;
blucoat_datetime = FOREACH bluecoat_datetime GENERATE ToDate(date_time) AS date_time, *;&lt;br/&gt;
STORE bluecoat_datetime INTO &apos;../../data/bluecoat_datetime.log&apos;;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;THIS WORKS *&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;bluecoat_datetime = FOREACH bluecoat GENERATE ToDate(StringConcat(date, &apos;T&apos;, time, &apos;Z&apos;)) AS date_time, *;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;THIS FAILS *&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13873971" author="russell.jurney" created="Thu, 16 Jan 2014 21:27:36 +0000"  >&lt;p&gt;This is not a bug. There was a header line in my text file.&lt;/p&gt;

&lt;p&gt;HA&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623456" name="date_and_time.txt" size="1991" author="russell.jurney" created="Thu, 16 Jan 2014 20:02:45 +0000"/>
                            <attachment id="12623460" name="date_time_bug.pig" size="292" author="russell.jurney" created="Thu, 16 Jan 2014 20:14:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368314</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3670] Fix assert in Pig script</title>
                <link>https://issues.apache.org/jira/browse/PIG-3670</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3367&quot; title=&quot;Add assert keyword (operator) in pig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3367&quot;&gt;&lt;del&gt;PIG-3367&lt;/del&gt;&lt;/a&gt; introduce &quot;assert&quot; keyword. However, it can only be used in Java embedding, when use registerQuery. In Pig script or Grunt shell, GruntParser will complain.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689328">PIG-3670</key>
            <summary>Fix assert in Pig script</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 19:09:59 +0000</created>
                <updated>Thu, 16 Jan 2014 19:23:32 +0000</updated>
                                                            <fixVersion>0.13.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                            <attachment id="12623449" name="PIG-3670-1.patch" size="2185" author="daijy" created="Thu, 16 Jan 2014 19:23:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368302</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3669] Wrong Usage of Scalar can bring down Namenode</title>
                <link>https://issues.apache.org/jira/browse/PIG-3669</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;People often get confused and end up using . after a join instead of ::  (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2134&quot; title=&quot;ReadScalars message &amp;quot;scalar has more than one row in the output&amp;quot; does not provide enough information to help programmer find and fix script syntax error.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2134&quot;&gt;PIG-2134&lt;/a&gt;) to reference fields of the join. Pig takes it to be a scalar and tries to read the whole join data assuming there is only one record and then fails with &quot;scalar has more than one row in the output&quot;. ReadScalars uses InterStorage to read the scalar data. It uses InterInputFormat which extends FileInputFormat and for getSplits(), there is a listStatus on all the files in the dir to construct the splits and then InterRecordReader is used on the splits to read the data.  When the data is really huge with lot of files, this can cause the namenode to go out of memory and crash and especially with the recent optimization change in hadoop 0.23/2.x that uses listLocatedStatus instead of listStatus + getBlockLocations in FileInputFormat to reduce number of calls to Namenode. &lt;/p&gt;

&lt;p&gt; In the particular case we encountered, the join output had 6.5K files. On the job that did ReadScalars, it had 8K+ tasks (with speculative execution) and all of them doing listStatus for the 6.5K files caused NN queue to fill up with huge responses (block locations makes the response even bigger). It also saturated the network, causing responses to build up in NN without being sent finally leading it to crash with OOM.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12689075">PIG-3669</key>
            <summary>Wrong Usage of Scalar can bring down Namenode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jan 2014 19:46:49 +0000</created>
                <updated>Wed, 15 Jan 2014 19:54:26 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13872520" author="rohini" created="Wed, 15 Jan 2014 19:54:26 +0000"  >&lt;p&gt;It would be good to have a different syntax for scalar. But not sure how this can be done without breaking backward compatibility.&lt;/p&gt;

&lt;p&gt;The other solution that I could think of to mitigate the problem was to validate all the ReadScalars UDF in the plan by executing them in the OutputCommitter&apos;s setupJob(). The setupJob() runs once for the job before the map and reduce tasks are launched. It runs as a separate task in Hadoop 1.x and is run as part of the AM in 2.x.  If there is more than 1 record, then the job would fail in the setup phase itself, thus avoiding doing listStatus and loading on all the map or reduce tasks. If it indeed was a scalar, we have an extra load in the setup phase but the cost is minimal as that should at max be 1 file or 1 file with data and other being empty files.&lt;/p&gt;

&lt;p&gt;  Any other good ideas are welcome.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12549345">PIG-2629</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368047</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3668] COR built-in function when atleast one of the coefficient values is NaN</title>
                <link>https://issues.apache.org/jira/browse/PIG-3668</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When passing multiple column keys for Correlation analysis, if coefficient value of one of the combinations is NaN, then the value for all other combinations is not computed.&lt;/p&gt;

&lt;p&gt;Pearson Co-efficient value is NaN if all values for a given column are the same.&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
A = LOAD &apos;myData&apos; USING org.apache.hcatalog.pig.HCatLoader();&lt;br/&gt;
B = group A all;&lt;br/&gt;
c = foreach B generate group, FLATTEN(COR((bag&lt;/p&gt;
{tuple(double)}) A.col_1,(bag{tuple(double)}
&lt;p&gt;) A.col_2, (bag&lt;/p&gt;
{tuple(double)}) A.col_3, (bag{tuple(double)}
&lt;p&gt;) A.col_4));&lt;/p&gt;

&lt;p&gt;If the value of pearson coefficient for col_1 and col_2 is NaN, then value of co-efficients for all combinations is NaN&lt;/p&gt;

&lt;p&gt;This is happening because of &apos;return null&apos; statement in catch block on lines 157 and 235 in file org.apache.pig.builtin.COR.java&lt;br/&gt;
If the catch block is removed, then the correlation analysis would continue for the remaining columns. (ApachePig 0.12.0)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688909">PIG-3668</key>
            <summary>COR built-in function when atleast one of the coefficient values is NaN</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="hitenjava">Hiten Java</assignee>
                                    <reporter username="hitenjava">Hiten Java</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jan 2014 01:23:46 +0000</created>
                <updated>Thu, 16 Jan 2014 21:55:15 +0000</updated>
                                            <version>0.12.0</version>
                    <version>0.11.1</version>
                    <version>0.12.1</version>
                                                    <component>internal-udfs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13871487" author="hitenjava" created="Wed, 15 Jan 2014 01:27:24 +0000"  >&lt;p&gt;Patch file for .12 version.&lt;/p&gt;</comment>
                            <comment id="13872139" author="hitenjava" created="Wed, 15 Jan 2014 14:46:09 +0000"  >&lt;p&gt;Patch file attached.&lt;/p&gt;

&lt;p&gt;Removed return statements from catch block.&lt;/p&gt;</comment>
                            <comment id="13872909" author="daijy" created="Thu, 16 Jan 2014 01:21:22 +0000"  >&lt;p&gt;Will that produce wrong result easily ignored by user? Also there is another occurrence of this pattern in COR.exec, do we need to change that as well?&lt;/p&gt;</comment>
                            <comment id="13874006" author="hitenjava" created="Thu, 16 Jan 2014 21:55:15 +0000"  >&lt;p&gt;If you see the formula for Pearson co-efficient, if there is no deviation at all for all values of x or y, then it results in NaN due to &apos;divide by zero&apos; error.&lt;/p&gt;

&lt;p&gt;Before the change, the indication to the user was NaN values in output for all values. Now, it will only show NaN for the affected columns.&lt;/p&gt;

&lt;p&gt;I have only handled the cases where there is a possibility of &apos;divide by zero&apos;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623150" name="CORR.diff" size="987" author="hitenjava" created="Wed, 15 Jan 2014 14:46:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Jan 2014 01:21:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367883</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3667] build.xml jar-all target does not include jython*.jar in lib/ directory </title>
                <link>https://issues.apache.org/jira/browse/PIG-3667</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig package does not include the jython jar within lib/ directory  with the jar-all ant target but includes it in the &quot;ant package&quot; target. It should be including it in both targets as often, the build/ directory is excluded from packaging which is where ivy puts all the dependency jars while building under build/ivy/lib/Pig  &lt;/p&gt;

&lt;p&gt;To reproduce:&lt;br/&gt;
ant jar-all &lt;br/&gt;
rm -rf build/ &lt;br/&gt;
bin/pig&lt;br/&gt;
grunt&amp;gt; register &apos;/tmp/test.py&apos; using jython as myfunction;&lt;/p&gt;

&lt;p&gt;If done prior to installing jython, here&apos;s the error one gets:&lt;br/&gt;
2013-12-27 18:22:31,145 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR&lt;br/&gt;
2998: Unhandled internal error. org/python/core/PyObject&lt;br/&gt;
Details at logfile: pig_*.log&lt;/p&gt;

&lt;p&gt;Within the pig_*.log =&amp;gt; &lt;/p&gt;

&lt;p&gt;&amp;lt;log&amp;gt;&lt;/p&gt;

&lt;p&gt;Pig Stack Trace&lt;br/&gt;
---------------&lt;br/&gt;
ERROR 2998: Unhandled internal error. org/python/core/PyObject&lt;/p&gt;

&lt;p&gt;java.lang.NoClassDefFoundError: org/python/core/PyObject&lt;br/&gt;
        at&lt;br/&gt;
org.apache.pig.scripting.jython.JythonScriptEngine.registerFunctions(JythonScriptEngine.java:304)&lt;br/&gt;
        at org.apache.pig.PigServer.registerCode(PigServer.java:501)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.pig.tools.grunt.GruntParser.processRegister(GruntParser.java:436)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:445)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:194)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:170)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:69)&lt;br/&gt;
        at org.apache.pig.Main.run(Main.java:538)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:157)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:197)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.python.core.PyObject&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;br/&gt;
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)&lt;br/&gt;
        ... 14 more&lt;/p&gt;


&lt;p&gt;Fix: Including jython*.jar within the lib/ directory gets rid of this issue and the UDF can be loaded- &lt;br/&gt;
grunt&amp;gt;  register &apos;/tmp/test.py&apos; using jython as myfuncs;&lt;/p&gt;

&lt;p&gt;2013-12-27 18:37:02,402 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO &lt;br/&gt;
org.apache.pig.scripting.jython.JythonScriptEngine - created tmp&lt;br/&gt;
python.cachedir=/tmp/pig_jython_4887743829482443898&lt;br/&gt;
2013-12-27 18:37:03,448 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN &lt;br/&gt;
org.apache.pig.scripting.jython.JythonScriptEngine - pig.cmd.args.remainders is&lt;br/&gt;
empty. This is not expected unless on testing.&lt;br/&gt;
2013-12-27 18:37:03,724 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO &lt;br/&gt;
org.apache.pig.scripting.jython.JythonScriptEngine - Register scripting UDF:&lt;br/&gt;
myfuncs.helloworld&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688897">PIG-3667</key>
            <summary>build.xml jar-all target does not include jython*.jar in lib/ directory </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="suhassatish">Suhas Satish</assignee>
                                    <reporter username="suhassatish">Suhas Satish</reporter>
                        <labels>
                            <label>build</label>
                    </labels>
                <created>Wed, 15 Jan 2014 00:35:08 +0000</created>
                <updated>Fri, 31 Jan 2014 00:18:34 +0000</updated>
                            <resolved>Wed, 15 Jan 2014 18:56:47 +0000</resolved>
                                    <version>0.12.0</version>
                                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13872986" author="cheolsoo" created="Thu, 16 Jan 2014 02:38:05 +0000"  >&lt;p&gt;This patch is not committed but marked as resolved.&lt;/p&gt;

&lt;p&gt;I was trying to edit the status to &quot;won&apos;t fix&quot; and accidentally changed to &quot;closed&quot;...&lt;/p&gt;</comment>
                            <comment id="13881552" author="suhassatish" created="Sat, 25 Jan 2014 00:19:12 +0000"  >&lt;p&gt;Any reason why this wont be fixed? &lt;/p&gt;</comment>
                            <comment id="13881562" author="cheolsoo" created="Sat, 25 Jan 2014 00:39:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=suhassatish&quot; class=&quot;user-hover&quot; rel=&quot;suhassatish&quot;&gt;Suhas Satish&lt;/a&gt;, you marked the jira as &quot;fixed&quot; by yourself even though the patch was not committed. Why did you do you that? Wasn&apos;t that because you don&apos;t need to fix it anymore?&lt;/p&gt;</comment>
                            <comment id="13887164" author="suhassatish" created="Thu, 30 Jan 2014 22:15:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;- Sorry, I accidentally marked it as &quot;fixed&quot;. The intention was to fix it and get the patch committed to pig trunk since the build/ directory where the jython standalone jar currently resides is not packaged in production environments. It is desirable to have it in $PIG_HOME/lib/ directory in the package. &lt;/p&gt;</comment>
                            <comment id="13887255" author="daijy" created="Thu, 30 Jan 2014 23:38:10 +0000"  >&lt;p&gt;Since it is &quot;closed&quot;, there is no way to reopen, can you open a new Jira?&lt;/p&gt;</comment>
                            <comment id="13887293" author="suhassatish" created="Fri, 31 Jan 2014 00:18:34 +0000"  >&lt;p&gt;I have created a clone here &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3734&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-3734&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623037" name="PIG-3667.patch" size="816" author="suhassatish" created="Wed, 15 Jan 2014 01:08:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Jan 2014 02:38:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367869</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367871</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3666] Fix store after load</title>
                <link>https://issues.apache.org/jira/browse/PIG-3666</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Several e2e test fail share the following pattern:&lt;/p&gt;

&lt;p&gt;.....&lt;br/&gt;
store into &apos;afile&apos;;&lt;br/&gt;
a = load &apos;afile&apos;;&lt;br/&gt;
......&lt;/p&gt;

&lt;p&gt;Stack:&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.pig.impl.plan.OperatorPlan.checkInPlan(OperatorPlan.java:435)&lt;br/&gt;
        at org.apache.pig.impl.plan.OperatorPlan.connect(OperatorPlan.java:173)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.tez.TezCompiler.compile(TezCompiler.java:328)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.tez.TezCompiler.compile(TezCompiler.java:337)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.tez.TezCompiler.compile(TezCompiler.java:337)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.tez.TezCompiler.compile(TezCompiler.java:215)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.tez.TezLauncher.compile(TezLauncher.java:152)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.tez.TezLauncher.launchPig(TezLauncher.java:72)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.launchPig(HExecutionEngine.java:344)&lt;br/&gt;
        ... 16 more&lt;/p&gt;


&lt;p&gt;It needs to break into two DAGs since the second DAG expect hdfs input produced by the first DAG.&lt;/p&gt;

&lt;p&gt;Example of such e2e test failures are: Casts_&lt;span class=&quot;error&quot;&gt;&amp;#91;1-6&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688871">PIG-3666</key>
            <summary>Fix store after load</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jan 2014 22:41:56 +0000</created>
                <updated>Tue, 14 Jan 2014 23:00:39 +0000</updated>
                            <resolved>Tue, 14 Jan 2014 23:00:29 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13871327" author="rohini" created="Tue, 14 Jan 2014 22:55:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13871333" author="daijy" created="Tue, 14 Jan 2014 23:00:29 +0000"  >&lt;p&gt;Patch committed to Tez branch. Thanks Rohini for review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623003" name="PIG-3666-1.patch" size="1011" author="daijy" created="Tue, 14 Jan 2014 22:42:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Jan 2014 22:55:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367843</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367845</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3665] TEZ-41 break pig-tez</title>
                <link>https://issues.apache.org/jira/browse/PIG-3665</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-41&quot; title=&quot;Get VertexCommitter from API and remove MRVertexOutputCommitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-41&quot;&gt;&lt;del&gt;TEZ-41&lt;/del&gt;&lt;/a&gt; introduce a backward incompatible change and Pig need to change accordingly. Please update tez code once the change is checked into Pig.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688866">PIG-3665</key>
            <summary>TEZ-41 break pig-tez</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jan 2014 22:02:55 +0000</created>
                <updated>Tue, 14 Jan 2014 22:58:25 +0000</updated>
                            <resolved>Tue, 14 Jan 2014 22:58:25 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13871316" author="rohini" created="Tue, 14 Jan 2014 22:49:09 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13871331" author="daijy" created="Tue, 14 Jan 2014 22:58:25 +0000"  >&lt;p&gt;Patch committed to tez-branch. &lt;/p&gt;

&lt;p&gt;FYI, without this patch, with newer version of tez, we will get empty result.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622997" name="PIG-3665-1.patch" size="1181" author="daijy" created="Tue, 14 Jan 2014 22:03:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Jan 2014 22:49:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367840</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3664] Piggy Bank XPath UDF can&apos;t be called</title>
                <link>https://issues.apache.org/jira/browse/PIG-3664</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When I try to call XPath UDF to process a very simple XML with Pig 0.12 I get the problem:&lt;br/&gt;
2014-01-13 16:14:19,530 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1045: &lt;br/&gt;
&amp;lt;line 3, column 25&amp;gt; Could not infer the matching function for org.apache.pig.piggybank.evaluation.xml.XPath as multiple or none of them fit. Please use an explicit cast. I guess the XPath UDF overrides the getArgToFuncMapping() in an incorrect way. A fixed is attached.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12688653">PIG-3664</key>
            <summary>Piggy Bank XPath UDF can&apos;t be called</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nezihyigitbasi">Nezih Yigitbasi</assignee>
                                    <reporter username="nezihyigitbasi">Nezih Yigitbasi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jan 2014 01:09:00 +0000</created>
                <updated>Thu, 16 Jan 2014 00:46:01 +0000</updated>
                            <resolved>Thu, 16 Jan 2014 00:46:01 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13870231" author="nezihyigitbasi" created="Tue, 14 Jan 2014 01:10:55 +0000"  >&lt;p&gt;I just removed the getArgToFuncMapping() implementation as I guess this is not necessary; this UDF doesn&apos;t need to implement multiple UDF versions for different inputs. &lt;/p&gt;</comment>
                            <comment id="13871380" author="daijy" created="Tue, 14 Jan 2014 23:41:52 +0000"  >&lt;p&gt;getArgToFuncMapping still better cuz we can capture schema mismatch in the frontend. I would prefer fix it rather than get rid of it.&lt;/p&gt;</comment>
                            <comment id="13871413" author="nezihyigitbasi" created="Wed, 15 Jan 2014 00:10:31 +0000"  >&lt;p&gt;Attached a new patch that implements the getArgToFuncMapping method.&lt;/p&gt;</comment>
                            <comment id="13872887" author="daijy" created="Thu, 16 Jan 2014 00:46:01 +0000"  >&lt;p&gt;Patch committed to trunk. Thanks Nezih!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623022" name="PIG-3664.1.patch" size="2126" author="nezihyigitbasi" created="Wed, 15 Jan 2014 00:10:31 +0000"/>
                            <attachment id="12622757" name="PIG-3664.patch" size="869" author="nezihyigitbasi" created="Tue, 14 Jan 2014 01:10:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Jan 2014 23:41:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367677</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3663] Having option to ignore NULL column in HBaseStorage</title>
                <link>https://issues.apache.org/jira/browse/PIG-3663</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Adding a feature in HBaseStorage, Such that, if user does not want to put the columns having NULL value into HBase tables. We can have an option say &quot;-ignoreNull&quot;, when set to true ignores inserting null column into tables. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12688625">PIG-3663</key>
            <summary>Having option to ignore NULL column in HBaseStorage</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="muruganmscit">Balamurugan Muthu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jan 2014 22:26:14 +0000</created>
                <updated>Mon, 13 Jan 2014 22:26:57 +0000</updated>
                                                                            <component>internal-udfs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367649</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3662] Static loadcaster in BinStorage can cause exception</title>
                <link>https://issues.apache.org/jira/browse/PIG-3662</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;I came a cross this issue when testing &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3642&quot; title=&quot;Direct HDFS access for small jobs (fetch) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3642&quot;&gt;&lt;del&gt;PIG-3642&lt;/del&gt;&lt;/a&gt;. Consider the following two testcases from &lt;tt&gt;TestEvalPipeline2&lt;/tt&gt; executed in local mode:&lt;br/&gt;
&lt;tt&gt;testBinStorageByteCast&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &apos;table_testBinStorageByteCast&apos; as (a0, a1, a2);
store A into &apos;table_testBinStorageByteCast.temp&apos; using BinStorage();
A = load &apos;table_testBinStorageByteCast.temp&apos; using BinStorage() as (a0, a1, a2);
B = foreach A generate (&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)a0;
dump B;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;testBinStorageByteArrayCastsSimple&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &apos;table_bs_ac&apos;;
store A into &apos;TestEvalPipeline2_BinStorageByteArrayCasts&apos; using
  org.apache.pig.builtin.BinStorage();
B = load &apos;TestEvalPipeline2_BinStorageByteArrayCasts&apos;  using 
  BinStorage(&apos;Utf8StorageConverter&apos;) as (name: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, age: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, gpa: &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;, 
lage: &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, dgpa: &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;); 
dump B;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first testcase should fail (same example at: &lt;a href=&quot;http://pig.apache.org/docs/r0.12.0/func.html#binstorage&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pig.apache.org/docs/r0.12.0/func.html#binstorage&lt;/a&gt;) while the second one should pass.&lt;br/&gt;
When I run &lt;b&gt;only&lt;/b&gt; &lt;em&gt;testBinStorageByteArrayCastsSimple&lt;/em&gt; there&apos;s no problem, but when it runs &lt;b&gt;after&lt;/b&gt; &lt;em&gt;testBinStorageByteCast&lt;/em&gt;, it fails with the same exception as &lt;em&gt;testBinStorageByteArrayCastsSimple&lt;/em&gt; :&lt;br/&gt;
&lt;tt&gt;java.lang.Exception: org.apache.pig.backend.executionengine.ExecException: ERROR 1118: Cannot cast bytes loaded from BinStorage. Please provide a custom converter.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Reason:&lt;br/&gt;
When &apos;table_testBinStorageByteCast.temp&apos; is loaded, &lt;em&gt;BinStorage#getLoadCaster()&lt;/em&gt; sets &lt;em&gt;UnImplementedLoadCaster&lt;/em&gt; since casterString is not defined. This causes the exception when &lt;em&gt;BinStorage#bytesToLong()&lt;/em&gt; is called during the cast of a0 which is correct. Now move on to the next testcase where &lt;em&gt;&apos;TestEvalPipeline2_BinStorageByteArrayCasts&apos;&lt;/em&gt; is loaded. We expect BinStorage to use &lt;em&gt;Utf8StorageConverter&lt;/em&gt; as a loadcaster but it will use &lt;em&gt;UnImplementedLoadCaster&lt;/em&gt; instead, which results in an exception. It&apos;s because caster and casterString are &lt;b&gt;static&lt;/b&gt; variables in BinStorage, however these are set and accessed like instance variables. Therefore, when BinStorage(&apos;Utf8StorageConverter&apos;) gets instantiated, it will contain the already initialized caster from the previous run. &lt;em&gt;BinStorage#getLoadCaster()&lt;/em&gt; will just return this instead of instantiating Utf8StorageConverter from the provided constructor parameter.&lt;/p&gt;

&lt;p&gt;Are caster and casterString just by accident static? If so, I&apos;d address this issue with the patch attached.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12688343">PIG-3662</key>
            <summary>Static loadcaster in BinStorage can cause exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lbendig">Lorand Bendig</assignee>
                                    <reporter username="lbendig">Lorand Bendig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jan 2014 22:18:29 +0000</created>
                <updated>Sat, 11 Jan 2014 00:14:33 +0000</updated>
                            <resolved>Sat, 11 Jan 2014 00:06:10 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13868497" author="rohini" created="Sat, 11 Jan 2014 00:06:10 +0000"  >&lt;p&gt;+1. Commited to trunk. Thanks Lorand.&lt;/p&gt;

&lt;p&gt;Please do click on &quot;Submit Patch&quot; next time for it to show up in the Patch Available notifications.&lt;/p&gt;</comment>
                            <comment id="13868509" author="lbendig" created="Sat, 11 Jan 2014 00:14:33 +0000"  >&lt;p&gt;OK, sure. Thank you for committing it!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622450" name="PIG-3662.patch" size="678" author="lbendig" created="Fri, 10 Jan 2014 22:19:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 11 Jan 2014 00:06:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3661] Piggybank AvroStorage fails if used in more than one load or store statement</title>
                <link>https://issues.apache.org/jira/browse/PIG-3661</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;To reproduce:&lt;br/&gt;
A =load &apos;/tmp/data&apos; as (a1:int, a2:int, a3:int);&lt;br/&gt;
B = load &apos;/tmp/data1&apos; as (b1:chararray, b2:chararray, b3:chararray);&lt;br/&gt;
store A into &apos;/tmp/out/a&apos; using org.apache.pig.piggybank.storage.avro.AvroStorage();&lt;br/&gt;
store B into &apos;/tmp/out2/b&apos; using org.apache.pig.piggybank.storage.avro.AvroStorage();&lt;/p&gt;

&lt;p&gt;It either fails in the map job if schema is incompatible, or B gets schema of A and B merged leading to incorrect results.&lt;/p&gt;

&lt;p&gt;Reason is schema is stored and accessed from a property of UDFContext without using a context signature.&lt;/p&gt;

&lt;p&gt;UDFContext context = UDFContext.getUDFContext();&lt;br/&gt;
        Properties property = context.getUDFProperties(ResourceSchema.class);&lt;br/&gt;
        String prevSchemaStr = property.getProperty(AVRO_OUTPUT_SCHEMA_PROPERTY);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688111">PIG-3661</key>
            <summary>Piggybank AvroStorage fails if used in more than one load or store statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jan 2014 18:03:27 +0000</created>
                <updated>Fri, 24 Jan 2014 22:24:42 +0000</updated>
                            <resolved>Fri, 24 Jan 2014 22:24:42 +0000</resolved>
                                    <version>0.11.1</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13880376" author="rohini" created="Thu, 23 Jan 2014 21:22:59 +0000"  >&lt;p&gt;This patch fixes other issues with AvroStorage as well apart from fixing multiple load and store&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Hidden files were not excluded (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3717&quot; title=&quot;AvroStorage is not filtering hidden files on directory recursion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3717&quot;&gt;&lt;del&gt;PIG-3717&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;mapred.input.dir was getting populated with all files instead of the top level directory making the conf very big&lt;/li&gt;
	&lt;li&gt;Default value was not set for a Union&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/17266/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17266/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13881487" author="rohini" created="Fri, 24 Jan 2014 22:24:42 +0000"  >&lt;p&gt;Committed to trunk. Thanks Cheolsoo for the review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12690788">PIG-3717</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12624915" name="PIG-3661-1.patch" size="28777" author="rohini" created="Thu, 23 Jan 2014 21:23:14 +0000"/>
                            <attachment id="12625102" name="PIG-3661-2.patch" size="29102" author="rohini" created="Fri, 24 Jan 2014 20:28:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3660] Pig fails without writing log file if script contains %default $varName &apos;X&apos;</title>
                <link>https://issues.apache.org/jira/browse/PIG-3660</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;%default $varName  &apos;X&apos; Is not legal pig latin command. The variable should not  contain &quot;$&quot;, correct command is  %default varName  &apos;X&apos; . Pig in case writes this to command line:&lt;/p&gt;

&lt;p&gt;2014-01-09 13:56:07,100 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.Main - Apache Pig version 0.11.0-cdh4.3.1 (rexported) compiled Aug 14 2013, 03:46:24&lt;br/&gt;
2014-01-09 13:56:07,100 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.Main - Logging error messages to: /tmp/pig_1389272167098.log&lt;/p&gt;


&lt;p&gt;But fails without even creating the log file.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688064">PIG-3660</key>
            <summary>Pig fails without writing log file if script contains %default $varName &apos;X&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lukas.nalezenec">Lukas Nalezenec</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jan 2014 13:39:58 +0000</created>
                <updated>Thu, 9 Jan 2014 13:39:58 +0000</updated>
                                            <version>0.11</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367075</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3659] Memory management for each vertex</title>
                <link>https://issues.apache.org/jira/browse/PIG-3659</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;We need to configure appropriate memory options for each vertex.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687903">PIG-3659</key>
            <summary>Memory management for each vertex</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 17:31:52 +0000</created>
                <updated>Thu, 9 Jan 2014 23:43:27 +0000</updated>
                                                            <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13865666" author="rohini" created="Wed, 8 Jan 2014 17:36:41 +0000"  >&lt;p&gt;  Current code just defaults to 1G for each vertex to get things to work. &lt;/p&gt;

&lt;p&gt;We need to &lt;br/&gt;
   1) Classify whether a vertex is a map or reduce and set java.opts (mapreduce.map.java.opts or mapreduce.reduce.java.opts), memory.mb (mapreduce.map.memory.mb or mapreduce.reduce.memory.mb) and env (mapreduce.map.env or mapreduce.reduce.env) accordingly on the vertex. A simple thing would be to assume all root vertexes to be map vertexes and intermediate or leaf vertexes to be reduce vertexes.&lt;br/&gt;
   2) Even for a map vertex, if there are multiple outputs more memory is required as combine and sort happens on each output. Similarly on a reduce vertex if there are multiple inputs shuffle and sort happens on each  input thus requiring more memory than the traditional map or reduce. i.e the sort buffers (io.sort.mb) and buffer for holding each record before serializing or deserializing them take up memory. For eg: With 3 inputs or outputs, thrice the amount of memory is tried to be allocated for the buffers leading to OOM. Increasing memory for a vertex based on number of inputs or outputs might not solve the problem totally. This is something we will have to talk to Tez guys to see how effectively this can be solved.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12688162">TEZ-719</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366915</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3658] Use Tez ObjectRegistry to cache FRJoin map and WeightedRangePartitioner map</title>
                <link>https://issues.apache.org/jira/browse/PIG-3658</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Tez provides way to cache objects with Vertex scope. We can use it to &lt;br/&gt;
  1) caching the replication join map constructed instead of reading from multiple broadcast inputs from one or more vertex and reconstructing it&lt;br/&gt;
  2) Cache the map in WeightedRangePartitioner. Thought the quantilefile is only one brodcast input from one vertex still it would be faster to use the local cache.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687900">PIG-3658</key>
            <summary>Use Tez ObjectRegistry to cache FRJoin map and WeightedRangePartitioner map</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 17:24:03 +0000</created>
                <updated>Mon, 27 Jan 2014 20:50:19 +0000</updated>
                            <resolved>Mon, 27 Jan 2014 20:50:19 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13882601" author="rohini" created="Mon, 27 Jan 2014 06:41:33 +0000"  >&lt;p&gt;Patch caches for the other broadcast inputs - POPartitionRearrangeTez.java and SkewedPartitionerTez.java - as well.&lt;/p&gt;</comment>
                            <comment id="13883092" author="cheolsoo" created="Mon, 27 Jan 2014 18:47:19 +0000"  >&lt;p&gt;+1. &lt;/p&gt;</comment>
                            <comment id="13883266" author="rohini" created="Mon, 27 Jan 2014 20:50:19 +0000"  >&lt;p&gt;Committed to tez-branch. Thanks Cheolsoo for the review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12687910">TEZ-711</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12625328" name="PIG-3658-1.patch" size="26852" author="rohini" created="Mon, 27 Jan 2014 06:41:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jan 2014 18:47:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3657] New partition filter extractor fails with NPE</title>
                <link>https://issues.apache.org/jira/browse/PIG-3657</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;To reproduce the issue, try a filter expression as follows-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
b = FILTER a BY partition_column &amp;lt; x OR (partition_column == y AND non-partition_column == z); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Pig fails with NPE, and the stack trace is something like this-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.NullPointerException
    at org.apache.pig.newplan.FilterExtractor.checkPushDown(FilterExtractor.java:252)
    at org.apache.pig.newplan.FilterExtractor.visit(FilterExtractor.java:115)
    at org.apache.pig.newplan.logical.rules.PartitionFilterOptimizer$PartitionFilterPushDownTransformer.transform(PartitionFilterOptimizer.java:150)
    at org.apache.pig.newplan.optimizer.PlanOptimizer.optimize(PlanOptimizer.java:110)
    ... 18 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12687899">PIG-3657</key>
            <summary>New partition filter extractor fails with NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 17:18:31 +0000</created>
                <updated>Thu, 9 Jan 2014 18:30:50 +0000</updated>
                            <resolved>Thu, 9 Jan 2014 18:30:50 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13865665" author="cheolsoo" created="Wed, 8 Jan 2014 17:35:56 +0000"  >&lt;p&gt;The patch includes a unit test that demonstrates the issue. Without the fix, the test throws a NPE.&lt;/p&gt;

&lt;p&gt;Regarding the cause, the filtered plan returned by FilterExtrator is not always translatable to physical plan because newly added OR/AND expressions do not copy successors.&lt;/p&gt;

&lt;p&gt;For the aforementioned example, FilterExtractor returns the following filtered plan-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(Name: Or Type: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; Uid: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
|
|---(Name: LessThan Type: &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; Uid: 112)
|
|---(Name: Equal Type: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; Uid: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    |
    |---(Name: Project Type: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; Uid: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; Input: 0 Column: 42)
    |
    |---(Name: Constant Type: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; Uid: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As can be seen, LessThan has no children resulting in NPE while converting it to physical plan.&lt;/p&gt;</comment>
                            <comment id="13865716" author="aniket486" created="Wed, 8 Jan 2014 18:19:17 +0000"  >&lt;p&gt;Good catch! +1.&lt;/p&gt;</comment>
                            <comment id="13866092" author="cheolsoo" created="Thu, 9 Jan 2014 00:11:01 +0000"  >&lt;p&gt;Thank you Aniket for the review. I will commit it after running unit tests.&lt;/p&gt;</comment>
                            <comment id="13866886" author="cheolsoo" created="Thu, 9 Jan 2014 18:30:50 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622002" name="PIG-3657-1.patch" size="4277" author="cheolsoo" created="Wed, 8 Jan 2014 17:35:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Jan 2014 18:19:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366911</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3656] Exception on storing Null value through AvroStorage using PIG</title>
                <link>https://issues.apache.org/jira/browse/PIG-3656</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Getting exception on storing null valued record/tupple as avro.&lt;br/&gt;
The input file having one column with long values (one of them is null means nothing) and when I am trying to store the data in avro format ,it throws error.&lt;br/&gt;
Please suggest if I am missing any thing some where as per the bellow codebase or else please provide the patch.&lt;br/&gt;
input file: /home/hadoop/work/sudhir/AvroAnalysis/input/TSV_uncompressed/part*&lt;br/&gt;
content: &lt;br/&gt;
2037179309&lt;br/&gt;
2037179338&lt;br/&gt;
2037179367&lt;br/&gt;
2037179433&lt;br/&gt;
2037179437&lt;br/&gt;
2037179449&lt;br/&gt;
2037179547&lt;br/&gt;
2037179631&lt;br/&gt;
2037179631&lt;/p&gt;

&lt;p&gt;2037179309&lt;br/&gt;
2037179338&lt;br/&gt;
2037179367&lt;br/&gt;
2037179433&lt;br/&gt;
2037179437&lt;br/&gt;
2037179449&lt;br/&gt;
2037179547&lt;br/&gt;
2037179631&lt;br/&gt;
2037179631&lt;/p&gt;


&lt;p&gt;******My code base.&lt;br/&gt;
REGISTER /home/hadoop/work/sudhir/AvroAnalysis/Avrojars/snappy-java-1.0.4.1.jar&lt;br/&gt;
REGISTER /home/hadoop/work/sudhir/AvroAnalysis/Avrojars/avro-1.7.5.jar&lt;br/&gt;
REGISTER /home/hadoop/work/sudhir/AvroAnalysis/Avrojars/json-simple-1.1.jar;&lt;br/&gt;
REGISTER /home/hadoop/work/sudhir/AvroAnalysis/Avrojars/piggybank.jar;&lt;br/&gt;
REGISTER /home/hadoop/work/sudhir/AvroAnalysis/Avrojars/jackson-core-asl-1.5.5.jar;&lt;br/&gt;
REGISTER /home/hadoop/work/sudhir/AvroAnalysis/Avrojars/jackson-mapper-asl-1.5.5.jar;&lt;br/&gt;
&#8211; The input file only have 1 column (normal TEXT data i.e TSV format) and the file having a null value means nothing&lt;br/&gt;
A = load &apos;/home/hadoop/work/sudhir/AvroAnalysis/input/TSV_uncompressed/part*&apos; using PigStorage(&apos;\t&apos;) as (USER_ID:long);&lt;br/&gt;
&#8211; The soutput to be stored in avro data format&lt;br/&gt;
STORE A INTO &apos;/home/hadoop/work/sudhir/AvroAnalysis/output/AvroStore/&apos; USING org.apache.pig.piggybank.storage.avro.AvroStorage(&apos;schema&apos;,&apos;{&quot;namespace&quot;:&quot;com.sudhir.schema.users.avro&quot;,&quot;type&quot;:&quot;long&quot;,&quot;name&quot;:&quot;users_avro&quot;,&quot;doc&quot;:&quot;Avro storing with schema using Pig.&quot;,&quot;fields&quot;:[&lt;/p&gt;
{&quot;name&quot;:&quot;USER_ID&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;long&quot;],&quot;default&quot;:null}
&lt;p&gt;]}&apos;);&lt;br/&gt;
*******Getting Error like:&lt;br/&gt;
INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
ERROR org.apache.pig.tools.pigstats.PigStats - ERROR 2997: Unable to recreate exception from backed error: org.apache.avro.file.DataFileWriter$AppendWriteException: java.lang.NullPointerException: null of long&lt;br/&gt;
ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hadoop 0.20.2-cdh3u5&lt;br/&gt;
Apache Pig version 0.8.1-cdh3u5&lt;br/&gt;
java version &quot;1.6.0_27&quot;&lt;/p&gt;</environment>
        <key id="12687806">PIG-3656</key>
            <summary>Exception on storing Null value through AvroStorage using PIG</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sudhirranjan">Sudhir Ranjan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 05:21:35 +0000</created>
                <updated>Thu, 16 Jan 2014 10:30:29 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>features,patch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[PIG-3655] BinStorage and InterStorage approach to record markers is broken</title>
                <link>https://issues.apache.org/jira/browse/PIG-3655</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The way that the record readers for these storage formats seek to the first record in an input split is to find the byte sequence 1 2 3 110 for BinStorage or 1 2 3 19-21|28-30|36-45 for InterStorage. If this sequence occurs in the data for any reason (for example the integer 16909166 stored big endian encodes to the byte sequence for BinStorage) other than to mark the start of a tuple it can cause mysterious failures in pig jobs because the record reader will try to decode garbage and fail.&lt;/p&gt;

&lt;p&gt;For this approach of using an unlikely sequence to mark record boundaries, it is important to reduce the probability of the sequence occuring naturally in the data by ensuring that your record marker is sufficiently long. Hadoop SequenceFile uses 128 bits for this and randomly generates the sequence for each file (selecting a fixed, predetermined value opens up the possibility of a mean person intentionally sending you that value). This makes it extremely unlikely that collisions will occur. In the long run I think that pig should also be doing this.&lt;/p&gt;

&lt;p&gt;As a quick fix it might be good to save the current position in the file before entering readDatum, and if an exception is thrown seek back to the saved position and resume trying to find the next record marker.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687778">PIG-3655</key>
            <summary>BinStorage and InterStorage approach to record markers is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jeffplaisance">Jeff Plaisance</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 01:08:01 +0000</created>
                <updated>Wed, 8 Jan 2014 01:12:16 +0000</updated>
                                            <version>0.2.0</version>
                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.5.0</version>
                    <version>0.6.0</version>
                    <version>0.7.0</version>
                    <version>0.8.0</version>
                    <version>0.8.1</version>
                    <version>0.9.0</version>
                    <version>0.9.1</version>
                    <version>0.9.2</version>
                    <version>0.10.0</version>
                    <version>0.11</version>
                    <version>0.10.1</version>
                    <version>0.12.0</version>
                    <version>0.11.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13864954" author="jeffplaisance" created="Wed, 8 Jan 2014 01:10:35 +0000"  >&lt;p&gt;see also &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-648&quot; title=&quot;BinStorage fails when it finds markers unexpectedly in the data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-648&quot;&gt;&lt;del&gt;PIG-648&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-691&quot; title=&quot;BinStorage skips tuples when ^A is present in data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-691&quot;&gt;&lt;del&gt;PIG-691&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-814&quot; title=&quot;Make Binstorage more robust when data contains record markers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-814&quot;&gt;&lt;del&gt;PIG-814&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366783</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366785</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3654] Add class cache to PigContext</title>
                <link>https://issues.apache.org/jira/browse/PIG-3654</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;While benchmarking compile time for a large scripts, I noticed that class lookups for UDFs accounted for a significant amount of time. Adding a simple cache for looked up classes would speed up compile time noticeably.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687662">PIG-3654</key>
            <summary>Add class cache to PigContext</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tmwoodruff">Travis Woodruff</assignee>
                                    <reporter username="tmwoodruff">Travis Woodruff</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 15:27:07 +0000</created>
                <updated>Wed, 22 Jan 2014 18:48:50 +0000</updated>
                            <resolved>Wed, 22 Jan 2014 18:48:50 +0000</resolved>
                                    <version>0.12.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13864340" author="tmwoodruff" created="Tue, 7 Jan 2014 15:42:04 +0000"  >&lt;p&gt;Patch with class cache and test. This patch has the cache enabled by default.&lt;/p&gt;

&lt;p&gt;Result of perf test on my machine (5000 lookups of the same class), values in ms:&lt;/p&gt;

&lt;p&gt;Cache Disabled: 1247&lt;br/&gt;
Cache Enabled: 8&lt;/p&gt;
</comment>
                            <comment id="13864778" author="daijy" created="Tue, 7 Jan 2014 22:35:17 +0000"  >&lt;p&gt;Is there any case we need to set classCacheEnabled to false? Shall we hardcode it to true?&lt;/p&gt;</comment>
                            <comment id="13865548" author="rohini" created="Wed, 8 Jan 2014 15:27:33 +0000"  >&lt;p&gt;Can we have some assert in the testcase bounded on max time expected? With just SOPs, even if it is taking more time in the future there is no way to catch it.&lt;/p&gt;</comment>
                            <comment id="13865599" author="tmwoodruff" created="Wed, 8 Jan 2014 16:32:46 +0000"  >&lt;p&gt;Daniel, I can&apos;t think of a reason for setting classCacheEnabled to false. I added it primarily so I could add the enabled vs disabled test. If we&apos;re satisfied with the approach, I can remove the flag.&lt;/p&gt;

&lt;p&gt;Rohini, do you mean an assert on absolute max time (e.g., 500 ms)? I thought about adding that, but I was worried that load on the build server might cause it to fail in the absence of an actual performance regression. Happy to add it if you don&apos;t have that concern.&lt;/p&gt;</comment>
                            <comment id="13865695" author="rohini" created="Wed, 8 Jan 2014 18:07:00 +0000"  >&lt;p&gt;  You are right about slow machines taking time and causing test failures. Come to think of it wondering if we even need the test. Obviously caching and fetching from map is going to be better than doing reflection. If we are keeping caching default and no option to turn it off, I think we can just remove the test. We usually don&apos;t have a before and after or with and without test when we do performance fixes. You can just document the performance numbers here in this jira. &lt;/p&gt;</comment>
                            <comment id="13878661" author="tmwoodruff" created="Wed, 22 Jan 2014 13:55:33 +0000"  >&lt;p&gt;New patch that removes enabmement flag (cache is always used) and removes the performance test.&lt;/p&gt;</comment>
                            <comment id="13878998" author="daijy" created="Wed, 22 Jan 2014 18:48:50 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;Patch committed to trunk. Thanks Travis!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624346" name="PIG-3654-2.patch" size="3504" author="tmwoodruff" created="Wed, 22 Jan 2014 13:55:33 +0000"/>
                            <attachment id="12621799" name="PIG-3654.patch" size="4956" author="tmwoodruff" created="Tue, 7 Jan 2014 15:42:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jan 2014 22:35:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Cache resolved classes in PigContext to improve script compile performance</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3653] Add support for pre-deployed jars</title>
                <link>https://issues.apache.org/jira/browse/PIG-3653</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;This may be a niche use case, but this is a simple change that may be useful to others.&lt;/p&gt;

&lt;p&gt;When jobs are started from a network not local to the the Hadoop cluster, the upload of the job jars can take a significant amount of time. This can be ameliorated by preinstalling large libraries on the Hadoop slaves. However, there are certain jars (or parts of jars, e.g., the pig classes) that cannot be skipped using the existing PigContext.skipJars functionality, since when specific packages are specified, skipJars are not skipped.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12687651">PIG-3653</key>
            <summary>Add support for pre-deployed jars</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tmwoodruff">Travis Woodruff</assignee>
                                    <reporter username="tmwoodruff">Travis Woodruff</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 14:35:54 +0000</created>
                <updated>Thu, 9 Jan 2014 19:35:39 +0000</updated>
                            <resolved>Thu, 9 Jan 2014 19:35:39 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13864298" author="tmwoodruff" created="Tue, 7 Jan 2014 14:47:48 +0000"  >&lt;p&gt;This patch adds a predeployedJars list to PigContext. JarManager skips adding these jars in all circumstances.&lt;/p&gt;</comment>
                            <comment id="13864316" author="tmwoodruff" created="Tue, 7 Jan 2014 15:03:40 +0000"  >&lt;p&gt;Noticed a typo in test class name. Fixing.&lt;/p&gt;</comment>
                            <comment id="13864318" author="tmwoodruff" created="Tue, 7 Jan 2014 15:05:05 +0000"  >&lt;p&gt;Added new patch with fix to test class name&lt;/p&gt;</comment>
                            <comment id="13864750" author="daijy" created="Tue, 7 Jan 2014 22:10:16 +0000"  >&lt;p&gt;Sounds good to me. Should we provide a property for script mode as well?&lt;/p&gt;</comment>
                            <comment id="13865593" author="tmwoodruff" created="Wed, 8 Jan 2014 16:18:28 +0000"  >&lt;p&gt;Good idea. New patch attached that reads a pig.predeployed.jars property.&lt;/p&gt;</comment>
                            <comment id="13866953" author="daijy" created="Thu, 9 Jan 2014 19:35:39 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;Patch committed to trunk. Thanks Travis!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621796" name="PIG-3653-2.patch" size="5240" author="tmwoodruff" created="Tue, 7 Jan 2014 15:04:46 +0000"/>
                            <attachment id="12621995" name="PIG-3653-3.patch" size="7530" author="tmwoodruff" created="Wed, 8 Jan 2014 16:18:28 +0000"/>
                            <attachment id="12621794" name="PIG-3653.patch" size="5253" author="tmwoodruff" created="Tue, 7 Jan 2014 14:47:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jan 2014 22:10:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366658</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Ability to mark jars as predeployed to the cluster so they will not be included in the generated job jar; new pig.predeployed.jars property for specifying predeployed jars on the command line</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3652] Pigmix parser (PigPerformanceLoader) deletes chars during parsing </title>
                <link>https://issues.apache.org/jira/browse/PIG-3652</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When importing data generated by Pigmix using pigper.jar, the first char of the value of a map are missing like in the following example:&lt;/p&gt;

&lt;p&gt;DATA GENERATED:&lt;br/&gt;
f^DGvds_NL //^D is the delimiter&lt;/p&gt;

&lt;p&gt;DATA LOADED:&lt;br/&gt;
&lt;a href=&quot;#vds_NL&quot;&gt;f#vds_NL&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The letter G is missing.&lt;br/&gt;
This issue reproduces to the key of the map when the number of bytes &amp;gt;1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687585">PIG-3652</key>
            <summary>Pigmix parser (PigPerformanceLoader) deletes chars during parsing </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kereno">Keren Ouaknine</assignee>
                                    <reporter username="keren3000">Keren Ouaknine</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 03:34:44 +0000</created>
                <updated>Thu, 30 Jan 2014 23:31:17 +0000</updated>
                            <resolved>Thu, 30 Jan 2014 23:31:17 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13872970" author="daijy" created="Thu, 16 Jan 2014 02:13:49 +0000"  >&lt;p&gt;I think you are right. Can you try attached patch?&lt;/p&gt;</comment>
                            <comment id="13876959" author="keren3000" created="Mon, 20 Jan 2014 23:13:58 +0000"  >&lt;p&gt;+1. &lt;/p&gt;

&lt;p&gt;PigPerformanceLoader still misses the page_info from the output. &lt;/p&gt;</comment>
                            <comment id="13876960" author="daijy" created="Mon, 20 Jan 2014 23:14:13 +0000"  >&lt;p&gt;Fix another issue in PigPerformanceLoader.java.&lt;/p&gt;</comment>
                            <comment id="13876973" author="keren3000" created="Mon, 20 Jan 2014 23:29:26 +0000"  >&lt;p&gt;I tried the patch, it works for me.&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="13886344" author="rohini" created="Thu, 30 Jan 2014 07:04:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13887250" author="daijy" created="Thu, 30 Jan 2014 23:31:17 +0000"  >&lt;p&gt;Patch committed to trunk. Thanks Keren!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623295" name="PIG-3652-1.patch" size="751" author="daijy" created="Thu, 16 Jan 2014 02:13:49 +0000"/>
                            <attachment id="12624028" name="PIG-3652-2.patch" size="1031" author="daijy" created="Mon, 20 Jan 2014 23:14:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Jan 2014 02:13:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366593</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3651] Cannot Launch Pig Job on Hadoop (Infinite Loop?)</title>
                <link>https://issues.apache.org/jira/browse/PIG-3651</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;There must be an infinite loop in the pig code, I wrote a very simple pig script, all it has is one load statement, and the next line dumps it to the console.  When I run that pig gets to the MapReduceLauncher and just hangs, never making any progress.&lt;/p&gt;

&lt;p&gt;I&apos;m running CDH4.5 on a CentOS 6.4 VM, all installed from Cloudera&apos;s yum repo. It is configured to all run in pseudo-distributed mode. Everything is running as a service and appears to be configured correctly (thank heaven!)&lt;/p&gt;

&lt;p&gt;When I run the pig script on the command line I get a whole bunch of log statements and it looks like it is running, but once it starts, it never makes any progress, no matter how long I wait. These are the last couple lines:&lt;/p&gt;

&lt;p&gt;2014-01-05 15:10:41,113 &lt;span class=&quot;error&quot;&gt;&amp;#91;JobControl&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapreduce.JobSubmitter - Submitting tokens for job: job_1388936205793_0006&lt;br/&gt;
2014-01-05 15:10:41,511 &lt;span class=&quot;error&quot;&gt;&amp;#91;JobControl&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.yarn.client.YarnClientImpl - Submitted application application_1388936205793_0006 to ResourceManager at /0.0.0.0:8032&lt;br/&gt;
2014-01-05 15:10:41,564 &lt;span class=&quot;error&quot;&gt;&amp;#91;JobControl&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapreduce.Job - The url to track the job: &lt;a href=&quot;http://localhost:8088/proxy/application_1388936205793_0006/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8088/proxy/application_1388936205793_0006/&lt;/a&gt;&lt;br/&gt;
2014-01-05 15:10:41,653 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 0% complete&lt;/p&gt;

&lt;p&gt;I modified the pig script to point to my local filesystem file, and ran the pig script in local mode, and the job finished successfully in seconds. The local copy of the file is identical to the one hdfs has. &lt;/p&gt;

&lt;p&gt;I tried adding all my hadoop jars to the classpath, both in my pig script (using REGISTER) and in the pig bash script, it made no difference.&lt;/p&gt;

&lt;p&gt;I ran jstack on the process and saw this:&lt;/p&gt;

&lt;p&gt;&quot;main&quot; prio=10 tid=0x00007ff468018000 nid=0x2bbf in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007ff46f14c000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor)&lt;br/&gt;
	at java.lang.Object.wait(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting on &amp;lt;0x00000000fba8c6e0&amp;gt; (a org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1)&lt;br/&gt;
	at java.lang.Thread.join(Thread.java:1288)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00000000fba8c6e0&amp;gt; (a org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher$1)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:282)&lt;br/&gt;
	at org.apache.pig.PigServer.launchPlan(PigServer.java:1266)&lt;br/&gt;
	at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1251)&lt;br/&gt;
	at org.apache.pig.PigServer.storeEx(PigServer.java:933)&lt;br/&gt;
	at org.apache.pig.PigServer.store(PigServer.java:900)&lt;br/&gt;
	at org.apache.pig.PigServer.openIterator(PigServer.java:813)&lt;br/&gt;
	at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:696)&lt;br/&gt;
	at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:320)&lt;br/&gt;
	at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:194)&lt;br/&gt;
	at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:170)&lt;br/&gt;
	at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)&lt;br/&gt;
	at org.apache.pig.Main.run(Main.java:604)&lt;br/&gt;
	at org.apache.pig.Main.main(Main.java:157)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
	at org.apache.hadoop.util.RunJar.main(RunJar.java:208)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think the MayReduceLauncher classes launchPig method must have an infinite loop in it somehow.  I looked in the source, that method is hundreds of lines (you really should split it up).  It does contain a while loop, I suspect that it is waiting for some other thread to start.&lt;/p&gt;

&lt;p&gt;So you probably need to do a couple things:&lt;br/&gt;
1.  Split up that method, make it modular&lt;br/&gt;
2.  Have some kind of timeout, something that checks that it&apos;s making progress &lt;br/&gt;
3.  Figure out why it&apos;s hung (I really can&apos;t figure it out, I followed all of CDH4.5&apos;s instructions very carefully)&lt;br/&gt;
4.  Whatever configuration setting I&apos;m missing, probably needs to be documented a little beter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687576">PIG-3651</key>
            <summary>Cannot Launch Pig Job on Hadoop (Infinite Loop?)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="msknapp84">Michael Knapp</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 02:01:56 +0000</created>
                <updated>Tue, 7 Jan 2014 02:01:56 +0000</updated>
                                            <version>0.11</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366582</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366584</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3650] Fix for PIG-3100 breaks column pruning</title>
                <link>https://issues.apache.org/jira/browse/PIG-3650</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3100&quot; title=&quot;If a .pig_schema file is present, can get an index out of bounds error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3100&quot;&gt;&lt;del&gt;PIG-3100&lt;/del&gt;&lt;/a&gt; does &lt;tt&gt;Math.min(fieldSchemas.length, tup.size())&lt;/tt&gt; in &lt;tt&gt;PigStorage.applySchema()&lt;/tt&gt;. This means that if column pruning is in use, all schema columns will not be iterated over (since tup.size() will be less than fieldSchemas.length) and the schema will not be applied to all columns,&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687573">PIG-3650</key>
            <summary>Fix for PIG-3100 breaks column pruning</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tmwoodruff">Travis Woodruff</assignee>
                                    <reporter username="tmwoodruff">Travis Woodruff</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 01:52:51 +0000</created>
                <updated>Tue, 7 Jan 2014 21:54:33 +0000</updated>
                            <resolved>Tue, 7 Jan 2014 21:54:33 +0000</resolved>
                                    <version>0.12.0</version>
                    <version>0.12.1</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13863808" author="tmwoodruff" created="Tue, 7 Jan 2014 02:02:05 +0000"  >&lt;p&gt;Adding patch to fix. Iterates over all fieldSchemas (removes the Math.min) and adds padding to the tuple (as requested &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3100&quot; title=&quot;If a .pig_schema file is present, can get an index out of bounds error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3100&quot;&gt;&lt;del&gt;PIG-3100&lt;/del&gt;&lt;/a&gt;) as needed within that loop.&lt;/p&gt;

&lt;p&gt;Added new test to reproduce this issue.&lt;/p&gt;

&lt;p&gt;Updated imcomplete data test to verify that null padding still works in this case,&lt;/p&gt;</comment>
                            <comment id="13864731" author="daijy" created="Tue, 7 Jan 2014 21:54:33 +0000"  >&lt;p&gt;+1. Patch committed to trunk. Thanks Travis!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621738" name="PIG-3650.patch" size="3420" author="tmwoodruff" created="Tue, 7 Jan 2014 02:02:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jan 2014 21:54:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366581</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3649] POPartialAgg incorrectly calculates size reduction when multiple values aggregated</title>
                <link>https://issues.apache.org/jira/browse/PIG-3649</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;tt&gt;POPartialAgg.aggregate()&lt;/tt&gt; counts the number of output columns (&lt;tt&gt;valueTuple.size() - 1&lt;/tt&gt;), but &lt;tt&gt;checkSizeReduction()&lt;/tt&gt; compares this to the number of input tuples. &lt;/p&gt;

&lt;p&gt;When multiple columns are aggregated, this causes the reduction factor to be calculated as too high by a factor of the number of columns being aggregated, which causes in-memory aggregation to be disabled when it should not be, adversely affecting performance,&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687526">PIG-3649</key>
            <summary>POPartialAgg incorrectly calculates size reduction when multiple values aggregated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tmwoodruff">Travis Woodruff</assignee>
                                    <reporter username="tmwoodruff">Travis Woodruff</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jan 2014 21:19:22 +0000</created>
                <updated>Tue, 7 Jan 2014 22:31:29 +0000</updated>
                            <resolved>Tue, 7 Jan 2014 22:31:29 +0000</resolved>
                                    <version>0.11</version>
                    <version>0.12.0</version>
                    <version>0.11.1</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13863437" author="tmwoodruff" created="Mon, 6 Jan 2014 21:25:01 +0000"  >&lt;p&gt;Attaching path that updates &lt;tt&gt;aggregate()&lt;/tt&gt; to count number of result tuples.&lt;/p&gt;

&lt;p&gt;Includes two new tests:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;One that shows that basic aggregation of multiple columns works&lt;/li&gt;
	&lt;li&gt;Another that reproduces the issue reported here. This requires aggregating &amp;gt; 10,000 rows, so it is a bit slow. Suggestions for alternative approaches welcome.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13864774" author="daijy" created="Tue, 7 Jan 2014 22:31:29 +0000"  >&lt;p&gt;+1. Patch committed to trunk. Thanks Travis!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621680" name="PIG-3469.patch" size="5964" author="tmwoodruff" created="Mon, 6 Jan 2014 21:25:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jan 2014 22:31:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3648] Make the sample size for RandomSampleLoader configurable</title>
                <link>https://issues.apache.org/jira/browse/PIG-3648</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig uses RandomSampleLoader for range partitioning in order-by. But since the sample size is hardcoded as 100, volatility in the variance of the results  increases when sorting a large number of rows (e.g. 10M+ per task).&lt;/p&gt;

&lt;p&gt;It would be nice if the sample size could be configurable via Pig properties.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12687379">PIG-3648</key>
            <summary>Make the sample size for RandomSampleLoader configurable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jan 2014 01:27:35 +0000</created>
                <updated>Wed, 8 Jan 2014 18:05:55 +0000</updated>
                                                            <fixVersion>0.13.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13862714" author="cheolsoo" created="Mon, 6 Jan 2014 01:31:38 +0000"  >&lt;p&gt;Attached is a patch that introduces a new property called &quot;pig.random.sampler.sample.size&quot;.&lt;/p&gt;</comment>
                            <comment id="13863497" author="aniket486" created="Mon, 6 Jan 2014 22:12:54 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;There is a typo in comments - RandomeSampleLoader, otherwise, patch looks good.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;volatility in the variance of the results increases when sorting a large number of rows&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you give an example when this happens? Sampling algo looks good to me. Also, we want to keep number of samples less, so that we can replace this mechanism in future if needed.&lt;/p&gt;</comment>
                            <comment id="13863684" author="mbossenbroek" created="Tue, 7 Jan 2014 00:17:02 +0000"  >&lt;p&gt;I came across this issue while trying to order data with a large number of reducers. The last reducer ended up with 10x the data of the other reducers and took 10x longer to execute.&lt;/p&gt;

&lt;p&gt;I ran some statistical simulations on the selection algo and found that with a small sample size, the likelihood of a less than uniform sample distribution was higher. In my example, it was selecting only 100 rows out of 13M, which wasn&apos;t representative of the data.&lt;/p&gt;

&lt;p&gt;I can provide the sample code I was using to test this if needed.&lt;/p&gt;
</comment>
                            <comment id="13863707" author="rohini" created="Tue, 7 Jan 2014 00:34:08 +0000"  >&lt;p&gt;+1.  Agree that it obviously makes sense to have large sample size for larger data - &lt;a href=&quot;http://en.wikipedia.org/wiki/Sample_size_determination#Introduction&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/Sample_size_determination#Introduction&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13863730" author="aniket486" created="Tue, 7 Jan 2014 00:49:45 +0000"  >&lt;p&gt;We are using reservoir sampling here, with assumption that the number of samples fit in memory. My only question/concern is how much benefit does increasing sample size provide here.&lt;br/&gt;
In your example- 100 samples on 13M rows had 10x skew. Does 200 samples make it 5x skew or less? If it does, doing this definitely makes sense.&lt;/p&gt;</comment>
                            <comment id="13863749" author="rohini" created="Tue, 7 Jan 2014 01:04:41 +0000"  >&lt;p&gt;Is memory a big concern really w.r.t to number of samples? I haven&apos;t checked but I am assuming we will only have the orderby key in the sample and not entire tuple and that would not amount to much in terms of occupying memory. Is that wrong?&lt;/p&gt;</comment>
                            <comment id="13863761" author="aniket486" created="Tue, 7 Jan 2014 01:17:16 +0000"  >&lt;p&gt;Memory is not a concern. I&apos;m suspecting that there is not much benefit of keeping this configurable. Obviously, no harm, if we configure it right.&lt;/p&gt;</comment>
                            <comment id="13863770" author="rohini" created="Tue, 7 Jan 2014 01:25:32 +0000"  >&lt;p&gt;I don&apos;t think it is possible to configure it right unless we store statistics on the total number of records (using something like hraven) and use that to determine the sample size as a proportion dynamically. Otherwise the best option is to let the user specify a sample size as we don&apos;t know the number of records until the map completes. &lt;/p&gt;

&lt;p&gt;On a different note, when I was checking code to confirm that the samples only contain the order by columns saw that MR does RandomSampleLoader -&amp;gt; Foreach (to project sort columns) because it was loader. In Tez, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; had fixed it to do POForeach - &amp;gt; POReservoirSample projecting the columns early. &lt;/p&gt;</comment>
                            <comment id="13865694" author="cheolsoo" created="Wed, 8 Jan 2014 18:05:55 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I&apos;m suspecting that there is not much benefit of keeping this configurable.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am deploying this at work to let my users experiment. I will let you know whether this helps or not. In the meantime, we can leave it as is.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621547" name="PIG-3648-1.patch" size="2625" author="cheolsoo" created="Mon, 6 Jan 2014 01:31:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 Jan 2014 22:12:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366385</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3647] Implement merge join in Tez</title>
                <link>https://issues.apache.org/jira/browse/PIG-3647</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description></description>
                <environment></environment>
        <key id="12687217">PIG-3647</key>
            <summary>Implement merge join in Tez</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jan 2014 18:11:36 +0000</created>
                <updated>Thu, 9 Jan 2014 21:52:18 +0000</updated>
                            <resolved>Thu, 9 Jan 2014 21:51:50 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13861742" author="daijy" created="Fri, 3 Jan 2014 18:21:47 +0000"  >&lt;p&gt;The implement uses 2 DAG:&lt;br/&gt;
DAG 1. Build index for right input&lt;br/&gt;
DAG 2. Do merge join using the index&lt;/p&gt;

&lt;p&gt;It is possible to use 1 DAG, however, currently there are too much logic inside loader (MergeJoinIndexer to build index, DefaultIndexableLoader to read index), migrate those will take time. I think we&apos;d better move on and revisit later.&lt;/p&gt;</comment>
                            <comment id="13861803" author="daijy" created="Fri, 3 Jan 2014 19:13:58 +0000"  >&lt;p&gt;RB link: &lt;a href=&quot;https://reviews.apache.org/r/16614/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16614/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13867121" author="daijy" created="Thu, 9 Jan 2014 21:51:50 +0000"  >&lt;p&gt;Patch committed to tez branch. Thanks Rohini for review. Review comments is on RB.&lt;/p&gt;</comment>
                            <comment id="13867123" author="daijy" created="Thu, 9 Jan 2014 21:52:18 +0000"  >&lt;p&gt;Upload the patch checked in.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621355" name="PIG-3647-1.patch" size="32440" author="daijy" created="Fri, 3 Jan 2014 18:21:47 +0000"/>
                            <attachment id="12622265" name="PIG-3647-3.patch" size="38932" author="daijy" created="Thu, 9 Jan 2014 21:52:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366219</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3646] LoadFunc cannot get a hold of the associated user defined schema</title>
                <link>https://issues.apache.org/jira/browse/PIG-3646</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Described on the mailing list here: &lt;a href=&quot;http://www.mail-archive.com/user%40pig.apache.org/msg09009.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.mail-archive.com/user%40pig.apache.org/msg09009.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A Pig &lt;tt&gt;LoadFunc&lt;/tt&gt; cannot get a hold of its associated schema. For example, in the following script:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = LOAD &apos;pig/tupleartists&apos; USING MyStorage() AS (name: chararray, links (url:chararray, picture:chararray));
B = FOREACH A GENERATE name, links.url;
DUMP B;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;MyStorage&lt;/tt&gt; cannot get a hold of &lt;tt&gt;(name:chararray, links ...&lt;/tt&gt; even when &lt;tt&gt;LoadPushDown#pushProjection()&lt;/tt&gt; is implemented (which is called only when a transformation occurs - PlanOptimizer/ColumnMapKeyPrune).&lt;/p&gt;

&lt;p&gt;One can look into a &lt;tt&gt;POStore&lt;/tt&gt; but even then the information obtain is incomplete - meaning the schema is incomplete and the fields mentioned in &lt;tt&gt;FOREACH&lt;/tt&gt; are dereferenced &lt;tt&gt;links.url&lt;/tt&gt; is returned as &lt;tt&gt;url&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The purpose of this issue is to allow a &lt;tt&gt;LoadFunc&lt;/tt&gt; implementation to get access to its schema declaration as specified in the script.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686681">PIG-3646</key>
            <summary>LoadFunc cannot get a hold of the associated user defined schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="costin">Costin Leau</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Dec 2013 13:22:16 +0000</created>
                <updated>Sun, 29 Dec 2013 13:28:14 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>data</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365681</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3645] Move FileLocalizer.setR() calls to unit tests</title>
                <link>https://issues.apache.org/jira/browse/PIG-3645</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently, temporary paths are generated by FileLocalizer using Random.nextInt(). To provide strong randomness, MapReduceLauncher resets the Random object every time when compiling physical plan to MR plan:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MRCompiler comp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MRCompiler(php, pc); 
comp.randomizeFileLocalizer(); &lt;span class=&quot;code-comment&quot;&gt;// This in turn calls FileLocalizer.setR(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Random()).&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Besides, there are a couple of places calling FileLocalizer.setR() (e.g. MRCompiler) with some random seed.&lt;/p&gt;

&lt;p&gt;I think-&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Randomizing Random seed is unnecessary if we switch to UUID.&lt;/li&gt;
	&lt;li&gt;Setting Random objects in code like this is error-prone because it can be easily broken by having or missing a FileLocalizer.setR() somewhere else. See an example &lt;a href=&quot;http://search-hadoop.com/m/2nxTzQXfHw1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;So I propose that we remove all this &quot;randomizing Random seed&quot; code and use UUID instead in temporary paths.&lt;/p&gt;

&lt;p&gt;For unit tests that compare the results against gold files, we should still allow to set Random seed through FileLocalizer.setR(). But this method will be annotated as &quot;VisibleForTesting&quot; to ensure it is not used nowhere else other than in unit tests.&lt;/p&gt;

&lt;p&gt;Regarding the existing gold files, they can be easily regenerated by TestMRCompiler as follows-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FileOutputStream fos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(expectedFile + &lt;span class=&quot;code-quote&quot;&gt;&quot;_new&quot;&lt;/span&gt;);
PrintWriter pw = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PrintWriter(fos);
pw.write(compiledPlan);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I assume there won&apos;t be any kind of regressions due to this change. But please let me know if I am wrong.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686562">PIG-3645</key>
            <summary>Move FileLocalizer.setR() calls to unit tests</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Dec 2013 19:51:56 +0000</created>
                <updated>Sun, 29 Dec 2013 23:34:08 +0000</updated>
                            <resolved>Sun, 29 Dec 2013 23:00:59 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13857682" author="cheolsoo" created="Fri, 27 Dec 2013 19:55:07 +0000"  >&lt;p&gt;Attaching an initial patch that includes regenerated gold files.&lt;/p&gt;

&lt;p&gt;I will run the full suite of unit tests.&lt;/p&gt;</comment>
                            <comment id="13857691" author="rohini" created="Fri, 27 Dec 2013 20:11:16 +0000"  >&lt;p&gt;This change is not required.  Few reasons:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;new Random() gives enough randomness as it takes into account System.nanoTime() and UUID is not going to add any advantage. Infact UUID uses Random internally. Differences are it uses SecureRandom (which we don&apos;t need) and does more bytes (which also we don&apos;t need as integer range itself is huge and is not going to repeat within a execution of a pig script) and uses clock sequence (System.nanoTime() in Random is good enough for us). And Random has been working fine in production for 7+ years without collision between users and I don&apos;t see any reason to change that.  If UUID were to give some advantage or fixes a real issue, I would certainly go for it.&lt;/li&gt;
	&lt;li&gt;UUID returns takes up 36 chars, while random we are only using 10 chars. Would prefer shorter filenames to take up less space in NN and prevent GCs.&lt;/li&gt;
	&lt;li&gt;Problem is not with randomness of Random but mix up in MRComplier code resetting the seed of Random to take care of tests.  What is been done in MR is that they set new Random(1331) in MRCompiler so tests get the same plan everytime. But they reset it to new Random() again when the script is actually run (in MapreduceLauncher) so that it does not write to the same file again and again. Simple change would be to move the new Random(1331) to TestMRCompiler and org.apache.pig.test.Util.buildMRPlan() as that should belong in the tests and not in the normal code path. If that is done, comp.randomizeFileLocalizer(); can be removed from MapreduceLauncher.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13857699" author="rohini" created="Fri, 27 Dec 2013 20:19:07 +0000"  >&lt;p&gt;&amp;gt; UUID returns takes up 36 chars, while random we are only using 10 chars. Would prefer shorter filenames to take up less space in NN and prevent GCs&lt;br/&gt;
  This is actually a bigger concern for me as intermediate jobs will create lot of temporary files under the temporary directory with MR when there are lot of maps/reduces. Since these will be short lived files and will be deleted soon will be a pressure on NN if they have long paths. We already have serious problems with NN performance on big clusters with heavy usage and hadoop team has been squeezing optimizations in cutting down on the number of calls MR framework makes. &lt;/p&gt;</comment>
                            <comment id="13857703" author="cheolsoo" created="Fri, 27 Dec 2013 20:23:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;, thank you for the detailed explanation. My gaol is to simplify the current code rather than increase strongeness of random.&lt;/p&gt;

&lt;p&gt;Let&apos;s separate two things here-&lt;br/&gt;
1) Remove all the FileLocalizer.setR() in our code (except ones with fixed seeds in unit tests).&lt;br/&gt;
2) Replaced Random with UUID&lt;/p&gt;

&lt;p&gt;You and I agree on #1 but disagree on #2, correct? Only reason why I proposed #2 in addition to #1 because I didn&apos;t want to reduce randomness than the current form. Sounds like you&apos;re not worried about that. If that&apos;s the case, I can do #1 only.&lt;/p&gt;

&lt;p&gt;How does that sound to you?&lt;/p&gt;

</comment>
                            <comment id="13857727" author="rohini" created="Fri, 27 Dec 2013 21:00:34 +0000"  >&lt;p&gt;Sounds good. +1 on moving all FileLocalizer.setR() calls to test classes.&lt;/p&gt;</comment>
                            <comment id="13857770" author="cheolsoo" created="Fri, 27 Dec 2013 21:45:45 +0000"  >&lt;p&gt;Uploading a new patch as per discussion. The changes include-&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Annotate FileLocalizer.setR() as @VisibleForTesting.&lt;/li&gt;
	&lt;li&gt;Remove FileLocalizer.setR() calls from MRCompiler and MapReduceLauncher.&lt;/li&gt;
	&lt;li&gt;Add FileLocalizer.setR(new Random(1331L)) in TestMRCompiler.&lt;/li&gt;
	&lt;li&gt;Regenerate gold files for TestMRCompiler.&lt;/li&gt;
	&lt;li&gt;Enabled testSim4 in TestMRCompier. Looks like it was unintentionally not marked as @Test.&lt;/li&gt;
	&lt;li&gt;Remove FileLocalizer.setR(new Random()) in unit tests. Now FileLocalizer is randomized by default, so no need to do it again-
	&lt;ol&gt;
		&lt;li&gt;TestEvalPipeline.java&lt;/li&gt;
		&lt;li&gt;TestEvalPipeline2.java&lt;/li&gt;
		&lt;li&gt;TestEvalPipelineLocal.java&lt;/li&gt;
		&lt;li&gt;TestJoin.java&lt;/li&gt;
		&lt;li&gt;TestScriptUDF.java&lt;/li&gt;
		&lt;li&gt;TestSecondarySort.java&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13857779" author="cheolsoo" created="Fri, 27 Dec 2013 21:53:17 +0000"  >&lt;p&gt;Reset &quot;generate&quot; to false in TestMRCompiler in the new patch. Changes can be viewed &lt;a href=&quot;https://github.com/piaozhexiu/apache-pig/commit/f833c8f950dc158a711043721e8876d9de96fe78&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I am running full unit tests now.&lt;/p&gt;
</comment>
                            <comment id="13857790" author="rohini" created="Fri, 27 Dec 2013 22:06:01 +0000"  >&lt;p&gt;FileLocalizer.setR(new Random(1331L)); - If you do this in setup instead of setUpBeforeClass in TestMRCompiler, I think you will not need to regenerate the golden files. But if you still need to regenerate the golden files, is it possible for you to copy over what is done in TestTezCompiler setup() method. That makes each test&apos;s golden file independent of another and allows tests to be run in any order or just run individually from eclipse without having to run previous tests. Doing that in a separate jira is fine as well. Everything else looks good. Will do a +1 once you confirm full unit test suite passes.&lt;/p&gt;</comment>
                            <comment id="13857805" author="cheolsoo" created="Fri, 27 Dec 2013 22:35:03 +0000"  >&lt;p&gt;I tried PigServer.resetScope() and NodeIdGenerator.reset(&quot;&quot;), and FileLocalizer.setR(new Random(1331L)) in setup. But that doesn&apos;t seem to entirely fix it. In fact, temporary paths do not match while scope and node ids match.&lt;/p&gt;

&lt;p&gt;I am attaching the test log if you&apos;re interested.&lt;/p&gt;</comment>
                            <comment id="13857861" author="cheolsoo" created="Sat, 28 Dec 2013 00:15:58 +0000"  >&lt;p&gt;As per discussion with Rohini, moved FiliLocalizer.setR() to setup. This minimizes the number of gold files to be modified to 11. It seems inevitable to regenerate these 11 files because I am re-enabling testSim4 that used to be omitted, and that introduces some randomness.&lt;/p&gt;

&lt;p&gt;I will kick off unit tests again with this patch. Thanks!&lt;/p&gt;</comment>
                            <comment id="13858100" author="cheolsoo" created="Sat, 28 Dec 2013 19:13:10 +0000"  >&lt;p&gt;All unit tests pass except two known failures-&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;TestColumnAliasConversion &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3643&quot; title=&quot;Nested Foreach with UDF and bincond is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3643&quot;&gt;&lt;del&gt;PIG-3643&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;TestLogicalPlanGenerator &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3643&quot; title=&quot;Nested Foreach with UDF and bincond is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3643&quot;&gt;&lt;del&gt;PIG-3643&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13858410" author="rohini" created="Sun, 29 Dec 2013 19:39:07 +0000"  >&lt;p&gt;+1. Can you remove the FileLocalizer.getR() method while committing? You had done that in tez branch.&lt;/p&gt;</comment>
                            <comment id="13858468" author="cheolsoo" created="Sun, 29 Dec 2013 23:00:59 +0000"  >&lt;p&gt;Committed to trunk. I removed FiliLocalizer.getR().&lt;/p&gt;

&lt;p&gt;Thank you Rohini for all the help with this jira!&lt;/p&gt;</comment>
                            <comment id="13858477" author="cheolsoo" created="Sun, 29 Dec 2013 23:34:08 +0000"  >&lt;p&gt;I also merged trunk into tez branch, so the UUID stuff in tez branch is all overwritten now. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620643" name="PIG-3645-1.patch" size="57930" author="cheolsoo" created="Fri, 27 Dec 2013 19:55:07 +0000"/>
                            <attachment id="12620661" name="PIG-3645-2.patch" size="54385" author="cheolsoo" created="Fri, 27 Dec 2013 21:45:45 +0000"/>
                            <attachment id="12620666" name="PIG-3645-3.patch" size="54171" author="cheolsoo" created="Fri, 27 Dec 2013 21:53:17 +0000"/>
                            <attachment id="12620682" name="PIG-3645-4.patch" size="36646" author="cheolsoo" created="Sat, 28 Dec 2013 00:15:58 +0000"/>
                            <attachment id="12620669" name="TEST-org.apache.pig.test.TestMRCompiler.txt" size="283799" author="cheolsoo" created="Fri, 27 Dec 2013 22:35:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Dec 2013 20:11:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365558</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365561</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3644] Implement skewed join in Tez</title>
                <link>https://issues.apache.org/jira/browse/PIG-3644</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Skewed join in Tez can be implemented similarly to order-by (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3634&quot; title=&quot;Improve performance of order-by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3634&quot;&gt;&lt;del&gt;PIG-3634&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686545">PIG-3644</key>
            <summary>Implement skewed join in Tez</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Dec 2013 18:44:51 +0000</created>
                <updated>Thu, 16 Jan 2014 02:30:46 +0000</updated>
                            <resolved>Thu, 16 Jan 2014 02:30:46 +0000</resolved>
                                    <version>tez-branch</version>
                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13871103" author="cheolsoo" created="Tue, 14 Jan 2014 20:27:19 +0000"  >&lt;p&gt;Attaching the 1st patch. The RB link is-&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/16860/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16860/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13872905" author="cheolsoo" created="Thu, 16 Jan 2014 01:14:11 +0000"  >&lt;p&gt;Rebased to tez head and removed some unused methods in POPartitionRearrangeTez. I will commit this patch shortly.&lt;/p&gt;

&lt;p&gt;Regarding the unit test TestSkewedJoin, I am running into OOM errors inside tez mini-cluster. I will commit the patch and follow up in a separate jira.&lt;/p&gt;</comment>
                            <comment id="13872981" author="cheolsoo" created="Thu, 16 Jan 2014 02:30:46 +0000"  >&lt;p&gt;Committed to tez branch. Thank you Daniel for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622964" name="PIG-3644-1.patch" size="96599" author="cheolsoo" created="Tue, 14 Jan 2014 20:27:19 +0000"/>
                            <attachment id="12623286" name="PIG-3644-2.patch" size="95613" author="cheolsoo" created="Thu, 16 Jan 2014 01:33:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365541</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3643] Nested Foreach with UDF and bincond is broken</title>
                <link>https://issues.apache.org/jira/browse/PIG-3643</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Was checking out &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3000&quot; title=&quot;Optimize nested foreach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3000&quot;&gt;PIG-3000&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;A = load &apos;data&apos; as (a:chararray);&lt;br/&gt;
B = foreach A &lt;/p&gt;
{ c = UPPER(a); generate ((c eq &apos;TEST&apos;) ? 1 : 0), ((c eq &apos;DEV&apos;) ? 1 : 0); }

&lt;p&gt;This now throws &quot;Invalid field projection. Projected field &lt;span class=&quot;error&quot;&gt;&amp;#91;c&amp;#93;&lt;/span&gt; does not exist in schema&quot;.  Works fine in 0.11. Broken in trunk. Haven&apos;t checked 0.12. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12686533">PIG-3643</key>
            <summary>Nested Foreach with UDF and bincond is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Dec 2013 16:27:08 +0000</created>
                <updated>Mon, 30 Dec 2013 23:29:08 +0000</updated>
                            <resolved>Sun, 29 Dec 2013 22:53:19 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13857604" author="cheolsoo" created="Fri, 27 Dec 2013 18:11:33 +0000"  >&lt;p&gt;This is a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3581&quot; title=&quot;Incorrect scope resolution with nested foreach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3581&quot;&gt;&lt;del&gt;PIG-3581&lt;/del&gt;&lt;/a&gt;. If I drop the &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3581&quot; title=&quot;Incorrect scope resolution with nested foreach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3581&quot;&gt;&lt;del&gt;PIG-3581&lt;/del&gt;&lt;/a&gt; commit, the example works in trunk too.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;Aniket Mokashi&lt;/a&gt; and I were discussion this in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3581&quot; title=&quot;Incorrect scope resolution with nested foreach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3581&quot;&gt;&lt;del&gt;PIG-3581&lt;/del&gt;&lt;/a&gt; too.&lt;/p&gt;
</comment>
                            <comment id="13857765" author="cheolsoo" created="Fri, 27 Dec 2013 21:43:08 +0000"  >&lt;p&gt;TestColumnAliasConversion is broken in trunk for this as well.&lt;/p&gt;</comment>
                            <comment id="13857815" author="cheolsoo" created="Fri, 27 Dec 2013 22:47:03 +0000"  >&lt;p&gt;TestLogicalPlanGenerator is broken by this too. Let me fix this.&lt;/p&gt;</comment>
                            <comment id="13857885" author="cheolsoo" created="Sat, 28 Dec 2013 01:13:28 +0000"  >&lt;p&gt;Uploading a patch that fixes the regression.&lt;/p&gt;

&lt;p&gt;To summarize the issue-&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Before &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3581&quot; title=&quot;Incorrect scope resolution with nested foreach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3581&quot;&gt;&lt;del&gt;PIG-3581&lt;/del&gt;&lt;/a&gt;:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; X, &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; a
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; Y, &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; b
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; c
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3581&quot; title=&quot;Incorrect scope resolution with nested foreach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3581&quot;&gt;&lt;del&gt;PIG-3581&lt;/del&gt;&lt;/a&gt;:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
If Y &amp;amp;&amp;amp; N, &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; b
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; X, &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; a
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; c
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As can be seen, if Y &amp;amp;&amp;amp; !N, it falls into c now while we used to fall into b.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;With my patch:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
If Y &amp;amp;&amp;amp; N, &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; b
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; X, &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; a
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; Y, &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; b
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; c
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I verified-&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;TestColumnAliasConversion passes.&lt;/li&gt;
	&lt;li&gt;TestLogicalPlanGenerator passes.&lt;/li&gt;
	&lt;li&gt;The new test cases added by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3581&quot; title=&quot;Incorrect scope resolution with nested foreach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3581&quot;&gt;&lt;del&gt;PIG-3581&lt;/del&gt;&lt;/a&gt; pass.&lt;/li&gt;
	&lt;li&gt;The example in this jira wrks.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13858418" author="rohini" created="Sun, 29 Dec 2013 19:50:42 +0000"  >&lt;p&gt;+1. This patch just adds back code that was removed by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3581&quot; title=&quot;Incorrect scope resolution with nested foreach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3581&quot;&gt;&lt;del&gt;PIG-3581&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13858466" author="cheolsoo" created="Sun, 29 Dec 2013 22:53:19 +0000"  >&lt;p&gt;Committed to trunk. Thank you Rohini for the review!&lt;/p&gt;</comment>
                            <comment id="13859170" author="lbendig" created="Mon, 30 Dec 2013 23:29:08 +0000"  >&lt;p&gt;Thanks for this patch. It seems to me that it also fixed:&lt;/p&gt;

&lt;p&gt;TestEvalPipelineLocal#testArithmeticCloning&lt;br/&gt;
TestEvalPipelineLocal#testExpressionReUse&lt;br/&gt;
TestPlanGeneration#testDanglingNestedNode&lt;br/&gt;
TestEvalPipeline2#testUdfInputOrder&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12679678">PIG-3581</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12620697" name="PIG-3643-1.patch" size="892" author="cheolsoo" created="Sat, 28 Dec 2013 01:13:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Dec 2013 18:11:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365526</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3642] Direct HDFS access for small jobs (fetch) </title>
                <link>https://issues.apache.org/jira/browse/PIG-3642</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;With this patch I&apos;d like to add the possibility to directly read data from HDFS instead of launching MR jobs in case of simple (map-only) tasks. Hive already has this feature (fetch). This patch shares some similarities with the local mode of Pig 0.6. Here, fetching kicks off when the following holds for a script:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;it contains only LIMIT, FILTER, UNION (if no split is generated), STREAM, (nested) FOREACH with expression operators, custom UDFs..etc&lt;/li&gt;
	&lt;li&gt;no scalar aliases&lt;/li&gt;
	&lt;li&gt;no SampleLoader&lt;/li&gt;
	&lt;li&gt;single leaf job&lt;/li&gt;
	&lt;li&gt;DUMP (no STORE)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The feature is enabled by default and can be toggled with:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;-N or -no_fetch&lt;/li&gt;
	&lt;li&gt;set opt.fetch true/false;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There&apos;s no STORE support because I wanted to make it explicit that this &quot;optimization&quot; is for launching small/simple scripts during development, rather than querying and filtering large number of rows on the client machine. However, a threshold could be given on the input size (an estimation) to determine whether to prefer fetch over MR jobs, similar to what Hive&apos;s &apos;&lt;tt&gt;hive.fetch.task.conversion.threshold&lt;/tt&gt;&apos; does. (through Pig&apos;s LoadMetadata#getStatistic ?)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686477">PIG-3642</key>
            <summary>Direct HDFS access for small jobs (fetch) </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lbendig">Lorand Bendig</assignee>
                                    <reporter username="lbendig">Lorand Bendig</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Dec 2013 23:13:43 +0000</created>
                <updated>Mon, 3 Feb 2014 04:02:42 +0000</updated>
                            <resolved>Mon, 3 Feb 2014 04:02:08 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13858261" author="cheolsoo" created="Sun, 29 Dec 2013 06:45:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lbendig&quot; class=&quot;user-hover&quot; rel=&quot;lbendig&quot;&gt;Lorand Bendig&lt;/a&gt;, is this patch ready for review? If so, do you mind uploading it to the &lt;a href=&quot;https://reviews.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;review board&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;This feature will be very useful!&lt;/p&gt;</comment>
                            <comment id="13858471" author="lbendig" created="Sun, 29 Dec 2013 23:23:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt; es, I&apos;d like to have it reviewed&lt;/p&gt;</comment>
                            <comment id="13858473" author="lbendig" created="Sun, 29 Dec 2013 23:25:32 +0000"  >&lt;p&gt;Please find attached the review request at : &lt;a href=&quot;https://reviews.apache.org/r/16507/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16507/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13860156" author="azaroth" created="Thu, 2 Jan 2014 11:57:29 +0000"  >&lt;p&gt;I am -0 on this idea.&lt;br/&gt;
Skipping MR requires rewriting good part of the execution logic, and might introduce weird optimization bugs.&lt;br/&gt;
More importantly, the added advantage brought by this feature is small.&lt;br/&gt;
Usually, if you want to test your program on a small input, you copy it locally and run Pig in local mode.&lt;/p&gt;</comment>
                            <comment id="13860224" author="lbendig" created="Thu, 2 Jan 2014 14:16:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azaroth&quot; class=&quot;user-hover&quot; rel=&quot;azaroth&quot;&gt;Gianmarco De Francisci Morales&lt;/a&gt;, I took the idea of this patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2925&quot; title=&quot;Support non-MR fetching for simple queries with select/limit/filter operations only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2925&quot;&gt;&lt;del&gt;HIVE-2925&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2864&quot; title=&quot;LOAD with FILTER should read data without MapReduce&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2864&quot;&gt;PIG-2864&lt;/a&gt;. I agree, that the benefit is limited, however simple scripts/queries will run significantly faster than in local MR mode. As far as I can judge, aside from some mocking and initialization&lt;br/&gt;
the execution logic literally follows Pig&apos;s pull-based model. What optimization bugs do you think that can happen? &lt;/p&gt;</comment>
                            <comment id="13860228" author="azaroth" created="Thu, 2 Jan 2014 14:23:56 +0000"  >&lt;p&gt;I haven&apos;t reviewed the patch thoroughly so take my comments with the due care.&lt;br/&gt;
I am just afraid that we will redo the same &quot;mistake&quot; we did with the local mode execution of Pig that you mention in the ticket.&lt;br/&gt;
That mode of execution was removed because it was a burden to maintain, and in the end the two implementations (MR and local mode) were out of synch, resulting in the same script doing different things.&lt;br/&gt;
I just want to avoid the same thing happening again.&lt;/p&gt;

&lt;p&gt;If &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt; has reviewed the patch, I would like to hear his comments on this issue.&lt;/p&gt;</comment>
                            <comment id="13860392" author="cheolsoo" created="Thu, 2 Jan 2014 17:45:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azaroth&quot; class=&quot;user-hover&quot; rel=&quot;azaroth&quot;&gt;Gianmarco De Francisci Morales&lt;/a&gt;, thank you for raising a concern. But I still think we should commit this patch for the following reasons-&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Fetch optimization happens after physical plan is fully built. If the plan is fetchable (i.e. meets all the conditions Lorand listed in the description), Pig will launch a job via FetchLauncher instead via MapReduceLauncher. Given this code path, I think the possibility of introducing a weird optimization bug is minimal. In addition, the optimization is only applicable to fairly small queries.&lt;/li&gt;
	&lt;li&gt;There are indeed changes to some backend operators such as POStream. This is because the logic about when to pull data from pipeline is different in some cases. But these changes are fairly minimal too.&lt;/li&gt;
	&lt;li&gt;IMO, the benefit of this optimization is big. I am constantly asked by users about this feature. True that it won&apos;t improve any performance of production ETL jobs, but it will shorten development iteration. In addition, launching a full MR job for a simple load/dump query definitely makes a bad impression to new users.&lt;/li&gt;
&lt;/ol&gt;




</comment>
                            <comment id="13860531" author="alangates" created="Thu, 2 Jan 2014 18:27:45 +0000"  >&lt;p&gt;I don&apos;t think this will result in the same local mode/mr mode problem that we had before.  The issue there was we tried (and failed) to have two modes where Pig provided all features.  This is much more limited to doing things locally that can easily be done locally.&lt;/p&gt;</comment>
                            <comment id="13862458" author="cheolsoo" created="Sun, 5 Jan 2014 01:12:20 +0000"  >&lt;p&gt;Uploading the patch that I am running unit/e2e tests.&lt;/p&gt;

&lt;p&gt;This patch adds a &quot;return&quot; to HExecutuinEngine#explain(). (See my comment in the RB.) I also cleaned trailing white spaces.&lt;/p&gt;</comment>
                            <comment id="13862693" author="cheolsoo" created="Mon, 6 Jan 2014 00:57:23 +0000"  >&lt;p&gt;I see 6 failures in unit tests-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt;&amp;gt;&amp;gt; org.apache.pig.impl.builtin.TestStreamingUDF.testPythonUDF_onCluster
&amp;gt;&amp;gt;&amp;gt; org.apache.pig.test.TestDefaultDateTimeZone.testLocalExecution
&amp;gt;&amp;gt;&amp;gt; org.apache.pig.test.TestEvalPipeline2.testNonStandardDataWithoutFetch
&amp;gt;&amp;gt;&amp;gt; org.apache.pig.test.TestEvalPipeline2.testBinStorageByteArrayCastsSimple
&amp;gt;&amp;gt;&amp;gt; org.apache.pig.test.TestEvalPipeline2.testLoadWithDifferentSchema
&amp;gt;&amp;gt;&amp;gt; org.apache.pig.test.TestStoreInstances.testBackendStoreCommunication
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you please take a look at them?&lt;/p&gt;</comment>
                            <comment id="13868977" author="lbendig" created="Sun, 12 Jan 2014 09:23:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;, thanks for pointing out these issues!&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;org.apache.pig.test.TestDefaultDateTimeZone.testLocalExecution&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It&apos;s because fetch didn&apos;t initialize pig.datetime.default.tz with the current timezone. Fixed.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;org.apache.pig.test.TestEvalPipeline2.testNonStandardDataWithoutFetch&lt;br/&gt;
org.apache.pig.test.TestEvalPipeline2.testBinStorageByteArrayCastsSimple&lt;br/&gt;
org.apache.pig.test.TestEvalPipeline2.testLoadWithDifferentSchema&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This was a non-fetch issue, now fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3662&quot; title=&quot;Static loadcaster in BinStorage can cause exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3662&quot;&gt;&lt;del&gt;PIG-3662&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;org.apache.pig.test.TestStoreInstances.testBackendStoreCommunication&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The problem was here that FetchOptimizer initialized FileLocalizer#relativeRoot to check whether POStore is related to a dump.&lt;br/&gt;
This initialized temporary path is in the threadlocal and it might happen that a Wrong FS: &lt;a href=&quot;file:/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/&lt;/a&gt;..., expected: hdfs://... exception&lt;br/&gt;
is thrown in those cases if the test is executed both in local and mapreduce mode in the same session. The temp path is initialized&lt;br/&gt;
to &lt;a href=&quot;file:/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/&lt;/a&gt; for the local mode and is reused for the mapreduce mode which causes the exception.&lt;br/&gt;
Now relativeRoot is not initialized by FetchOptimizer.&lt;/p&gt;

&lt;p&gt;I managed to run test-core successfully with -Dhadoopversion=23.&lt;/p&gt;</comment>
                            <comment id="13869187" author="cheolsoo" created="Sun, 12 Jan 2014 23:20:06 +0000"  >&lt;p&gt;Thank you Lorand! I am running unit tests again with your new patch.&lt;/p&gt;</comment>
                            <comment id="13870364" author="cheolsoo" created="Tue, 14 Jan 2014 04:05:11 +0000"  >&lt;p&gt;Unit tests all pass! Thank you so much!&lt;/p&gt;

&lt;p&gt;I am running e2e tests now.&lt;/p&gt;</comment>
                            <comment id="13872774" author="aniket486" created="Wed, 15 Jan 2014 23:19:21 +0000"  >&lt;p&gt;We have &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt; that makes small jobs run in hadoop local mode. If that looks good, we can avoid adding complexity of FetchOptimizer.&lt;/p&gt;</comment>
                            <comment id="13873082" author="cheolsoo" created="Thu, 16 Jan 2014 06:25:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;Aniket Mokashi&lt;/a&gt;, are you saying we should commit &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt; instead of this patch because the former includes the latter?&lt;/p&gt;</comment>
                            <comment id="13873440" author="lbendig" created="Thu, 16 Jan 2014 14:38:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;Aniket Mokashi&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt; is a great add-on! Although the two patches target the same issue, as far as I see, they are not overlapping.&lt;br/&gt;
I think, in this case &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3642&quot; title=&quot;Direct HDFS access for small jobs (fetch) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3642&quot;&gt;&lt;del&gt;PIG-3642&lt;/del&gt;&lt;/a&gt; can be regarded as a further optimization on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt; when only a subset of simple operators are used and there&apos;s even no need of kicking off the LocalJobRunner. Having both add-ons can result in a way faster development cycle, I think. Why do not have both?&lt;/p&gt;</comment>
                            <comment id="13873754" author="aniket486" created="Thu, 16 Jan 2014 18:51:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lbendig&quot; class=&quot;user-hover&quot; rel=&quot;lbendig&quot;&gt;Lorand Bendig&lt;/a&gt;, I&apos;m not against the adding this feature to pig. However, from feature point of view, &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt; is super set of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3642&quot; title=&quot;Direct HDFS access for small jobs (fetch) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3642&quot;&gt;&lt;del&gt;PIG-3642&lt;/del&gt;&lt;/a&gt; with less complexity (pre-tested code etc) and code maintenance. Hence, we should avoid adding this extra complexity and burden of maintenance, if possible.&lt;/p&gt;</comment>
                            <comment id="13875995" author="cheolsoo" created="Sun, 19 Jan 2014 20:15:08 +0000"  >&lt;p&gt;I will leave the decision to Aniket and Lorand.&lt;/p&gt;

&lt;p&gt;Just FYI- I have been running e2e tests, and I found many test failures even without this patch. So it was hard to tell whether this patch breaks any tests or not.&lt;/p&gt;

&lt;p&gt;Here is the result in the current trunk (without this patch)-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[exec] Final results ,    PASSED: 536  FAILED: 22   SKIPPED: 24   ABORTED: 62   FAILED DEPENDENCY: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We should fix these before things get worse.&lt;/p&gt;</comment>
                            <comment id="13876043" author="cheolsoo" created="Sun, 19 Jan 2014 23:01:57 +0000"  >&lt;p&gt;Actually, discard my e2e results. I found some environment issues and am rerunning them.&lt;/p&gt;</comment>
                            <comment id="13876315" author="lbendig" created="Mon, 20 Jan 2014 10:18:15 +0000"  >&lt;p&gt;Cheolsoo, thanks for testing it through.&lt;br/&gt;
However, I don&apos;t see the complexity as crucial, and it&apos;s also fairly separated from the existing code,&lt;br/&gt;
I see Aniket&apos;s point of view. I of course have +1 but obviously you guys on board have the right to make the decision.&lt;/p&gt;</comment>
                            <comment id="13876352" author="cheolsoo" created="Mon, 20 Jan 2014 11:20:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lbendig&quot; class=&quot;user-hover&quot; rel=&quot;lbendig&quot;&gt;Lorand Bendig&lt;/a&gt;, you&apos;re right. I was reviewing Aniket&apos;s patch today and realized that these two patches are fairly independent of each other.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;Aniket Mokashi&lt;/a&gt;, after understanding your patch more, I agree with Lorand regarding the complexity. Besides, it makes mapper only jobs almost instant. I couldn&apos;t compare runtime between &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3642&quot; title=&quot;Direct HDFS access for small jobs (fetch) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3642&quot;&gt;&lt;del&gt;PIG-3642&lt;/del&gt;&lt;/a&gt; because the current patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt; didn&apos;t work for mapper only jobs. However, I imagine it would be quite slower since it still launches local MR jobs, etc. So shall we commit both?&lt;/p&gt;

&lt;p&gt;In fact, what really concerns me is that these optimizations make many tests run differently than before. For eg, many e2e tests that are running as MR jobs now can run as fetch jobs. That significantly changes our code coverage. So I&apos;d like to explicitly disable these optimizations in all the existing e2e tests. It should be trivial to do via conf files. Do you agree?&lt;/p&gt;
</comment>
                            <comment id="13877734" author="cheolsoo" created="Tue, 21 Jan 2014 18:58:13 +0000"  >&lt;p&gt;Just FYI- e2e tests in trunk pass as of 01/21 except StreamingPythonUDFs_10. I will file a jira for this failure.&lt;/p&gt;</comment>
                            <comment id="13884027" author="lbendig" created="Tue, 28 Jan 2014 11:12:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;, do you think this patch is a good candidate to have it in trunk? If so, I&apos;d rebase it, had a look at the e2e conf and would run the unit tests again (e.g to see if it really doesn&apos;t conflict with &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3463&quot; title=&quot;Pig should use hadoop local mode for small jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3463&quot;&gt;&lt;del&gt;PIG-3463&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13884207" author="cheolsoo" created="Tue, 28 Jan 2014 14:49:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lbendig&quot; class=&quot;user-hover&quot; rel=&quot;lbendig&quot;&gt;Lorand Bendig&lt;/a&gt;, yes, I still want to commit this patch. As soon as you rebase your patch, I can re-run the tests.&lt;/p&gt;

&lt;p&gt;For e2e tests, I think you add &quot;opt.fetch=false&quot; to &quot;./test/e2e/pig/conf/testpropertiesfile.conf&quot;. (I haven&apos;t tested it.)&lt;/p&gt;</comment>
                            <comment id="13886095" author="lbendig" created="Thu, 30 Jan 2014 00:45:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;, the patch is rebased, minor adjustments were needed.&lt;br/&gt;
Only a few e2e tests are affected, so I turned off fetch at these&lt;br/&gt;
individually through the &apos;java_params&apos; property. (It seems to&lt;br/&gt;
me that setting opt.fetch=false in testpropertiesfile.conf doesn&apos;t work)&lt;/p&gt;</comment>
                            <comment id="13888830" author="cheolsoo" created="Sun, 2 Feb 2014 05:34:25 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;All the e2e tests pass except &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3679&quot; title=&quot;e2e StreamingPythonUDFs_10 fails in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3679&quot;&gt;PIG-3679&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3739&quot; title=&quot;The Warning_4 e2e test is broken in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3739&quot;&gt;PIG-3739&lt;/a&gt;. (Both are unrelated.) &lt;/p&gt;

&lt;p&gt;I also confirmed that the fetch optimization is explicitly disabled in all the effected e2e test cases, so they will run in the same manner as before. In fact, I found one &quot;commented-out&quot; test case that can be effected by the fetch optimization. So I made an one-line change just to be safe as follows-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;cmdline.conf#L71&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#			&apos;java_params&apos; =&amp;gt; [&apos;-Dopt.fetch=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;],
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I will commit &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3642&quot; title=&quot;Direct HDFS access for small jobs (fetch) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3642&quot;&gt;&lt;del&gt;PIG-3642&lt;/del&gt;&lt;/a&gt;-6.patch if I don&apos;t hear any objection.&lt;/p&gt;</comment>
                            <comment id="13889197" author="cheolsoo" created="Mon, 3 Feb 2014 04:02:08 +0000"  >&lt;p&gt;Committed to trunk. Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lbendig&quot; class=&quot;user-hover&quot; rel=&quot;lbendig&quot;&gt;Lorand Bendig&lt;/a&gt; for the great work!&lt;/p&gt;

&lt;p&gt;As discussed in the RB, I opened a documentation jira and assign it to you, It would be nice if you could add a brief description to the Pig manual about this new feature.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12692767">PIG-3740</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12602310">PIG-2864</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12621490" name="PIG-3642-3.patch" size="74118" author="cheolsoo" created="Sun, 5 Jan 2014 01:12:20 +0000"/>
                            <attachment id="12622535" name="PIG-3642-4.patch" size="75078" author="lbendig" created="Sun, 12 Jan 2014 08:59:41 +0000"/>
                            <attachment id="12626027" name="PIG-3642-5.patch" size="81882" author="lbendig" created="Thu, 30 Jan 2014 00:45:16 +0000"/>
                            <attachment id="12626508" name="PIG-3642-6.patch" size="83769" author="cheolsoo" created="Sun, 2 Feb 2014 05:34:25 +0000"/>
                            <attachment id="12620558" name="PIG-3642.patch" size="65533" author="lbendig" created="Thu, 26 Dec 2013 23:15:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 29 Dec 2013 06:45:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3641] Split &quot;otherwise&quot; producing incorrect output when combined with ColumnPruning</title>
                <link>https://issues.apache.org/jira/browse/PIG-3641</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Our user was observing incorrect outputs depending on if the query had intermediate output or not.  Below is a simplified testcase I came up with.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;knoguchi pig&amp;gt; cat test.txt
9,1,ignored
9,1,ignored
9,1,ignored
knoguchi pig&amp;gt; cat bz-6590644/test.pig
A = load &apos;test.txt&apos; using PigStorage(&apos;,&apos;) as (a1:int, a2:int, a3:chararray);
B = foreach A generate a1,a2;
SPLIT B into C1 if a2 == 1, D1 otherwise;
C2 = foreach C1 generate a2;
store C2 into &apos;/tmp/testC&apos;;
store D1 into &apos;/tmp/testD&apos;;
knoguchi@nameother-lm pig&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Incorrect output shown below.  /tmp/testD should be empty but somehow has data in it.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;knoguchi@nameother-lm pig&amp;gt; cat /tmp/testC/part-m-00000
1
1
1
knoguchi pig&amp;gt; cat /tmp/testD/part-m-00000
9       1
9       1
9       1
knoguchi pig&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12686225">PIG-3641</key>
            <summary>Split &quot;otherwise&quot; producing incorrect output when combined with ColumnPruning</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Dec 2013 22:46:12 +0000</created>
                <updated>Thu, 30 Jan 2014 17:03:46 +0000</updated>
                            <resolved>Thu, 30 Jan 2014 17:03:46 +0000</resolved>
                                    <version>0.10.0</version>
                    <version>0.12.0</version>
                    <version>0.11.1</version>
                    <version>0.13.0</version>
                                    <fixVersion>0.12.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13855992" author="knoguchi" created="Mon, 23 Dec 2013 22:52:13 +0000"  >&lt;p&gt;This issue is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3051&quot; title=&quot;java.lang.IndexOutOfBoundsException  failure with LimitOptimizer + ColumnPruning&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3051&quot;&gt;&lt;del&gt;PIG-3051&lt;/del&gt;&lt;/a&gt; where projection expression was pointing to a different operator.  In Pig-3051, it was about copied LOSort.  Here, it&apos;s about LOSplitOutput for &apos;otherwise&apos;. &lt;/p&gt;

&lt;p&gt;Attaching a preliminary patch.  Need to add testing.&lt;/p&gt;</comment>
                            <comment id="13884813" author="knoguchi" created="Tue, 28 Jan 2014 22:49:43 +0000"  >&lt;p&gt;Added an e2e testcase that shows how the output differs between &lt;br/&gt;
&quot;SPLIT B into C1 if age &amp;gt; 50, C2 otherwise;&quot; &lt;br/&gt;
and&lt;br/&gt;
&quot;SPLIT B into C1 if age &amp;gt; 50, C2 if age &amp;lt;= 50;&quot; &lt;br/&gt;
due to this bug.&lt;/p&gt;</comment>
                            <comment id="13886759" author="rohini" created="Thu, 30 Jan 2014 16:40:43 +0000"  >&lt;p&gt;+1. I ran the full suite of unit tests and they are fine. TestAutoLocalMode fails, but that is unrelated.&lt;/p&gt;</comment>
                            <comment id="13886776" author="rohini" created="Thu, 30 Jan 2014 16:55:41 +0000"  >&lt;p&gt;TestScriptLanguage.runParallelTest2 also failed. That is also unrelated. Will file a jira to fix both.&lt;/p&gt;</comment>
                            <comment id="13886785" author="knoguchi" created="Thu, 30 Jan 2014 17:03:46 +0000"  >&lt;p&gt;Thanks Rohini for the review!&lt;/p&gt;

&lt;p&gt;Committed to 0.12.1 and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620279" name="pig-3641_v01.patch" size="5626" author="knoguchi" created="Mon, 23 Dec 2013 22:52:13 +0000"/>
                            <attachment id="12625696" name="pig-3641_v02_withe2etest.patch" size="7403" author="knoguchi" created="Tue, 28 Jan 2014 22:49:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jan 2014 16:40:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3640] Retain intermediate files for debugging purpose in batch mode</title>
                <link>https://issues.apache.org/jira/browse/PIG-3640</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3117&quot; title=&quot;A debug mode in which pig does not delete temporary files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3117&quot;&gt;&lt;del&gt;PIG-3117&lt;/del&gt;&lt;/a&gt; make it configurable whether to keep intermediate files between MR jobs during the execution. So if we run queries in Grunt shell, we can keep intermediate files.&lt;/p&gt;

&lt;p&gt;However, intermediate files are still deleted when Pig exits. It would be nice if we could retain intermediate files even in batch mode for debugging purpose.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686086">PIG-3640</key>
            <summary>Retain intermediate files for debugging purpose in batch mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Dec 2013 00:43:08 +0000</created>
                <updated>Tue, 24 Dec 2013 05:02:34 +0000</updated>
                            <resolved>Tue, 24 Dec 2013 05:02:34 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13855321" author="cheolsoo" created="Mon, 23 Dec 2013 00:45:03 +0000"  >&lt;p&gt;Attaching a patch.&lt;/p&gt;</comment>
                            <comment id="13856043" author="aniket486" created="Tue, 24 Dec 2013 00:28:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13856142" author="cheolsoo" created="Tue, 24 Dec 2013 05:02:34 +0000"  >&lt;p&gt;Committed to trunk. Thank you Aniket for the review.&lt;/p&gt;

&lt;p&gt;p.s. Main.java had funny indentations. (Several hundreds of lines were left shifted by a tab.) I fixed it while touching the file.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12626350">PIG-3117</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12620108" name="PIG-3640-1.patch" size="1986" author="cheolsoo" created="Mon, 23 Dec 2013 00:45:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Dec 2013 00:28:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365048</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3639] TestRegisteredJarVisibility is broken in trunk</title>
                <link>https://issues.apache.org/jira/browse/PIG-3639</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    [junit] Running org.apache.pig.test.TestRegisteredJarVisibility
    [junit] Tests run: 3, Failures: 1, Errors: 0, Time elapsed: 44.127 sec
    [junit] Test org.apache.pig.test.TestRegisteredJarVisibility FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a side-effect of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3584&quot; title=&quot;AvroStorage does not correctly translate arrays of strings &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3584&quot;&gt;&lt;del&gt;PIG-3584&lt;/del&gt;&lt;/a&gt; that bumped avro version to 1.7.5.&lt;/p&gt;

&lt;p&gt;The problem is that avro 1.7.5 pulls down jackson 1.9.9 jars as dependencies, and that makes TestRegisteredJarVisibility.testRegisterJarOverridePigJarPackages fail because the test case assumes that jackson 1.9.9 jars are not present in classpath.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686030">PIG-3639</key>
            <summary>TestRegisteredJarVisibility is broken in trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Dec 2013 23:32:56 +0000</created>
                <updated>Fri, 27 Dec 2013 22:17:44 +0000</updated>
                            <resolved>Fri, 27 Dec 2013 22:17:44 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13855000" author="cheolsoo" created="Sat, 21 Dec 2013 23:38:03 +0000"  >&lt;p&gt;The patch excludes the jackson jars from avro dependencies.&lt;/p&gt;

&lt;p&gt;I confirmed TestRegisteredJarVisibility and TestAvroStorage both pass.&lt;/p&gt;</comment>
                            <comment id="13855477" author="jarcec" created="Mon, 23 Dec 2013 07:53:27 +0000"  >&lt;p&gt;Thank you for filling the JIRA and providing patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;! I was experiencing the same failure in our environment when upgraded Avro to version 1.7.5. Sadly I did not had time to investigate it myself. &lt;/p&gt;

&lt;p&gt;+1 (non-binding)&lt;/p&gt;</comment>
                            <comment id="13857678" author="rohini" created="Fri, 27 Dec 2013 19:54:06 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13857793" author="cheolsoo" created="Fri, 27 Dec 2013 22:17:44 +0000"  >&lt;p&gt;Committed to trunk. Thank you Jarcec and Rohini for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620060" name="PIG-3639-1.patch" size="1101" author="cheolsoo" created="Sat, 21 Dec 2013 23:38:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Dec 2013 07:53:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364907</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3638] Improve PigUnit</title>
                <link>https://issues.apache.org/jira/browse/PIG-3638</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hi. I have a suggestion to improve PigUnit&lt;br/&gt;
1. Add default functionality to feed several input to one script. I didn&apos;t find a way how to do it using exsiting API and had to extend it.&lt;br/&gt;
2. Allow to use &quot;native&quot; loaders. There are plenty of bug when you start to run in prod your script with AvroStorage/any other complacated storage. You can catch many schema/types related bugs on unit-test level.&lt;br/&gt;
3. The same for storage.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685974">PIG-3638</key>
            <summary>Improve PigUnit</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="serega_sheypak">Sergey</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Dec 2013 17:43:41 +0000</created>
                <updated>Thu, 26 Dec 2013 08:53:09 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13856800" author="prkommireddi" created="Thu, 26 Dec 2013 08:39:37 +0000"  >&lt;p&gt;Thanks for opening this JIRA Sergey. Do you have a patch you would like to contribute?&lt;/p&gt;

&lt;p&gt;We made a few changes to PigUnit too that we can contribute as a sub-jira to this.&lt;/p&gt;</comment>
                            <comment id="13856801" author="serega_sheypak" created="Thu, 26 Dec 2013 08:53:09 +0000"  >&lt;p&gt;I suppose that our approach won&apos;t fit current  PigUnit ideoma.&lt;br/&gt;
We&apos;ve used Groovy and we&apos;ve wrapped&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
def pigServer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PigServer(ExecType.LOCAL)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;with our PigScriptTest class which feeds script to  PigServer &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

            pigServer.registerScript(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(scriptFile.absolutePath), params, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ExecJob job : pigServer.executeBatch())
            {
                &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!job.hasCompleted())
                {
                    TimeUnit.SECONDS.sleep(1)
                }

                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (job.status != ExecJob.JOB_STATUS.COMPLETED)
                {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; PigExecutionResult.failed()
                }
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s more data-driven test, than unit-test. The major advantage is that we can use any Storage/Loader unitities in script and script can go to produnction without any modification.&lt;/p&gt;

&lt;p&gt;Typical Pig test looks this way:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
class FilterEnrichXvlrEventsTest
{

    @Test(groups = [&apos;integration&apos;])
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test01()
    {
        def test =
            pigScriptTest(&lt;span class=&quot;code-quote&quot;&gt;&quot;filter_enrich_xvlr_events.pig&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;test01&quot;&lt;/span&gt;)
                .withInput(&lt;span class=&quot;code-quote&quot;&gt;&quot;xvlr_data&quot;&lt;/span&gt;, [format: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FormatMetadata(inputFormatType: FormatType.CSV,
                                                           outputFormatType:FormatType.SEQ,
                                                           keyClass:        NullWritable.class,
                                                           valueClass:      Text)]) &lt;span class=&quot;code-comment&quot;&gt;//special converter from csv to SequenceFile. It&apos;s easier to manage test data stored as CSV than binary seq file. We Use Twitter SeqenceFile readers in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; script
&lt;/span&gt;                .withInput(&lt;span class=&quot;code-quote&quot;&gt;&quot;lol&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;lol.avro&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;//avro input &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; AvroStorage
&lt;/span&gt;                .withOutput(&lt;span class=&quot;code-quote&quot;&gt;&quot;out_lte&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;//several output STORE statements is script
&lt;/span&gt;                .withOutput(&lt;span class=&quot;code-quote&quot;&gt;&quot;out&quot;&lt;/span&gt;)

        def result = test.run()

        assertThat(result, is(completed()))

        assertThat(result, hasOutput(&lt;span class=&quot;code-quote&quot;&gt;&quot;out&quot;&lt;/span&gt;).notContains(&lt;span class=&quot;code-quote&quot;&gt;&quot;xxx&quot;&lt;/span&gt;))
        assertThat(result, hasOutput(&lt;span class=&quot;code-quote&quot;&gt;&quot;out&quot;&lt;/span&gt;).contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;yyy&quot;&lt;/span&gt;))

    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Dec 2013 08:39:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364872</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3637] PigCombiner creating log spam</title>
                <link>https://issues.apache.org/jira/browse/PIG-3637</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&quot;Aliases being processed per job phase&quot; is logged a lot of times even though it is in setup because Combiners can be called multiple times in both map and reduce by MR framework (&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-3226&quot; title=&quot;Run combiner when merging spills from map output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-3226&quot;&gt;&lt;del&gt;HADOOP-3226&lt;/del&gt;&lt;/a&gt;). With Hadoop 2.0 since logs go to hdfs this is inefficient.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685925">PIG-3637</key>
            <summary>PigCombiner creating log spam</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Dec 2013 23:43:54 +0000</created>
                <updated>Fri, 27 Dec 2013 19:55:15 +0000</updated>
                            <resolved>Fri, 27 Dec 2013 19:55:15 +0000</resolved>
                                    <version>0.11.1</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13854696" author="rohini" created="Sat, 21 Dec 2013 00:18:43 +0000"  >&lt;p&gt;No new test added. But ran TestCombiner with -Dhadoopversion=23&lt;/p&gt;

&lt;p&gt;find target | xargs grep -H &quot;Aliases being processed&quot; | grep Combiner | wc -l&lt;/p&gt;

&lt;p&gt;Before the patch it was 34 and after the patch it was 5. &lt;/p&gt;

&lt;p&gt;As for the usefulness of cutting down on this log statement - in the case reported by one of our users, one map task alone had the same log line repeated 1001 times and the job had 32K maps.&lt;/p&gt;</comment>
                            <comment id="13857608" author="cheolsoo" created="Fri, 27 Dec 2013 18:15:29 +0000"  >&lt;p&gt;+1. LGTM.&lt;/p&gt;</comment>
                            <comment id="13857683" author="rohini" created="Fri, 27 Dec 2013 19:55:15 +0000"  >&lt;p&gt;Committed to trunk (0.13). Thanks for the review Cheolsoo.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619938" name="PIG-3637-1.patch" size="1424" author="rohini" created="Sat, 21 Dec 2013 00:12:09 +0000"/>
                            <attachment id="12620642" name="PIG-3637-2-whitespacechanges.patch" size="7552" author="rohini" created="Fri, 27 Dec 2013 19:54:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Dec 2013 18:15:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364924</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3636] Make accumulator UDF work in Tez</title>
                <link>https://issues.apache.org/jira/browse/PIG-3636</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The goal of this jira is make TestAccumulator pass in Tez mode.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685725">PIG-3636</key>
            <summary>Make accumulator UDF work in Tez</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Dec 2013 01:32:28 +0000</created>
                <updated>Fri, 27 Dec 2013 06:50:20 +0000</updated>
                            <resolved>Fri, 27 Dec 2013 06:50:20 +0000</resolved>
                                    <version>tez-branch</version>
                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13856763" author="cheolsoo" created="Thu, 26 Dec 2013 05:45:26 +0000"  >&lt;p&gt;Attaching a patch. RB link is here-&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/16463/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16463/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13857342" author="cheolsoo" created="Fri, 27 Dec 2013 06:41:41 +0000"  >&lt;p&gt;Updating the patch.&lt;/p&gt;</comment>
                            <comment id="13857350" author="cheolsoo" created="Fri, 27 Dec 2013 06:50:20 +0000"  >&lt;p&gt;Committed to tez branch. Thank you Rohini for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620473" name="PIG-3636-1.patch" size="60874" author="cheolsoo" created="Thu, 26 Dec 2013 05:45:26 +0000"/>
                            <attachment id="12620588" name="PIG-3636-2.patch" size="62273" author="cheolsoo" created="Fri, 27 Dec 2013 06:41:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364805</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364800</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3635] Fix e2e tests for Hadoop 2.X on Windows</title>
                <link>https://issues.apache.org/jira/browse/PIG-3635</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description></description>
                <environment></environment>
        <key id="12685576">PIG-3635</key>
            <summary>Fix e2e tests for Hadoop 2.X on Windows</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ssvinarchukhorton">Sergey Svinarchuk</assignee>
                                    <reporter username="ssvinarchukhorton">Sergey Svinarchuk</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Dec 2013 12:26:19 +0000</created>
                <updated>Thu, 19 Dec 2013 12:34:52 +0000</updated>
                                            <version>0.12.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13852854" author="ssvinarchukhorton" created="Thu, 19 Dec 2013 12:27:42 +0000"  >&lt;p&gt;Attached file with fix &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619538" name="3635.patch" size="8718" author="ssvinarchukhorton" created="Thu, 19 Dec 2013 12:34:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3634] Improve performance of order-by</title>
                <link>https://issues.apache.org/jira/browse/PIG-3634</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;This is a followup for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3534&quot; title=&quot;Make order by work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3534&quot;&gt;&lt;del&gt;PIG-3534&lt;/del&gt;&lt;/a&gt;. In &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3534&quot; title=&quot;Make order by work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3534&quot;&gt;&lt;del&gt;PIG-3534&lt;/del&gt;&lt;/a&gt;, we use 5 vertexes (3 DAGs) to implement an order-by. We can optimize to use 4 vertexes in 1 DAG:&lt;/p&gt;

&lt;p&gt;vertex 1: close the current vertex, create input + samples input&lt;br/&gt;
vertex 2: aggregate samples to create quantiles&lt;br/&gt;
vertex 3: use quantiles to partition input&lt;br/&gt;
vertex 4: sort input after partition&lt;/p&gt;

&lt;p&gt;The DAG is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
vertex 1   ------------------&amp;gt;  vertex 3 ------&amp;gt; vertex 4
           \--&amp;gt; vertex 2 ---/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12685442">PIG-3634</key>
            <summary>Improve performance of order-by</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Dec 2013 19:33:40 +0000</created>
                <updated>Thu, 2 Jan 2014 08:08:12 +0000</updated>
                            <resolved>Wed, 1 Jan 2014 00:08:12 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13857884" author="daijy" created="Sat, 28 Dec 2013 01:12:21 +0000"  >&lt;p&gt;Attach partial patch. Operators_4 is still failing, I will attach a new patch once fixed.&lt;/p&gt;</comment>
                            <comment id="13857978" author="daijy" created="Sat, 28 Dec 2013 07:36:47 +0000"  >&lt;p&gt;Operators_4 fixed.&lt;/p&gt;</comment>
                            <comment id="13858253" author="cheolsoo" created="Sun, 29 Dec 2013 05:39:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt;, I am seeing an error with your patch when running this query-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a = load &apos;/user/pig/tests/data/singlefile/studenttab10k&apos; as (name:chararray, age:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, gpa:&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;);
b = order a by age parallel 2;
dump b;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I updated Tez to the latest, so that shouldn&apos;t be a problem. It looks like your patch is not compatible with the HEAD of tez branch.&lt;/p&gt;

&lt;p&gt;Here is the stack trace-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
: Caused by: java.lang.ClassCastException: org.apache.pig.impl.io.NullableBytesWritable cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to org.apache.pig.impl.io.NullableText
: at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigTextRawComparator.compare(PigTextRawComparator.java:86)
: at org.apache.pig.backend.hadoop.executionengine.tez.POShuffleTezLoad.getNextTuple(POShuffleTezLoad.java:142)
: at org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.processInput(PhysicalOperator.java:296)
: at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.getNextTuple(POForEach.java:242)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13858296" author="daijy" created="Sun, 29 Dec 2013 10:01:40 +0000"  >&lt;p&gt;Not sure why it works before &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3636&quot; title=&quot;Make accumulator UDF work in Tez&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3636&quot;&gt;&lt;del&gt;PIG-3636&lt;/del&gt;&lt;/a&gt;. Reattach patch.&lt;/p&gt;</comment>
                            <comment id="13858407" author="rohini" created="Sun, 29 Dec 2013 19:32:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt;,&lt;br/&gt;
    Is there a reviewboard link for this patch?&lt;/p&gt;</comment>
                            <comment id="13858508" author="daijy" created="Mon, 30 Dec 2013 01:21:35 +0000"  >&lt;p&gt;Here is RB link: &lt;a href=&quot;https://reviews.apache.org/r/16510/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16510/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13858511" author="rohini" created="Mon, 30 Dec 2013 01:31:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;,&lt;br/&gt;
   java.lang.ClassCastException: org.apache.pig.impl.io.NullableBytesWritable cannot be cast to org.apache.pig.impl.io.NullableText happens after &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3636&quot; title=&quot;Make accumulator UDF work in Tez&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3636&quot;&gt;&lt;del&gt;PIG-3636&lt;/del&gt;&lt;/a&gt; as Daniel mentioned. Without that checkin e2e tests pass fine for me as well.  Initially seeing your comment, I thought that the query failed because Daniel said that just load followed by order by will not work in this patch. &lt;/p&gt;</comment>
                            <comment id="13858515" author="cheolsoo" created="Mon, 30 Dec 2013 01:41:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;, with the latest patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3634&quot; title=&quot;Improve performance of order-by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3634&quot;&gt;&lt;del&gt;PIG-3634&lt;/del&gt;&lt;/a&gt;-2.patch) that Daniel uploaded everything works for me. Do you still see any error?&lt;/p&gt;</comment>
                            <comment id="13858518" author="cheolsoo" created="Mon, 30 Dec 2013 01:59:22 +0000"  >&lt;p&gt;To be clear, I see no e2e failures in the current tez branch either.&lt;/p&gt;</comment>
                            <comment id="13858526" author="daijy" created="Mon, 30 Dec 2013 02:13:48 +0000"  >&lt;p&gt;Thanks for clarification. &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3634&quot; title=&quot;Improve performance of order-by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3634&quot;&gt;&lt;del&gt;PIG-3634&lt;/del&gt;&lt;/a&gt;-2.patch should work with top of tez branch now.&lt;/p&gt;</comment>
                            <comment id="13859706" author="cheolsoo" created="Tue, 31 Dec 2013 21:28:16 +0000"  >&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;Since I had time today, I went ahead update the patch addressing my comments in the RB. I did not change any logic but reorganized the code as follows-&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Create WeightedRangePartitionerTez under tez package that extends WeightedRangePartitioner. The new class only overrides the init() method.&lt;/li&gt;
	&lt;li&gt;Factor out POLocalRearrangeTezFactory into a separate file.&lt;/li&gt;
	&lt;li&gt;Factor out new POPackage() calls with getPackage() method.&lt;/li&gt;
	&lt;li&gt;Add SAMPLER to OPER_FEATURE in TezOperator and uncomment markSampler().&lt;/li&gt;
	&lt;li&gt;Change RoundRobinPartitioner as follows:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class RoundRobinPartitioner &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Partitioner&amp;lt;PigNullableWritable, Writable&amp;gt; {
     &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; num = 0;
 
     @Override
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getPartition(PigNullableWritable key, Writable value, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numPartitions) {
         num = ++num % numPartitions;
         &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; num;
     }
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;You can browse the changes &lt;a href=&quot;https://github.com/piaozhexiu/apache-pig/commit/507a04e36e8ea9a16c93cd252447c3a06cafdfa0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I also verified that-&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;ant test-tez passes.&lt;/li&gt;
	&lt;li&gt;e2e tests pass.&lt;/li&gt;
	&lt;li&gt;ant test-commit -Dhadoopversion=20 -Dexectype=mr passes except TestExampleGenerator (expected).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;We can make further changes in separate jiras if needed. I will commit &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3634&quot; title=&quot;Improve performance of order-by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3634&quot;&gt;&lt;del&gt;PIG-3634&lt;/del&gt;&lt;/a&gt;-3.patch&quot; today if there is no objection. I&apos;d like to rebase my skewed join patch to this. Thanks!&lt;/p&gt;</comment>
                            <comment id="13859797" author="cheolsoo" created="Wed, 1 Jan 2014 00:08:12 +0000"  >&lt;p&gt;Committed to tez branch. Thank you Daniel!&lt;/p&gt;

&lt;p&gt;FYI-&lt;br/&gt;
I made WeightedRangeParitioner throw a runtime exception when it fails to deserialize PigContext.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    pigContext = (PigContext)ObjectSerializer.deserialize(job.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;pig.pigContext&quot;&lt;/span&gt;));
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
   &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to deserialize pig context: &quot;&lt;/span&gt;, e);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The exception used to be swallowed by the catch block resulting in pigContext being null. It seems better to fail early in this case.&lt;/p&gt;

&lt;p&gt;I ran all the e2e and unit tests before committing.&lt;/p&gt;</comment>
                            <comment id="13860079" author="daijy" created="Thu, 2 Jan 2014 08:08:12 +0000"  >&lt;p&gt;Thanks Cheolsoo!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12685438">TEZ-683</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12620696" name="PIG-3634-0.patch" size="53747" author="daijy" created="Sat, 28 Dec 2013 01:12:21 +0000"/>
                            <attachment id="12620723" name="PIG-3634-1.patch" size="51993" author="daijy" created="Sat, 28 Dec 2013 07:41:14 +0000"/>
                            <attachment id="12620765" name="PIG-3634-2.patch" size="51967" author="daijy" created="Sun, 29 Dec 2013 10:01:40 +0000"/>
                            <attachment id="12620985" name="PIG-3634-3.patch" size="65260" author="cheolsoo" created="Tue, 31 Dec 2013 21:28:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 29 Dec 2013 05:39:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364524</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3633] AvroStorage tests are failing when running against Avro 1.7.5</title>
                <link>https://issues.apache.org/jira/browse/PIG-3633</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;tt&gt;AvroStorage&lt;/tt&gt; tests executed against latest Avro release 1.7.5 are failing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant clean test -Dtestcase=TestAvroStorage -Davro.version=1.7.5
...
   [junit] Running org.apache.pig.builtin.TestAvroStorage
   [junit] Tests run: 33, Failures: 15, Errors: 0, Time elapsed: 14.211 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed to parse: Pig script failed to parse: 
&amp;lt;line 1, column 5&amp;gt; pig script failed to validate: java.lang.RuntimeException: could not instantiate &apos;AvroStorage&apos; with arguments &apos;[, -r]&apos;
	at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:196)
	at org.apache.pig.PigServer$Graph.parseQuery(PigServer.java:1676)
	at org.apache.pig.PigServer$Graph.registerQuery(PigServer.java:1623)
	at org.apache.pig.PigServer.registerQuery(PigServer.java:575)
	at org.apache.pig.tools.grunt.GruntParser.processPig(GruntParser.java:1093)
	at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:501)
	at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:198)
	at org.apache.pig.PigServer.registerScript(PigServer.java:649)
	at org.apache.pig.PigServer.registerScript(PigServer.java:726)
	at org.apache.pig.PigServer.registerScript(PigServer.java:699)
	at org.apache.pig.builtin.TestAvroStorage.testAvroStorage(TestAvroStorage.java:775)
	at org.apache.pig.builtin.TestAvroStorage.testLoadRecursiveRecordsOptionOn(TestAvroStorage.java:588)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906)
Caused by: 
&amp;lt;line 1, column 5&amp;gt; pig script failed to validate: java.lang.RuntimeException: could not instantiate &apos;AvroStorage&apos; with arguments &apos;[, -r]&apos;
	at org.apache.pig.parser.LogicalPlanBuilder.buildLoadOp(LogicalPlanBuilder.java:849)
	at org.apache.pig.parser.LogicalPlanGenerator.load_clause(LogicalPlanGenerator.java:3479)
	at org.apache.pig.parser.LogicalPlanGenerator.op_clause(LogicalPlanGenerator.java:1536)
	at org.apache.pig.parser.LogicalPlanGenerator.general_statement(LogicalPlanGenerator.java:1013)
	at org.apache.pig.parser.LogicalPlanGenerator.statement(LogicalPlanGenerator.java:553)
	at org.apache.pig.parser.LogicalPlanGenerator.query(LogicalPlanGenerator.java:421)
	at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:188)
	... 34 more
Caused by: java.lang.RuntimeException: could not instantiate &apos;AvroStorage&apos; with arguments &apos;[, -r]&apos;
	at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:748)
	at org.apache.pig.parser.LogicalPlanBuilder.buildLoadOp(LogicalPlanBuilder.java:837)
	... 40 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
	at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:716)
	... 41 more
Caused by: java.lang.NullPointerException
	at org.apache.avro.Schema.parse(Schema.java:1072)
	at org.apache.avro.Schema$Parser.parse(Schema.java:950)
	at org.apache.avro.Schema$Parser.parse(Schema.java:940)
	at org.apache.pig.builtin.AvroStorage.&amp;lt;init&amp;gt;(AvroStorage.java:136)
	... 46 more
3701 [main] WARN  org.apache.pig.tools.parameters.PreprocessorContext  - Warning : Multiple values found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; INFILE. Using value test/org/apache/pig/builtin/avro/data/trevni/uncompressed/simpleRecordsTrevni.trevni
3701 [main] WARN  org.apache.pig.tools.parameters.PreprocessorContext  - Warning : Multiple values found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; AVROSTORAGE_OUT_2. Using value -f test/org/apache/pig/builtin/avro/schema/simpleRecordsTrevni.avsc
3702 [main] WARN  org.apache.pig.tools.parameters.PreprocessorContext  - Warning : Multiple values found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; OUTFILE. Using value /home/jarcec/cloudera/repos/pig/build/test/TestAvroStorage/testLoadTrevniRecords
3732 [main] ERROR org.apache.pig.PigServer  - exception during parsing: Error during parsing. Pig script failed to parse: 
&amp;lt;line 4, column 0&amp;gt; pig script failed to validate: java.lang.RuntimeException: could not instantiate &apos;AvroStorage&apos; with arguments &apos;[, -f test/org/apache/pig/builtin/avro/schema/simpleRecordsTrevni.avsc]&apos;
Failed to parse: Pig script failed to parse: 
&amp;lt;line 4, column 0&amp;gt; pig script failed to validate: java.lang.RuntimeException: could not instantiate &apos;AvroStorage&apos; with arguments &apos;[, -f test/org/apache/pig/builtin/avro/schema/simpleRecordsTrevni.avsc]&apos;
	at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:196)
	at org.apache.pig.PigServer$Graph.parseQuery(PigServer.java:1676)
	at org.apache.pig.PigServer$Graph.registerQuery(PigServer.java:1623)
	at org.apache.pig.PigServer.registerQuery(PigServer.java:575)
	at org.apache.pig.tools.grunt.GruntParser.processPig(GruntParser.java:1093)
	at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:501)
	at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:198)
	at org.apache.pig.PigServer.registerScript(PigServer.java:649)
	at org.apache.pig.PigServer.registerScript(PigServer.java:726)
	at org.apache.pig.PigServer.registerScript(PigServer.java:699)
	at org.apache.pig.builtin.TestAvroStorage.testAvroStorage(TestAvroStorage.java:775)
	at org.apache.pig.builtin.TestAvroStorage.testLoadTrevniRecords(TestAvroStorage.java:709)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906)
Caused by: 
&amp;lt;line 4, column 0&amp;gt; pig script failed to validate: java.lang.RuntimeException: could not instantiate &apos;AvroStorage&apos; with arguments &apos;[, -f test/org/apache/pig/builtin/avro/schema/simpleRecordsTrevni.avsc]&apos;
	at org.apache.pig.parser.LogicalPlanBuilder.buildStoreOp(LogicalPlanBuilder.java:936)
	at org.apache.pig.parser.LogicalPlanGenerator.store_clause(LogicalPlanGenerator.java:7691)
	at org.apache.pig.parser.LogicalPlanGenerator.op_clause(LogicalPlanGenerator.java:1580)
	at org.apache.pig.parser.LogicalPlanGenerator.general_statement(LogicalPlanGenerator.java:1013)
	at org.apache.pig.parser.LogicalPlanGenerator.statement(LogicalPlanGenerator.java:553)
	at org.apache.pig.parser.LogicalPlanGenerator.query(LogicalPlanGenerator.java:421)
	at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:188)
	... 34 more
Caused by: java.lang.RuntimeException: could not instantiate &apos;AvroStorage&apos; with arguments &apos;[, -f test/org/apache/pig/builtin/avro/schema/simpleRecordsTrevni.avsc]&apos;
	at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:748)
	at org.apache.pig.parser.LogicalPlanBuilder.buildStoreOp(LogicalPlanBuilder.java:915)
	... 40 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
	at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:716)
	... 41 more
Caused by: java.lang.NullPointerException
	at org.apache.avro.Schema.parse(Schema.java:1072)
	at org.apache.avro.Schema$Parser.parse(Schema.java:950)
	at org.apache.avro.Schema$Parser.parse(Schema.java:940)
	at org.apache.pig.builtin.AvroStorage.&amp;lt;init&amp;gt;(AvroStorage.java:136)
	... 46 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomwhite&quot; class=&quot;user-hover&quot; rel=&quot;tomwhite&quot;&gt;Tom White&lt;/a&gt; has looked into the problem and found out that Avro  in version 1.7.5 has updated the JSON parser library Jackson from 1.8.8 to 1.9.13. The new version is changing the way empty strings are processed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685346">PIG-3633</key>
            <summary>AvroStorage tests are failing when running against Avro 1.7.5</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jarcec">Jarek Jarcec Cecho</assignee>
                                    <reporter username="jarcec">Jarek Jarcec Cecho</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Dec 2013 09:30:52 +0000</created>
                <updated>Thu, 19 Dec 2013 08:00:39 +0000</updated>
                            <resolved>Wed, 18 Dec 2013 18:21:14 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13851526" author="jarcec" created="Wed, 18 Dec 2013 09:33:14 +0000"  >&lt;p&gt;Attaching patch that will skip schema parsing if the given string is empty. This seems to resolve the failing tests.&lt;/p&gt;</comment>
                            <comment id="13851986" author="cheolsoo" created="Wed, 18 Dec 2013 18:19:23 +0000"  >&lt;p&gt;+1. I can reproduce failures. I will commit it shortly.&lt;/p&gt;</comment>
                            <comment id="13851987" author="cheolsoo" created="Wed, 18 Dec 2013 18:21:14 +0000"  >&lt;p&gt;Committed to trunk. Thank you Jarcec!&lt;/p&gt;</comment>
                            <comment id="13852715" author="jarcec" created="Thu, 19 Dec 2013 08:00:39 +0000"  >&lt;p&gt;Thank you for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;, appreciated!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619283" name="PIG-3633.patch" size="511" author="jarcec" created="Wed, 18 Dec 2013 09:33:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Dec 2013 18:19:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364428</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364423</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3632] Add option to configure cacheBlocks in HBaseStorage</title>
                <link>https://issues.apache.org/jira/browse/PIG-3632</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;By default it should be set to false as we don&apos;t wan&apos;t users trashing the cache unintentionally.  But there are some cases, a user wants to work on the same data potentially and it would be good to warm up the cache.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685247">PIG-3632</key>
            <summary>Add option to configure cacheBlocks in HBaseStorage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Dec 2013 20:54:17 +0000</created>
                <updated>Fri, 27 Dec 2013 19:24:13 +0000</updated>
                            <resolved>Fri, 27 Dec 2013 19:24:13 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13856802" author="prkommireddi" created="Thu, 26 Dec 2013 08:56:30 +0000"  >&lt;p&gt;LGTM +1&lt;/p&gt;

&lt;p&gt;Important to note users repeatedly accessing data using similar scans could notice a difference here as the default hbase config for this property is set to true. For MR in general, completely makes sense to set it to false.&lt;/p&gt;</comment>
                            <comment id="13857660" author="rohini" created="Fri, 27 Dec 2013 19:24:13 +0000"  >&lt;p&gt; We want it to be false by default in MR (Refer &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2619&quot; title=&quot;HBaseStorage constructs a Scan with cacheBlocks = false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2619&quot;&gt;&lt;del&gt;PIG-2619&lt;/del&gt;&lt;/a&gt;). Our hbase team also has recommended the same as default, but for few users they wanted to have this true. So made it configurable.&lt;/p&gt;

&lt;p&gt;Committed to trunk (0.13). Thanks Prashant for the review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619438" name="PIG-3632-1.patch" size="6517" author="rohini" created="Wed, 18 Dec 2013 23:35:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Dec 2013 08:56:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[PIG-3631] Improve performance of replicate-join</title>
                <link>https://issues.apache.org/jira/browse/PIG-3631</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Replicated join is implemented in Tez as follows:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;POFRJoinTez extends POFRJoin. The difference between two is that replication hash table is constructed out of broadcasting edges in Tez instead of files on distributed cache in MR.&lt;/li&gt;
	&lt;li&gt;TezCompiler adds a vertex per replicated table and connect it to POFRJoin vertex via broadcasting edge.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Verify no performance regression with MR:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The above approach is good when the replicate join is not the first vertex of the DAG (i.e in case of a MR, replicate join is part of a reduce). If it is the first vertex of the DAG, we need to compare and see that with this approach the performance does not regress with the MR&apos;s map only replicate join using distributed cache.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Evaluate:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Instead of broadcasting key values and constructing hashmap, evaluate broadcasting (or distributing via cache based on performance) serialized hashmap and loading it as is similar to hive.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12685191">PIG-3631</key>
            <summary>Improve performance of replicate-join</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Dec 2013 15:33:39 +0000</created>
                <updated>Tue, 17 Dec 2013 15:33:40 +0000</updated>
                                                            <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364273</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364268</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3630] Macros that work in Pig 0.11 fail in Pig 0.12 :(</title>
                <link>https://issues.apache.org/jira/browse/PIG-3630</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://my.safaribooksonline.com/book/databases/9781449326890/7dot-exploring-data-with-reports/i_sect13_id196600_html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://my.safaribooksonline.com/book/databases/9781449326890/7dot-exploring-data-with-reports/i_sect13_id196600_html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The ntf-idf macro listed there works under 0.11. Under 0.12, it results in this: &lt;/p&gt;

&lt;p&gt;13/12/16 22:09:19 INFO pig.ExecTypeProvider: Trying ExecType : LOCAL&lt;br/&gt;
2013-12-16 22:09:19,159 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.Main - Apache Pig version 0.13.0-SNAPSHOT (rUnversioned directory) compiled Dec 09 2013, 14:37:29&lt;br/&gt;
2013-12-16 22:09:19,159 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.Main - Logging error messages to: /private/tmp/pig_1387260559120.log&lt;br/&gt;
2013-12-16 22:09:19.268 java&lt;span class=&quot;error&quot;&gt;&amp;#91;38060:1903&amp;#93;&lt;/span&gt; Unable to load realm info from SCDynamicStore&lt;br/&gt;
2013-12-16 22:09:19,528 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.HExecutionEngine - Connecting to hadoop file system at: &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///&lt;/a&gt;&lt;br/&gt;
2013-12-16 22:09:20,189 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1025: &lt;br/&gt;
at expanding macro &apos;tf_idf&apos; (per_business.pig:9)&lt;br/&gt;
&amp;lt;file per_business.pig, line 35, column 17&amp;gt; Invalid field projection. Projected field &lt;span class=&quot;error&quot;&gt;&amp;#91;tf_idf&amp;#93;&lt;/span&gt; does not exist in schema: business_id:chararray,token:chararray,term_freq:double,num_docs_with_token:long.&lt;br/&gt;
2013-12-16 22:09:20,189 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - org.apache.pig.impl.plan.PlanValidationException: ERROR 1025: &lt;br/&gt;
at expanding macro &apos;tf_idf&apos; (per_business.pig:9)&lt;br/&gt;
&amp;lt;file per_business.pig, line 35, column 17&amp;gt; Invalid field projection. Projected field &lt;span class=&quot;error&quot;&gt;&amp;#91;tf_idf&amp;#93;&lt;/span&gt; does not exist in schema: business_id:chararray,token:chararray,term_freq:double,num_docs_with_token:long.&lt;br/&gt;
	at org.apache.pig.newplan.logical.expression.ProjectExpression.findColNum(ProjectExpression.java:191)&lt;br/&gt;
	at org.apache.pig.newplan.logical.expression.ProjectExpression.setColumnNumberFromAlias(ProjectExpression.java:174)&lt;br/&gt;
	at org.apache.pig.newplan.logical.visitor.ColumnAliasConversionVisitor$1.visit(ColumnAliasConversionVisitor.java:53)&lt;br/&gt;
	at org.apache.pig.newplan.logical.expression.ProjectExpression.accept(ProjectExpression.java:215)&lt;br/&gt;
	at org.apache.pig.newplan.DependencyOrderWalker.walk(DependencyOrderWalker.java:75)&lt;br/&gt;
	at org.apache.pig.newplan.PlanVisitor.visit(PlanVisitor.java:52)&lt;br/&gt;
	at org.apache.pig.newplan.logical.optimizer.AllExpressionVisitor.visit(AllExpressionVisitor.java:142)&lt;br/&gt;
	at org.apache.pig.newplan.logical.relational.LOInnerLoad.accept(LOInnerLoad.java:128)&lt;br/&gt;
	at org.apache.pig.newplan.DependencyOrderWalker.walk(DependencyOrderWalker.java:75)&lt;br/&gt;
	at org.apache.pig.newplan.logical.optimizer.AllExpressionVisitor.visit(AllExpressionVisitor.java:124)&lt;br/&gt;
	at org.apache.pig.newplan.logical.relational.LOForEach.accept(LOForEach.java:76)&lt;br/&gt;
	at org.apache.pig.newplan.DependencyOrderWalker.walk(DependencyOrderWalker.java:75)&lt;br/&gt;
	at org.apache.pig.newplan.PlanVisitor.visit(PlanVisitor.java:52)&lt;br/&gt;
	at org.apache.pig.PigServer$Graph.compile(PigServer.java:1694)&lt;br/&gt;
	at org.apache.pig.PigServer$Graph.compile(PigServer.java:1686)&lt;br/&gt;
	at org.apache.pig.PigServer$Graph.access$200(PigServer.java:1387)&lt;br/&gt;
	at org.apache.pig.PigServer.execute(PigServer.java:1302)&lt;br/&gt;
	at org.apache.pig.PigServer.executeBatch(PigServer.java:391)&lt;br/&gt;
	at org.apache.pig.PigServer.executeBatch(PigServer.java:369)&lt;br/&gt;
	at org.apache.pig.tools.grunt.GruntParser.executeBatch(GruntParser.java:133)&lt;br/&gt;
	at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:195)&lt;br/&gt;
	at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:166)&lt;br/&gt;
	at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)&lt;br/&gt;
	at org.apache.pig.Main.run(Main.java:600)&lt;br/&gt;
	at org.apache.pig.Main.main(Main.java:156)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
	at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12685100">PIG-3630</key>
            <summary>Macros that work in Pig 0.11 fail in Pig 0.12 :(</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="russell.jurney">Russell Jurney</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Dec 2013 06:16:04 +0000</created>
                <updated>Fri, 20 Dec 2013 04:42:53 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13851239" author="dvryaboy" created="Wed, 18 Dec 2013 01:50:01 +0000"  >&lt;p&gt;Could you link to the code directly, rather than the book? The Safari website is giving me interstitials and other unpleasant things.&lt;/p&gt;

&lt;p&gt;Have you investigated the schemas of relations referred to in the error message, and checked if your field references make sense?&lt;/p&gt;

&lt;p&gt;2013-12-16 22:09:20,189 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1025: &lt;br/&gt;
at expanding macro &apos;tf_idf&apos; (per_business.pig:9)&lt;br/&gt;
&amp;lt;file per_business.pig, line 35, column 17&amp;gt; Invalid field projection. Projected field &lt;span class=&quot;error&quot;&gt;&amp;#91;tf_idf&amp;#93;&lt;/span&gt; does not exist in schema: business_id:chararray,token:chararray,term_freq:double,num_docs_with_token:long.&lt;/p&gt;</comment>
                            <comment id="13851394" author="russell.jurney" created="Wed, 18 Dec 2013 05:44:15 +0000"  >&lt;p&gt;Thanks for taking a look, the macro is at &lt;a href=&quot;https://github.com/rjurney/Agile_Data_Code/blob/master/ch07/pig/ntfidf.macro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rjurney/Agile_Data_Code/blob/master/ch07/pig/ntfidf.macro&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13851412" author="dvryaboy" created="Wed, 18 Dec 2013 06:08:49 +0000"  >&lt;p&gt;That macro does not refer to a field called tf_idf. Could you post a fully reproducible test case?&lt;/p&gt;</comment>
                            <comment id="13852067" author="russell.jurney" created="Wed, 18 Dec 2013 19:29:51 +0000"  >&lt;p&gt;That one fails too. But yes: &lt;a href=&quot;http://hortonworks.com/blog/pig-macro-for-tf-idf-makes-topic-summarization-2-lines-of-pig/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hortonworks.com/blog/pig-macro-for-tf-idf-makes-topic-summarization-2-lines-of-pig/&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13852133" author="dvryaboy" created="Wed, 18 Dec 2013 20:34:31 +0000"  >&lt;p&gt;Is this a AvroStorage or data issue? &lt;/p&gt;

&lt;p&gt;grunt&amp;gt; import &apos;/Users/dmitriy/tmp/tf_idf.macro&apos;;                                      &lt;br/&gt;
grunt&amp;gt; register build/ivy/lib/Pig/avro-1.7.4.jar                                      &lt;br/&gt;
grunt&amp;gt; register build/ivy/lib/Pig/json-simple-1.1.jar                                 &lt;br/&gt;
grunt&amp;gt; register contrib/piggybank/java/piggybank.jar                                  &lt;br/&gt;
grunt&amp;gt; define AvroStorage org.apache.pig.piggybank.storage.avro.AvroStorage();        &lt;br/&gt;
grunt&amp;gt; emails = load &apos;/Users/dmitriy/Downloads/enron.avro&apos;;                   &lt;br/&gt;
grunt&amp;gt; describe emails&lt;br/&gt;
Schema for emails unknown.&lt;/p&gt;

&lt;p&gt;(this is the same in both pig 0.11 and pig 0.12).&lt;/p&gt;

&lt;p&gt;Can you provide a simple reproducible use case that doesn&apos;t involve Avro, etc?&lt;/p&gt;

&lt;p&gt;Can you share what debugging you&apos;ve done so far?&lt;/p&gt;

</comment>
                            <comment id="13852189" author="russell.jurney" created="Wed, 18 Dec 2013 21:41:56 +0000"  >&lt;p&gt;You forgot to put &apos;USING AvroStorage(); at the end of your load.&lt;/p&gt;</comment>
                            <comment id="13852221" author="dvryaboy" created="Wed, 18 Dec 2013 22:07:04 +0000"  >&lt;p&gt;Sure enough. &lt;/p&gt;

&lt;p&gt;Once I add that, everything works in 0.12 and now I can&apos;t reproduce the bug you are reporting.&lt;/p&gt;

&lt;p&gt;My pig is&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;tw-mbp13-dryaboy-2 pig-0.12&amp;#93;&lt;/span&gt;$ ./bin/pig -version&lt;br/&gt;
Apache Pig version 0.12.0-SNAPSHOT (r1526044) &lt;br/&gt;
compiled Dec 18 2013, 12:15:04&lt;/p&gt;

&lt;p&gt;same with more recent:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;tw-mbp13-dryaboy-2 pig-0.12&amp;#93;&lt;/span&gt;$ ./bin/pig -version&lt;br/&gt;
Apache Pig version 0.12.1-SNAPSHOT (r1552124) &lt;br/&gt;
compiled Dec 18 2013, 14:00:21&lt;/p&gt;


&lt;p&gt;Back to you to get a reproducible test case&lt;/p&gt;</comment>
                            <comment id="13852252" author="russell.jurney" created="Wed, 18 Dec 2013 22:48:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/rjurney/PIG-3630&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rjurney/PIG-3630&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Reproducible test case there. You will have to change the path to Piggybank.jar, $HOME doesn&apos;t work in interactive mode so I don&apos;t use it.&lt;/p&gt;</comment>
                            <comment id="13852272" author="dvryaboy" created="Wed, 18 Dec 2013 23:07:17 +0000"  >&lt;p&gt;That one fails in both 0.11 and 0.12.&lt;/p&gt;

&lt;p&gt;Do you have something that works in 11 but fails in 12?&lt;/p&gt;</comment>
                            <comment id="13852281" author="dvryaboy" created="Wed, 18 Dec 2013 23:14:02 +0000"  >&lt;p&gt;Actually that failed in 11 due to missing register statements. It does work in 11 if you work around the Avro stuff. Ok, now we have something to look at...&lt;/p&gt;</comment>
                            <comment id="13852299" author="dvryaboy" created="Wed, 18 Dec 2013 23:27:21 +0000"  >&lt;p&gt;Now that registers are in place, it works in 12 as well:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Input(s):
Successfully read records from: &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/dmitriy/Downloads/trimmed_reviews.avro&quot;&lt;/span&gt;

Output(s):
Successfully stored records in: &lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;///Users/dmitriy/src/pig-0.12/tmp/pig_12_ntf_idf_scores&quot;&lt;/span&gt;
&lt;/span&gt;
Job DAG:
job_local_0001	-&amp;gt;	job_local_0003,job_local_0002,
job_local_0003	-&amp;gt;	job_local_0005,
job_local_0002	-&amp;gt;	job_local_0004,
job_local_0004	-&amp;gt;	job_local_0005,
job_local_0005


2013-12-18 15:22:02,012 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Success!
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back to you...&lt;/p&gt;</comment>
                            <comment id="13853674" author="russell.jurney" created="Fri, 20 Dec 2013 04:42:53 +0000"  >&lt;p&gt;Damn it. That exact code fails for me on latest trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Dec 2013 01:50:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364182</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3629] Implement STREAM in Tez</title>
                <link>https://issues.apache.org/jira/browse/PIG-3629</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Implement the STREAM operator in Tez&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685076">PIG-3629</key>
            <summary>Implement STREAM in Tez</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png">Reopened</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="abain">Alex Bain</assignee>
                                    <reporter username="abain">Alex Bain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Dec 2013 01:29:18 +0000</created>
                <updated>Fri, 10 Jan 2014 22:36:24 +0000</updated>
                                            <version>tez-branch</version>
                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13856075" author="abain" created="Tue, 24 Dec 2013 01:39:11 +0000"  >&lt;p&gt;Review at &lt;a href=&quot;https://reviews.apache.org/r/16309/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16309/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13856157" author="cheolsoo" created="Tue, 24 Dec 2013 05:24:43 +0000"  >&lt;p&gt;I noticed that you overwrote join e2e test cases. I am adding them back.&lt;/p&gt;</comment>
                            <comment id="13856178" author="cheolsoo" created="Tue, 24 Dec 2013 06:19:35 +0000"  >&lt;p&gt;Attaching the final patch committed to tez branch.&lt;/p&gt;</comment>
                            <comment id="13856181" author="cheolsoo" created="Tue, 24 Dec 2013 06:20:25 +0000"  >&lt;p&gt;Committed to tez branch. Thank you Alex!&lt;/p&gt;</comment>
                            <comment id="13868361" author="abain" created="Fri, 10 Jan 2014 21:55:38 +0000"  >&lt;p&gt;Reopening to fix issues raised by Rohini in ReviewBoard&lt;/p&gt;</comment>
                            <comment id="13868416" author="abain" created="Fri, 10 Jan 2014 22:36:24 +0000"  >&lt;p&gt;I reopened this issue and ReviewBoard to fix issues raised by Rohini in my patch &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3629&quot; title=&quot;Implement STREAM in Tez&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3629&quot;&gt;PIG-3629&lt;/a&gt;-reopen-0&quot;. The RB is available at &lt;a href=&quot;https://reviews.apache.org/r/16309/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16309/&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620293" name="PIG-3629-3.patch" size="31520" author="abain" created="Tue, 24 Dec 2013 01:41:45 +0000"/>
                            <attachment id="12620310" name="PIG-3629-4.patch" size="30354" author="cheolsoo" created="Tue, 24 Dec 2013 06:19:35 +0000"/>
                            <attachment id="12622454" name="PIG-3629-reopen-0.patch" size="17072" author="abain" created="Fri, 10 Jan 2014 22:36:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Dec 2013 05:24:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364158</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364153</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3628] When using UNION with 2 HbaseStorages, casting to chararray results in empty string</title>
                <link>https://issues.apache.org/jira/browse/PIG-3628</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;We stumbled upon the following issue. I am wondering if anyone can help us with it. I am available for any follow up questions. Unfortunately, I am not a Java programmer, so I cannot supply a fix if this actually is a bug.&lt;/p&gt;

&lt;p&gt;It seems that the following issue is specific to the HbaseLoader, but I am not sure. When using any other loaders (two times PigStorage), the problem doesn&apos;t exist. &lt;/p&gt;

&lt;p&gt;It seems that even when we specifiy &apos;content:map [ chararray ] &apos; when loading data from HBase, and Pig is saying the schema contains chararrays, still maybe in the background those fields are bytearrays that seem to be not convertable.&lt;/p&gt;

&lt;p&gt;First create 2 Hbase tables:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
--hbase shell
--
--hbase(main):001:0&amp;gt; create &apos;test_table1&apos;,&apos;f&apos;
--0 row(s) in 20.0530 seconds
--
--hbase(main):002:0&amp;gt; create &apos;test_table2&apos;, &apos;f&apos;
--0 row(s) in 1.4420 seconds
--
--hbase(main):008:0&amp;gt; put &apos;test_table1&apos;,&apos;1-1386066912072&apos;,&apos;f:date_created&apos;,&apos;2012-01-04T11:33:59:05321&apos;
--0 row(s) in 5.3380 seconds
--
--hbase(main):002:0&amp;gt; put &apos;test_table2&apos;,&apos;2-1386066912074&apos;,&apos;f:date_created&apos;,&apos;2012-01-04T11:33:59:05321&apos;
--0 row(s) in 0.0540 seconds
--
--
--hbase(main):003:0&amp;gt; quit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&amp;#8211; Then run the following Pig script:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbs1 = LOAD &apos;hbase:&lt;span class=&quot;code-comment&quot;&gt;//test_table1&apos;
&lt;/span&gt;        USING org.apache.pig.backend.hadoop.hbase.HBaseStorage(
               &apos;f:*&apos;,&apos;-loadKey &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;)
               AS ( id:bytearray, content:map[chararray]);
               
hbs2 = LOAD &apos;hbase:&lt;span class=&quot;code-comment&quot;&gt;//test_table2&apos;
&lt;/span&gt;        USING org.apache.pig.backend.hadoop.hbase.HBaseStorage(
               &apos;f:*&apos;,&apos;-loadKey &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;)
               AS ( id:bytearray, content:map[chararray]);

hbs3 = UNION hbs1, hbs2;


hbs4 = FOREACH hbs3
GENERATE        id as hbase_id               
               , flatten(content#&apos;date_created&apos;) as date_created                   
               ;   

hbs5 = FOREACH hbs4
GENERATE        hbase_id   
              , date_created  --without (chararray)           
              ,  SUBSTRING( date_created,1,10) as date_created_trunc              
            ;
              
DUMP hbs5;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Result&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(2-1386066912074,2012-01-04T11:33:59:05321,)
(1-1386066912072,2012-01-04T11:33:59:05321,)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Expected result&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(2-1386066912074,2012-01-04T11:33:59:05321,2012-01-04)
(1-1386066912072,2012-01-04T11:33:59:05321,2012-01-04)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Substring function in combination with the date_created is just for example purposes. There are several String functions that we want to be able to use.&lt;/p&gt;</description>
                <environment>&lt;p&gt;CDH5, Centos 6&lt;/p&gt;</environment>
        <key id="12684997">PIG-3628</key>
            <summary>When using UNION with 2 HbaseStorages, casting to chararray results in empty string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jvangrondelle">Jochem van Grondelle</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Dec 2013 17:01:59 +0000</created>
                <updated>Fri, 24 Jan 2014 16:53:39 +0000</updated>
                                            <version>0.11</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13849333" author="jvangrondelle" created="Mon, 16 Dec 2013 17:03:08 +0000"  >&lt;p&gt;Workaround: store hbs4 in temp file and then load this temp file again with PigLoader.&lt;/p&gt;</comment>
                            <comment id="13880638" author="nezihyigitbasi" created="Fri, 24 Jan 2014 02:16:34 +0000"  >&lt;p&gt;The reason is HBaseStorage loads all tuples as DataByteArrays even if you specify your load schema as map&lt;span class=&quot;error&quot;&gt;&amp;#91;chararray&amp;#93;&lt;/span&gt; (where you expect map elements to be chararrays). Therefore,  when I run the script above (and debug it further) I see that SUBSTRING throws an exception (java.lang.ClassCastException: org.apache.pig.data.DataByteArray cannot be cast to java.lang.String), which it then catches and logs a UDF_WARNING_4.  Ideally I would expect the map contents should be chararrays instead of byte arrays, I think that deserves a fix.&lt;/p&gt;

&lt;p&gt;Anyway, a better solution than dumping to a temp file is to not use map when loading from HBase, but load the date_created field as chararray, which helps proper casting of loaded bytearrays to chararrays. The following script works OK:&lt;/p&gt;

&lt;p&gt;hbs1 = LOAD &apos;hbase://test_table1&apos;&lt;br/&gt;
        USING org.apache.pig.backend.hadoop.hbase.HBaseStorage(&lt;br/&gt;
               &apos;f:date_created&apos;,&apos;-loadKey true&apos;)&lt;br/&gt;
               AS ( id:bytearray, date_created:chararray);&lt;/p&gt;

&lt;p&gt;hbs2 = LOAD &apos;hbase://test_table2&apos;&lt;br/&gt;
        USING org.apache.pig.backend.hadoop.hbase.HBaseStorage(&lt;br/&gt;
               &apos;f:date_created&apos;,&apos;-loadKey true&apos;)&lt;br/&gt;
               AS ( id:bytearray, date_created:chararray);&lt;/p&gt;

&lt;p&gt;hbs3 = UNION hbs1, hbs2;&lt;/p&gt;

&lt;p&gt;hbs5 = FOREACH hbs3 GENERATE  id  , date_created,  SUBSTRING(date_created,1,10) as date_created_trunc;  &lt;/p&gt;

&lt;p&gt;You get the output:&lt;br/&gt;
(2-1386066912074,2012-01-04T11:33:59:05321,012-01-04)&lt;br/&gt;
(1-1386066912072,2012-01-04T11:33:59:05321,012-01-04)&lt;/p&gt;
</comment>
                            <comment id="13881065" author="jvangrondelle" created="Fri, 24 Jan 2014 15:53:13 +0000"  >&lt;p&gt;Thank you for your response! It goes wrong as soon as we use f.* to retrieve all available columns from the table in addition to using the UNION operator. Opposed to my simplified example, usually we are using 20+ columns.&lt;/p&gt;

&lt;p&gt;We have created a universal solution for retrieving many tables from Hbase by creating a Pig macro that exports all columns using 10 HbaseLoaders (incremental data using timestamps prefixed with a random 1-10. Using f.star (f.*) makes creating code generation much easier. You are right with your solution, we already found that as long as we specify all necessary columns it is working and that is actually the work around that we are using now.&lt;/p&gt;

&lt;p&gt;But it leaves the discussion if the map contents should be chararrays instead of byte arrays. Also not sure if that belongs to the Pig or the Hbase project...?&lt;/p&gt;</comment>
                            <comment id="13881141" author="nezihyigitbasi" created="Fri, 24 Jan 2014 16:53:39 +0000"  >&lt;p&gt;I agree the casting behavior with complex types is kind of unexpected. I wonder whether doing proper casting when the schema has complex type definitions like map or bag is a viable solution (doesn&apos;t break anything, backward compatible etc.)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Jan 2014 02:16:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364079</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3627] Json storage : Doesn&apos;t work in cases , where other Store Functions (like PigStorage / AvroStorage) do work. </title>
                <link>https://issues.apache.org/jira/browse/PIG-3627</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The following query &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Bar.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        pigServer.registerQuery(
                &lt;span class=&quot;code-quote&quot;&gt;&quot;uniqcnt  = foreach transactionsG {&quot;&lt;/span&gt;+
                               &lt;span class=&quot;code-quote&quot;&gt;&quot;sym = transactions.product ;&quot;&lt;/span&gt;+
                               &lt;span class=&quot;code-quote&quot;&gt;&quot;dsym = distinct sym  ;&quot;&lt;/span&gt;+
                               &lt;span class=&quot;code-quote&quot;&gt;&quot;generate flatten(dsym.product) as product, COUNT(dsym) as count ;&quot;&lt;/span&gt; +
                               &lt;span class=&quot;code-quote&quot;&gt;&quot;};&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Results in the schema:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
   Schema : {product: NULL,count: &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This schema, is storable using AvroStorage or PigStorage, but it fails if stored using JsonStorage: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed to parse: &amp;lt;line 1, column 8&amp;gt;  Syntax error, unexpected symbol at or near &apos;,&apos;
	at org.apache.pig.parser.QueryParserDriver.parseSchema(QueryParserDriver.java:94)
	at org.apache.pig.parser.QueryParserDriver.parseSchema(QueryParserDriver.java:108)
	at org.apache.pig.impl.util.Utils.parseSchema(Utils.java:208)
	at org.apache.pig.impl.util.Utils.getSchemaFromString(Utils.java:182)
	at org.apache.pig.builtin.JsonStorage.prepareToWrite(JsonStorage.java:140)
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat$PigRecordWriter.&amp;lt;init&amp;gt;(PigOutputFormat.java:125)
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputFormat.getRecordWriter(PigOutputFormat.java:86)
	at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:553)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:408)
	at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:216)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It appears that JsonStorage is thus less robust than the other storage formats.  Can we confirm or deny if some types of data structures do/ do not work with JsonStorage? &lt;/p&gt;

&lt;p&gt;So,I suggest:&lt;/p&gt;

&lt;p&gt;1) Ideally, I would think JsonStorage should support the same data that other Storage functions support.   &lt;/p&gt;

&lt;p&gt;the next best thing: &lt;/p&gt;

&lt;p&gt;2) Maybe a wiki page of examples that can / cannot work with JsonStorage and/or a better error message would be sufficient to solve this &quot;bug&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12684949">PIG-3627</key>
            <summary>Json storage : Doesn&apos;t work in cases , where other Store Functions (like PigStorage / AvroStorage) do work. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jayunit100">jay vyas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Dec 2013 13:26:44 +0000</created>
                <updated>Mon, 3 Feb 2014 00:50:01 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13849599" author="cheolsoo" created="Mon, 16 Dec 2013 19:06:30 +0000"  >&lt;p&gt;The problem is &apos;NULL&apos; in your schema. &apos;NULL&apos; is not recognized by the schema parser.&lt;/p&gt;

&lt;p&gt;Explicitly defining the type of &lt;tt&gt;product&lt;/tt&gt; in this line probably will fix your error-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
flatten(dsym.product) as product:chararray,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, I think the better way is to define the type of every field  in your query from the beginning so that you won&apos;t end up with NULL type after flattening &lt;tt&gt;dsym.product&lt;/tt&gt; in the first place. Pig is type-sensitive, so I strongly recommend to define type for every field if possible.&lt;/p&gt;

&lt;p&gt;To answer your questions, I agree that JsonStorage is not robust. For this case, it passes around the schema info as string and parse it using Utils.parseSchema() function. This is not robust at all.&lt;/p&gt;

&lt;p&gt;Ideally, what JsonStorage should do is to cast any field with no type info to bytearray. Contribution is welcome. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13849808" author="jayunit100" created="Mon, 16 Dec 2013 22:36:39 +0000"  >&lt;p&gt;Well, so I tried many permutations of casting , and it didnt work.  &lt;/p&gt;

&lt;p&gt;In the end, I had to update my load function to pre package the originator of the product field with chararray type.&lt;/p&gt;

&lt;p&gt;Then, the flatten statements at the bottom of my script didnt error anymore. &lt;/p&gt;

&lt;p&gt;I guess the schema  types cant be casted in on the fly.&lt;/p&gt;</comment>
                            <comment id="13849817" author="cheolsoo" created="Mon, 16 Dec 2013 22:47:05 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jayunit100&quot; class=&quot;user-hover&quot; rel=&quot;jayunit100&quot;&gt;jay vyas&lt;/a&gt; for sharing it.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I guess the schema types cant be casted in on the fly.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, it usually can be by adding a cast expression. But in your case, it was probably not possible because the schema was NULL to begin with.&lt;/p&gt;

&lt;p&gt;What I don&apos;t understand is how you end up with NULL in the schema because if any schema is not specified in load, it should be loaded as bytearray.&lt;/p&gt;</comment>
                            <comment id="13849832" author="jayunit100" created="Mon, 16 Dec 2013 22:56:07 +0000"  >&lt;p&gt;here are some more details.  I&apos;ve written it up here&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jayunit100.blogspot.com/2013/12/pig-if-using-jsonstorage-beware-of.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jayunit100.blogspot.com/2013/12/pig-if-using-jsonstorage-beware-of.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;hope this helps with the JIRA or to other people with the same problem.&lt;/p&gt;






&lt;p&gt;&amp;#8211; &lt;br/&gt;
Jay Vyas&lt;br/&gt;
&lt;a href=&quot;http://jayunit100.blogspot.com&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jayunit100.blogspot.com&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13889134" author="nezihyigitbasi" created="Mon, 3 Feb 2014 00:50:01 +0000"  >&lt;p&gt;Cheolsoo, I checked the link Jay posted in his previous comment and after some digging it seems like the NULL schemas come from the STRSPLIT function, not from the LOAD function. Jay uses FLATTEN(STRSPLIT(...)) in his script and STRSPLIT returns a tuple without any internal schema (the schema of the internal elements are NULL).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Dec 2013 19:06:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364031</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364026</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>

<item>
            <title>[PIG-3626] Make combiners, custom partitioners and secondary key sort work for multiple outputs</title>
                <link>https://issues.apache.org/jira/browse/PIG-3626</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description></description>
                <environment></environment>
        <key id="12684800">PIG-3626</key>
            <summary>Make combiners, custom partitioners and secondary key sort work for multiple outputs</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12666475">PIG-3446</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Dec 2013 08:51:32 +0000</created>
                <updated>Sun, 26 Jan 2014 09:33:11 +0000</updated>
                            <resolved>Thu, 23 Jan 2014 03:36:15 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13878947" author="rohini" created="Wed, 22 Jan 2014 18:19:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/17191/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17191/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13879422" author="rohini" created="Thu, 23 Jan 2014 03:36:15 +0000"  >&lt;p&gt;Committed to tez branch. Thanks Cheolsoo for the review&lt;/p&gt;</comment>
                            <comment id="13881185" author="cheolsoo" created="Fri, 24 Jan 2014 17:35:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;, I found a bug in your commit that breaks replicated join e2e tests in tez.conf-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Tezcompiler.java#L755&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tezOp.getSplitOperatorKey() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
  inputKeys.add(tezOp.getSplitOperatorKey().toString()); &lt;span class=&quot;code-comment&quot;&gt;//--&amp;gt; NPE because getSplitOperatorKey() is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  inputKeys.add(tezOp.getOperatorKey().toString());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I will commit the hotfix that I am attaching. Thanks!&lt;/p&gt;</comment>
                            <comment id="13881405" author="rohini" created="Fri, 24 Jan 2014 20:31:30 +0000"  >&lt;p&gt;Ah. Thanks Cheolsoo.&lt;/p&gt;</comment>
                            <comment id="13882246" author="cheolsoo" created="Sun, 26 Jan 2014 09:33:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;, does TestCustomPartitioner pass? It always hangs for me.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624382" name="PIG-3626-1.patch" size="200155" author="rohini" created="Wed, 22 Jan 2014 18:19:04 +0000"/>
                            <attachment id="12624565" name="PIG-3626-2.patch" size="200189" author="rohini" created="Thu, 23 Jan 2014 03:35:52 +0000"/>
                            <attachment id="12625071" name="PIG-3626-hotfix.patch" size="860" author="cheolsoo" created="Fri, 24 Jan 2014 17:35:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Jan 2014 17:35:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>