<!--
RSS generated by JIRA (6.1.5#6160-sha1:a61a0fc278117a0da0ec9b89167b8f29b6afdab2) at Mon Feb 03 15:42:24 UTC 2014

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/sr/jira.issueviews:searchrequest-xml/temp/SearchRequest.xml?jqlQuery=project+%3D+MAPREDUCE&tempMax=100&field=key&field=summary
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&amp;jqlQuery=project+%3D+MAPREDUCE</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="100" total="5529"/>
                <build-info>
            <version>6.1.5</version>
            <build-number>6160</build-number>
            <build-date>03-12-2013</build-date>
        </build-info>
<item>
            <title>[MAPREDUCE-5736] Jobtracker to hang when jobs with lot of tasks running</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5736</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;The jobtracker (in MRv1) is progressing slowly when a job with lot of tasks is running. The reason is that JT.getJobCounters is holding a global lock, and with a big job (like 50+K mappers for instance), it could take while to instanciate the ``Counters`` class. This global lock prevent all other activities to run normally, queuing them and degrading the normal activities of the JT.&lt;/p&gt;

&lt;p&gt;I was wondering if job.getCounters(), which is synchronized on a finer granularity (i.e. per job and not global) couldn&apos;t be taken out of the synchronized block.&lt;/p&gt;

&lt;p&gt;On a more general idea, I was wondering if the usage of the synchronized statement in the JT shouldn&apos;t be re-thought. Or maybe all this has already been addressed in YARN.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691334">MAPREDUCE-5736</key>
            <summary>Jobtracker to hang when jobs with lot of tasks running</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bperroud">Benoit Perroud</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jan 2014 09:13:03 +0000</created>
                <updated>Mon, 27 Jan 2014 17:32:35 +0000</updated>
                                                                            <component>jobtracker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13882989" author="kkambatl" created="Mon, 27 Jan 2014 17:32:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;On a more general idea, I was wondering if the usage of the synchronized statement in the JT shouldn&apos;t be re-thought. Or maybe all this has already been addressed in YARN.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In YARN/MR2, a bunch of JT&apos;s functionality has been relegated to the MR-AM and JobHistoryServer. On top of that, the RM isn&apos;t as synchronized as the JT. &lt;/p&gt;

&lt;p&gt;That said, as long as it is not risky, we can see if we can have finer-grained locking for JT.getJobCounters.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jan 2014 17:32:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370085</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5735] MultipleOutputs of hadoop not working properly with s3 filesyatem</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5735</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;I have written a mapreduce job and used MultipleOutputs(org.apache.hadoop.mapreduce.lib.output.MultipleOutputs) calss to put the resultant file in a specific user defined directory path(instead of getting the o/p file part-r-00000 i want to have dir1/dir2/dir3/d-r-00000). This works fine for hdfs.&lt;br/&gt;
But when I run the same mapreduce job with s3 file sytem the user defined directory structure is not created in s3. Is it that MultipleOutputs is not suported in S3? if so, any alternate way by which I can customize my mapreduce o/p file directory path in s3.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691001">MAPREDUCE-5735</key>
            <summary>MultipleOutputs of hadoop not working properly with s3 filesyatem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="skhuntia@sapient.com">sunil ranjan khuntia</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2014 10:05:05 +0000</created>
                <updated>Mon, 27 Jan 2014 13:46:37 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13882728" author="stevel@apache.org" created="Mon, 27 Jan 2014 10:21:12 +0000"  >&lt;ol&gt;
	&lt;li&gt;please include the release versions in the &quot;affects version&quot; field.&lt;/li&gt;
	&lt;li&gt;if it doesn&apos;t occur in Hadoop 2.2 then can you upgrade and see if it does.&lt;/li&gt;
	&lt;li&gt;S3 isn&apos;t a filesystem, it&apos;s a blob store, and some aspects of MR operation just don&apos;t work as they would against HDFS. Why not try writing to HDFS and then copying out the results?&lt;/li&gt;
	&lt;li&gt;that said, if the problem does remain in S3 on Hadoop 2.2+, then this could be a bug -in which case a unit test to replicate it would be a good start to fixing it&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13882810" author="skhuntia@sapient.com" created="Mon, 27 Jan 2014 13:46:37 +0000"  >&lt;p&gt;Steve, Thanks for your response.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I am using cdh4.4(It uses Hadoop 2.0)&lt;br/&gt;
-So, I assume that MultipleOutput of Hadoop 2.0 doesnt work with s3.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jan 2014 10:21:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369750</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5733] (Configugration) conf.set(&quot;textinputformat.record.delimiter&quot;,&quot;myDelimiter&quot;) , is bound to typo error. Lets have it as a Static String in some class, to minimise such error. This would also help in IDE like eclipse suggesting the String.</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5733</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;(Configugration) conf.set(&quot;textinputformat.record.delimiter&quot;,&quot;myDelimiter&quot;) , is bound to typo error. Lets have it as a Static String in some class, to minimise such error. This would also help in IDE like eclipse suggesting the String.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690734">MAPREDUCE-5733</key>
            <summary>(Configugration) conf.set(&quot;textinputformat.record.delimiter&quot;,&quot;myDelimiter&quot;) , is bound to typo error. Lets have it as a Static String in some class, to minimise such error. This would also help in IDE like eclipse suggesting the String.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="abhilashsr2008">Abhilash S R</assignee>
                                    <reporter username="gelesh">Gelesh</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Thu, 23 Jan 2014 09:58:37 +0000</created>
                <updated>Thu, 23 Jan 2014 11:43:08 +0000</updated>
                                                                                <due>Thu, 23 Jan 2014 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                        <comments>
                            <comment id="13879815" author="abhilashsr2008" created="Thu, 23 Jan 2014 10:12:54 +0000"  >&lt;p&gt;fixed,&lt;/p&gt;</comment>
                            <comment id="13879817" author="abhilashsr2008" created="Thu, 23 Jan 2014 10:13:42 +0000"  >&lt;p&gt;Fixed&lt;/p&gt;</comment>
                            <comment id="13879874" author="gelesh" created="Thu, 23 Jan 2014 11:43:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abhilashsr2008&quot; class=&quot;user-hover&quot; rel=&quot;abhilashsr2008&quot;&gt;Abhilash S R&lt;/a&gt; Thanks a lot &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624773" name="MAPREDUCE-5733.patch" size="2674" author="abhilashsr2008" created="Thu, 23 Jan 2014 10:13:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jan 2014 10:12:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369429</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369433</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5732] Report proper queue when job has been automatically placed</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5732</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Some schedulers, such as the Fair Scheduler, provide the ability to automatically place an application into a queue based on attributes such as the user and group of the submitter.  In these cases, the JobHistoryServer and AM web UI report the requested queue, not the queue that the app is actually running in.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690162">MAPREDUCE-5732</key>
            <summary>Report proper queue when job has been automatically placed</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sandyr">Sandy Ryza</assignee>
                                    <reporter username="sandyr">Sandy Ryza</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jan 2014 01:27:19 +0000</created>
                <updated>Fri, 31 Jan 2014 13:39:14 +0000</updated>
                            <resolved>Thu, 30 Jan 2014 00:23:38 +0000</resolved>
                                                    <fixVersion>2.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13883559" author="sandyr" created="Tue, 28 Jan 2014 00:24:35 +0000"  >&lt;p&gt;Attached patch fixes the issue by adding a JobQueueChangeEvent that updates a Job&apos;s queue in the history.  I verified manually in addition to the tests.&lt;/p&gt;</comment>
                            <comment id="13883589" author="hadoopqa" created="Tue, 28 Jan 2014 01:01:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625479/MAPREDUCE-5732.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625479/MAPREDUCE-5732.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified test files.&lt;/p&gt;

&lt;p&gt;      &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 1550 javac compiler warnings (more than the trunk&apos;s current 1545 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4339//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4339//testReport/&lt;/a&gt;&lt;br/&gt;
Javac warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4339//artifact/trunk/patchprocess/diffJavacWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4339//artifact/trunk/patchprocess/diffJavacWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4339//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4339//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13883599" author="sandyr" created="Tue, 28 Jan 2014 01:10:14 +0000"  >&lt;p&gt;Test failure is unrelated: &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5719&quot; title=&quot;Potential null pointer access in AbstractYarnScheduler#getTransferredContainers()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5719&quot;&gt;MAPREDUCE-5719&lt;/a&gt;&lt;br/&gt;
Will fix the javac warnings&lt;/p&gt;</comment>
                            <comment id="13883605" author="sandyr" created="Tue, 28 Jan 2014 01:16:44 +0000"  >&lt;p&gt;Actually, the javac warnings appear to be benign as well.  They come from accessing deprecated fields of Avro objects in JobChangeQueueEvent.  This is the way other job history events use Avro, so I think we should keep this consistent.&lt;/p&gt;</comment>
                            <comment id="13885064" author="kkambatl" created="Wed, 29 Jan 2014 06:30:43 +0000"  >&lt;p&gt;Minor nits, okay with fixing them at commit time.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;MRAppMaster has a spurious change.&lt;/li&gt;
	&lt;li&gt;For the Avro javac warning, can we suppress it?&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Otherwise, looks good to me. +1.&lt;/p&gt;</comment>
                            <comment id="13886048" author="hudson" created="Thu, 30 Jan 2014 00:09:00 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5063 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5063/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5063/&lt;/a&gt;)&lt;br/&gt;
Add missing file for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt; (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562642&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562642&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobQueueChangeEvent.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt;. Report proper queue when job has been automatically placed (Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562641&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562641&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryEventHandler.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/Job.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/JobImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/RMCommunicator.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/jobhistory/TestEvents.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MRApp.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MockAppContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MockJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRuntimeEstimators.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/avro/Events.avpr&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/EventReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryParser.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/CompletedJob.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/PartialJob.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestJobHistoryEvents.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/webapp/TestHsWebServicesAcls.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13886494" author="hudson" created="Thu, 30 Jan 2014 11:13:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #466 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/466/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/466/&lt;/a&gt;)&lt;br/&gt;
Add missing file for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt; (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562642&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562642&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobQueueChangeEvent.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt;. Report proper queue when job has been automatically placed (Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562641&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562641&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryEventHandler.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/Job.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/JobImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/RMCommunicator.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/jobhistory/TestEvents.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MRApp.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MockAppContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MockJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRuntimeEstimators.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/avro/Events.avpr&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/EventReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryParser.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/CompletedJob.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/PartialJob.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestJobHistoryEvents.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/webapp/TestHsWebServicesAcls.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13886560" author="hudson" created="Thu, 30 Jan 2014 13:29:55 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1683 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1683/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1683/&lt;/a&gt;)&lt;br/&gt;
Add missing file for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt; (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562642&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562642&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobQueueChangeEvent.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt;. Report proper queue when job has been automatically placed (Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562641&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562641&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryEventHandler.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/Job.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/JobImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/RMCommunicator.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/jobhistory/TestEvents.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MRApp.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MockAppContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MockJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRuntimeEstimators.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/avro/Events.avpr&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/EventReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryParser.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/CompletedJob.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/PartialJob.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestJobHistoryEvents.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/webapp/TestHsWebServicesAcls.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13886578" author="hudson" created="Thu, 30 Jan 2014 13:49:10 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1658 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1658/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1658/&lt;/a&gt;)&lt;br/&gt;
Add missing file for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt; (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562642&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562642&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobQueueChangeEvent.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt;. Report proper queue when job has been automatically placed (Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562641&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562641&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryEventHandler.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/Job.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/JobImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/RMCommunicator.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/jobhistory/TestEvents.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MRApp.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MockAppContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/MockJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRuntimeEstimators.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/avro/Events.avpr&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/EventReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryParser.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/CompletedJob.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/PartialJob.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestJobHistoryEvents.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/webapp/TestHsWebServicesAcls.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13887026" author="hudson" created="Thu, 30 Jan 2014 20:36:56 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5073 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5073/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5073/&lt;/a&gt;)&lt;br/&gt;
Updating branch-2.3&apos;s YARN&apos;s CHANGES.txt to reflect the recent rebase of unreleased 2.3 to more latest branch-2.&lt;br/&gt;
Fixing entry for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt; in trunk and branch-2. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562949&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562949&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3/hadoop-mapreduce-project&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13887644" author="hudson" created="Fri, 31 Jan 2014 11:14:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #467 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/467/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/467/&lt;/a&gt;)&lt;br/&gt;
Updating branch-2.3&apos;s YARN&apos;s CHANGES.txt to reflect the recent rebase of unreleased 2.3 to more latest branch-2.&lt;br/&gt;
Fixing entry for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt; in trunk and branch-2. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562949&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562949&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3/hadoop-mapreduce-project&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13887728" author="hudson" created="Fri, 31 Jan 2014 13:29:53 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1684 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1684/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1684/&lt;/a&gt;)&lt;br/&gt;
Updating branch-2.3&apos;s YARN&apos;s CHANGES.txt to reflect the recent rebase of unreleased 2.3 to more latest branch-2.&lt;br/&gt;
Fixing entry for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt; in trunk and branch-2. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562949&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562949&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3/hadoop-mapreduce-project&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13887742" author="hudson" created="Fri, 31 Jan 2014 13:39:14 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1659 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1659/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1659/&lt;/a&gt;)&lt;br/&gt;
Updating branch-2.3&apos;s YARN&apos;s CHANGES.txt to reflect the recent rebase of unreleased 2.3 to more latest branch-2.&lt;br/&gt;
Fixing entry for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5732&quot; title=&quot;Report proper queue when job has been automatically placed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5732&quot;&gt;&lt;del&gt;MAPREDUCE-5732&lt;/del&gt;&lt;/a&gt; in trunk and branch-2. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562949&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1562949&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3/hadoop-mapreduce-project&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2.3/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-2/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625479" name="MAPREDUCE-5732.patch" size="27552" author="sandyr" created="Tue, 28 Jan 2014 00:22:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Jan 2014 01:01:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369125</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5731] testMiniMRChildtask fails on branch-2</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5731</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.yarn.exceptions.YarnRuntimeException: java.io.FileNotFoundException: File file:/tmp/hadoop-yarn/staging/history/done_intermediate does not exist
	at org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage.getFullJob(CachedHistoryStorage.java:147)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistory.getJob(JobHistory.java:217)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryClientService$HSClientProtocolHandler$1.run(HistoryClientService.java:203)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryClientService$HSClientProtocolHandler$1.run(HistoryClientService.java:199)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:415)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1562)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryClientService$HSClientProtocolHandler.verifyAndGetJob(HistoryClientService.java:199)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryClientService$HSClientProtocolHandler.getJobReport(HistoryClientService.java:231)
	at org.apache.hadoop.mapreduce.v2.api.impl.pb.service.MRClientProtocolPBServiceImpl.getJobReport(MRClientProtocolPBServiceImpl.java:122)
	at org.apache.hadoop.yarn.proto.MRClientProtocol$MRClientProtocolService$2.callBlockingMethod(MRClientProtocol.java:275)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:928)
	at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1962)
	at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1958)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:415)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1562)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1956)
Caused by: java.io.FileNotFoundException: File file:/tmp/hadoop-yarn/staging/history/done_intermediate does not exist
	at org.apache.hadoop.fs.RawLocalFileSystem.listStatus(RawLocalFileSystem.java:353)
	at org.apache.hadoop.fs.DelegateToFileSystem.listStatus(DelegateToFileSystem.java:149)
	at org.apache.hadoop.fs.ChecksumFs.listStatus(ChecksumFs.java:512)
	at org.apache.hadoop.fs.AbstractFileSystem$1.&amp;lt;init&amp;gt;(AbstractFileSystem.java:857)
	at org.apache.hadoop.fs.AbstractFileSystem.listStatusIterator(AbstractFileSystem.java:855)
	at org.apache.hadoop.fs.FileContext$20.next(FileContext.java:1392)
	at org.apache.hadoop.fs.FileContext$20.next(FileContext.java:1387)
	at org.apache.hadoop.fs.FSLinkResolver.resolve(FSLinkResolver.java:90)
	at org.apache.hadoop.fs.FileContext.listStatus(FileContext.java:1387)
	at org.apache.hadoop.mapreduce.v2.jobhistory.JobHistoryUtils.listFilteredStatus(JobHistoryUtils.java:438)
	at org.apache.hadoop.mapreduce.v2.jobhistory.JobHistoryUtils.localGlobber(JobHistoryUtils.java:385)
	at org.apache.hadoop.mapreduce.v2.jobhistory.JobHistoryUtils.localGlobber(JobHistoryUtils.java:377)
	at org.apache.hadoop.mapreduce.v2.jobhistory.JobHistoryUtils.localGlobber(JobHistoryUtils.java:372)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager.scanIntermediateDirectory(HistoryFileManager.java:779)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager.getFileInfo(HistoryFileManager.java:931)
	at org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage.getFullJob(CachedHistoryStorage.java:132)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12690090">MAPREDUCE-5731</key>
            <summary>testMiniMRChildtask fails on branch-2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mitdesai">Mit Desai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jan 2014 19:27:39 +0000</created>
                <updated>Wed, 22 Jan 2014 16:10:28 +0000</updated>
                                            <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13878332" author="ajisakaa" created="Wed, 22 Jan 2014 06:44:32 +0000"  >&lt;p&gt;I executed &quot;mvn test -Dtest=TestMiniMRChildTask&quot; on branch-2 but I couldn&apos;t reproduce this.&lt;br/&gt;
What command are you using?&lt;/p&gt;</comment>
                            <comment id="13878799" author="mitdesai" created="Wed, 22 Jan 2014 16:10:28 +0000"  >&lt;p&gt;This test failed while running a full test suite. I ran this test couple of times just to make sure that the failure was not due to some race or a JDK7 issue. But I was not able to reproduce it on my machine.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Jan 2014 06:44:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369052</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5730] AM log is truncated</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5730</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;The ApplicationMaster log is being truncated with only the log messages up until around the point where the job is being setup are present.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690067">MAPREDUCE-5730</key>
            <summary>AM log is truncated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jlowe">Jason Lowe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jan 2014 17:27:57 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:41 +0000</updated>
                            <resolved>Wed, 22 Jan 2014 14:19:25 +0000</resolved>
                                    <version>2.3.0</version>
                                                    <component>mr-am</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13878680" author="jlowe" created="Wed, 22 Jan 2014 14:19:25 +0000"  >&lt;p&gt;Fixing this as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5723&quot; title=&quot;MR AM container log can be truncated or empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5723&quot;&gt;&lt;del&gt;MAPREDUCE-5723&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12688872">MAPREDUCE-5723</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12686089">MAPREDUCE-5694</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5729] mapred job -list throws NPE</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5729</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;mapred job -list throws the following NPE:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException
	at org.apache.hadoop.mapreduce.TypeConverter.fromYarn(TypeConverter.java:445)
	at org.apache.hadoop.mapreduce.TypeConverter.fromYarnApps(TypeConverter.java:460)
	at org.apache.hadoop.mapred.ResourceMgrDelegate.getAllJobs(ResourceMgrDelegate.java:125)
	at org.apache.hadoop.mapred.YARNRunner.getAllJobs(YARNRunner.java:164)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12689854">MAPREDUCE-5729</key>
            <summary>mapred job -list throws NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkambatl">Karthik Kambatla</assignee>
                                    <reporter username="kkambatl">Karthik Kambatla</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jan 2014 18:39:38 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:41 +0000</updated>
                            <resolved>Mon, 20 Jan 2014 19:30:43 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13876679" author="kkambatl" created="Mon, 20 Jan 2014 18:42:18 +0000"  >&lt;p&gt;NotRunningJob has a null ApplicationResourceUsageReport leading to this NPE.&lt;/p&gt;

&lt;p&gt;The patch checks for null, adds a test that fails without the fix. Also, verified it on a pseudo-dist cluster with and without the patch. &lt;/p&gt;</comment>
                            <comment id="13876694" author="sandyr" created="Mon, 20 Jan 2014 18:49:39 +0000"  >&lt;p&gt;+1 pending jenkins&lt;/p&gt;</comment>
                            <comment id="13876726" author="hadoopqa" created="Mon, 20 Jan 2014 19:06:35 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623982/mr-5729-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623982/mr-5729-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4330//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4330//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4330//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4330//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13876755" author="kkambatl" created="Mon, 20 Jan 2014 19:25:45 +0000"  >&lt;p&gt;Thanks for the review, Sandy. Given this is a straight-forward fix, committing this shortly. &lt;/p&gt;</comment>
                            <comment id="13876768" author="hudson" created="Mon, 20 Jan 2014 19:37:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5025 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5025/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5025/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5729&quot; title=&quot;mapred job -list throws NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5729&quot;&gt;&lt;del&gt;MAPREDUCE-5729&lt;/del&gt;&lt;/a&gt;. mapred job -list throws NPE (kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559811&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559811&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/TypeConverter.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapreduce/TestTypeConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13877389" author="hudson" created="Tue, 21 Jan 2014 11:09:39 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #459 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/459/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/459/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5729&quot; title=&quot;mapred job -list throws NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5729&quot;&gt;&lt;del&gt;MAPREDUCE-5729&lt;/del&gt;&lt;/a&gt;. mapred job -list throws NPE (kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559811&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559811&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/TypeConverter.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapreduce/TestTypeConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13877457" author="hudson" created="Tue, 21 Jan 2014 13:27:03 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1676 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1676/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1676/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5729&quot; title=&quot;mapred job -list throws NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5729&quot;&gt;&lt;del&gt;MAPREDUCE-5729&lt;/del&gt;&lt;/a&gt;. mapred job -list throws NPE (kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559811&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559811&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/TypeConverter.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapreduce/TestTypeConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13877468" author="hudson" created="Tue, 21 Jan 2014 13:41:41 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1651 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1651/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1651/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5729&quot; title=&quot;mapred job -list throws NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5729&quot;&gt;&lt;del&gt;MAPREDUCE-5729&lt;/del&gt;&lt;/a&gt;. mapred job -list throws NPE (kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559811&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559811&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/TypeConverter.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapreduce/TestTypeConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623982" name="mr-5729-1.patch" size="4314" author="kkambatl" created="Mon, 20 Jan 2014 18:42:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Jan 2014 18:49:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368826</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368827</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5728] Check NPE for serializer/deserializer in MapTask</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5728</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Currently we will get NPE if the serializer/deserializer is not configured correctly.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
14/01/14 11:52:35 INFO mapred.JobClient: Task Id : attempt_201401072154_0027_m_000002_2, Status : FAILED
java.lang.NullPointerException
        at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.&amp;lt;init&amp;gt;(MapTask.java:944)
        at org.apache.hadoop.mapred.MapTask$NewOutputCollector.&amp;lt;init&amp;gt;(MapTask.java:672)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:740)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:368)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(AccessController.java:362)
        at javax.security.auth.Subject.doAs(Subject.java:573)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1502)
        at org.apache.hadoop.mapred.Child.main(Child.java:249)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;serializationFactory.getSerializer and serializationFactory.getDeserializer returns NULL in this case.&lt;br/&gt;
Let&apos;s check NPE for serializer/deserializer in MapTask so that we don&apos;t get meaningless NPE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689681">MAPREDUCE-5728</key>
            <summary>Check NPE for serializer/deserializer in MapTask</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jinghe">Jerry He</assignee>
                                    <reporter username="jinghe">Jerry He</reporter>
                        <labels>
                    </labels>
                <created>Sat, 18 Jan 2014 21:53:00 +0000</created>
                <updated>Wed, 22 Jan 2014 00:36:29 +0000</updated>
                                            <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                    <fixVersion>2.2.1</fixVersion>
                                    <component>client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13875754" author="jinghe" created="Sat, 18 Jan 2014 21:55:06 +0000"  >&lt;p&gt;Attached a patch that follows what is being similarly done in org.apache.hadoop.io.SequenceFile&lt;/p&gt;</comment>
                            <comment id="13875758" author="hadoopqa" created="Sat, 18 Jan 2014 22:17:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623830/MAPREDUCE-5728-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623830/MAPREDUCE-5728-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4327//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4327//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4327//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4327//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13876171" author="qwertymaniac" created="Mon, 20 Jan 2014 06:08:48 +0000"  >&lt;p&gt;Appears to be a dupe of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-2584&quot; title=&quot;Check for serializers early, and give out more information regarding missing serializers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-2584&quot;&gt;MAPREDUCE-2584&lt;/a&gt;. Care to look at the extras added there and update your patch here? We could close out &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-2584&quot; title=&quot;Check for serializers early, and give out more information regarding missing serializers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-2584&quot;&gt;MAPREDUCE-2584&lt;/a&gt; as a dupe if you&apos;re working on this one.&lt;/p&gt;</comment>
                            <comment id="13876671" author="jinghe" created="Mon, 20 Jan 2014 18:38:06 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qwertymaniac&quot; class=&quot;user-hover&quot; rel=&quot;qwertymaniac&quot;&gt;Harsh J&lt;/a&gt;&lt;br/&gt;
I will take a look.&lt;/p&gt;</comment>
                            <comment id="13878073" author="jinghe" created="Wed, 22 Jan 2014 00:36:29 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qwertymaniac&quot; class=&quot;user-hover&quot; rel=&quot;qwertymaniac&quot;&gt;Harsh J&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looking the &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-2584&quot; title=&quot;Check for serializers early, and give out more information regarding missing serializers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-2584&quot;&gt;MAPREDUCE-2584&lt;/a&gt;, these are what you had:&lt;br/&gt;
1. added a warning in SerializationFactory, &lt;br/&gt;
2. checked for NPE for getSerializer in MapTask,&lt;br/&gt;
3. added checkSerializerSpecs to check for serializer and derializer in JobSubmitter&lt;/p&gt;

&lt;p&gt;Do you still want to keep all these extras?&lt;/p&gt;

&lt;p&gt;I did a search in MapReduce project, here are all the callers of SerializationFactory.getSerializer(), without including tests:&lt;br/&gt;
org.apache.hadoop.mapred.MapTask.MapOutputBuffer.init(Context)&lt;br/&gt;
org.apache.hadoop.mapreduce.lib.input.TaggedInputSplit.write(DataOutput)&lt;br/&gt;
org.apache.hadoop.mapreduce.lib.join.CompositeInputSplit.write(DataOutput)&lt;br/&gt;
org.apache.hadoop.mapreduce.task.ReduceContextImpl.ValueIterator.writeFirstKeyValueBytes(DataOutputStream)&lt;br/&gt;
org.apache.hadoop.mapreduce.split.JobSplitWriter.writeNewSplits(Configuration, T[], FSDataOutputStream)&lt;br/&gt;
org.apache.hadoop.mapred.IFile.Writer.Writer(Configuration, FSDataOutputStream, Class&amp;lt;K&amp;gt;, Class&amp;lt;V&amp;gt;, CompressionCodec, Counter)&lt;/p&gt;

&lt;p&gt;Callers of SerializationFactory.getdeserializer(), without including tests:&lt;br/&gt;
org.apache.hadoop.mapred.MapTask.getSplitDetails(Path, long)&lt;br/&gt;
org.apache.hadoop.mapreduce.lib.input.TaggedInputSplit.readFields(DataInput)&lt;br/&gt;
org.apache.hadoop.mapreduce.lib.join.CompositeInputSplit.readFields(DataInput)&lt;br/&gt;
org.apache.hadoop.mapreduce.task.ReduceContextImpl.ReduceContextImpl(Configuration, TaskAttemptID, RawKeyValueIterator, Counter, Counter, RecordWriter&amp;lt;KEYOUT, VALUEOUT&amp;gt;, OutputCommitter, StatusReporter, RawComparator&amp;lt;KEYIN&amp;gt;, Class&amp;lt;KEYIN&amp;gt;, Class&amp;lt;VALUEIN&amp;gt;)&lt;br/&gt;
org.apache.hadoop.mapred.Task.ValuesIterator.ValuesIterator(RawKeyValueIterator, RawComparator&amp;lt;KEY&amp;gt;, Class&amp;lt;KEY&amp;gt;, Class&amp;lt;VALUE&amp;gt;, Configuration, Progressable)&lt;/p&gt;

&lt;p&gt;Do you think we need to put in check for NPE in all these places?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12509923">MAPREDUCE-2584</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12623830" name="MAPREDUCE-5728-trunk.patch" size="2954" author="jinghe" created="Sat, 18 Jan 2014 21:58:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 18 Jan 2014 22:17:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368654</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5727] History server web page can filter without showing filter keyword</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5727</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;I loaded up a job conf page on the history server and used one of the search boxes to narrow the results.  I then navigated to other pages (e.g.: map tasks, logs, etc.) then navigated back to the job conf page using the job configuration link on the left side of the page.  When I arrived it promptly showed me just a few conf entries (the ones I had searched for earlier) but my search term was missing.  At first glance it looked like those were the only entries in the entire job conf, which can be very confusing.  Somehow the search term is being remembered but not replotted when the configuration page is revisited.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689290">MAPREDUCE-5727</key>
            <summary>History server web page can filter without showing filter keyword</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jlowe">Jason Lowe</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 17:04:13 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:37 +0000</updated>
                                            <version>2.3.0</version>
                                                    <component>jobhistoryserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13873613" author="jlowe" created="Thu, 16 Jan 2014 17:06:32 +0000"  >&lt;p&gt;This is particularly insidious when it manifests, since to get it back to showing all the entries I had to guess/remember which of the search boxes I had used to do the original search and enter an empty search to remove the filter.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368264</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5726] TestRMContainerAllocator#testCompletedTasksRecalculateSchedule fails</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5726</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1670/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1670/console&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator
testCompletedTasksRecalculateSchedule(org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator)  Time elapsed: 2.08 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.hadoop.yarn.exceptions.YarnRuntimeException: java.lang.NullPointerException
	at org.apache.hadoop.yarn.server.resourcemanager.scheduler.AbstractYarnScheduler.getTransferredContainers(AbstractYarnScheduler.java:50)
	at org.apache.hadoop.yarn.server.resourcemanager.ApplicationMasterService.registerApplicationMaster(ApplicationMasterService.java:277)
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.register(RMCommunicator.java:154)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator$MyContainerAllocator.register(TestRMContainerAllocator.java:1476)
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.serviceStart(RMCommunicator.java:112)
	at org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator.serviceStart(RMContainerAllocator.java:219)
	at org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator$MyContainerAllocator.&amp;lt;init&amp;gt;(TestRMContainerAllocator.java:1444)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator$RecalculateContainerAllocator.&amp;lt;init&amp;gt;(TestRMContainerAllocator.java:1629)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator.testCompletedTasksRecalculateSchedule(TestRMContainerAllocator.java:1665)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12689150">MAPREDUCE-5726</key>
            <summary>TestRMContainerAllocator#testCompletedTasksRecalculateSchedule fails</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ajisakaa">Akira AJISAKA</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 02:01:26 +0000</created>
                <updated>Tue, 21 Jan 2014 05:48:01 +0000</updated>
                            <resolved>Tue, 21 Jan 2014 05:48:01 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13872968" author="zjshen" created="Thu, 16 Jan 2014 02:12:25 +0000"  >&lt;p&gt;It seems to be caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1041&quot; title=&quot;Protocol changes for RM to bind and notify a restarted AM of existing containers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1041&quot;&gt;&lt;del&gt;YARN-1041&lt;/del&gt;&lt;/a&gt; as well, like &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5719&quot; title=&quot;Potential null pointer access in AbstractYarnScheduler#getTransferredContainers()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5719&quot;&gt;MAPREDUCE-5719&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13877229" author="ajisakaa" created="Tue, 21 Jan 2014 05:48:01 +0000"  >&lt;p&gt;Thanks, the failure will be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5719&quot; title=&quot;Potential null pointer access in AbstractYarnScheduler#getTransferredContainers()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5719&quot;&gt;MAPREDUCE-5719&lt;/a&gt;.&lt;br/&gt;
Closing this issue as duplicate.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12688395">MAPREDUCE-5719</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12689278">YARN-1610</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12682817">YARN-1474</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12662443">YARN-1041</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Jan 2014 02:12:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5725] TestNetworkedJob relies on the Capacity Scheduler</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5725</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;We should either make this explicit or make it scheduler-agnostic.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689137">MAPREDUCE-5725</key>
            <summary>TestNetworkedJob relies on the Capacity Scheduler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sandyr">Sandy Ryza</assignee>
                                    <reporter username="sandyr">Sandy Ryza</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 00:16:05 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:45 +0000</updated>
                            <resolved>Tue, 21 Jan 2014 01:24:13 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13876832" author="hadoopqa" created="Mon, 20 Jan 2014 20:21:47 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623980/MAPREDUCE-5275.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623980/MAPREDUCE-5275.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4329//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4329//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4329//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4329//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13876867" author="kkambatl" created="Mon, 20 Jan 2014 21:28:17 +0000"  >&lt;p&gt;Nits:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Include CapacityScheduler in the helper method - createClusterConfig&lt;/li&gt;
	&lt;li&gt;May be, move the MiniMRCluster creation also the helper method - createMiniMRClusterWithCapacityScheduler()?&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Otherwise, looks good to me. &lt;/p&gt;</comment>
                            <comment id="13876882" author="kkambatl" created="Mon, 20 Jan 2014 21:51:33 +0000"  >&lt;p&gt;+1, pending Jenkins.&lt;/p&gt;</comment>
                            <comment id="13876987" author="hadoopqa" created="Mon, 20 Jan 2014 23:44:50 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12624017/MAPREDUCE-5725-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12624017/MAPREDUCE-5725-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4331//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4331//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4331//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4331//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13877073" author="hudson" created="Tue, 21 Jan 2014 01:35:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5026 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5026/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5026/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5725&quot; title=&quot;TestNetworkedJob relies on the Capacity Scheduler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5725&quot;&gt;&lt;del&gt;MAPREDUCE-5725&lt;/del&gt;&lt;/a&gt;. Make explicit that TestNetworkedJob relies on the Capacity Scheduler (Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559882&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559882&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestNetworkedJob.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13877387" author="hudson" created="Tue, 21 Jan 2014 11:09:39 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #459 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/459/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/459/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5725&quot; title=&quot;TestNetworkedJob relies on the Capacity Scheduler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5725&quot;&gt;&lt;del&gt;MAPREDUCE-5725&lt;/del&gt;&lt;/a&gt;. Make explicit that TestNetworkedJob relies on the Capacity Scheduler (Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559882&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559882&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestNetworkedJob.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13877455" author="hudson" created="Tue, 21 Jan 2014 13:27:03 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1676 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1676/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1676/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5725&quot; title=&quot;TestNetworkedJob relies on the Capacity Scheduler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5725&quot;&gt;&lt;del&gt;MAPREDUCE-5725&lt;/del&gt;&lt;/a&gt;. Make explicit that TestNetworkedJob relies on the Capacity Scheduler (Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559882&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559882&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestNetworkedJob.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13877466" author="hudson" created="Tue, 21 Jan 2014 13:41:41 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1651 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1651/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1651/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5725&quot; title=&quot;TestNetworkedJob relies on the Capacity Scheduler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5725&quot;&gt;&lt;del&gt;MAPREDUCE-5725&lt;/del&gt;&lt;/a&gt;. Make explicit that TestNetworkedJob relies on the Capacity Scheduler (Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559882&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559882&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestNetworkedJob.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623980" name="MAPREDUCE-5275.patch" size="2555" author="sandyr" created="Mon, 20 Jan 2014 18:32:58 +0000"/>
                            <attachment id="12624017" name="MAPREDUCE-5725-1.patch" size="2722" author="sandyr" created="Mon, 20 Jan 2014 21:48:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Jan 2014 20:21:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368111</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5724] JobHistoryServer does not start if HDFS is not running</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5724</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Starting JHS without HDFS running fails with the following error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
STARTUP_MSG:   build = git:&lt;span class=&quot;code-comment&quot;&gt;//git.apache.org/hadoop-common.git -r ad74e8850b99e03b0b6435b04f5b3e9995bc3956; compiled by &apos;tucu&apos; on 2014-01-14T22:40Z
&lt;/span&gt;STARTUP_MSG:   java = 1.7.0_45
************************************************************/
2014-01-14 16:47:40,264 INFO org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer: registered UNIX signal handlers &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [TERM, HUP, INT]
2014-01-14 16:47:40,883 WARN org.apache.hadoop.util.NativeCodeLoader: Unable to load &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-hadoop library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your platform... using builtin-java classes where applicable
2014-01-14 16:47:41,101 INFO org.apache.hadoop.mapreduce.v2.hs.JobHistory: JobHistory Init
2014-01-14 16:47:41,710 INFO org.apache.hadoop.service.AbstractService: Service org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager failed in state INITED; cause: org.apache.hadoop.yarn.exceptions.YarnRuntimeException: Error creating done directory: [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8020/tmp/hadoop-yarn/staging/history/done]
&lt;/span&gt;org.apache.hadoop.yarn.exceptions.YarnRuntimeException: Error creating done directory: [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8020/tmp/hadoop-yarn/staging/history/done]
&lt;/span&gt;	at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager.serviceInit(HistoryFileManager.java:505)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistory.serviceInit(JobHistory.java:94)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.service.CompositeService.serviceInit(CompositeService.java:108)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer.serviceInit(JobHistoryServer.java:143)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer.launchJobHistoryServer(JobHistoryServer.java:207)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer.main(JobHistoryServer.java:217)
Caused by: java.net.ConnectException: Call From dontknow.local/172.20.10.4 to localhost:8020 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http:&lt;span class=&quot;code-comment&quot;&gt;//wiki.apache.org/hadoop/ConnectionRefused
&lt;/span&gt;	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:526)
	at org.apache.hadoop.net.NetUtils.wrapWithMessage(NetUtils.java:783)
	at org.apache.hadoop.net.NetUtils.wrapException(NetUtils.java:730)
	at org.apache.hadoop.ipc.Client.call(Client.java:1410)
	at org.apache.hadoop.ipc.Client.call(Client.java:1359)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:206)
	at com.sun.proxy.$Proxy9.getFileInfo(Unknown Source)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:185)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:101)
	at com.sun.proxy.$Proxy9.getFileInfo(Unknown Source)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.getFileInfo(ClientNamenodeProtocolTranslatorPB.java:671)
	at org.apache.hadoop.hdfs.DFSClient.getFileInfo(DFSClient.java:1722)
	at org.apache.hadoop.fs.Hdfs.getFileStatus(Hdfs.java:124)
	at org.apache.hadoop.fs.FileContext$14.next(FileContext.java:1106)
	at org.apache.hadoop.fs.FileContext$14.next(FileContext.java:1102)
	at org.apache.hadoop.fs.FSLinkResolver.resolve(FSLinkResolver.java:90)
	at org.apache.hadoop.fs.FileContext.getFileStatus(FileContext.java:1102)
	at org.apache.hadoop.fs.FileContext$Util.exists(FileContext.java:1514)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager.mkdir(HistoryFileManager.java:561)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager.serviceInit(HistoryFileManager.java:502)
	... 8 more
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:735)
	at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
	at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:529)
	at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:493)
	at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:601)
	at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:696)
	at org.apache.hadoop.ipc.Client$Connection.access$2700(Client.java:367)
	at org.apache.hadoop.ipc.Client.getConnection(Client.java:1458)
	at org.apache.hadoop.ipc.Client.call(Client.java:1377)
	... 28 more
2014-01-14 16:47:41,713 INFO org.apache.hadoop.service.AbstractService: Service org.apache.hadoop.mapreduce.v2.hs.JobHistory failed in state INITED; cause: org.apache.hadoop.yarn.exceptions.YarnRuntimeException: Error creating done directory: [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8020/tmp/hadoop-yarn/staging/history/done]
&lt;/span&gt;org.apache.hadoop.yarn.exceptions.YarnRuntimeException: Error creating done directory: [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8020/tmp/hadoop-yarn/staging/history/done]
&lt;/span&gt;	at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager.serviceInit(HistoryFileManager.java:505)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistory.serviceInit(JobHistory.java:94)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.service.CompositeService.serviceInit(CompositeService.java:108)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer.serviceInit(JobHistoryServer.java:143)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer.launchJobHistoryServer(JobHistoryServer.java:207)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer.main(JobHistoryServer.java:217)
Caused by: java.net.ConnectException: Call From dontknow.local/172.20.10.4 to localhost:8020 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http:&lt;span class=&quot;code-comment&quot;&gt;//wiki.apache.org/hadoop/ConnectionRefused
&lt;/span&gt;	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:526)
	at org.apache.hadoop.net.NetUtils.wrapWithMessage(NetUtils.java:783)
	at org.apache.hadoop.net.NetUtils.wrapException(NetUtils.java:730)
	at org.apache.hadoop.ipc.Client.call(Client.java:1410)
	at org.apache.hadoop.ipc.Client.call(Client.java:1359)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:206)
	at com.sun.proxy.$Proxy9.getFileInfo(Unknown Source)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:185)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:101)
	at com.sun.proxy.$Proxy9.getFileInfo(Unknown Source)
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.getFileInfo(ClientNamenodeProtocolTranslatorPB.java:671)
	at org.apache.hadoop.hdfs.DFSClient.getFileInfo(DFSClient.java:1722)
	at org.apache.hadoop.fs.Hdfs.getFileStatus(Hdfs.java:124)
	at org.apache.hadoop.fs.FileContext$14.next(FileContext.java:1106)
	at org.apache.hadoop.fs.FileContext$14.next(FileContext.java:1102)
	at org.apache.hadoop.fs.FSLinkResolver.resolve(FSLinkResolver.java:90)
	at org.apache.hadoop.fs.FileContext.getFileStatus(FileContext.java:1102)
	at org.apache.hadoop.fs.FileContext$Util.exists(FileContext.java:1514)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager.mkdir(HistoryFileManager.java:561)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager.serviceInit(HistoryFileManager.java:502)
	... 8 more
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:735)
	at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
	at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:529)
	at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:493)
	at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:601)
	at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:696)
	at org.apache.hadoop.ipc.Client$Connection.access$2700(Client.java:367)
	at org.apache.hadoop.ipc.Client.getConnection(Client.java:1458)
	at org.apache.hadoop.ipc.Client.call(Client.java:1377)
	... 28 more
2014-01-14 16:47:41,714 INFO org.apache.hadoop.mapreduce.v2.hs.JobHistory: Stopping JobHistory
2014-01-14 16:47:41,714 INFO org.apache.hadoop.service.AbstractService: Service org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer failed in state INITED; cause: org.apache.hadoop.yarn.exceptions.YarnRuntimeException: Error creating done directory: [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8020/tmp/hadoop-yarn/staging/history/done]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12688905">MAPREDUCE-5724</key>
            <summary>JobHistoryServer does not start if HDFS is not running</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tucu00">Alejandro Abdelnur</assignee>
                                    <reporter username="tucu00">Alejandro Abdelnur</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jan 2014 00:58:12 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:40 +0000</updated>
                            <resolved>Thu, 16 Jan 2014 17:13:10 +0000</resolved>
                                    <version>3.0.0</version>
                    <version>2.3.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>jobhistoryserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13871450" author="tucu00" created="Wed, 15 Jan 2014 01:00:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-24&quot; title=&quot;Nodemanager fails to start if log aggregation enabled and namenode unavailable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-24&quot;&gt;&lt;del&gt;YARN-24&lt;/del&gt;&lt;/a&gt; fixed a similar issue for the NM, we should try doing something similar here.&lt;/p&gt;</comment>
                            <comment id="13872795" author="tucu00" created="Wed, 15 Jan 2014 23:29:15 +0000"  >&lt;p&gt;trying to do something like &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-24&quot; title=&quot;Nodemanager fails to start if log aggregation enabled and namenode unavailable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-24&quot;&gt;&lt;del&gt;YARN-24&lt;/del&gt;&lt;/a&gt; for JHS is a bit more complicated.&lt;/p&gt;

&lt;p&gt;Instead, I&apos;ve taken a different approach:&lt;/p&gt;

&lt;p&gt;On startup the JHS will try creating the history directories, if it cannot because the the FS is not available or in safemode will retry for up to 2mins, if it times out, it will then shutdown.&lt;/p&gt;

&lt;p&gt;So, instead failing immediately, the JHS will wait for the FS to become avail for a while.&lt;/p&gt;

&lt;p&gt;I&apos;ve hardcoded the 2mins timeout as I don&apos;t think we need to introduce a config value for this. If others feel otherwise, I can update the patch with a config prop for it.&lt;/p&gt;</comment>
                            <comment id="13872818" author="kkambatl" created="Wed, 15 Jan 2014 23:45:55 +0000"  >&lt;p&gt;Would it make sense to add a config, a value of -1 would mean to wait forever like we do with other such timeout configs? The default itself could be few mins or -1.&lt;/p&gt;</comment>
                            <comment id="13872826" author="sandyr" created="Wed, 15 Jan 2014 23:50:14 +0000"  >&lt;p&gt;The approach sounds reasonable to me.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-comment&quot;&gt;//DistributedFileSystem returns a RemoteException with a message stating
&lt;/span&gt;+  &lt;span class=&quot;code-comment&quot;&gt;// SafeModeException in it. So &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is only way to check it is because of
&lt;/span&gt;+  &lt;span class=&quot;code-comment&quot;&gt;// being in safe mode.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should use block comments like the other (even non-public) methods in the class.  Applies other places as well.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; YarnRuntimeException(
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;Timed out waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; FileSystem to become available&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should report how long it waited.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;  ex.toString().contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;SafeModeException&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Two spaces between return and ex.  Also, can we get the SafeModeException from ex.getCause()?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; done = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Nit: &quot;succeeded&quot; would be clearer to me than &quot;done&quot;.  Not a big deal either way.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  void createHistoryDirs(Clock clock, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; intervalCheck, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timeOut)
+      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
...
+      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(intervalCheck);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should handle interrupted exception - we don&apos;t want to fail if we hit it?  Then we can remove &quot;throws Exception&quot; because the only other exception in the method isn&apos;t checked?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          Assert.assertTrue(dfsCluster.getFileSystem().isInSafeMode());
+        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
+          Assert.fail(ex.toString());
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can asserts in other threads ever cause the test to fail?&lt;/p&gt;</comment>
                            <comment id="13872828" author="hadoopqa" created="Wed, 15 Jan 2014 23:51:31 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623258/MAPREDUCE-5724.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623258/MAPREDUCE-5724.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4320//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4320//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4320//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4320//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13872892" author="tucu00" created="Thu, 16 Jan 2014 00:54:58 +0000"  >&lt;p&gt;thanks for the reviews.&lt;/p&gt;

&lt;p&gt;New patch addressing Karthik&apos;s and Sandy&apos;s comments.&lt;/p&gt;

&lt;p&gt;Regarding removing the &lt;tt&gt;throw Exception&lt;/tt&gt; from the &lt;tt&gt;createHistoryDirs()&lt;/tt&gt;, not possible because the &lt;tt&gt;tryCreateHistoryDirs&lt;/tt&gt; does throw a checked exception if the reason is other than the FS not being avail.&lt;/p&gt;</comment>
                            <comment id="13872910" author="hadoopqa" created="Thu, 16 Jan 2014 01:21:33 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623276/MAPREDUCE-5724.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623276/MAPREDUCE-5724.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4321//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4321//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4321//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4321//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13873003" author="sandyr" created="Thu, 16 Jan 2014 03:14:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;Regarding removing the throw Exception from the createHistoryDirs(), not possible because the tryCreateHistoryDirs does throw a checked exception if the reason is other than the FS not being avail.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In that case, createHistoryDirs should just throw an IOException, no?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;  ex.toString().contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;SafeModeException&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can we get the SafeModeException from ex.getCause()?&lt;/p&gt;

&lt;p&gt;Otherwise, LGTM.&lt;/p&gt;</comment>
                            <comment id="13873021" author="tucu00" created="Thu, 16 Jan 2014 04:19:11 +0000"  >&lt;p&gt;Thanks Sandy, new patch changing the exception being thrown to IOException. Regarding detecting the SafeModeException by cause, I&apos;ve tried that at first, the problem is that the cause is NULL. I&apos;ve checked with ATM and he indicated that the initCause() method should be called, but according to the javadocs, the initCause() should be called where the exception is being created, so this seems to be an HDFS issue, thus the only way I figured out how to determine if the original exception was due to the filesystem being in safemode was by searching the toString() value for &apos;SafeModeException&apos;. I&apos;ll open a JIRA against HDFS to call initCause() where the exception is being thrown.&lt;/p&gt;</comment>
                            <comment id="13873023" author="tucu00" created="Thu, 16 Jan 2014 04:23:36 +0000"  >&lt;p&gt;created &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-5787&quot; title=&quot;client Exception when in safemode does not have cause populated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-5787&quot;&gt;HDFS-5787&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13873036" author="hadoopqa" created="Thu, 16 Jan 2014 04:41:19 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623303/MAPREDUCE-5724.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623303/MAPREDUCE-5724.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4322//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4322//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4322//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4322//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13873075" author="sandyr" created="Thu, 16 Jan 2014 06:14:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;Regarding detecting the SafeModeException by cause, I&apos;ve tried that at first, the problem is that the cause is NULL&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Makes sense&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13873619" author="tucu00" created="Thu, 16 Jan 2014 17:13:10 +0000"  >&lt;p&gt;committed to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13873621" author="hudson" created="Thu, 16 Jan 2014 17:15:53 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5009 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5009/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5009/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5724&quot; title=&quot;JobHistoryServer does not start if HDFS is not running&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5724&quot;&gt;&lt;del&gt;MAPREDUCE-5724&lt;/del&gt;&lt;/a&gt;. JobHistoryServer does not start if HDFS is not running. (tucu) (tucu: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558852&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558852&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/jobhistory/JHAdminConfig.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestHistoryFileManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13874669" author="hudson" created="Fri, 17 Jan 2014 11:10:44 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #455 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/455/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/455/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5724&quot; title=&quot;JobHistoryServer does not start if HDFS is not running&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5724&quot;&gt;&lt;del&gt;MAPREDUCE-5724&lt;/del&gt;&lt;/a&gt;. JobHistoryServer does not start if HDFS is not running. (tucu) (tucu: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558852&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558852&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/jobhistory/JHAdminConfig.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestHistoryFileManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13874766" author="hudson" created="Fri, 17 Jan 2014 13:27:28 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1647 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1647/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1647/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5724&quot; title=&quot;JobHistoryServer does not start if HDFS is not running&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5724&quot;&gt;&lt;del&gt;MAPREDUCE-5724&lt;/del&gt;&lt;/a&gt;. JobHistoryServer does not start if HDFS is not running. (tucu) (tucu: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558852&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558852&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/jobhistory/JHAdminConfig.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestHistoryFileManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13874777" author="hudson" created="Fri, 17 Jan 2014 13:28:50 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1672 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1672/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1672/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5724&quot; title=&quot;JobHistoryServer does not start if HDFS is not running&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5724&quot;&gt;&lt;del&gt;MAPREDUCE-5724&lt;/del&gt;&lt;/a&gt;. JobHistoryServer does not start if HDFS is not running. (tucu) (tucu: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558852&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558852&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/jobhistory/JHAdminConfig.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestHistoryFileManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623303" name="MAPREDUCE-5724.patch" size="15486" author="tucu00" created="Thu, 16 Jan 2014 04:19:11 +0000"/>
                            <attachment id="12623276" name="MAPREDUCE-5724.patch" size="15372" author="tucu00" created="Thu, 16 Jan 2014 00:54:58 +0000"/>
                            <attachment id="12623258" name="MAPREDUCE-5724.patch" size="14725" author="tucu00" created="Wed, 15 Jan 2014 23:29:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jan 2014 23:45:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367879</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5723] MR AM container log can be truncated or empty</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5723</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;It occurs when the property &quot;mapreduce.task.userlog.limit.kb&quot; is set non-zero in mapped-site.xml.&lt;br/&gt;
AM container syslog remains empty if any exception occurs. &lt;/p&gt;

&lt;p&gt;Bug details:&lt;br/&gt;
In MRAppMaster.java, the following code snippets show the bug.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
       LOG.fatal(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error starting MRAppMaster&quot;&lt;/span&gt;, t);
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(1);
    }&lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
       LogManager.shutdown();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the catch block, we are exiting the JVM. So finally block (therefore LogManager.shutdown()) is never executed.&lt;/p&gt;

&lt;p&gt;Possible fix: &lt;br/&gt;
Make sure LogManager.shutdown() is executed in all cases.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12688872">MAPREDUCE-5723</key>
            <summary>MR AM container log can be truncated or empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kamrul">Mohammad Kamrul Islam</assignee>
                                    <reporter username="kamrul">Mohammad Kamrul Islam</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jan 2014 22:43:17 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:43 +0000</updated>
                            <resolved>Thu, 23 Jan 2014 06:09:53 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>applicationmaster</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13871317" author="kamrul" created="Tue, 14 Jan 2014 22:49:59 +0000"  >&lt;p&gt;patch uploaded.&lt;/p&gt;</comment>
                            <comment id="13871402" author="hadoopqa" created="Wed, 15 Jan 2014 00:00:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623004/MAPREDUCE-5723.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623004/MAPREDUCE-5723.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4318//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4318//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4318//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4318//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13872561" author="hadoopqa" created="Wed, 15 Jan 2014 20:31:55 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623211/MAPREDUCE-5723.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623211/MAPREDUCE-5723.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4319//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4319//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4319//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4319//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13872562" author="kkambatl" created="Wed, 15 Jan 2014 20:32:49 +0000"  >&lt;p&gt;I think the clean way, though slightly more involved, would be to have MRAppMaster implement serviceStop() and call LogManager.shutdown() there. &lt;/p&gt;

&lt;p&gt;While at it, I also think the &lt;tt&gt;MRAppMasterShutdownHook&lt;/tt&gt; should only call appMaster.stop() and rest of the items should move to serviceStop().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;MRAppMaster received a signal. Signaling RMCommunicator and &quot;&lt;/span&gt;
        + &lt;span class=&quot;code-quote&quot;&gt;&quot;JobHistoryEventHandler.&quot;&lt;/span&gt;);

      &lt;span class=&quot;code-comment&quot;&gt;// Notify the JHEH and RMCommunicator that a SIGTERM has been received so
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// that they don&apos;t take too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; in shutting down
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(appMaster.containerAllocator &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ContainerAllocatorRouter) {
        ((ContainerAllocatorRouter) appMaster.containerAllocator)
          .setSignalled(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
      }
      appMaster.notifyIsLastAMRetry(appMaster.isLastAMRetry);
      appMaster.stop();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Further, instead of calling System.exit(1), we should call ExitUtil.terminate(1, t):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
      LOG.fatal(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error starting MRAppMaster&quot;&lt;/span&gt;, t);
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13872967" author="kamrul" created="Thu, 16 Jan 2014 02:11:02 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkambatl&quot; class=&quot;user-hover&quot; rel=&quot;kkambatl&quot;&gt;Karthik Kambatla&lt;/a&gt; for your proposal. I will put a patch based on that.&lt;/p&gt;

&lt;p&gt;In the mean time, do you have any idea why the test case is failing? If I run it myself w/o any code changes the test case still fails.&lt;/p&gt;

</comment>
                            <comment id="13873032" author="kamrul" created="Thu, 16 Jan 2014 04:32:37 +0000"  >&lt;p&gt;patch with review comments addressed&lt;/p&gt;</comment>
                            <comment id="13873038" author="kkambatl" created="Thu, 16 Jan 2014 04:45:04 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kamrul&quot; class=&quot;user-hover&quot; rel=&quot;kamrul&quot;&gt;Mohammad Kamrul Islam&lt;/a&gt;. The patch definitely looks better now. Should have mentioned this earlier, but it would be nice to add a unit test. How about something that just verifies LogManager.shutdown is called - may be using spy? &lt;/p&gt;

&lt;p&gt;I ll have to verify why TestRMContainerAllocator is failing, but we can ignore the failure if it is also failing on trunk without the patch. &lt;/p&gt;</comment>
                            <comment id="13873044" author="hadoopqa" created="Thu, 16 Jan 2014 05:02:29 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623305/MAPREDUCE-5723.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623305/MAPREDUCE-5723.3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4323//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4323//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4323//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4323//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13873130" author="kamrul" created="Thu, 16 Jan 2014 07:51:33 +0000"  >&lt;ul&gt;
	&lt;li&gt;No new functionality is added. Therefore,no new test case is required. But I tested it in a cluster setup.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Failed test case: It is unrelated to this change. There is a separate JIRA to address this issue:&lt;br/&gt;
 &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5719&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAPREDUCE-5719&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13878693" author="jlowe" created="Wed, 22 Jan 2014 14:34:58 +0000"  >&lt;p&gt;Agree with Karthik that a test case would be nice because unit tests are useful for regression tests and not just for new functionality.  However this will be a bit tricky to test via spy since LogManager.shutdown is a static function, and MRAppMaster is not invoking it via an object that can be modified for testing.  For this patch I&apos;m OK if it doesn&apos;t have a test since it&apos;s relatively small and straightforward, but in general we want unit tests even if it&apos;s just a bugfix.&lt;/p&gt;

&lt;p&gt;As for the patch itself, we need to call LogManager.shutdown() after super.stop(), otherwise we end up shutting down the logging system before shutting down all the services registered within the MRAppMaster service.  We want to see the logs of those sub-services shutting down.&lt;/p&gt;</comment>
                            <comment id="13878712" author="jlowe" created="Wed, 22 Jan 2014 14:43:56 +0000"  >&lt;p&gt;Elevating priority and updating the summary since this is subsuming &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5730&quot; title=&quot;AM log is truncated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5730&quot;&gt;&lt;del&gt;MAPREDUCE-5730&lt;/del&gt;&lt;/a&gt;, and AM logs are essentially broken since &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5694&quot; title=&quot;MR AM container syslog is empty  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5694&quot;&gt;&lt;del&gt;MAPREDUCE-5694&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Also the Fix Version/s field in JIRA should only be filled out when the patch is committed to indicate where it has been fixed.  The Target Version/s field indicates where the JIRA is targeted to be fixed.&lt;/p&gt;</comment>
                            <comment id="13879182" author="kamrul" created="Wed, 22 Jan 2014 21:08:51 +0000"  >&lt;p&gt;New patch addressed Jason&apos;s comment.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if adding a spy test for this is required. &lt;/p&gt;</comment>
                            <comment id="13879188" author="kkambatl" created="Wed, 22 Jan 2014 21:15:20 +0000"  >&lt;p&gt;+1. Looks good to me. Will commit this later today, if there are no objections. &lt;/p&gt;</comment>
                            <comment id="13879192" author="jlowe" created="Wed, 22 Jan 2014 21:17:57 +0000"  >&lt;p&gt;+1, lgtm as well.&lt;/p&gt;</comment>
                            <comment id="13879318" author="hadoopqa" created="Wed, 22 Jan 2014 22:57:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12624431/MAPREDUCE-5723.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12624431/MAPREDUCE-5723.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4334//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4334//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4334//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4334//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13879372" author="kamrul" created="Thu, 23 Jan 2014 02:17:13 +0000"  >&lt;p&gt;Is it possible to push patch into branch 2.2.x?&lt;/p&gt;</comment>
                            <comment id="13879475" author="kkambatl" created="Thu, 23 Jan 2014 06:09:53 +0000"  >&lt;p&gt;Thanks Mohammad for the contribution. Just committed this to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13879478" author="kkambatl" created="Thu, 23 Jan 2014 06:13:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is it possible to push patch into branch 2.2.x?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This should go in after &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5694&quot; title=&quot;MR AM container syslog is empty  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5694&quot;&gt;&lt;del&gt;MAPREDUCE-5694&lt;/del&gt;&lt;/a&gt;. I am okay with including these in 2.3, but the branch is not ready yet. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acmurthy&quot; class=&quot;user-hover&quot; rel=&quot;acmurthy&quot;&gt;Arun C Murthy&lt;/a&gt; - do you think we can include both in 2.3? &lt;/p&gt;</comment>
                            <comment id="13881682" author="hudson" created="Sat, 25 Jan 2014 05:48:18 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5036 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5036/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5036/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5723&quot; title=&quot;MR AM container log can be truncated or empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5723&quot;&gt;&lt;del&gt;MAPREDUCE-5723&lt;/del&gt;&lt;/a&gt;. MR AM container log can be truncated or empty. (Mohammad Kamrul Islam via kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560592&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560592&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13881831" author="hudson" created="Sat, 25 Jan 2014 12:27:42 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #461 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/461/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/461/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5723&quot; title=&quot;MR AM container log can be truncated or empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5723&quot;&gt;&lt;del&gt;MAPREDUCE-5723&lt;/del&gt;&lt;/a&gt;. MR AM container log can be truncated or empty. (Mohammad Kamrul Islam via kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560592&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560592&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13881858" author="hudson" created="Sat, 25 Jan 2014 13:27:40 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1678 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1678/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1678/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5723&quot; title=&quot;MR AM container log can be truncated or empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5723&quot;&gt;&lt;del&gt;MAPREDUCE-5723&lt;/del&gt;&lt;/a&gt;. MR AM container log can be truncated or empty. (Mohammad Kamrul Islam via kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560592&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560592&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13881876" author="hudson" created="Sat, 25 Jan 2014 13:38:03 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1653 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1653/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1653/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5723&quot; title=&quot;MR AM container log can be truncated or empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5723&quot;&gt;&lt;del&gt;MAPREDUCE-5723&lt;/del&gt;&lt;/a&gt;. MR AM container log can be truncated or empty. (Mohammad Kamrul Islam via kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560592&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560592&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12690067">MAPREDUCE-5730</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12623004" name="MAPREDUCE-5723.1.patch" size="1336" author="kamrul" created="Tue, 14 Jan 2014 22:49:59 +0000"/>
                            <attachment id="12623211" name="MAPREDUCE-5723.2.patch" size="932" author="kamrul" created="Wed, 15 Jan 2014 20:07:57 +0000"/>
                            <attachment id="12623305" name="MAPREDUCE-5723.3.patch" size="1520" author="kamrul" created="Thu, 16 Jan 2014 04:32:37 +0000"/>
                            <attachment id="12624431" name="MAPREDUCE-5723.4.patch" size="1520" author="kamrul" created="Wed, 22 Jan 2014 21:08:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jan 2014 00:00:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367844</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5722] client-app module failing to compile, missing jersey dependency</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5722</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;This seems a fallout of &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-888&quot; title=&quot;clean up POM dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-888&quot;&gt;&lt;del&gt;YARN-888&lt;/del&gt;&lt;/a&gt;, oddly enough it did not happen while doing a full build with the patch before committing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688603">MAPREDUCE-5722</key>
            <summary>client-app module failing to compile, missing jersey dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="tucu00">Alejandro Abdelnur</assignee>
                                    <reporter username="tucu00">Alejandro Abdelnur</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jan 2014 19:07:01 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:44 +0000</updated>
                            <resolved>Mon, 13 Jan 2014 19:17:35 +0000</resolved>
                                    <version>3.0.0</version>
                    <version>2.3.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13869855" author="tucu00" created="Mon, 13 Jan 2014 19:17:35 +0000"  >&lt;p&gt;false alarm, it seems I was picking up some stale POMs from my local cache, doing a full clean build when OK.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367629</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5721] RM occur exception while unregistering</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5721</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;when i run WORDCOUNT EXAMPLES,it occur.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop@namenode0 ~&amp;#93;&lt;/span&gt;$ hadoop jar hadoop-2.2.0/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.2.0.jar wordcount /wordcount-input /wordcount-output&lt;br/&gt;
14/01/10 14:42:58 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable&lt;br/&gt;
14/01/10 14:43:01 INFO client.RMProxy: Connecting to ResourceManager at namenode0/192.168.0.133:8032&lt;br/&gt;
14/01/10 14:43:03 INFO input.FileInputFormat: Total input paths to process : 2&lt;br/&gt;
14/01/10 14:43:03 INFO mapreduce.JobSubmitter: number of splits:2&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: user.name is deprecated. Instead, use mapreduce.job.user.name&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapred.jar is deprecated. Instead, use mapreduce.job.jar&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapred.output.value.class is deprecated. Instead, use mapreduce.job.output.value.class&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapreduce.combine.class is deprecated. Instead, use mapreduce.job.combine.class&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapreduce.map.class is deprecated. Instead, use mapreduce.job.map.class&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapred.job.name is deprecated. Instead, use mapreduce.job.name&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapreduce.reduce.class is deprecated. Instead, use mapreduce.job.reduce.class&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapred.input.dir is deprecated. Instead, use mapreduce.input.fileinputformat.inputdir&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapred.output.dir is deprecated. Instead, use mapreduce.output.fileoutputformat.outputdir&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapred.map.tasks is deprecated. Instead, use mapreduce.job.maps&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapred.output.key.class is deprecated. Instead, use mapreduce.job.output.key.class&lt;br/&gt;
14/01/10 14:43:03 INFO Configuration.deprecation: mapred.working.dir is deprecated. Instead, use mapreduce.job.working.dir&lt;br/&gt;
14/01/10 14:43:03 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1389336130986_0001&lt;br/&gt;
14/01/10 14:43:05 INFO impl.YarnClientImpl: Submitted application application_1389336130986_0001 to ResourceManager at namenode0/192.168.0.133:8032&lt;br/&gt;
14/01/10 14:43:05 INFO mapreduce.Job: The url to track the job: &lt;a href=&quot;http://namenode0:8088/proxy/application_1389336130986_0001/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://namenode0:8088/proxy/application_1389336130986_0001/&lt;/a&gt;&lt;br/&gt;
14/01/10 14:43:05 INFO mapreduce.Job: Running job: job_1389336130986_0001&lt;br/&gt;
14/01/10 14:43:16 INFO mapreduce.Job: Job job_1389336130986_0001 running in uber mode : false&lt;br/&gt;
14/01/10 14:43:16 INFO mapreduce.Job:  map 0% reduce 0%&lt;br/&gt;
14/01/10 14:44:20 INFO mapreduce.Job:  map 50% reduce 0%&lt;br/&gt;
14/01/10 14:44:34 INFO mapreduce.Job:  map 100% reduce 0%&lt;br/&gt;
14/01/10 14:44:51 INFO mapreduce.Job:  map 100% reduce 100%&lt;br/&gt;
14/01/10 14:44:58 INFO ipc.Client: Retrying connect to server: datanode0.hadoop/192.168.0.134:43052. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=3, sleepTime=1 SECONDS)&lt;br/&gt;
14/01/10 14:44:59 INFO ipc.Client: Retrying connect to server: datanode0.hadoop/192.168.0.134:43052. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=3, sleepTime=1 SECONDS)&lt;br/&gt;
14/01/10 14:45:00 INFO ipc.Client: Retrying connect to server: datanode0.hadoop/192.168.0.134:43052. Already tried 2 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=3, sleepTime=1 SECONDS)&lt;br/&gt;
14/01/10 14:45:01 INFO ipc.Client: Retrying connect to server: datanode0.hadoop/192.168.0.134:43052. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=3, sleepTime=1 SECONDS)&lt;br/&gt;
14/01/10 14:45:02 INFO ipc.Client: Retrying connect to server: datanode0.hadoop/192.168.0.134:43052. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=3, sleepTime=1 SECONDS)&lt;br/&gt;
14/01/10 14:45:03 INFO ipc.Client: Retrying connect to server: datanode0.hadoop/192.168.0.134:43052. Already tried 2 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=3, sleepTime=1 SECONDS)&lt;br/&gt;
14/01/10 14:45:17 INFO mapreduce.Job:  map 0% reduce 0%&lt;br/&gt;
14/01/10 14:45:17 INFO mapreduce.Job: Job job_1389336130986_0001 failed with state FAILED due to: Application application_1389336130986_0001 failed 2 times due to AM Container for appattempt_1389336130986_0001_000002 exited with  exitCode: 1 due to: Exception from container-launch: &lt;br/&gt;
org.apache.hadoop.util.Shell$ExitCodeException: &lt;br/&gt;
        at org.apache.hadoop.util.Shell.runCommand(Shell.java:464)&lt;br/&gt;
        at org.apache.hadoop.util.Shell.run(Shell.java:380)&lt;br/&gt;
        at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:590)&lt;br/&gt;
        at org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:195)&lt;br/&gt;
        at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:283)&lt;br/&gt;
        at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:79)&lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:139)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:909)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;


&lt;p&gt;.Failing this attempt.. Failing the application.&lt;br/&gt;
14/01/10 14:45:17 INFO mapreduce.Job: Counters: 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop@namenode0 ~&amp;#93;&lt;/span&gt;$ &lt;/p&gt;

&lt;p&gt;LOGS&lt;br/&gt;
Hadoop:&lt;br/&gt;
2014-01-10 16:21:45,987 WARN org.apache.hadoop.hdfs.StateChange: DIR* FSDirectory.unprotectedRenameTo: failed to rename /mr-history/tmp/hadoop/job_1389341658181_0001.summary_tmp to /mr-history/tmp/hadoop/job_1389341658181_0001.summary because destination exists&lt;br/&gt;
2014-01-10 16:21:45,988 INFO BlockStateChange: BLOCK* addStoredBlock: blockMap updated: 192.168.0.135:50010 is added to blk_1073742140_1320 size 76810&lt;br/&gt;
2014-01-10 16:21:46,000 WARN org.apache.hadoop.hdfs.StateChange: DIR* FSDirectory.unprotectedRenameTo: failed to rename /mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml_tmp to /mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml because destination exists&lt;br/&gt;
2014-01-10 16:21:46,005 WARN org.apache.hadoop.hdfs.StateChange: DIR* FSDirectory.unprotectedRenameTo: failed to rename /mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist_tmp to /mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist because destination exists&lt;br/&gt;
2014-01-10 16:21:46,005 INFO org.apache.hadoop.hdfs.server.namenode.EditLogFileOutputStream: Nothing to flush&lt;br/&gt;
2014-01-10 16:21:46,152 INFO BlockStateChange: BLOCK* addToInvalidates: blk_1073742126_1306 192.168.0.135:50010 192.168.0.134:50010 &lt;br/&gt;
2014-01-10 16:21:46,153 INFO BlockStateChange: BLOCK* addToInvalidates: blk_1073742127_1307 192.168.0.135:50010 192.168.0.134:50010 &lt;br/&gt;
2014-01-10 16:21:46,153 INFO BlockStateChange: BLOCK* addToInvalidates: blk_1073742128_1308 192.168.0.135:50010 192.168.0.134:50010 &lt;br/&gt;
2014-01-10 16:21:46,153 INFO BlockStateChange: BLOCK* addToInvalidates: blk_1073742129_1309 192.168.0.135:50010 192.168.0.134:50010 &lt;br/&gt;
2014-01-10 16:21:46,153 INFO BlockStateChange: BLOCK* addToInvalidates: blk_1073742131_1311 192.168.0.134:50010 192.168.0.135:50010 &lt;br/&gt;
2014-01-10 16:21:46,153 INFO BlockStateChange: BLOCK* addToInvalidates: blk_1073742130_1310 192.168.0.134:50010 192.168.0.135:50010 &lt;br/&gt;
2014-01-10 16:21:46,153 INFO BlockStateChange: BLOCK* addToInvalidates: blk_1073742137_1317 192.168.0.135:50010 192.168.0.134:50010 &lt;br/&gt;
2014-01-10 16:21:46,153 INFO BlockStateChange: BLOCK* addToInvalidates: blk_1073742136_1316 192.168.0.135:50010 192.168.0.134:50010 &lt;br/&gt;
2014-01-10 16:21:48,901 INFO org.apache.hadoop.hdfs.StateChange: BLOCK* InvalidateBlocks: ask 192.168.0.134:50010 to delete &lt;span class=&quot;error&quot;&gt;&amp;#91;blk_1073742128_1308, blk_1073742129_1309, blk_1073742130_1310, blk_1073742131_1311, blk_1073742136_1316, blk_1073742137_1317, blk_1073742126_1306, blk_1073742127_1307&amp;#93;&lt;/span&gt;&lt;br/&gt;
2014-01-10 16:21:51,904 INFO org.apache.hadoop.hdfs.StateChange: BLOCK* InvalidateBlocks: ask 192.168.0.135:50010 to delete &lt;span class=&quot;error&quot;&gt;&amp;#91;blk_1073742128_1308, blk_1073742129_1309, blk_1073742130_1310, blk_1073742131_1311, blk_1073742136_1316, blk_1073742137_1317, blk_1073742126_1306, blk_1073742127_1307&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;RM:&lt;br/&gt;
2014-01-10 16:21:47,006 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler: Application appattempt_1389341658181_0001_000002 released container container_1389341658181_0001_02_000001 on node: host: datanode1.hadoop:56467 #containers=0 available=8192 used=0 with event: FINISHED&lt;br/&gt;
2014-01-10 16:21:47,006 INFO org.apache.hadoop.yarn.server.resourcemanager.ApplicationMasterService: Unregistering app attempt : appattempt_1389341658181_0001_000002&lt;br/&gt;
2014-01-10 16:21:47,006 INFO org.apache.hadoop.yarn.server.resourcemanager.rmapp.attempt.RMAppAttemptImpl: appattempt_1389341658181_0001_000002 State change from RUNNING to FAILED&lt;br/&gt;
2014-01-10 16:21:47,007 INFO org.apache.hadoop.yarn.server.resourcemanager.rmapp.RMAppImpl: Application application_1389341658181_0001 failed 2 times due to AM Container for appattempt_1389341658181_0001_000002 exited with  exitCode: 1 due to: Exception from container-launch: &lt;br/&gt;
org.apache.hadoop.util.Shell$ExitCodeException: &lt;br/&gt;
	at org.apache.hadoop.util.Shell.runCommand(Shell.java:464)&lt;br/&gt;
	at org.apache.hadoop.util.Shell.run(Shell.java:380)&lt;br/&gt;
	at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:590)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:195)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:283)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:79)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:139)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:909)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;


&lt;p&gt;.Failing this attempt.. Failing the application.&lt;br/&gt;
2014-01-10 16:21:47,010 INFO org.apache.hadoop.yarn.server.resourcemanager.rmapp.RMAppImpl: application_1389341658181_0001 State change from RUNNING to FAILED&lt;br/&gt;
2014-01-10 16:21:47,012 INFO org.apache.hadoop.yarn.server.resourcemanager.recovery.RMStateStore: Removing info for app: application_1389341658181_0001&lt;br/&gt;
2014-01-10 16:21:47,016 WARN org.apache.hadoop.yarn.server.resourcemanager.RMAuditLogger: USER=hadoop	OPERATION=Application Finished - Failed	TARGET=RMAppManager	RESULT=FAILURE	DESCRIPTION=App failed with state: FAILED	PERMISSIONS=Application application_1389341658181_0001 failed 2 times due to AM Container for appattempt_1389341658181_0001_000002 exited with  exitCode: 1 due to: Exception from container-launch: &lt;br/&gt;
org.apache.hadoop.util.Shell$ExitCodeException: &lt;br/&gt;
	at org.apache.hadoop.util.Shell.runCommand(Shell.java:464)&lt;br/&gt;
	at org.apache.hadoop.util.Shell.run(Shell.java:380)&lt;br/&gt;
	at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:590)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:195)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:283)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:79)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:139)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:909)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;


&lt;p&gt;.Failing this attempt.. Failing the application.	APPID=application_1389341658181_0001&lt;br/&gt;
2014-01-10 16:21:47,019 INFO org.apache.hadoop.yarn.server.resourcemanager.RMAppManager$ApplicationSummary: appId=application_1389341658181_0001,name=word count,user=hadoop,queue=default,state=FAILED,trackingUrl=namenode0:8088/cluster/app/application_1389341658181_0001,appMasterHost=,startTime=1389341979049,finishTime=1389342107008,finalStatus=FAILED&lt;br/&gt;
2014-01-10 16:21:47,021 INFO org.apache.hadoop.yarn.server.resourcemanager.amlauncher.AMLauncher: Cleaning master appattempt_1389341658181_0001_000002&lt;br/&gt;
2014-01-10 16:21:47,012 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler: Application appattempt_1389341658181_0001_000002 is done. finalState=FAILED&lt;br/&gt;
2014-01-10 16:21:47,022 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.AppSchedulingInfo: Application application_1389341658181_0001 requests cleared&lt;br/&gt;
2014-01-10 16:21:47,022 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.LeafQueue: Application removed - appId: application_1389341658181_0001 user: hadoop queue: default #user-pending-applications: 0 #user-active-applications: 0 #queue-pending-applications: 0 #queue-active-applications: 0&lt;br/&gt;
2014-01-10 16:21:47,022 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.ParentQueue: Application removed - appId: application_1389341658181_0001 user: hadoop leaf-queue of parent: root #applications: 0&lt;/p&gt;

&lt;p&gt;datanode0-syslog:&lt;br/&gt;
2014-01-10 16:21:09,369 INFO &lt;a href=&quot;#1 for port 39047&quot;&gt;Socket Reader #1 for port 39047&lt;/a&gt; SecurityLogger.org.apache.hadoop.ipc.Server: Auth successful for job_1389341658181_0001 (auth:SIMPLE)&lt;br/&gt;
2014-01-10 16:21:09,405 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 11 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: JVM with ID : jvm_1389341658181_0001_r_000004 asked for a task&lt;br/&gt;
2014-01-10 16:21:09,405 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 11 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: JVM with ID: jvm_1389341658181_0001_r_000004 given task: attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:10,012 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;RMCommunicator Allocator&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Received completed container container_1389341658181_0001_01_000002&lt;br/&gt;
2014-01-10 16:21:10,012 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;RMCommunicator Allocator&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: After Scheduling: PendingReds:0 ScheduledMaps:0 ScheduledReds:0 AssignedMaps:0 AssignedReds:1 CompletedMaps:2 CompletedReds:0 ContAlloc:3 ContRel:0 HostLocal:2 RackLocal:0&lt;br/&gt;
2014-01-10 16:21:10,012 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.TaskAttemptImpl: Diagnostics report from attempt_1389341658181_0001_m_000000_0: Container killed by the ApplicationMaster.&lt;br/&gt;
Container killed on request. Exit code is 143&lt;/p&gt;

&lt;p&gt;2014-01-10 16:21:10,578 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 12 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: MapCompletionEvents request from attempt_1389341658181_0001_r_000000_0. startIndex 0 maxEvents 10000&lt;br/&gt;
2014-01-10 16:21:11,593 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 13 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: MapCompletionEvents request from attempt_1389341658181_0001_r_000000_0. startIndex 2 maxEvents 10000&lt;br/&gt;
2014-01-10 16:21:12,003 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 14 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Status update from attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,003 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 14 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Progress of TaskAttempt attempt_1389341658181_0001_r_000000_0 is : 0.0&lt;br/&gt;
2014-01-10 16:21:12,077 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 15 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Status update from attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,077 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 15 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Progress of TaskAttempt attempt_1389341658181_0001_r_000000_0 is : 0.0&lt;br/&gt;
2014-01-10 16:21:12,698 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 16 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Commit-pending state update from attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,699 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.TaskAttemptImpl: attempt_1389341658181_0001_r_000000_0 TaskAttempt Transitioned from RUNNING to COMMIT_PENDING&lt;br/&gt;
2014-01-10 16:21:12,700 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.TaskImpl: attempt_1389341658181_0001_r_000000_0 given a go for committing the task output.&lt;br/&gt;
2014-01-10 16:21:12,702 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 16 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Commit go/no-go request from attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,703 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 16 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.TaskImpl: Result of canCommit for attempt_1389341658181_0001_r_000000_0:true&lt;br/&gt;
2014-01-10 16:21:12,776 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 18 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Status update from attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,777 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 18 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Progress of TaskAttempt attempt_1389341658181_0001_r_000000_0 is : 1.0&lt;br/&gt;
2014-01-10 16:21:12,779 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server handler 18 on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.TaskAttemptListenerImpl: Done acknowledgement from attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,780 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.TaskAttemptImpl: attempt_1389341658181_0001_r_000000_0 TaskAttempt Transitioned from COMMIT_PENDING to SUCCESS_CONTAINER_CLEANUP&lt;br/&gt;
2014-01-10 16:21:12,785 INFO &lt;a href=&quot;#5&quot;&gt;ContainerLauncher #5&lt;/a&gt; org.apache.hadoop.mapreduce.v2.app.launcher.ContainerLauncherImpl: Processing the event EventType: CONTAINER_REMOTE_CLEANUP for container container_1389341658181_0001_01_000004 taskAttempt attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,785 INFO &lt;a href=&quot;#5&quot;&gt;ContainerLauncher #5&lt;/a&gt; org.apache.hadoop.mapreduce.v2.app.launcher.ContainerLauncherImpl: KILLING attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,867 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.TaskAttemptImpl: attempt_1389341658181_0001_r_000000_0 TaskAttempt Transitioned from SUCCESS_CONTAINER_CLEANUP to SUCCEEDED&lt;br/&gt;
2014-01-10 16:21:12,867 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.TaskImpl: Task succeeded with attempt attempt_1389341658181_0001_r_000000_0&lt;br/&gt;
2014-01-10 16:21:12,867 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.TaskImpl: task_1389341658181_0001_r_000000 Task Transitioned from RUNNING to SUCCEEDED&lt;br/&gt;
2014-01-10 16:21:12,867 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.JobImpl: Num completed Tasks: 3&lt;br/&gt;
2014-01-10 16:21:12,867 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.JobImpl: job_1389341658181_0001Job Transitioned from RUNNING to COMMITTING&lt;br/&gt;
2014-01-10 16:21:12,870 INFO &lt;a href=&quot;#1&quot;&gt;CommitterEvent Processor #1&lt;/a&gt; org.apache.hadoop.mapreduce.v2.app.commit.CommitterEventHandler: Processing the event EventType: JOB_COMMIT&lt;br/&gt;
2014-01-10 16:21:12,974 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.JobImpl: Calling handler for JobFinishedEvent &lt;br/&gt;
2014-01-10 16:21:12,976 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AsyncDispatcher event handler&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.job.impl.JobImpl: job_1389341658181_0001Job Transitioned from COMMITTING to SUCCEEDED&lt;br/&gt;
2014-01-10 16:21:12,978 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: We are finishing cleanly so this is the last retry&lt;br/&gt;
2014-01-10 16:21:12,978 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Notify RMCommunicator isAMLastRetry: true&lt;br/&gt;
2014-01-10 16:21:12,979 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: RMCommunicator notified that shouldUnregistered is: true&lt;br/&gt;
2014-01-10 16:21:12,979 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Notify JHEH isAMLastRetry: true&lt;br/&gt;
2014-01-10 16:21:12,979 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: JobHistoryEventHandler notified that forceJobCompletion is true&lt;br/&gt;
2014-01-10 16:21:12,979 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Calling stop for all the services&lt;br/&gt;
2014-01-10 16:21:12,983 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Stopping JobHistoryEventHandler. Size of the outstanding queue size is 1&lt;br/&gt;
2014-01-10 16:21:13,021 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;RMCommunicator Allocator&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Before Scheduling: PendingReds:0 ScheduledMaps:0 ScheduledReds:0 AssignedMaps:0 AssignedReds:1 CompletedMaps:2 CompletedReds:1 ContAlloc:3 ContRel:0 HostLocal:2 RackLocal:0&lt;br/&gt;
2014-01-10 16:21:13,094 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Copying hdfs://namenode0:9000/tmp/hadoop-yarn/staging/hadoop/.staging/job_1389341658181_0001/job_1389341658181_0001_1.jhist to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist_tmp&lt;br/&gt;
2014-01-10 16:21:13,140 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Copied to done location: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist_tmp&lt;br/&gt;
2014-01-10 16:21:13,143 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Copying hdfs://namenode0:9000/tmp/hadoop-yarn/staging/hadoop/.staging/job_1389341658181_0001/job_1389341658181_0001_1_conf.xml to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml_tmp&lt;br/&gt;
2014-01-10 16:21:13,210 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Copied to done location: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml_tmp&lt;br/&gt;
2014-01-10 16:21:13,214 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Moved tmp to done: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001.summary_tmp to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001.summary&lt;br/&gt;
2014-01-10 16:21:13,215 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Moved tmp to done: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml_tmp to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml&lt;br/&gt;
2014-01-10 16:21:13,216 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Moved tmp to done: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist_tmp to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist&lt;br/&gt;
2014-01-10 16:21:13,219 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Stopped JobHistoryEventHandler. super.stop()&lt;br/&gt;
2014-01-10 16:21:13,226 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Setting job diagnostics to &lt;br/&gt;
2014-01-10 16:21:13,229 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Exception while unregistering &lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.util.MRWebAppUtil.getApplicationWebURLOnJHSWithoutScheme(MRWebAppUtil.java:133)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.util.MRWebAppUtil.getApplicationWebURLOnJHSWithScheme(MRWebAppUtil.java:148)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.doUnregistration(RMCommunicator.java:207)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.unregister(RMCommunicator.java:177)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.serviceStop(RMCommunicator.java:250)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator.serviceStop(RMContainerAllocator.java:255)&lt;br/&gt;
	at org.apache.hadoop.service.AbstractService.stop(AbstractService.java:221)&lt;br/&gt;
	at org.apache.hadoop.service.ServiceOperations.stop(ServiceOperations.java:52)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$ContainerAllocatorRouter.serviceStop(MRAppMaster.java:817)&lt;br/&gt;
	at org.apache.hadoop.service.AbstractService.stop(AbstractService.java:221)&lt;br/&gt;
	at org.apache.hadoop.service.ServiceOperations.stop(ServiceOperations.java:52)&lt;br/&gt;
	at org.apache.hadoop.service.ServiceOperations.stopQuietly(ServiceOperations.java:80)&lt;br/&gt;
	at org.apache.hadoop.service.CompositeService.stop(CompositeService.java:159)&lt;br/&gt;
	at org.apache.hadoop.service.CompositeService.serviceStop(CompositeService.java:132)&lt;br/&gt;
	at org.apache.hadoop.service.AbstractService.stop(AbstractService.java:221)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster.shutDownJob(MRAppMaster.java:548)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$JobFinishEventHandler$1.run(MRAppMaster.java:599)&lt;br/&gt;
2014-01-10 16:21:13,234 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Final Stats: PendingReds:0 ScheduledMaps:0 ScheduledReds:0 AssignedMaps:0 AssignedReds:1 CompletedMaps:2 CompletedReds:1 ContAlloc:3 ContRel:0 HostLocal:2 RackLocal:0&lt;br/&gt;
2014-01-10 16:21:13,234 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Skipping cleaning up the staging dir. assuming AM will be retried.&lt;br/&gt;
2014-01-10 16:21:13,235 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.ipc.Server: Stopping server on 39047&lt;br/&gt;
2014-01-10 16:21:13,241 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server Responder&amp;#93;&lt;/span&gt; org.apache.hadoop.ipc.Server: Stopping IPC Server Responder&lt;br/&gt;
2014-01-10 16:21:13,242 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;TaskHeartbeatHandler PingChecker&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.TaskHeartbeatHandler: TaskHeartbeatHandler thread interrupted&lt;br/&gt;
2014-01-10 16:21:13,243 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server listener on 39047&amp;#93;&lt;/span&gt; org.apache.hadoop.ipc.Server: Stopping IPC Server listener on 39047&lt;br/&gt;
2014-01-10 16:21:18,243 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.ipc.Server: Stopping server on 41351&lt;br/&gt;
2014-01-10 16:21:18,272 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.mortbay.log: Stopped SelectChannelConnector@0.0.0.0:0&lt;br/&gt;
2014-01-10 16:21:18,274 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server listener on 41351&amp;#93;&lt;/span&gt; org.apache.hadoop.ipc.Server: Stopping IPC Server listener on 41351&lt;br/&gt;
2014-01-10 16:21:18,275 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;IPC Server Responder&amp;#93;&lt;/span&gt; org.apache.hadoop.ipc.Server: Stopping IPC Server Responder&lt;br/&gt;
2014-01-10 16:21:18,378 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-69&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Exiting MR AppMaster..GoodBye!&lt;br/&gt;
2014-01-10 16:21:18,390 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: MRAppMaster received a signal. Signaling RMCommunicator and JobHistoryEventHandler.&lt;br/&gt;
2014-01-10 16:21:18,390 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: RMCommunicator notified that iSignalled is: true&lt;br/&gt;
2014-01-10 16:21:18,390 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Notify RMCommunicator isAMLastRetry: false&lt;br/&gt;
2014-01-10 16:21:18,390 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: RMCommunicator notified that shouldUnregistered is: false&lt;br/&gt;
2014-01-10 16:21:18,390 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Notify JHEH isAMLastRetry: false&lt;br/&gt;
2014-01-10 16:21:18,390 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: JobHistoryEventHandler notified that forceJobCompletion is false&lt;/p&gt;


&lt;p&gt;datanode1-syslog&#65306;&lt;br/&gt;
014-01-10 16:21:39,815 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Will not try to recover. recoveryEnabled: true recoverySupportedByCommitter: false numReduceTasks: 1 shuffleKeyValidForRecovery: true ApplicationAttemptID: 2&lt;br/&gt;
2014-01-10 16:21:39,871 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Previous history file is at hdfs://namenode0:9000/tmp/hadoop-yarn/staging/hadoop/.staging/job_1389341658181_0001/job_1389341658181_0001_1.jhist&lt;br/&gt;
2014-01-10 16:21:41,503 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.yarn.event.AsyncDispatcher: Registering class org.apache.hadoop.mapreduce.v2.app.job.event.JobFinishEvent$Type for class org.apache.hadoop.mapreduce.v2.app.MRAppMaster$JobFinishEventHandler&lt;br/&gt;
2014-01-10 16:21:41,752 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties&lt;br/&gt;
2014-01-10 16:21:42,641 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).&lt;br/&gt;
2014-01-10 16:21:42,641 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MRAppMaster metrics system started&lt;br/&gt;
2014-01-10 16:21:42,777 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerRequestor: nodeBlacklistingEnabled:true&lt;br/&gt;
2014-01-10 16:21:42,777 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerRequestor: maxTaskFailuresPerNode is 3&lt;br/&gt;
2014-01-10 16:21:42,777 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerRequestor: blacklistDisablePercent is 33&lt;br/&gt;
2014-01-10 16:21:42,896 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.yarn.client.RMProxy: Connecting to ResourceManager at namenode0/192.168.0.133:8030&lt;br/&gt;
2014-01-10 16:21:43,123 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: maxContainerCapability: 8192&lt;br/&gt;
2014-01-10 16:21:43,183 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryCopyService: History file is at hdfs://namenode0:9000/tmp/hadoop-yarn/staging/hadoop/.staging/job_1389341658181_0001/job_1389341658181_0001_1.jhist&lt;br/&gt;
2014-01-10 16:21:43,413 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hadoop (auth:SIMPLE) cause:java.io.IOException: Was asked to shut down.&lt;br/&gt;
2014-01-10 16:21:43,414 FATAL &lt;span class=&quot;error&quot;&gt;&amp;#91;Main Thread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Error starting MRAppMaster&lt;br/&gt;
java.io.IOException: Was asked to shut down.&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$1.run(MRAppMaster.java:1447)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster.initAndStartAppMaster(MRAppMaster.java:1452)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster.main(MRAppMaster.java:1374)&lt;br/&gt;
2014-01-10 16:21:43,454 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: MRAppMaster received a signal. Signaling RMCommunicator and JobHistoryEventHandler.&lt;br/&gt;
2014-01-10 16:21:43,455 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: RMCommunicator notified that iSignalled is: true&lt;br/&gt;
2014-01-10 16:21:43,456 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Notify RMCommunicator isAMLastRetry: true&lt;br/&gt;
2014-01-10 16:21:43,457 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: RMCommunicator notified that shouldUnregistered is: true&lt;br/&gt;
2014-01-10 16:21:43,457 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Notify JHEH isAMLastRetry: true&lt;br/&gt;
2014-01-10 16:21:43,457 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: JobHistoryEventHandler notified that forceJobCompletion is true&lt;br/&gt;
2014-01-10 16:21:43,470 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Stopping JobHistoryEventHandler. Size of the outstanding queue size is 17&lt;br/&gt;
2014-01-10 16:21:43,543 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Event Writer setup for JobId: job_1389341658181_0001, File: hdfs://namenode0:9000/tmp/hadoop-yarn/staging/hadoop/.staging/job_1389341658181_0001/job_1389341658181_0001_2.jhist&lt;br/&gt;
2014-01-10 16:21:43,657 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;eventHandlingThread&amp;#93;&lt;/span&gt; org.apache.hadoop.conf.Configuration.deprecation: user.name is deprecated. Instead, use mapreduce.job.user.name&lt;br/&gt;
2014-01-10 16:21:44,698 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event AM_STARTED&lt;br/&gt;
2014-01-10 16:21:44,700 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event JOB_SUBMITTED&lt;br/&gt;
2014-01-10 16:21:44,705 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event JOB_INITED&lt;br/&gt;
2014-01-10 16:21:44,707 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event JOB_INFO_CHANGED&lt;br/&gt;
2014-01-10 16:21:44,708 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event TASK_STARTED&lt;br/&gt;
2014-01-10 16:21:44,708 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event TASK_STARTED&lt;br/&gt;
2014-01-10 16:21:44,708 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event TASK_STARTED&lt;br/&gt;
2014-01-10 16:21:44,708 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event MAP_ATTEMPT_STARTED&lt;br/&gt;
2014-01-10 16:21:44,710 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event MAP_ATTEMPT_STARTED&lt;br/&gt;
2014-01-10 16:21:44,710 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event MAP_ATTEMPT_FINISHED&lt;br/&gt;
2014-01-10 16:21:44,763 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event TASK_FINISHED&lt;br/&gt;
2014-01-10 16:21:44,767 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event REDUCE_ATTEMPT_STARTED&lt;br/&gt;
2014-01-10 16:21:44,767 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event MAP_ATTEMPT_FINISHED&lt;br/&gt;
2014-01-10 16:21:44,769 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event TASK_FINISHED&lt;br/&gt;
2014-01-10 16:21:44,771 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event REDUCE_ATTEMPT_FINISHED&lt;br/&gt;
2014-01-10 16:21:44,775 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event TASK_FINISHED&lt;br/&gt;
2014-01-10 16:21:44,777 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: In stop, writing event JOB_FINISHED&lt;br/&gt;
2014-01-10 16:21:44,886 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Copying hdfs://namenode0:9000/tmp/hadoop-yarn/staging/hadoop/.staging/job_1389341658181_0001/job_1389341658181_0001_2.jhist to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist_tmp&lt;br/&gt;
2014-01-10 16:21:45,005 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Copied to done location: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist_tmp&lt;br/&gt;
2014-01-10 16:21:45,008 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Copying hdfs://namenode0:9000/tmp/hadoop-yarn/staging/hadoop/.staging/job_1389341658181_0001/job_1389341658181_0001_2_conf.xml to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml_tmp&lt;br/&gt;
2014-01-10 16:21:45,079 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Copied to done location: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml_tmp&lt;br/&gt;
2014-01-10 16:21:45,103 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Moved tmp to done: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001.summary_tmp to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001.summary&lt;br/&gt;
2014-01-10 16:21:45,108 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Moved tmp to done: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml_tmp to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001_conf.xml&lt;br/&gt;
2014-01-10 16:21:45,110 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Moved tmp to done: hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist_tmp to hdfs://namenode0:9000/mr-history/tmp/hadoop/job_1389341658181_0001-1389341978991-hadoop-word+count-1389342072969-2-1-SUCCEEDED-default.jhist&lt;br/&gt;
2014-01-10 16:21:45,110 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler: Stopped JobHistoryEventHandler. super.stop()&lt;br/&gt;
2014-01-10 16:21:45,122 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Setting job diagnostics to We crashed after successfully committing. Recovering.&lt;/p&gt;

&lt;p&gt;2014-01-10 16:21:45,198 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Exception while unregistering &lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.util.MRWebAppUtil.getApplicationWebURLOnJHSWithoutScheme(MRWebAppUtil.java:133)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.util.MRWebAppUtil.getApplicationWebURLOnJHSWithScheme(MRWebAppUtil.java:148)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.doUnregistration(RMCommunicator.java:207)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.unregister(RMCommunicator.java:177)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.serviceStop(RMCommunicator.java:250)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator.serviceStop(RMContainerAllocator.java:255)&lt;br/&gt;
	at org.apache.hadoop.service.AbstractService.stop(AbstractService.java:221)&lt;br/&gt;
	at org.apache.hadoop.service.ServiceOperations.stop(ServiceOperations.java:52)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$ContainerAllocatorRouter.serviceStop(MRAppMaster.java:817)&lt;br/&gt;
	at org.apache.hadoop.service.AbstractService.stop(AbstractService.java:221)&lt;br/&gt;
	at org.apache.hadoop.service.ServiceOperations.stop(ServiceOperations.java:52)&lt;br/&gt;
	at org.apache.hadoop.service.ServiceOperations.stopQuietly(ServiceOperations.java:80)&lt;br/&gt;
	at org.apache.hadoop.service.CompositeService.stop(CompositeService.java:159)&lt;br/&gt;
	at org.apache.hadoop.service.CompositeService.serviceStop(CompositeService.java:132)&lt;br/&gt;
	at org.apache.hadoop.service.AbstractService.stop(AbstractService.java:221)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$MRAppMasterShutdownHook.run(MRAppMaster.java:1399)&lt;br/&gt;
	at org.apache.hadoop.util.ShutdownHookManager$1.run(ShutdownHookManager.java:54)&lt;br/&gt;
2014-01-10 16:21:45,199 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Final Stats: PendingReds:0 ScheduledMaps:0 ScheduledReds:0 AssignedMaps:0 AssignedReds:0 CompletedMaps:0 CompletedReds:0 ContAlloc:0 ContRel:0 HostLocal:0 RackLocal:0&lt;br/&gt;
2014-01-10 16:21:45,203 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Deleting staging directory hdfs://namenode0:9000 /tmp/hadoop-yarn/staging/hadoop/.staging/job_1389341658181_0001&lt;/p&gt;





</description>
                <environment>&lt;p&gt;rhel 5.8_x86 ;jrockit 1.6.0_31-R28.2.3-4.1.0;hadoop 2.2.0&lt;/p&gt;</environment>
        <key id="12688483">MAPREDUCE-5721</key>
            <summary>RM occur exception while unregistering</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chillon_m">chillon_m</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jan 2014 01:40:54 +0000</created>
                <updated>Mon, 13 Jan 2014 01:53:59 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>resourcemanager</component>
                        <due>Mon, 13 Jan 2014 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367507</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5720] RM occur exception while unregistering</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5720</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description></description>
                <environment>&lt;p&gt;rhel 5.8_x86 ;jrockit 1.6.0_31-R28.2.3-4.1.0;hadoop 2.2.0&lt;/p&gt;</environment>
        <key id="12688482">MAPREDUCE-5720</key>
            <summary>RM occur exception while unregistering</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chillon_m">chillon_m</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jan 2014 01:40:32 +0000</created>
                <updated>Tue, 14 Jan 2014 09:41:19 +0000</updated>
                            <resolved>Mon, 13 Jan 2014 14:56:12 +0000</resolved>
                                    <version>2.2.0</version>
                                                    <component>resourcemanager</component>
                        <due>Mon, 13 Jan 2014 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13869684" author="zjshen" created="Mon, 13 Jan 2014 16:56:23 +0000"  >&lt;p&gt;Hi, do you have more details about the exception? For example, Mapreduce AM log and RM log.&lt;/p&gt;</comment>
                            <comment id="13869749" author="vinodkv" created="Mon, 13 Jan 2014 17:53:31 +0000"  >&lt;p&gt;JIRA is for developers to track issues. It is a good idea to discuss this on the user list till we zero-in on a particular issue with the code, before creating a JIRA. &lt;/p&gt;</comment>
                            <comment id="13870572" author="stevel@apache.org" created="Tue, 14 Jan 2014 09:41:19 +0000"  >&lt;p&gt;I&apos;d flag up JRockit as trouble too -try to replicate on oracle java 6 or java7 from oracle or openjdk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Jan 2014 16:56:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5719] Potential null pointer access in AbstractYarnScheduler#getTransferredContainers()</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5719</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1666/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1666/console&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tests run: 14, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 63.12 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator
testCompletedTasksRecalculateSchedule(org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator)  Time elapsed: 2.083 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.hadoop.yarn.exceptions.YarnRuntimeException: java.lang.NullPointerException
	at org.apache.hadoop.yarn.server.resourcemanager.scheduler.AbstractYarnScheduler.getTransferredContainers(AbstractYarnScheduler.java:50)
	at org.apache.hadoop.yarn.server.resourcemanager.ApplicationMasterService.registerApplicationMaster(ApplicationMasterService.java:277)
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.register(RMCommunicator.java:154)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator$MyContainerAllocator.register(TestRMContainerAllocator.java:1476)
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.serviceStart(RMCommunicator.java:112)
	at org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator.serviceStart(RMContainerAllocator.java:219)
	at org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator$MyContainerAllocator.&amp;lt;init&amp;gt;(TestRMContainerAllocator.java:1444)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator$RecalculateContainerAllocator.&amp;lt;init&amp;gt;(TestRMContainerAllocator.java:1629)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator.testCompletedTasksRecalculateSchedule(TestRMContainerAllocator.java:1665)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In above case getMasterContainer() returned null.&lt;/p&gt;

&lt;p&gt;AbstractYarnScheduler#getTransferredContainers() should check such condition.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688395">MAPREDUCE-5719</key>
            <summary>Potential null pointer access in AbstractYarnScheduler#getTransferredContainers()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Jan 2014 14:28:25 +0000</created>
                <updated>Thu, 30 Jan 2014 22:44:47 +0000</updated>
                                            <version>3.0.0</version>
                    <version>2.3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13868798" author="yuzhihong@gmail.com" created="Sat, 11 Jan 2014 14:30:06 +0000"  >&lt;p&gt;With attached patch, TestRMContainerAllocator passes.&lt;/p&gt;</comment>
                            <comment id="13868809" author="hadoopqa" created="Sat, 11 Jan 2014 15:00:54 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622502/mapreduce-5719-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622502/mapreduce-5719-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4315//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4315//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4315//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4315//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13869800" author="zjshen" created="Mon, 13 Jan 2014 18:31:20 +0000"  >&lt;p&gt;The test failure seems to be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1041&quot; title=&quot;Protocol changes for RM to bind and notify a restarted AM of existing containers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1041&quot;&gt;&lt;del&gt;YARN-1041&lt;/del&gt;&lt;/a&gt;. However, AM container is supposed to be not null here, because the current is already up to contact ApplicationMasterService.&lt;/p&gt;

&lt;p&gt;The problem may be within the test case itself. Some simplification or abstraction makes the current attempt doesn&apos;t have an associated container before getting registered with ApplicationMasterService.&lt;/p&gt;</comment>
                            <comment id="13874264" author="ozawa" created="Fri, 17 Jan 2014 01:21:24 +0000"  >&lt;p&gt;Thank you for taking thias JIRA, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjshen&quot; class=&quot;user-hover&quot; rel=&quot;zjshen&quot;&gt;Zhijie Shen&lt;/a&gt;. This is my review comment:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    ContainerId amContainerId = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (container != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) amContainerId = container.getId();
     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (RMContainer rmContainer : liveContainers) {
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!rmContainer.getContainerId().equals(amContainerId)) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Potentially, null pointer access can be caused because amContainerId can be null. Should we iterate liveContainers only when &quot;container&quot; is not null and &quot;amContainerId&quot; is not null?&lt;/p&gt;</comment>
                            <comment id="13874394" author="yuzhihong@gmail.com" created="Fri, 17 Jan 2014 03:56:33 +0000"  >&lt;p&gt;Thanks for the review.&lt;/p&gt;

&lt;p&gt;In ContainerId:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; equals(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; == obj)
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (obj == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so when amContainerId is null, rmContainer.getContainerId().equals(amContainerId) would return false.&lt;/p&gt;

&lt;p&gt;Is this Okay ?&lt;/p&gt;</comment>
                            <comment id="13874430" author="ozawa" created="Fri, 17 Jan 2014 04:50:21 +0000"  >&lt;p&gt;LGTM!&lt;/p&gt;</comment>
                            <comment id="13874433" author="ozawa" created="Fri, 17 Jan 2014 04:59:01 +0000"  >&lt;p&gt;I also confirmed that your patch works well to pass TestRMContainerAllocator.&lt;/p&gt;</comment>
                            <comment id="13875937" author="yuzhihong@gmail.com" created="Sun, 19 Jan 2014 17:33:14 +0000"  >&lt;p&gt;Patch v2 is test only change.&lt;/p&gt;

&lt;p&gt;TestRMContainerAllocator passes locally.&lt;/p&gt;</comment>
                            <comment id="13875948" author="hadoopqa" created="Sun, 19 Jan 2014 18:02:16 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623860/mapreduce-5719-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623860/mapreduce-5719-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4328//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4328//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4328//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4328//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13876019" author="yuzhihong@gmail.com" created="Sun, 19 Jan 2014 21:42:58 +0000"  >&lt;p&gt;Looks like the pass of TestRMContainerAllocator#testCompletedTasksRecalculateSchedule depends on amNodeManager.nodeHeartbeat(true). Without the heartbeat, I still get:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testCompletedTasksRecalculateSchedule(org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator)  Time elapsed: 3.62 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.hadoop.yarn.exceptions.YarnRuntimeException: java.lang.NullPointerException
	at org.apache.hadoop.yarn.server.resourcemanager.scheduler.AbstractYarnScheduler.getTransferredContainers(AbstractYarnScheduler.java:52)
	at org.apache.hadoop.yarn.server.resourcemanager.ApplicationMasterService.registerApplicationMaster(ApplicationMasterService.java:279)
	at org.apache.hadoop.mapreduce.v2.app.rm.RMCommunicator.register(RMCommunicator.java:155)
	at org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator$MyContainerAllocator.register(TestRMContainerAllocator.java:1476)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In my opinion the null check is desirable so that there is no direct dependency on heartbeat.&lt;/p&gt;</comment>
                            <comment id="13877190" author="zjshen" created="Tue, 21 Jan 2014 04:55:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;In my opinion the null check is desirable so that there is no direct dependency on heartbeat.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It should be the correct fix. With NM heartbeat, the container (AM container in this case) can be allocated for the application, and registration with RM happens after AM container get allocated, thus AM container is always not null in getTransferredContainers.&lt;/p&gt;</comment>
                            <comment id="13877203" author="ozawa" created="Tue, 21 Jan 2014 05:19:21 +0000"  >&lt;blockquote&gt;
&lt;p&gt;In my opinion the null check is desirable so that there is no direct dependency on heartbeat.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjshen&quot; class=&quot;user-hover&quot; rel=&quot;zjshen&quot;&gt;Zhijie Shen&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt;, then we can use mapreduce-5719-v1.txt by Ted to fix the problem, right?&lt;/p&gt;</comment>
                            <comment id="13878835" author="mitdesai" created="Wed, 22 Jan 2014 17:02:29 +0000"  >&lt;p&gt;I tried &quot;mvn clean test -Dtest=TestRMContainerAllocator&quot;. Cannot reproduce the error.&lt;br/&gt;
How are you using?&lt;/p&gt;</comment>
                            <comment id="13878841" author="yuzhihong@gmail.com" created="Wed, 22 Jan 2014 17:06:57 +0000"  >&lt;p&gt;This test has been failing for 10 days.&lt;br/&gt;
The latest occurrence was:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1677/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1677/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On Mac, I can reproduce using:&lt;br/&gt;
mvn test -Dtest=TestRMContainerAllocator&lt;/p&gt;</comment>
                            <comment id="13879133" author="mitdesai" created="Wed, 22 Jan 2014 20:20:48 +0000"  >&lt;p&gt;Just to clarify one thing. Are we using the patch v1 to fix  this issue?&lt;/p&gt;</comment>
                            <comment id="13887033" author="mitdesai" created="Thu, 30 Jan 2014 20:50:39 +0000"  >&lt;p&gt;I haven&apos;t seen any activity on this JIRA since a week or so. I have reviewed the comments above and both the patches attached&lt;br/&gt;
mapreduce-5719-v1 looks good to me.&lt;br/&gt;
+1 (non binding)&lt;/p&gt;</comment>
                            <comment id="13887062" author="sandyr" created="Thu, 30 Jan 2014 21:19:55 +0000"  >&lt;p&gt;Is my understanding correct that the null pointer can only happen in the test?  Is there any way to work around this in the test code?  If not, we should at least comment that we&apos;re doing the check for that reason.&lt;/p&gt;</comment>
                            <comment id="13887097" author="mitdesai" created="Thu, 30 Jan 2014 21:37:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandyr&quot; class=&quot;user-hover&quot; rel=&quot;sandyr&quot;&gt;Sandy Ryza&lt;/a&gt;, I have been looking into it and I could not say for sure that the null pointer will only  occur in the test. So I liked the workaround with the patch v1. But I like your suggestion of putting the comment for doing the check&lt;/p&gt;</comment>
                            <comment id="13887155" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 22:07:29 +0000"  >&lt;p&gt;How about patch v3 ?&lt;/p&gt;</comment>
                            <comment id="13887205" author="hadoopqa" created="Thu, 30 Jan 2014 22:44:47 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12626196/mapreduce-5719-v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12626196/mapreduce-5719-v3.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4342//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4342//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4342//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4342//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12689150">MAPREDUCE-5726</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12662443">YARN-1041</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12682817">YARN-1474</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12622502" name="mapreduce-5719-v1.txt" size="1737" author="yuzhihong@gmail.com" created="Sat, 11 Jan 2014 14:30:06 +0000"/>
                            <attachment id="12623860" name="mapreduce-5719-v2.txt" size="1183" author="yuzhihong@gmail.com" created="Sun, 19 Jan 2014 17:33:14 +0000"/>
                            <attachment id="12626196" name="mapreduce-5719-v3.txt" size="1913" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 22:07:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 11 Jan 2014 15:00:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367419</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5718] MR AM should tolerate RM restart/failover during commit</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5718</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;While testing RM HA, we ran into this issue where if the RM fails over while an MR AM is in the middle of a commit, the subsequent AM gets spawned but dies with a diagnostic message - &quot;We crashed durring a commit&quot;. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12688364">MAPREDUCE-5718</key>
            <summary>MR AM should tolerate RM restart/failover during commit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kkambatl">Karthik Kambatla</assignee>
                                    <reporter username="kkambatl">Karthik Kambatla</reporter>
                        <labels>
                            <label>ha</label>
                    </labels>
                <created>Sat, 11 Jan 2014 00:41:13 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:41 +0000</updated>
                                            <version>2.3.0</version>
                                                    <component>mr-am</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13869750" author="kkambatl" created="Mon, 13 Jan 2014 17:54:15 +0000"  >&lt;p&gt;The failure comes from the following snippet. If the previous AM has started the commit, but has not succeeded or failed, we assume it is an error state. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (commitSuccess) {
          shutDownMessage = &lt;span class=&quot;code-quote&quot;&gt;&quot;We crashed after successfully committing. Recovering.&quot;&lt;/span&gt;;
          forcedState = JobStateInternal.SUCCEEDED;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (commitFailure) {
          shutDownMessage = &lt;span class=&quot;code-quote&quot;&gt;&quot;We crashed after a commit failure.&quot;&lt;/span&gt;;
          forcedState = JobStateInternal.FAILED;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          &lt;span class=&quot;code-comment&quot;&gt;//The commit is still pending, commit error
&lt;/span&gt;          shutDownMessage = &lt;span class=&quot;code-quote&quot;&gt;&quot;We crashed durring a commit&quot;&lt;/span&gt;;
          forcedState = JobStateInternal.ERROR;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To fix this, we can do either of&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Treat the lack of success/failure file as an artifact of the previous commit failing due to RM restart and re-attempt the commit. The only downside to this seems to be when the commit itself is buggy - we ll end up trying to commit upto the number of attempts allowed.&lt;/li&gt;
	&lt;li&gt;Make sure the AM deletes the commit file before failing. Given the RM/ NM kill the containers, making sure we delete the commit file before dying can be a little more involved.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2&quot; class=&quot;user-hover&quot; rel=&quot;revans2&quot;&gt;Robert Joseph Evans&lt;/a&gt; - do you think it is reasonable to go with the first option? &lt;/p&gt;</comment>
                            <comment id="13869864" author="vinodkv" created="Mon, 13 Jan 2014 19:29:58 +0000"  >&lt;p&gt;This was by design to handle racing AMs in the presence of partitions. Reducing priority.&lt;/p&gt;

&lt;p&gt;This will go away once we have work-preserving RM restart.&lt;/p&gt;

&lt;p&gt;For the shorter term, I think it makes sense to have the AM delete the file before failing.&lt;/p&gt;</comment>
                            <comment id="13870953" author="kkambatl" created="Tue, 14 Jan 2014 17:43:39 +0000"  >&lt;p&gt;First-cut patch that deletes the startCommitFile if the commit is interrupted. &lt;/p&gt;

&lt;p&gt;However, in case of two AMs running during a partition, this can lead to one AM deleting the startCommitFile created by another AM. To avoid races in case of a partition, we might have to complicate this a little more. &lt;/p&gt;

&lt;p&gt;How about adding a .host.pid suffix to the name of the commit file? Each AM would write its own. When a subsequent AM comes up and verifies the state of commit from previous AMs, it would look for any? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vinodkv&quot; class=&quot;user-hover&quot; rel=&quot;vinodkv&quot;&gt;Vinod Kumar Vavilapalli&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2&quot; class=&quot;user-hover&quot; rel=&quot;revans2&quot;&gt;Robert Joseph Evans&lt;/a&gt; - thoughts? &lt;/p&gt;</comment>
                            <comment id="13872189" author="jlowe" created="Wed, 15 Jan 2014 15:36:37 +0000"  >&lt;p&gt;This is closely related to &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5485&quot; title=&quot;Allow repeating job commit by extending OutputCommitter API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5485&quot;&gt;MAPREDUCE-5485&lt;/a&gt;.  The problem here is that the output committer is user-pluggable code, and we can&apos;t assume what it does or if it can be safely restarted after crashing mid-way through the commit.  This is one of the reasons job commits are not retried by the AM, and by extension we can&apos;t assume it&apos;s safe to retry in another AM attempt.  That&apos;s why the AM goes out of its way to indicate via a file that it&apos;s starting to do the job commit and avoids repeating it on an AM restart if that file is still present.  Whether the retry is because the AM crash or the AM was restarted due to RM restart, the end effect is the same &amp;#8211; it&apos;s not safe to retry a job commit in the general case.&lt;/p&gt;

&lt;p&gt;If we had an API by which the output committer could tell the AM if it&apos;s safe to retry a job commit that would help.&lt;/p&gt;</comment>
                            <comment id="13872340" author="kkambatl" created="Wed, 15 Jan 2014 18:07:14 +0000"  >&lt;p&gt;Thanks for chiming in, Jason. &lt;/p&gt;

&lt;p&gt;Please correct me if I am wrong. Not being able to tolerate node failures (slaves/master) seems like a major regression from MR1 which tolerates slave failures. I am wondering if there is a way to solve the crashed commits issue not just for all jobs. For MR, what do you think of committing to an intermediate location, and renaming it to the output location? If the output location is missing, the commit can be retried.&lt;/p&gt;</comment>
                            <comment id="13872366" author="vinodkv" created="Wed, 15 Jan 2014 18:22:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;If we had an API by which the output committer could tell the AM if it&apos;s safe to retry a job commit that would help.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Jason, we already have the recover API in OutputCommitter. That should be enough right?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Please correct me if I am wrong. Not being able to tolerate node failures (slaves/master) seems like a major regression from MR1 which tolerates slave failures.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This isn&apos;t a regression. More of an artifact of the new architecture. MR1 doesn&apos;t tolerate the master failures. AM failure is akin to the master-failure, except the master is distributed now.&lt;/p&gt;</comment>
                            <comment id="13872419" author="jlowe" created="Wed, 15 Jan 2014 18:53:08 +0000"  >&lt;p&gt;As I understand it, we have a task-level output recovery API in OutputCommitter but not a job-level output recovery API.  I&apos;m not sure it&apos;s safe to assume that if an output committer supports task recovery that it also supports recovering from a partial job output commit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622897" name="mr-5718-0.patch" size="1664" author="kkambatl" created="Tue, 14 Jan 2014 17:43:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Jan 2014 19:29:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367388</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367390</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5717] Task pings are interpreted as task progress</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5717</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description></description>
                <environment></environment>
        <key id="12688274">MAPREDUCE-5717</key>
            <summary>Task pings are interpreted as task progress</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlowe">Jason Lowe</assignee>
                                    <reporter username="jlowe">Jason Lowe</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jan 2014 16:42:10 +0000</created>
                <updated>Sat, 18 Jan 2014 13:27:06 +0000</updated>
                            <resolved>Fri, 17 Jan 2014 21:38:48 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13867973" author="jlowe" created="Fri, 10 Jan 2014 16:42:56 +0000"  >&lt;p&gt;Prior to &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5196&quot; title=&quot;CheckpointAMPreemptionPolicy implements preemption in MR AM via checkpointing &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5196&quot;&gt;&lt;del&gt;MAPREDUCE-5196&lt;/del&gt;&lt;/a&gt;, tasks could ping the AM or provide a status update to the AM.  The former was a sanity check to make sure the AM is still present, while the latter was used to indicate some progress had been made on the task&apos;s end.  Therefore a task that was still pinging but taking too long to send status updates would be detected as a hung task by the AM and the task killed.&lt;/p&gt;

&lt;p&gt;Now the AM treats both pings and status updates as progress on the tasks side, which means a task that hangs while processing data but stays alive enough to keep pinging will just keep running and the AM will never timeout the task.&lt;/p&gt;</comment>
                            <comment id="13868163" author="jlowe" created="Fri, 10 Jan 2014 19:20:20 +0000"  >&lt;p&gt;Patch to not report a task is progressing if the status update doesn&apos;t provide status (i.e.: is really a ping).&lt;/p&gt;</comment>
                            <comment id="13868205" author="hadoopqa" created="Fri, 10 Jan 2014 19:48:34 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622422/MAPREDUCE-5717.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622422/MAPREDUCE-5717.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4312//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4312//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4312//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4312//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13868942" author="chris.douglas" created="Sun, 12 Jan 2014 03:55:38 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Thanks for catching this, Jason&lt;/p&gt;</comment>
                            <comment id="13875286" author="jlowe" created="Fri, 17 Jan 2014 21:38:48 +0000"  >&lt;p&gt;Thanks for the review, Chris!  I committed this to trunk.&lt;/p&gt;</comment>
                            <comment id="13875293" author="hudson" created="Fri, 17 Jan 2014 21:48:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5021 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5021/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5021/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5717&quot; title=&quot;Task pings are interpreted as task progress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5717&quot;&gt;&lt;del&gt;MAPREDUCE-5717&lt;/del&gt;&lt;/a&gt;. Task pings are interpreted as task progress. Contributed by Jason Lowe (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559256&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/TaskAttemptListenerImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapred/TestTaskAttemptListenerImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875620" author="hudson" created="Sat, 18 Jan 2014 11:08:48 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #456 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/456/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/456/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5717&quot; title=&quot;Task pings are interpreted as task progress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5717&quot;&gt;&lt;del&gt;MAPREDUCE-5717&lt;/del&gt;&lt;/a&gt;. Task pings are interpreted as task progress. Contributed by Jason Lowe (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559256&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/TaskAttemptListenerImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapred/TestTaskAttemptListenerImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875648" author="hudson" created="Sat, 18 Jan 2014 13:26:07 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1648 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1648/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1648/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5717&quot; title=&quot;Task pings are interpreted as task progress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5717&quot;&gt;&lt;del&gt;MAPREDUCE-5717&lt;/del&gt;&lt;/a&gt;. Task pings are interpreted as task progress. Contributed by Jason Lowe (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559256&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/TaskAttemptListenerImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapred/TestTaskAttemptListenerImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875656" author="hudson" created="Sat, 18 Jan 2014 13:27:06 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1673 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1673/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1673/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5717&quot; title=&quot;Task pings are interpreted as task progress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5717&quot;&gt;&lt;del&gt;MAPREDUCE-5717&lt;/del&gt;&lt;/a&gt;. Task pings are interpreted as task progress. Contributed by Jason Lowe (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559256&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/TaskAttemptListenerImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapred/TestTaskAttemptListenerImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12645472">MAPREDUCE-5196</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12622422" name="MAPREDUCE-5717.patch" size="3736" author="jlowe" created="Fri, 10 Jan 2014 19:20:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jan 2014 19:48:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367298</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367299</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12320355</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5716] yarn framework occurs Shell$ExitCodeException</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5716</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;I use hadoop2.2.0 to run map-reduce task,at first I set the  property &quot;mapreduce.framework.name&quot; with &quot;local&quot; in mapred-site.xml,everything goes fine ,and there is no exception,but when I run the mapreduce task on server cluster,setting the &quot;mapreduce.framework.name&quot; property value with &quot;yarn&quot;,it shows exception belows:&lt;/p&gt;

&lt;p&gt;    2014-01-10 14:51:03,131 INFO ContainersLauncher #0 org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor: launchContainer: [/home/hadoop/hadoop-2.2.0/bin/container-executor, hadoop, 1, application_1389336249740_0001, container_1389336249740_000&lt;br/&gt;
_01_000013, /new/hadoop/data/tmp/nm-local-dir/usercache/hadoop/appcache/application_1389336249740_0001/container_1389336249740_0001_01_000013, /new/hadoop/data/tmp/nm-local-dir/nmPrivate/application_1389336249740_0001/container_1389336249740_0001_01_00001&lt;br/&gt;
/launch_container.sh, /new/hadoop/data/tmp/nm-local-dir/nmPrivate/application_1389336249740_0001/container_1389336249740_0001_01_000013/container_1389336249740_0001_01_000013.tokens, /new/hadoop/data/tmp/nm-local-dir/nmPrivate/container_1389336249740_0001&lt;br/&gt;
01_000013.pid, /new/hadoop/data/tmp/nm-local-dir, /home/hadoop/hadoop-2.2.0/logs/userlogs, cgroups=none]&lt;br/&gt;
2014-01-10 14:51:03,134 INFO ContainersLauncher #2 org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor: launchContainer: [/home/hadoop/hadoop-2.2.0/bin/container-executor, hadoop, 1, application_1389336249740_0001, container_1389336249740_000&lt;br/&gt;
_01_000014, /new/hadoop/data/tmp/nm-local-dir/usercache/hadoop/appcache/application_1389336249740_0001/container_1389336249740_0001_01_000014, /new/hadoop/data/tmp/nm-local-dir/nmPrivate/application_1389336249740_0001/container_1389336249740_0001_01_00001&lt;br/&gt;
/launch_container.sh, /new/hadoop/data/tmp/nm-local-dir/nmPrivate/application_1389336249740_0001/container_1389336249740_0001_01_000014/container_1389336249740_0001_01_000014.tokens, /new/hadoop/data/tmp/nm-local-dir/nmPrivate/container_1389336249740_0001&lt;br/&gt;
01_000014.pid, /new/hadoop/data/tmp/nm-local-dir, /home/hadoop/hadoop-2.2.0/logs/userlogs, cgroups=none]&lt;br/&gt;
2014-01-10 14:51:03,142 INFO AsyncDispatcher event handler org.apache.hadoop.yarn.server.nodemanager.containermanager.container.Container: Container container_1389336249740_0001_01_000013 transitioned from LOCALIZED to RUNNING&lt;br/&gt;
2014-01-10 14:51:03,144 INFO AsyncDispatcher event handler org.apache.hadoop.yarn.server.nodemanager.containermanager.container.Container: Container container_1389336249740_0001_01_000014 transitioned from LOCALIZED to RUNNING&lt;br/&gt;
2014-01-10 14:51:03,144 WARN ContainersLauncher #4 org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor: Exception from container-launch with container ID: container_1389336249740_0001_01_000016 and exit code: 127&lt;br/&gt;
org.apache.hadoop.util.Shell$ExitCodeException: &lt;br/&gt;
	at org.apache.hadoop.util.Shell.runCommand(Shell.java:464)&lt;br/&gt;
	at org.apache.hadoop.util.Shell.run(Shell.java:379)&lt;br/&gt;
	at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:589)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor.launchContainer(LinuxContainerExecutor.java:252)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:283)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:79)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:636)&lt;br/&gt;
2014-01-10 14:51:03,161 WARN ContainersLauncher #2 org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor: Exit code from container container_1389336249740_0001_01_000014 is : 127&lt;/p&gt;

&lt;p&gt;my mapred-site.xml content:&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;mapreduce.jobtracker.address&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;local&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;The host and port that the MapReduce job tracker runs&lt;br/&gt;
  at.  If &quot;local&quot;, then jobs are run in-process as a single map&lt;br/&gt;
  and reduce task.&lt;br/&gt;
  &amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;mapreduce.jobtracker.http.address&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;121server:50030&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;&lt;br/&gt;
    The job tracker http server address and port the server will listen on.&lt;br/&gt;
    If the port is 0 then the server will start on a free port.&lt;br/&gt;
  &amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;mapreduce.job.maps&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;40&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;The default number of map tasks per job.&lt;br/&gt;
  Ignored when mapreduce.jobtracker.address is &quot;local&quot;.  &lt;br/&gt;
  &amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;mapreduce.framework.name&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;classic&amp;lt;/value&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;my yarn-site.xml content:&lt;/p&gt;

&lt;p&gt;&amp;lt;configuration&amp;gt;&lt;br/&gt;
&amp;lt;!-- Site specific YARN configuration properties --&amp;gt;&lt;br/&gt;
 &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;yarn.resourcemanager.resource-tracker.address&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;152server:8990&amp;lt;/value&amp;gt;&lt;br/&gt;
    &amp;lt;description&amp;gt;host is the hostname of the resource manager and &lt;br/&gt;
    port is the port on which the NodeManagers contact the Resource Manager.&lt;br/&gt;
    &amp;lt;/description&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;br/&gt;
  &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;yarn.resourcemanager.scheduler.address&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;152server:8991&amp;lt;/value&amp;gt;&lt;br/&gt;
    &amp;lt;description&amp;gt;host is the hostname of the resourcemanager and port is the port&lt;br/&gt;
    on which the Applications in the cluster talk to the Resource Manager.&lt;br/&gt;
    &amp;lt;/description&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;br/&gt;
  &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;yarn.resourcemanager.scheduler.class&amp;lt;/name&amp;gt;    &amp;lt;value&amp;gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler&amp;lt;/value&amp;gt;&lt;br/&gt;
    &amp;lt;description&amp;gt;In case you do not want to use the default scheduler&amp;lt;/description&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;br/&gt;
  &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;yarn.resourcemanager.address&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;152server:8993&amp;lt;/value&amp;gt;&lt;br/&gt;
    &amp;lt;description&amp;gt;the host is the hostname of the ResourceManager and the port is the port on&lt;br/&gt;
    which the clients can talk to the Resource Manager. &amp;lt;/description&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;property&amp;gt; &lt;br/&gt;
&amp;lt;description&amp;gt;The address of the RM web application.&amp;lt;/description&amp;gt; &lt;br/&gt;
&amp;lt;name&amp;gt;yarn.resourcemanager.webapp.address&amp;lt;/name&amp;gt; &lt;br/&gt;
&amp;lt;value&amp;gt;152server:18088&amp;lt;/value&amp;gt; &lt;br/&gt;
&amp;lt;/property&amp;gt; &lt;br/&gt;
&amp;lt;property&amp;gt; &lt;br/&gt;
&amp;lt;name&amp;gt;yarn.nodemanager.aux-services&amp;lt;/name&amp;gt; &lt;br/&gt;
&amp;lt;value&amp;gt;mapreduce_shuffle&amp;lt;/value&amp;gt; &lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;property&amp;gt;&lt;br/&gt;
 &amp;lt;name&amp;gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&amp;lt;/name&amp;gt;&lt;br/&gt;
 &amp;lt;value&amp;gt;org.apache.hadoop.mapred.ShuffleHandler&amp;lt;/value&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;property&amp;gt;&lt;br/&gt;
&amp;lt;name&amp;gt;yarn.nodemanager.resource.memory-mb&amp;lt;/name&amp;gt;&lt;br/&gt;
&amp;lt;value&amp;gt;5120&amp;lt;/value&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;hadoop2.2.0,linux redhat 5.5 &lt;/p&gt;</environment>
        <key id="12688211">MAPREDUCE-5716</key>
            <summary>yarn framework occurs Shell$ExitCodeException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="dimmacro">dimmacro</assignee>
                                    <reporter username="dimmacro">dimmacro</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jan 2014 10:36:24 +0000</created>
                <updated>Fri, 10 Jan 2014 10:36:24 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>applicationmaster</component>
                        <due>Fri, 10 Jan 2014 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367235</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367236</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5715] ProcfsBasedProcessTree#constructProcessInfo() can still throw NumberFormatException</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5715</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;For long running jobs I have hit an issue that seems to be to be similar to the bug reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3583&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAPREDUCE-3583&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unfortunately I do not have the OS logs for this issue, but the utime for the application was read by Hadoop as &quot;184467440737095551615&quot; which does not fit into a Long. In &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3583&quot; title=&quot;ProcfsBasedProcessTree#constructProcessInfo() may throw NumberFormatException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3583&quot;&gt;&lt;del&gt;MAPREDUCE-3583&lt;/del&gt;&lt;/a&gt; a change was made to ProcfsBasedProcessTree.java &lt;br/&gt;
 in order to support larger values for stime. Perhaps we need to support larger values for utime (although this could increase the complexity of the math that is being performed on those numbers)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 13.04 (OS Kernel 3.9.0), Armv71Exynos5440&lt;/p&gt;</environment>
        <key id="12688103">MAPREDUCE-5715</key>
            <summary>ProcfsBasedProcessTree#constructProcessInfo() can still throw NumberFormatException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gflarrahondo">German Florez-Larrahondo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jan 2014 17:16:11 +0000</created>
                <updated>Fri, 10 Jan 2014 05:59:17 +0000</updated>
                                            <version>trunk</version>
                    <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13867535" author="szetszwo" created="Fri, 10 Jan 2014 05:59:17 +0000"  >&lt;p&gt;It looks like that the exception was from parsing the utime below.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// Set (name) (ppid) (pgrpId) (session) (utime) (stime) (vsize) (rss)
&lt;/span&gt;        pinfo.updateProcessInfo(m.group(2), m.group(3),
                &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(m.group(4)), &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(m.group(5)),
                &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(m.group(7)), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BigInteger(m.group(8)),
                &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(m.group(10)), &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(m.group(11)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12535850">MAPREDUCE-3583</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12622213" name="constructprocessfailing.jpg" size="158473" author="gflarrahondo" created="Thu, 9 Jan 2014 17:21:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jan 2014 05:59:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367114</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367116</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5714] TestMRAppComponentDependencies causes surefire to exit without saying proper goodbye</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5714</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;When running test TestMRAppComponentDependencies, surefire exits with the following message: &lt;/p&gt;

&lt;p&gt;Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.16:test (default-test) on project hadoop-mapreduce-client-app: ExecutionException; nested exception is java.util.concurrent.ExecutionException: java.lang.RuntimeException: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ?&lt;/p&gt;

&lt;p&gt;The following code is found in o.a.h.mapreduce.v2.app.MRAppMaster#shutDownJob, which the test case inherits. So, before the test testComponentStopOrder completes in TestMRAppComponentDependencies, shutDownJob finishes executing and exits the JVM, thus causing the error. Based on the comment, the System.exit(0) is there as a workaround for before &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7140&quot; title=&quot;IPC Reader threads do not stop when server stops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7140&quot;&gt;&lt;del&gt;HADOOP-7140&lt;/del&gt;&lt;/a&gt;. Since the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7140&quot; title=&quot;IPC Reader threads do not stop when server stops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7140&quot;&gt;&lt;del&gt;HADOOP-7140&lt;/del&gt;&lt;/a&gt; is committed in branch-2, are we safe to remove the System.exit call now.&lt;/p&gt;

&lt;p&gt;    //Bring the process down by force.&lt;br/&gt;
    //Not needed after &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7140&quot; title=&quot;IPC Reader threads do not stop when server stops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7140&quot;&gt;&lt;del&gt;HADOOP-7140&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    LOG.info(&quot;Exiting MR AppMaster..GoodBye!&quot;);&lt;br/&gt;
    sysexit();&lt;/p&gt;



</description>
                <environment>&lt;p&gt;RHEL 6.4 &lt;/p&gt;</environment>
        <key id="12687955">MAPREDUCE-5714</key>
            <summary>TestMRAppComponentDependencies causes surefire to exit without saying proper goodbye</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jwang302">Jinghui Wang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 22:24:44 +0000</created>
                <updated>Thu, 9 Jan 2014 21:06:48 +0000</updated>
                                            <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13867057" author="jwang302" created="Thu, 9 Jan 2014 21:06:48 +0000"  >&lt;p&gt;Added patch to remove the System.exit() call.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622257" name="MAPREDUCE-5714.patch" size="965" author="jwang302" created="Thu, 9 Jan 2014 21:06:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366969</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12320355</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5713] JavaDoc Fixes</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5713</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://hadoop.apache.org/docs/r1.2.1/api/org/apache/hadoop/mapred/InputFormat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hadoop.apache.org/docs/r1.2.1/api/org/apache/hadoop/mapred/InputFormat.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Instead of &quot;record boundaries are to respected&quot;&lt;br/&gt;
Should be &quot;record boundaries are to be respected&quot;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://hadoop.apache.org/docs/r1.2.1/api/org/apache/hadoop/mapred/JobConf.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hadoop.apache.org/docs/r1.2.1/api/org/apache/hadoop/mapred/JobConf.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Instead of &quot;some parameters interact subtly rest of the framework&quot;&lt;br/&gt;
Should be &quot;some parameters interact subtly with the rest of the framework&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687710">MAPREDUCE-5713</key>
            <summary>JavaDoc Fixes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="airbots">Chen He</assignee>
                                    <reporter username="brobie">Ben Robie</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 19:17:05 +0000</created>
                <updated>Wed, 8 Jan 2014 15:36:31 +0000</updated>
                                            <version>1.2.1</version>
                    <version>2.2.0</version>
                                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="1800">0.5h</timeoriginalestimate>
                            <timeestimate seconds="1800">0.5h</timeestimate>
                                        <comments>
                            <comment id="13864673" author="hadoopqa" created="Tue, 7 Jan 2014 20:50:08 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621848/hadoop-10210.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621848/hadoop-10210.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/3410//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/3410//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/3410//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/3410//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13865093" author="ajisakaa" created="Wed, 8 Jan 2014 05:34:27 +0000"  >&lt;p&gt;Thanks for taking this issue, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=airbots&quot; class=&quot;user-hover&quot; rel=&quot;airbots&quot;&gt;Chen He&lt;/a&gt;.&lt;br/&gt;
Two comments,&lt;/p&gt;

&lt;p&gt;1. Avoid lines longer than 80 characters.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ *   (e.g. {@link #setNumReduceTasks(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)}), some parameters interact subtly with
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. Fix Version is set after the patch is committed.&lt;/p&gt;

&lt;p&gt;I&apos;ll renew the patch.&lt;/p&gt;</comment>
                            <comment id="13865095" author="ajisakaa" created="Wed, 8 Jan 2014 05:36:26 +0000"  >&lt;p&gt;Moved to MAPREDUCE project.&lt;/p&gt;</comment>
                            <comment id="13865099" author="ajisakaa" created="Wed, 8 Jan 2014 05:40:41 +0000"  >&lt;p&gt;Attaching a patch.&lt;/p&gt;</comment>
                            <comment id="13865116" author="hadoopqa" created="Wed, 8 Jan 2014 05:57:15 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621923/MAPREDUCE-5713.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621923/MAPREDUCE-5713.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4306//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4306//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4306//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4306//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13865121" author="hadoopqa" created="Wed, 8 Jan 2014 06:07:44 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621923/MAPREDUCE-5713.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621923/MAPREDUCE-5713.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4307//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4307//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4307//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4307//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13865558" author="airbots" created="Wed, 8 Jan 2014 15:36:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ajisakaa&quot; class=&quot;user-hover&quot; rel=&quot;ajisakaa&quot;&gt;Akira AJISAKA&lt;/a&gt; Thank you for the fix. I think this patch is ready for checking in. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621923" name="MAPREDUCE-5713.patch" size="2322" author="ajisakaa" created="Wed, 8 Jan 2014 05:40:41 +0000"/>
                            <attachment id="12621848" name="hadoop-10210.patch" size="2228" author="airbots" created="Tue, 7 Jan 2014 20:29:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jan 2014 20:50:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366715</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5712] Backport Fair Scheduler pool placement by secondary group</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5712</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1423&quot; title=&quot;Support queue placement by secondary group in the Fair Scheduler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1423&quot;&gt;&lt;del&gt;YARN-1423&lt;/del&gt;&lt;/a&gt; introduced a quue police that support selecting a queue if a secondary group was found in the defined queues. This functionality would be useful and minimally invasive in MR1 as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687787">MAPREDUCE-5712</key>
            <summary>Backport Fair Scheduler pool placement by secondary group</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ted.m">Ted Malaska</assignee>
                                    <reporter username="ted.m">Ted Malaska</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 02:07:00 +0000</created>
                <updated>Mon, 13 Jan 2014 20:51:53 +0000</updated>
                            <resolved>Mon, 13 Jan 2014 20:51:53 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>scheduler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13867037" author="ted.m" created="Thu, 9 Jan 2014 20:53:19 +0000"  >&lt;p&gt;I just found out with 5651 I put the SimpleGroupMapping.java in the java directory where it should have gone in the test directory.  I will include that change in this patch.&lt;/p&gt;</comment>
                            <comment id="13867253" author="ted.m" created="Thu, 9 Jan 2014 23:14:35 +0000"  >&lt;p&gt;Finished the backport of 1423&lt;/p&gt;</comment>
                            <comment id="13867304" author="sandyr" created="Thu, 9 Jan 2014 23:51:17 +0000"  >&lt;p&gt;The code changes look good to me.  Have you done any verification?&lt;/p&gt;</comment>
                            <comment id="13867828" author="ted.m" created="Fri, 10 Jan 2014 14:22:52 +0000"  >&lt;p&gt;Yup I ran the tests.  Here are the results.&lt;/p&gt;

&lt;p&gt;////&lt;/p&gt;

&lt;p&gt;root@localhost fairscheduler]# ant test                                                  &lt;br/&gt;
Buildfile: build.xml                                                                            &lt;/p&gt;

&lt;p&gt;check-contrib:&lt;/p&gt;

&lt;p&gt;init:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; contrib: fairscheduler&lt;/p&gt;

&lt;p&gt;init-contrib:&lt;/p&gt;

&lt;p&gt;ivy-download:&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;get&amp;#93;&lt;/span&gt; Getting: &lt;a href=&quot;http://repo2.maven.org/maven2/org/apache/ivy/ivy/2.1.0/ivy-2.1.0.jar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo2.maven.org/maven2/org/apache/ivy/ivy/2.1.0/ivy-2.1.0.jar&lt;/a&gt;&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;get&amp;#93;&lt;/span&gt; To: /home/cloudera/svn/branch-1/ivy/ivy-2.1.0.jar                            &lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;get&amp;#93;&lt;/span&gt; Not modified - so not downloaded                                             &lt;/p&gt;

&lt;p&gt;ivy-probe-antlib:&lt;/p&gt;

&lt;p&gt;ivy-init-antlib:&lt;/p&gt;

&lt;p&gt;ivy-init:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:configure&amp;#93;&lt;/span&gt; :: Ivy 2.1.0 - 20090925235825 :: &lt;a href=&quot;http://ant.apache.org/ivy/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ant.apache.org/ivy/&lt;/a&gt; ::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:configure&amp;#93;&lt;/span&gt; :: loading settings :: file = /home/cloudera/svn/branch-1/ivy/ivysettings.xml&lt;/p&gt;

&lt;p&gt;ivy-resolve-common:&lt;/p&gt;

&lt;p&gt;ivy-retrieve-common:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:cachepath&amp;#93;&lt;/span&gt; DEPRECATED: &apos;ivy.conf.file&apos; is deprecated, use &apos;ivy.settings.file&apos; instead&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:cachepath&amp;#93;&lt;/span&gt; :: loading settings :: file = /home/cloudera/svn/branch-1/ivy/ivysettings.xml&lt;/p&gt;

&lt;p&gt;compile:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; contrib: fairscheduler&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 1 source file to /home/cloudera/svn/branch-1/build/contrib/fairscheduler/classes&lt;/p&gt;

&lt;p&gt;compile-examples:&lt;/p&gt;

&lt;p&gt;compile-test:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; contrib: fairscheduler&lt;/p&gt;

&lt;p&gt;test:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; contrib: fairscheduler&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;delete&amp;#93;&lt;/span&gt; Deleting directory /home/cloudera/svn/branch-1/build/contrib/fairscheduler/test/logs&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;mkdir&amp;#93;&lt;/span&gt; Created dir: /home/cloudera/svn/branch-1/build/contrib/fairscheduler/test/logs&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestCapBasedLoadManager&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.408 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestComputeFairShares&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 10, Failures: 0, Errors: 0, Time elapsed: 0.111 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestFairScheduler&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 39, Failures: 0, Errors: 0, Time elapsed: 13.906 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestFairSchedulerEventLog&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.267 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestFairSchedulerPoolNames&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 17.004 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestFairSchedulerSystem&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 44.035 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestPoolPlacementPolicy&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.146 sec&lt;/p&gt;

&lt;p&gt;checkfailure:&lt;/p&gt;

&lt;p&gt;BUILD SUCCESSFUL&lt;br/&gt;
Total time: 1 minute 19 seconds&lt;/p&gt;</comment>
                            <comment id="13869956" author="sandyr" created="Mon, 13 Jan 2014 20:43:54 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13869967" author="sandyr" created="Mon, 13 Jan 2014 20:51:53 +0000"  >&lt;p&gt;I just committed this to branch-1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622284" name="MAPREDUCE-5712" size="12673" author="ted.m" created="Thu, 9 Jan 2014 23:14:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Jan 2014 23:51:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5711] When JobTracker writing JobHistory to HDFS, it may hung for long time due to DataNode error</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5711</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;When writing JobHistory to HDFS, it may takes very long time due to DataNode error, unfortunately, it also hold JobTracker lock, so it makes JobTracker hung for long time. It happens couple of times on our cluster.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687631">MAPREDUCE-5711</key>
            <summary>When JobTracker writing JobHistory to HDFS, it may hung for long time due to DataNode error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="zhaoyunjiong">zhaoyunjiong</assignee>
                                    <reporter username="zhaoyunjiong">zhaoyunjiong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 13:17:00 +0000</created>
                <updated>Fri, 10 Jan 2014 01:44:54 +0000</updated>
                            <resolved>Fri, 10 Jan 2014 01:44:54 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13864233" author="zhaoyunjiong" created="Tue, 7 Jan 2014 13:38:44 +0000"  >&lt;p&gt;This patch put JobHistory log to a queue first. So JobTracker won&apos;t hung due to DataNode.&lt;br/&gt;
The original TestJobHistory is enough, so I didn&apos;t add any new test case.&lt;br/&gt;
JobHistory is already rewrite for trunk, no patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13866881" author="cnauroth" created="Thu, 9 Jan 2014 18:26:04 +0000"  >&lt;p&gt;Thanks for working on this!  I think it&apos;s a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1144&quot; title=&quot;JT should not hold lock while writing user history logs to DFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1144&quot;&gt;MAPREDUCE-1144&lt;/a&gt;.  Additionally, I think &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5606&quot; title=&quot;JobTracker blocked for DFSClient: Failed recovery attempt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5606&quot;&gt;MAPREDUCE-5606&lt;/a&gt; is a duplicate of the same issue.  Can you please take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1144&quot; title=&quot;JT should not hold lock while writing user history logs to DFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1144&quot;&gt;MAPREDUCE-1144&lt;/a&gt;?  If you agree that it&apos;s the same problem, then I recommend closing this as duplicate and moving your patch over to &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1144&quot; title=&quot;JT should not hold lock while writing user history logs to DFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1144&quot;&gt;MAPREDUCE-1144&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13867397" author="zhaoyunjiong" created="Fri, 10 Jan 2014 01:31:15 +0000"  >&lt;p&gt;I agree with you that&apos;s duplicate of  &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1144&quot; title=&quot;JT should not hold lock while writing user history logs to DFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1144&quot;&gt;MAPREDUCE-1144&lt;/a&gt;.&lt;br/&gt;
I&apos;ll move my patch to  &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1144&quot; title=&quot;JT should not hold lock while writing user history logs to DFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1144&quot;&gt;MAPREDUCE-1144&lt;/a&gt;.&lt;br/&gt;
Thanks for you review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12438924">MAPREDUCE-1144</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12621789" name="MAPREDUCE-5711-branch-1.2.patch" size="7427" author="zhaoyunjiong" created="Tue, 7 Jan 2014 13:38:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Jan 2014 18:26:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366637</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366639</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5710] Backport MAPREDUCE-1305 to branch-1</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5710</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;File this bug for backporting &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1305&quot; title=&quot;Running distcp with -delete incurs avoidable penalties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1305&quot;&gt;&lt;del&gt;MAPREDUCE-1305&lt;/del&gt;&lt;/a&gt; to branch-1.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687591">MAPREDUCE-5710</key>
            <summary>Backport MAPREDUCE-1305 to branch-1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yzhangal">Yongjun Zhang</assignee>
                                    <reporter username="yzhangal">Yongjun Zhang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 05:04:40 +0000</created>
                <updated>Tue, 7 Jan 2014 22:27:47 +0000</updated>
                            <resolved>Tue, 7 Jan 2014 21:52:30 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13864363" author="yzhangal" created="Tue, 7 Jan 2014 16:30:41 +0000"  >&lt;p&gt;Thanks for reviewing the fix.&lt;/p&gt;</comment>
                            <comment id="13864372" author="hadoopqa" created="Tue, 7 Jan 2014 16:41:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621812/MAPREDUCE-5710.001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621812/MAPREDUCE-5710.001.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4303//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4303//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13864692" author="yzhangal" created="Tue, 7 Jan 2014 21:04:50 +0000"  >&lt;p&gt;Corrected one comment from the original patch.&lt;/p&gt;</comment>
                            <comment id="13864696" author="hadoopqa" created="Tue, 7 Jan 2014 21:14:23 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621857/MAPREDUCE-5710.002.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621857/MAPREDUCE-5710.002.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4304//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4304//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13864715" author="sandyr" created="Tue, 7 Jan 2014 21:35:46 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13864765" author="yzhangal" created="Tue, 7 Jan 2014 22:27:47 +0000"  >&lt;p&gt;Many thanks Sandy!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621812" name="MAPREDUCE-5710.001.patch" size="7129" author="yzhangal" created="Tue, 7 Jan 2014 16:27:08 +0000"/>
                            <attachment id="12621857" name="MAPREDUCE-5710.002.patch" size="7173" author="yzhangal" created="Tue, 7 Jan 2014 21:04:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jan 2014 16:41:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366597</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366599</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5709] Getting ClassNotFoundException even though jar is included in lib folder</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5709</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;In YARN, we are getting the below exception. The same is running fine in MRv1.The jar containing CSVReader.class in included in the lib folder.&lt;br/&gt;
Tried also setting the jar in HADOOP_CLASSPATH as well,but still the same exception.&lt;br/&gt;
13/12/31 09:26:37 INFO mapreduce.Job: map 0% reduce 0%&lt;br/&gt;
13/12/31 09:26:42 INFO mapreduce.Job: Task Id : attempt_1388462142258_0001_m_000003_0, Status : FAILED&lt;br/&gt;
Error: java.lang.RuntimeException: Error in configuring object&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:72)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:130)&lt;br/&gt;
..........&lt;br/&gt;
..........&lt;br/&gt;
Caused by: java.lang.NoClassDefFoundError: au/com/bytecode/opencsv/CSVReader&lt;br/&gt;
at com.tcs.nextgen.pe.wm.datagen.maptask.MPOCDataMapperNewest.configure(MPOCDataMapperNewest.java:56)&lt;br/&gt;
... 22 more&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: au.com.bytecode.opencsv.CSVReader&lt;br/&gt;
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)&lt;br/&gt;
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;/p&gt;</description>
                <environment>&lt;p&gt;GNU/Linux 3.2.0-29-generic x86_64&lt;/p&gt;</environment>
        <key id="12687393">MAPREDUCE-5709</key>
            <summary>Getting ClassNotFoundException even though jar is included in lib folder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ajeshpg">Ajesh Kumar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jan 2014 05:02:41 +0000</created>
                <updated>Wed, 15 Jan 2014 09:13:27 +0000</updated>
                                                                            <component>task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13862801" author="rohithsharma" created="Mon, 6 Jan 2014 06:33:48 +0000"  >&lt;p&gt;For Yarn Application, classpath is considered from &quot;yarn.application.classpath&quot;. Try to set this property and rerun the program.&lt;/p&gt;</comment>
                            <comment id="13862832" author="qwertymaniac" created="Mon, 6 Jan 2014 07:54:15 +0000"  >&lt;p&gt;Moved from YARN to MAPREDUCE. Please log bugs under the right project.&lt;/p&gt;

&lt;p&gt;What version are you reporting this for? Looks similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4068&quot; title=&quot;Jars in lib subdirectory of the submittable JAR are not added to the classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4068&quot;&gt;&lt;del&gt;MAPREDUCE-4068&lt;/del&gt;&lt;/a&gt;, but its been fixed a long time ago.&lt;/p&gt;</comment>
                            <comment id="13870398" author="ajeshpg" created="Tue, 14 Jan 2014 05:16:32 +0000"  >&lt;p&gt;Hi Rohit,&lt;br/&gt;
I tried after setting the &quot;yarn.application.classpath&quot;. Still it is throwing the same exception.&lt;/p&gt;</comment>
                            <comment id="13870505" author="qwertymaniac" created="Tue, 14 Jan 2014 08:03:18 +0000"  >&lt;p&gt;Ajesh,&lt;/p&gt;

&lt;p&gt;Please respond on the version request asked above to qualify if you&apos;re reporting a new bug and not something we&apos;ve since fixed.&lt;/p&gt;</comment>
                            <comment id="13871833" author="ajeshpg" created="Wed, 15 Jan 2014 09:13:27 +0000"  >&lt;p&gt;Hi Harsh&lt;br/&gt;
version is hadoop-2.0.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 Jan 2014 06:33:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366399</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366401</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5708] Duplicate String.format in getSpillFileForWrite</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5708</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;The code responsible for formatting the spill file name (namely &lt;em&gt;getSpillFileForWrite&lt;/em&gt;) unnecessarily calls &lt;em&gt;String.format&lt;/em&gt; twice. This does not only affect performance, but leads to the weird requirement that task attempt ids cannot contain &lt;em&gt;%&lt;/em&gt; characters (because these would be interpreted as format specifiers in the outside &lt;em&gt;String.format&lt;/em&gt; call).&lt;/p&gt;

&lt;p&gt;I assume this was done by mistake, as it could only be useful if task attempt ids contained &lt;em&gt;%n&lt;/em&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687318">MAPREDUCE-5708</key>
            <summary>Duplicate String.format in getSpillFileForWrite</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="konnew88">Konstantin Weitz</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Jan 2014 17:38:18 +0000</created>
                <updated>Wed, 15 Jan 2014 22:28:48 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                        <comments>
                            <comment id="13862379" author="hadoopqa" created="Sat, 4 Jan 2014 18:12:32 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621475/0001-Removed-duplicate-String.format.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621475/0001-Removed-duplicate-String.format.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4302//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4302//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4302//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4302//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13872700" author="konnew88" created="Wed, 15 Jan 2014 22:28:48 +0000"  >&lt;p&gt;Because of the simplicity of the fix, writing a test case would not be worthwhile. Because of the locality and size of the change, I used manual inspection to verify that the patch fixes the problem and does not introduce new problems.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621475" name="0001-Removed-duplicate-String.format.patch" size="1444" author="konnew88" created="Sat, 4 Jan 2014 17:43:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 4 Jan 2014 18:12:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366322</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5707] JobClient does not allow setting RPC timeout for communications with JT/RM</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5707</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;The ApplicationClientProtocolPBClientImpl c&apos;tor (and the JobClient 0.20.2 c&apos;tor as well) creates an rpc proxy that eventually uses &apos;0&apos; as the rpcTimeout:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ApplicationClientProtocolPBClientImpl(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; clientVersion,
      InetSocketAddress addr, Configuration conf) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    RPC.setProtocolEngine(conf, ApplicationClientProtocolPB.class,
      ProtobufRpcEngine.class);
    proxy = RPC.getProxy(ApplicationClientProtocolPB.class, clientVersion, addr, conf);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which leads to this call in RPC:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; ProtocolProxy&amp;lt;T&amp;gt; getProtocolProxy(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;T&amp;gt; protocol,
                                &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; clientVersion,
                                InetSocketAddress addr,
                                UserGroupInformation ticket,
                                Configuration conf,
                                SocketFactory factory) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getProtocolProxy(
        protocol, clientVersion, addr, ticket, conf, factory, 0, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(the &apos;0&apos; above is the rpc timeout).&lt;/p&gt;

&lt;p&gt;Clients should be able to specify the rpc timeout.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687295">MAPREDUCE-5707</key>
            <summary>JobClient does not allow setting RPC timeout for communications with JT/RM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="giladwolff">Gilad Wolff</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Jan 2014 01:54:27 +0000</created>
                <updated>Thu, 9 Jan 2014 00:53:24 +0000</updated>
                                            <version>1.2.1</version>
                    <version>2.2.0</version>
                                                    <component>client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366298</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5706] toBeDeleted parent directories aren&apos;t being cleaned up</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5706</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;When security is enabled on 0.22, MRASyncDiskService doesn&apos;t always delete the parent directories under &lt;tt&gt;toBeDeleted&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;MRAsyncDiskService goes through &lt;tt&gt;toBeDeleted&lt;/tt&gt; and creates &quot;tasks&quot; to delete the directories under there using the LinuxTaskController. It chooses which user to run as by looking at who owns that directory.&lt;br/&gt;
For example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ls -al /mapred/local/toBeDeleted/2013-07-05_05-37-49.052_0
total 12
drwxr-xr-x 3 mapred mapred 4096 Jul  5 05:37 .
drwxr-xr-x 5 mapred mapred 4096 Dec 19 10:15 ..
drwxr-s--- 4 test   mapred 4096 Jul  2 02:54 test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It would create a task to use &quot;test&quot; user to delete /mapred/local/toBeDeleted/2013-07-05_05-37-49.052_0/test (there could be more in there for other users). It then creates a task to use &quot;mapred&quot; user to delete /mapred/local/toBeDeleted/2013-07-05_05-37-49.052_0.&lt;/p&gt;

&lt;p&gt;So, the problem is that we normally configure &quot;mapred&quot; to not be allowed by the LinuxTaskController in the /etc/hadoop/conf.cloudera.mapreduce1/taskcontroller.cfg.  The permissions on the toBeDeleted dir is drwxr-xr-x mapred:mapred, which means that only &quot;mapred&quot; can delete things in it (i.e. the timestamped dirs).  However, the MRAsyncDiskService is already running as the mapred user, so there&apos;s no reason to use the LinuxTaskController for impersonation anyway; we can directly do it from the Java code.&lt;/p&gt;

&lt;p&gt;Another issue is that &lt;tt&gt;MRAsyncDiskService#deletePathsInSecureCluster&lt;/tt&gt; expects an absolute file path (e.g. &lt;tt&gt;/mapred/local/toBeDeleted/2013-07-05_05-37-49.052_0&lt;/tt&gt;, but &lt;tt&gt;MRAsyncDiskService#moveAndDeleteRelativePath&lt;/tt&gt; passes in a relative path (e.g. &lt;tt&gt;toBeDeleted/2013-07-05_05-37-49.052_0&lt;/tt&gt;).  &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12687257">MAPREDUCE-5706</key>
            <summary>toBeDeleted parent directories aren&apos;t being cleaned up</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rkanter">Robert Kanter</assignee>
                                    <reporter username="rkanter">Robert Kanter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jan 2014 22:32:31 +0000</created>
                <updated>Fri, 3 Jan 2014 22:37:54 +0000</updated>
                                            <version>0.22.0</version>
                                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13861966" author="rkanter" created="Fri, 3 Jan 2014 22:37:54 +0000"  >&lt;p&gt;The patch fixes the two issues:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The parent directory is now deleted using a &quot;plain&quot; &lt;tt&gt;PathDeletionContext&lt;/tt&gt; which is backed by simple Java code rather than the &lt;tt&gt;TaskController.DeletionContext&lt;/tt&gt; which is backed by the LinuxTaskController and does the impersonation.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;deletePathsInSecureCluster&lt;/tt&gt; is now always called with an absolute path.  I also renamed the argument to make that more clear.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I don&apos;t have any unit tests, but I verified this in a cluster&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621395" name="MAPREDUCE-5706.patch" size="1829" author="rkanter" created="Fri, 3 Jan 2014 22:37:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366260</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5705] mapreduce.task.io.sort.mb hardcoded cap at 2047</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5705</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;mapreduce.task.io.sort.mb is hardcoded to not allow values larger then 2047. If you enter a value larger then this the map tasks will always crash at this line -&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hadoop-mapreduce/blob/HDFS-641/src/java/org/apache/hadoop/mapred/MapTask.java?source=cc#L746&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hadoop-mapreduce/blob/HDFS-641/src/java/org/apache/hadoop/mapred/MapTask.java?source=cc#L746&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The nodes at dev site have over 380 GB of Ram each, we are not able to make the best use of large mappers (15GB mappers) because of the hardcoded buffer max. Is there a reason this value has been hardcoded? &lt;/p&gt;


&lt;p&gt;&amp;#8211;&lt;br/&gt;
Also validated on my dev VM. Indeed setting io.sort.mb to 2047 works but 2048 fails. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Multinode Dell XD720 cluster Centos6 running HDP2&lt;/p&gt;</environment>
        <key id="12687215">MAPREDUCE-5705</key>
            <summary>mapreduce.task.io.sort.mb hardcoded cap at 2047</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="josephxsxn">Joseph Niemiec</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jan 2014 17:58:44 +0000</created>
                <updated>Sun, 5 Jan 2014 03:12:56 +0000</updated>
                            <resolved>Sun, 5 Jan 2014 03:09:58 +0000</resolved>
                                    <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13861913" author="jira.shegalov" created="Fri, 3 Jan 2014 21:15:01 +0000"  >&lt;p&gt;Output buffer is implemented using a single byte array kvbuffer.  Java Language Spec defines arrays as being accessed using &lt;a href=&quot;http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;non-negative integer index values&lt;/a&gt;, Hence Integer.MAX_VALUE , 2^31 - 1 is the max size. In order to work with a larger buffer, one would either need a multi-array structure or use a wider primitive type like long with special encoding. &lt;/p&gt;</comment>
                            <comment id="13862482" author="qwertymaniac" created="Sun, 5 Jan 2014 03:09:58 +0000"  >&lt;p&gt;What Gera said. Also, please see &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4866&quot; title=&quot;ShuffleRamManager is limited to 2Gb of memory - we should increase that&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4866&quot;&gt;MAPREDUCE-4866&lt;/a&gt;. Marking this one as a Duplicate and closing out.&lt;/p&gt;</comment>
                            <comment id="13862483" author="qwertymaniac" created="Sun, 5 Jan 2014 03:12:28 +0000"  >&lt;p&gt;Correction: Right JIRA for map side limitation is &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-2308&quot; title=&quot;Sort buffer size (io.sort.mb) is limited to &amp;lt; 2 GB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-2308&quot;&gt;MAPREDUCE-2308&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12497988">MAPREDUCE-2308</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 Jan 2014 21:15:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366215</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5704] Optimize nextJobId in JobTracker</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5704</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;When jobtracker start, nextJobId start with 1,if we have run 3000 jobs  then restart jobtracker and run a new job,we can not see this new job on jobtracker:5030/jobhistory.jsp unless click &quot;get more results&quot; button.&lt;br/&gt;
In jobhistory_jsp.java, array SCAN_SIZES controls job numbers displayed on jobhistory.jsp.&lt;br/&gt;
I make a little chage,when jobtracker start,find the biggest id under history done directory,job will start with maxId+1 or 1 if can not find any job files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686945">MAPREDUCE-5704</key>
            <summary>Optimize nextJobId in JobTracker</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="hbjoylee">JamesLi</assignee>
                                    <reporter username="hbjoylee">JamesLi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jan 2014 09:37:32 +0000</created>
                <updated>Thu, 2 Jan 2014 21:14:41 +0000</updated>
                                            <version>1.2.1</version>
                                                    <component>jobtracker</component>
                    <component>mrv1</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13860767" author="hadoopqa" created="Thu, 2 Jan 2014 21:14:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621052/MAPREDUCE-5704.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621052/MAPREDUCE-5704.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4295//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4295//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621052" name="MAPREDUCE-5704.patch" size="5815" author="hbjoylee" created="Thu, 2 Jan 2014 09:40:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Jan 2014 21:14:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365945</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365947</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5703] Job client gets failure though RM side job execution result is FINISHED and SUCCEEDED</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5703</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;1) Run MR job &lt;br/&gt;
2) After reduce completed and while JHS file writing, restart DN.&lt;/p&gt;

&lt;p&gt;RM side job is shown as successful.&lt;br/&gt;
JHS doesnt have info about the job.&lt;br/&gt;
Job client gets NPE and exit code as 255.&lt;/p&gt;

&lt;p&gt;java.io.IOException: org.apache.hadoop.ipc.RemoteException(java.lang.NullPointerException): java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.hs.HistoryClientService$HSClientProtocolHandler.getTaskAttemptCompletionEvents(HistoryClientService.java:269)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.api.impl.pb.service.MRClientProtocolPBServiceImpl.getTaskAttemptCompletionEvents(MRClientProtocolPBServiceImpl.java:173)&lt;br/&gt;
	at org.apache.hadoop.yarn.proto.MRClientProtocol$MRClientProtocolService$2.callBlockingMethod(MRClientProtocol.java:283)&lt;br/&gt;
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:585)&lt;br/&gt;
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:929)&lt;br/&gt;
	at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2080)&lt;br/&gt;
	at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2076)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2074)&lt;/p&gt;

&lt;p&gt;	at org.apache.hadoop.mapred.ClientServiceDelegate.invoke(ClientServiceDelegate.java:330)&lt;br/&gt;
	at org.apache.hadoop.mapred.ClientServiceDelegate.getTaskCompletionEvents(ClientServiceDelegate.java:382)&lt;br/&gt;
	at org.apache.hadoop.mapred.YARNRunner.getTaskCompletionEvents(YARNRunner.java:529)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Job$5.run(Job.java:668)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Job$5.run(Job.java:665)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Job.getTaskCompletionEvents(Job.java:665)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Job.monitorAndPrintJob(Job.java:1349)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient$NetworkedJob.monitorAndPrintJob(JobClient.java:407)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.monitorAndPrintJob(JobClient.java:855)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:835)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686838">MAPREDUCE-5703</key>
            <summary>Job client gets failure though RM side job execution result is FINISHED and SUCCEEDED</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ashutosh_jindal">Ashutosh Jindal</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Dec 2013 10:47:46 +0000</created>
                <updated>Thu, 2 Jan 2014 08:47:37 +0000</updated>
                                                                            <component>client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13859772" author="jianhe" created="Tue, 31 Dec 2013 23:15:20 +0000"  >&lt;p&gt;The problem is likely being that while JHS is copying the history file, but the files are not successfully written and JHS certainly doesn&apos;t have the info about the job. And the JobClient is querying the JHS about the job after it gets known from RM that the job is finished. Since the job doesn&apos;t exist in JHS, it throws NPE. But only restarting one DN shouldn&apos;t affect so much, only if this is the only DN in the cluster.&lt;/p&gt;</comment>
                            <comment id="13860088" author="ashutosh_jindal" created="Thu, 2 Jan 2014 08:47:37 +0000"  >&lt;p&gt;@Jian&lt;/p&gt;

&lt;p&gt;Yes , the issue was caused due to write failure at the DN and i had only one data node. Thanks for review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 Dec 2013 23:15:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5702] TaskLogServlet#printTaskLog has spurious HTML closing tags</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5702</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;TaskLogServlet#printTaskLog closes some HTML tags that it never opens. These should be removed. This isn&apos;t a problem while viewing in a browser, but can lead to issues while parsing it.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( !plainText ) {
        out.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;hr&amp;gt;&amp;lt;br&amp;gt;\n&quot;&lt;/span&gt;.getBytes()); &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;--- here
&lt;/span&gt;      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12686813">MAPREDUCE-5702</key>
            <summary>TaskLogServlet#printTaskLog has spurious HTML closing tags</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rkanter">Robert Kanter</assignee>
                                    <reporter username="kkambatl">Karthik Kambatla</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Dec 2013 01:53:33 +0000</created>
                <updated>Tue, 31 Dec 2013 19:33:52 +0000</updated>
                            <resolved>Tue, 31 Dec 2013 19:33:52 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13859259" author="rkanter" created="Tue, 31 Dec 2013 02:09:55 +0000"  >&lt;p&gt;The patch removes the extra closing tags.  No new unit tests but verified that it looks fine on a cluster.&lt;/p&gt;</comment>
                            <comment id="13859260" author="hadoopqa" created="Tue, 31 Dec 2013 02:12:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620897/MAPREDUCE-5702.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620897/MAPREDUCE-5702.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4292//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4292//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13859277" author="kkambatl" created="Tue, 31 Dec 2013 02:51:37 +0000"  >&lt;p&gt;Thanks Robert. Verified there are no regressions on pseudo-distributed cluster. &lt;/p&gt;

&lt;p&gt;+1. Will commit this tomorrow morning.&lt;/p&gt;</comment>
                            <comment id="13859642" author="kkambatl" created="Tue, 31 Dec 2013 19:33:52 +0000"  >&lt;p&gt;Thanks Robert. Just committed this to branch-1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620897" name="MAPREDUCE-5702.patch" size="617" author="rkanter" created="Tue, 31 Dec 2013 02:09:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 Dec 2013 02:09:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12324153</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5700] historyServer can&apos;t show container&apos;s log when aggregation is not enabled</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5700</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;When yarn.log-aggregation-enable is seted to false, after a MR_App complete, we can&apos;t view the container&apos;s log from the HistoryServer, it shows message like:&lt;br/&gt;
Aggregation is not enabled. Try the nodemanager at hd13-vm1:34669&lt;/p&gt;

&lt;p&gt;Since we don&apos;t want to aggregate the container&apos;s log, because it will be a pressure to namenode. but sometimes we also want to take a look at container&apos;s log.&lt;br/&gt;
Should we show the container&apos;s log across HistoryServer even if yarn.log-aggregation-enable is seted to false.&lt;/p&gt;</description>
                <environment>&lt;p&gt; yarn.log-aggregation-enable=false , HistoryServer will show like this:&lt;/p&gt;

&lt;p&gt;Aggregation is not enabled. Try the nodemanager at hd13-vm1:34669&lt;/p&gt;</environment>
        <key id="12646212">MAPREDUCE-5700</key>
            <summary>historyServer can&apos;t show container&apos;s log when aggregation is not enabled</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="shenhong">shenhong</assignee>
                                    <reporter username="shenhong">shenhong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 May 2013 14:24:00 +0100</created>
                <updated>Sat, 28 Dec 2013 02:48:56 +0000</updated>
                                            <version>0.23.7</version>
                    <version>2.0.4-alpha</version>
                    <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13649752" author="shenhong" created="Mon, 6 May 2013 14:42:47 +0100"  >&lt;p&gt;add a patch&lt;/p&gt;</comment>
                            <comment id="13816005" author="hadoopqa" created="Thu, 7 Nov 2013 14:45:17 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12581885/yarn-647.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12581885/yarn-647.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-YARN-Build/2390//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-YARN-Build/2390//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13816216" author="zjshen" created="Thu, 7 Nov 2013 18:35:04 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!aggregation) {
+          logsLink = join(HttpConfig.getSchemePrefix(), nodeHttpAddr, 
+              &lt;span class=&quot;code-quote&quot;&gt;&quot;/node&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/containerlogs/&quot;&lt;/span&gt;,
+              containerIdString, &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;, app.getJob().getUserName());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m afraid this link will not work as well. When a container is stopped, NM local logs will be deleted and not be accessible via webUI or service again.&lt;/p&gt;

&lt;p&gt;However, I&apos;m afraid &quot;Try the nodemanager at ...&quot; is a bit misleading as well, which makes users think that the logs are available via NM webUI. The fact is that for debugging purpose, we can config &quot;yarn.nodemanager.delete.debug-delay-sec&quot; to delay the deletion of NM local logs, but it&apos;s not user-oriented, and anyway, they&apos;re not accessible via web. Maybe we want to remove misleading words here?&lt;/p&gt;</comment>
                            <comment id="13817033" author="fengshen" created="Fri, 8 Nov 2013 06:17:19 +0000"  >&lt;p&gt;my hadoop cluster set yarn.log-aggregation-enable=false and yarn.nodemanager.log.retain-seconds=259200&lt;br/&gt;
so the log remain 3days in nn&#12290;&lt;br/&gt;
so i need view logs by historyserver .&lt;/p&gt;</comment>
                            <comment id="13857414" author="shenhong" created="Fri, 27 Dec 2013 10:03:33 +0000"  >&lt;p&gt;Thanks Zhijie! &lt;br/&gt;
Like caolong, we also set yarn.nodemanager.log.retain-seconds=259200, so NM local logs won&apos;t be deleted after container  stop, &lt;br/&gt;
I think if yarn.log-aggregation-enable=false and yarn.nodemanager.log.retain-seconds&amp;gt;0, we can change the logsLink .&lt;/p&gt;</comment>
                            <comment id="13857420" author="shenhong" created="Fri, 27 Dec 2013 10:23:35 +0000"  >&lt;p&gt;add a new patch&lt;/p&gt;</comment>
                            <comment id="13857431" author="hadoopqa" created="Fri, 27 Dec 2013 10:48:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620602/yarn-647-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620602/yarn-647-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-YARN-Build/2738//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-YARN-Build/2738//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-YARN-Build/2738//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-YARN-Build/2738//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13857921" author="hadoopqa" created="Sat, 28 Dec 2013 02:48:56 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620602/yarn-647-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620602/yarn-647-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4284//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4284//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4284//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4284//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620602" name="yarn-647-2.patch" size="2755" author="shenhong" created="Fri, 27 Dec 2013 10:23:35 +0000"/>
                            <attachment id="12581885" name="yarn-647.patch" size="3275" author="shenhong" created="Mon, 6 May 2013 14:42:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Nov 2013 14:45:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326574</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326594</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5699] Tagging support for MR jobs</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5699</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1399&quot; title=&quot;Allow users to annotate an application with multiple tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1399&quot;&gt;YARN-1399&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1461&quot; title=&quot;RM API and RM changes to handle tags for running jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1461&quot;&gt;YARN-1461&lt;/a&gt; add support for tagging YARN applications. MR should expose to users, so they can set tags on an MR job. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12686490">MAPREDUCE-5699</key>
            <summary>Tagging support for MR jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kkambatl">Karthik Kambatla</assignee>
                                    <reporter username="kkambatl">Karthik Kambatla</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Dec 2013 01:09:39 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:41 +0000</updated>
                                            <version>2.3.0</version>
                                                    <component>applicationmaster</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13857858" author="kkambatl" created="Sat, 28 Dec 2013 00:06:12 +0000"  >&lt;p&gt;Patch defines a new job-specific config &lt;tt&gt;mapreduce.job.tags&lt;/tt&gt;, and sets the corresponding YARN&apos;s ASC.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12681840">YARN-1461</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12678510">MAPREDUCE-5618</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12678613">YARN-1399</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12620678" name="mr-5699-1.patch" size="4178" author="kkambatl" created="Sat, 28 Dec 2013 00:06:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365486</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365483</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5698] Backport MAPREDUCE-1285 to branch-1</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5698</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;I found that &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1285&quot; title=&quot;DistCp cannot handle -delete if destination is local filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1285&quot;&gt;&lt;del&gt;MAPREDUCE-1285&lt;/del&gt;&lt;/a&gt; is not in branch-1. File this issue for backporting.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686474">MAPREDUCE-5698</key>
            <summary>Backport MAPREDUCE-1285 to branch-1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yzhangal">Yongjun Zhang</assignee>
                                    <reporter username="yzhangal">Yongjun Zhang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Dec 2013 22:38:24 +0000</created>
                <updated>Tue, 31 Dec 2013 23:04:05 +0000</updated>
                            <resolved>Tue, 31 Dec 2013 22:59:01 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13859653" author="yzhangal" created="Tue, 31 Dec 2013 20:05:31 +0000"  >&lt;p&gt;from branch-0.21&lt;br/&gt;
Port from branch-0.21&lt;/p&gt;

&lt;p&gt;commit a3955d7f53ba63ef3a18b82a69adf57efb89d019&lt;br/&gt;
Author: Tsz-wo Sze &amp;lt;szetszwo@apache.org&amp;gt;&lt;br/&gt;
Date:   Fri Dec 11 01:28:01 2009 +0000&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1285&quot; title=&quot;DistCp cannot handle -delete if destination is local filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1285&quot;&gt;&lt;del&gt;MAPREDUCE-1285&lt;/del&gt;&lt;/a&gt;. In DistCp.deleteNonexisting(..), get class from the parameter instead of using FileStatus.class.  Contributed by Peter Romianowski&lt;/p&gt;
</comment>
                            <comment id="13859656" author="yzhangal" created="Tue, 31 Dec 2013 20:11:31 +0000"  >&lt;p&gt;The attached patch is ported to branch-1 from&lt;/p&gt;

&lt;p&gt;commit a3955d7f53ba63ef3a18b82a69adf57efb89d019&lt;br/&gt;
Author: Tsz-wo Sze &amp;lt;szetszwo@apache.org&amp;gt;&lt;br/&gt;
Date:   Fri Dec 11 01:28:01 2009 +0000&lt;/p&gt;

&lt;p&gt;Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="13859677" author="sandyr" created="Tue, 31 Dec 2013 20:33:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13859687" author="yzhangal" created="Tue, 31 Dec 2013 20:47:28 +0000"  >&lt;p&gt;Thanks Sandy.&lt;/p&gt;

&lt;p&gt;BTW, since this fix is done on top of branch-1, it&apos;s not expected that the jenkins test to pass. I did the testing locally though.&lt;/p&gt;

</comment>
                            <comment id="13859693" author="hadoopqa" created="Tue, 31 Dec 2013 20:55:12 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620975/MAPREDUCE-5698.001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620975/MAPREDUCE-5698.001.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4293//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4293//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13859763" author="sandyr" created="Tue, 31 Dec 2013 22:59:01 +0000"  >&lt;p&gt;I just committed this.  Thanks Yongjun!&lt;/p&gt;</comment>
                            <comment id="13859768" author="yzhangal" created="Tue, 31 Dec 2013 23:04:05 +0000"  >&lt;p&gt;Many thanks Sandy!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620975" name="MAPREDUCE-5698.001.patch" size="2495" author="yzhangal" created="Tue, 31 Dec 2013 20:05:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 Dec 2013 20:33:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5697] My MapReduce program read .gz packets from HDFS, but if one of the packets is incorrect, the program will throw exception, then job will stop.</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5697</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description></description>
                <environment></environment>
        <key id="12686377">MAPREDUCE-5697</key>
            <summary>My MapReduce program read .gz packets from HDFS, but if one of the packets is incorrect, the program will throw exception, then job will stop.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zhongquanong">zhongquanong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Dec 2013 03:08:54 +0000</created>
                <updated>Thu, 26 Dec 2013 03:08:54 +0000</updated>
                                            <version>2.1.1-beta</version>
                                                    <component>benchmarks</component>
                        <due>Fri, 27 Dec 2013 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5696] Add Localization counters to MR</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5696</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Users are often unaware of localization cost that their jobs incur. To measure effectiveness of localization caches it is necessary to expose the overhead in the form of user-visible metrics. The purpose of this JIRA is to compliment &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1529&quot; title=&quot;Add Localization overhead metrics to NM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1529&quot;&gt;YARN-1529&lt;/a&gt;. While &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1529&quot; title=&quot;Add Localization overhead metrics to NM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1529&quot;&gt;YARN-1529&lt;/a&gt; attempts to provide a cluster-wide view to cluster admins, this JIRA focuses on exposing the localization overhead on per-job basis to the job owner/user.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686239">MAPREDUCE-5696</key>
            <summary>Add Localization counters to MR</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jira.shegalov">Gera Shegalov</assignee>
                                    <reporter username="jira.shegalov">Gera Shegalov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Dec 2013 00:34:05 +0000</created>
                <updated>Fri, 3 Jan 2014 03:53:36 +0000</updated>
                                                                            <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13856317" author="hadoopqa" created="Tue, 24 Dec 2013 13:52:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620348/MAPREDUCE-5696.v01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620348/MAPREDUCE-5696.v01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4282//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4282//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13856997" author="hitesh" created="Thu, 26 Dec 2013 18:50:30 +0000"  >&lt;p&gt;The introduction of localization counters in the env is akin to introducing a new API in YARN. Could you split this jira out into 2. One in YARN for the YARN changes where the new API/interface is introduced and this jira could be leveraged for the MR specific changes. &lt;/p&gt;</comment>
                            <comment id="13861135" author="jira.shegalov" created="Fri, 3 Jan 2014 02:51:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hitesh&quot; class=&quot;user-hover&quot; rel=&quot;hitesh&quot;&gt;Hitesh Shah&lt;/a&gt;, I think we can move these few YARN changes to &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1529&quot; title=&quot;Add Localization overhead metrics to NM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1529&quot;&gt;YARN-1529&lt;/a&gt; instead of creating a new JIRA. I&apos;ll upload new patch versions.&lt;/p&gt;</comment>
                            <comment id="13861153" author="jira.shegalov" created="Fri, 3 Jan 2014 03:13:58 +0000"  >&lt;p&gt;v02 patch without YARN-changes.&lt;/p&gt;</comment>
                            <comment id="13861173" author="hadoopqa" created="Fri, 3 Jan 2014 03:53:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621231/MAPREDUCE-5696.v02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621231/MAPREDUCE-5696.v02.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;&lt;/font&gt;-1 javac&lt;font color=&quot;red&quot;&gt;&lt;/font&gt;.  The patch appears to cause the build to fail.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4299//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4299//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12686223">YARN-1529</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12620345" name="LocalizationCounters.png" size="142360" author="jira.shegalov" created="Tue, 24 Dec 2013 13:30:44 +0000"/>
                            <attachment id="12620348" name="MAPREDUCE-5696.v01.patch" size="20744" author="jira.shegalov" created="Tue, 24 Dec 2013 13:45:10 +0000"/>
                            <attachment id="12621231" name="MAPREDUCE-5696.v02.patch" size="11819" author="jira.shegalov" created="Fri, 3 Jan 2014 03:13:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Dec 2013 13:52:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5695] Jobclient API getCleanupTaskReports() is returning error &quot;Unrecognized task type: JOB_CLEANUP&quot; </title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5695</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Exception in thread &quot;main&quot; org.apache.hadoop.yarn.exceptions.YarnRuntimeException: Unrecognized task type: JOB_CLEANUP&lt;br/&gt;
 at org.apache.hadoop.mapreduce.TypeConverter.toYarn(TypeConverter.java:113)&lt;br/&gt;
 at org.apache.hadoop.mapred.ClientServiceDelegate.getTaskReports(ClientServiceDelegate.java:413)&lt;br/&gt;
 at org.apache.hadoop.mapred.YARNRunner.getTaskReports(YARNRunner.java:549)&lt;br/&gt;
 at org.apache.hadoop.mapreduce.Job$3.run(Job.java:533)&lt;br/&gt;
 at org.apache.hadoop.mapreduce.Job$3.run(Job.java:531)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686105">MAPREDUCE-5695</key>
            <summary>Jobclient API getCleanupTaskReports() is returning error &quot;Unrecognized task type: JOB_CLEANUP&quot; </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ashutosh_jindal">Ashutosh Jindal</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Dec 2013 05:07:01 +0000</created>
                <updated>Mon, 23 Dec 2013 22:38:46 +0000</updated>
                                            <version>2.3.0</version>
                                                    <component>client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365067</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365070</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5694] MR AM container syslog is empty  </title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5694</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;When the property &quot;mapreduce.task.userlog.limit.kb&quot; is set non-zero in mapped-site.xml, AM container syslog remains empty. Without the log, it is hard to identify the cause of any MR AM failure.&lt;br/&gt;
However, if &quot;mapreduce.task.userlog.limit.kb&quot;  is not set (or defaulted to 0), syslog contents are correct.&lt;/p&gt;

&lt;p&gt;Bug details:&lt;br/&gt;
For  non zero &quot;mapreduce.task.userlog.limit.kb&quot;, the code caches the log contents into memory, waited to be written to file when close() method is called at the end(Ref: ContainerLogAppender.java). &lt;br/&gt;
Explicit call of LogManager.shutdown() from the main() (REF:MRAppMaster.java), ultimately call the *Appender.close().&lt;/p&gt;

&lt;p&gt;Root Cause: &lt;br/&gt;
LogManager.shutdown() is not being called from MRAppMaster.java.&lt;br/&gt;
Similar steps were taken correctly in YarnChild.java.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12686089">MAPREDUCE-5694</key>
            <summary>MR AM container syslog is empty  </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kamrul">Mohammad Kamrul Islam</assignee>
                                    <reporter username="kamrul">Mohammad Kamrul Islam</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Dec 2013 03:15:56 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:43 +0000</updated>
                            <resolved>Sat, 28 Dec 2013 17:52:05 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13855897" author="kamrul" created="Mon, 23 Dec 2013 20:10:03 +0000"  >&lt;p&gt;patch included.&lt;/p&gt;</comment>
                            <comment id="13855914" author="hadoopqa" created="Mon, 23 Dec 2013 20:33:51 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620250/MAPREDUCE-5694.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620250/MAPREDUCE-5694.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4280//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4280//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4280//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4280//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13856413" author="kamrul" created="Tue, 24 Dec 2013 18:07:46 +0000"  >&lt;p&gt;Regarding the QA test result.&lt;br/&gt;
It is a simple bug fixe. No new unit test case is required.&lt;br/&gt;
However, I did manual test in a small cluster following these steps:&lt;br/&gt;
1. Set &quot;mapreduce.task.userlog.limit.kb=5200&quot;  in mapred-site.xml.&lt;br/&gt;
2. Restart nodemanger&lt;br/&gt;
3. Submit wordcount example.&lt;br/&gt;
4. Check MR AM container syslog and found the expected log contents.&lt;/p&gt;
</comment>
                            <comment id="13858080" author="vinodkv" created="Sat, 28 Dec 2013 17:52:05 +0000"  >&lt;p&gt;Looks good, +1. Committed this to trunk and branch-2. Thanks Mohammad!&lt;/p&gt;</comment>
                            <comment id="13858122" author="hudson" created="Sat, 28 Dec 2013 21:47:17 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4932 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4932/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4932/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5694&quot; title=&quot;MR AM container syslog is empty  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5694&quot;&gt;&lt;del&gt;MAPREDUCE-5694&lt;/del&gt;&lt;/a&gt;. Fixed MR AppMaster to shutdown the LogManager so as to avoid losing syslog in some conditions. Contributed by Mohammad Kamrul Islam. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553879&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553879&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13858310" author="hudson" created="Sun, 29 Dec 2013 10:45:11 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #436 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/436/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/436/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5694&quot; title=&quot;MR AM container syslog is empty  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5694&quot;&gt;&lt;del&gt;MAPREDUCE-5694&lt;/del&gt;&lt;/a&gt;. Fixed MR AppMaster to shutdown the LogManager so as to avoid losing syslog in some conditions. Contributed by Mohammad Kamrul Islam. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553879&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553879&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13858341" author="hudson" created="Sun, 29 Dec 2013 13:26:24 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1627 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1627/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1627/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5694&quot; title=&quot;MR AM container syslog is empty  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5694&quot;&gt;&lt;del&gt;MAPREDUCE-5694&lt;/del&gt;&lt;/a&gt;. Fixed MR AppMaster to shutdown the LogManager so as to avoid losing syslog in some conditions. Contributed by Mohammad Kamrul Islam. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553879&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553879&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13858355" author="hudson" created="Sun, 29 Dec 2013 14:45:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Mapreduce-trunk #1653 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1653/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1653/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5694&quot; title=&quot;MR AM container syslog is empty  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5694&quot;&gt;&lt;del&gt;MAPREDUCE-5694&lt;/del&gt;&lt;/a&gt;. Fixed MR AppMaster to shutdown the LogManager so as to avoid losing syslog in some conditions. Contributed by Mohammad Kamrul Islam. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553879&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553879&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13877635" author="jlowe" created="Tue, 21 Jan 2014 17:31:38 +0000"  >&lt;p&gt;I recently noticed that AM logs were being truncated, see &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5730&quot; title=&quot;AM log is truncated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5730&quot;&gt;&lt;del&gt;MAPREDUCE-5730&lt;/del&gt;&lt;/a&gt;, and it appears to be caused by this change.  The patch is shutting down the LogManager in the finally block of the main thread, but the main method does not wait around for the MRAppMaster to complete.  This means under normal conditions the log system is being shutdown sometime shortly after startup, effectively disabling the AM logs entirely after that point.&lt;/p&gt;</comment>
                            <comment id="13878205" author="kamrul" created="Wed, 22 Jan 2014 03:25:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt; : I created another JIRA MapReduce-5723 to address this. There is a patch uploaded. If possible can you please review this? &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12690067">MAPREDUCE-5730</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12620250" name="MAPREDUCE-5694.1.patch" size="1117" author="kamrul" created="Mon, 23 Dec 2013 20:10:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Dec 2013 20:33:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5693] Restore MRv1 behavior for log flush</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5693</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;to improve log consistency and completeness for diagnostics in the case of JVM crashes and SIGTERMing by NM this JIRA proposes to restore the MRv1 behavior of periodic log syncing (every 5s) and having log sync as part of a shutdown hook.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685681">MAPREDUCE-5693</key>
            <summary>Restore MRv1 behavior for log flush</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jira.shegalov">Gera Shegalov</assignee>
                                    <reporter username="jira.shegalov">Gera Shegalov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Dec 2013 21:04:15 +0000</created>
                <updated>Sat, 1 Feb 2014 03:20:08 +0000</updated>
                            <resolved>Tue, 21 Jan 2014 19:28:01 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13853325" author="jira.shegalov" created="Thu, 19 Dec 2013 21:14:18 +0000"  >&lt;p&gt;Separated log syncing issue from &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5672&quot; title=&quot;Provide optional RollingFileAppender for container log4j (syslog)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5672&quot;&gt;&lt;del&gt;MAPREDUCE-5672&lt;/del&gt;&lt;/a&gt; as suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13853362" author="hadoopqa" created="Thu, 19 Dec 2013 21:53:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619664/MAPREDUCE-5693.v01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619664/MAPREDUCE-5693.v01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4274//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4274//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4274//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4274//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13877748" author="jlowe" created="Tue, 21 Jan 2014 19:08:12 +0000"  >&lt;p&gt;+1, lgtm.  Will commit this shortly.&lt;/p&gt;</comment>
                            <comment id="13877772" author="jlowe" created="Tue, 21 Jan 2014 19:28:01 +0000"  >&lt;p&gt;Thanks, Gera!  I committed this to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13877776" author="hudson" created="Tue, 21 Jan 2014 19:36:29 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5029 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5029/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5029/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5693&quot; title=&quot;Restore MRv1 behavior for log flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5693&quot;&gt;&lt;del&gt;MAPREDUCE-5693&lt;/del&gt;&lt;/a&gt;. Restore MRv1 behavior for log flush. Contributed by Gera Shegalov (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560148&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560148&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/YarnChild.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLog.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLogAppender.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/ContainerLogAppender.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13878530" author="hudson" created="Wed, 22 Jan 2014 11:09:08 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #460 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/460/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/460/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5693&quot; title=&quot;Restore MRv1 behavior for log flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5693&quot;&gt;&lt;del&gt;MAPREDUCE-5693&lt;/del&gt;&lt;/a&gt;. Restore MRv1 behavior for log flush. Contributed by Gera Shegalov (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560148&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560148&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/YarnChild.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLog.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLogAppender.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/ContainerLogAppender.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13878637" author="hudson" created="Wed, 22 Jan 2014 13:26:56 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1677 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1677/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1677/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5693&quot; title=&quot;Restore MRv1 behavior for log flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5693&quot;&gt;&lt;del&gt;MAPREDUCE-5693&lt;/del&gt;&lt;/a&gt;. Restore MRv1 behavior for log flush. Contributed by Gera Shegalov (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560148&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560148&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/YarnChild.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLog.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLogAppender.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/ContainerLogAppender.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13878648" author="hudson" created="Wed, 22 Jan 2014 13:41:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1652 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1652/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1652/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5693&quot; title=&quot;Restore MRv1 behavior for log flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5693&quot;&gt;&lt;del&gt;MAPREDUCE-5693&lt;/del&gt;&lt;/a&gt;. Restore MRv1 behavior for log flush. Contributed by Gera Shegalov (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560148&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1560148&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/YarnChild.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLog.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLogAppender.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/ContainerLogAppender.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12666407">YARN-1130</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12619664" name="MAPREDUCE-5693.v01.patch" size="10076" author="jira.shegalov" created="Thu, 19 Dec 2013 21:14:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Dec 2013 21:53:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364761</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364756</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5692] Add explicit diagnostics when a task attempt is killed due to speculative execution</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5692</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;We need to clearly indicate when a task attempt is killed because another task attempt succeeded first when speculative execution is enabled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685571">MAPREDUCE-5692</key>
            <summary>Add explicit diagnostics when a task attempt is killed due to speculative execution</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jira.shegalov">Gera Shegalov</assignee>
                                    <reporter username="jira.shegalov">Gera Shegalov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Dec 2013 12:16:01 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:46 +0000</updated>
                            <resolved>Fri, 20 Dec 2013 19:58:07 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13852913" author="hadoopqa" created="Thu, 19 Dec 2013 14:12:57 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619535/MAPREDUCE-5692.v01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619535/MAPREDUCE-5692.v01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4271//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4271//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4271//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4271//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13853245" author="jira.shegalov" created="Thu, 19 Dec 2013 20:07:04 +0000"  >&lt;p&gt;Test failure is not caused by this patch. See &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1463&quot; title=&quot;Tests should avoid starting http-server where possible or creates spnego keytab/principals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1463&quot;&gt;&lt;del&gt;YARN-1463&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13853396" author="sandyr" created="Thu, 19 Dec 2013 22:28:46 +0000"  >&lt;p&gt;The patch looks good to me other than a couple small things:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        task.eventHandler.handle(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TaskAttemptKillEvent(attemptID,
+          SPECULATION + task.commitAttempt + &lt;span class=&quot;code-quote&quot;&gt;&quot; committed first!&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Second line should be indented four spaces past the first line.  This applies to a few places.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    job.setSpeculativeExecution(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why is this necessary?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; TaskAttempt[] makeFirstAttemptWin(
+    EventHandler appEventHandler, Task speculatedTask)
+  {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Curly brace should go on same line as method definition&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    TaskAttempt[] ta;&lt;span class=&quot;code-comment&quot;&gt;// finish 1st TA, 2nd will be killed
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Iterator&amp;lt;TaskAttempt&amp;gt; it = speculatedTask.getAttempts().
+      values().iterator();
+    ta = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TaskAttempt[] { it.next(), it.next()};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;can use toArray here?&lt;/p&gt;
</comment>
                            <comment id="13853459" author="jira.shegalov" created="Thu, 19 Dec 2013 23:33:17 +0000"  >&lt;p&gt;Thanks, Sandy. Here is v02 that should address your suggestions.&lt;/p&gt;

&lt;p&gt;I reverted the change to SleepJob as it is non-essential. As for the original reason: I use it to test features on a real job in a controlled manner. In this case, I would start a multi-map SleepJob and suspend one attempt with SIGSTOP to trigger speculation. Irrespective of this I can&apos;t see why SleepJob has to hardcode disabling of speculative execution.&lt;/p&gt;</comment>
                            <comment id="13853476" author="sandyr" created="Thu, 19 Dec 2013 23:44:14 +0000"  >&lt;p&gt;+1 pending jenkins&lt;/p&gt;</comment>
                            <comment id="13853570" author="hadoopqa" created="Fri, 20 Dec 2013 01:27:58 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619694/MAPREDUCE-5692.v02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619694/MAPREDUCE-5692.v02.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4276//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4276//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4276//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4276//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13854500" author="sandyr" created="Fri, 20 Dec 2013 19:58:08 +0000"  >&lt;p&gt;I just committed this to trunk and branch-2.  Thanks Gera!&lt;/p&gt;</comment>
                            <comment id="13854986" author="hudson" created="Sat, 21 Dec 2013 23:33:08 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4924 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4924/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4924/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5692&quot; title=&quot;Add explicit diagnostics when a task attempt is killed due to speculative execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5692&quot;&gt;&lt;del&gt;MAPREDUCE-5692&lt;/del&gt;&lt;/a&gt;. Add explicit diagnostics when a task attempt is killed due to speculative execution (Gera Shegalov via Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552797&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestSpeculativeExecutionWithMRApp.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13854995" author="hudson" created="Sat, 21 Dec 2013 23:35:04 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #428 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/428/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/428/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5692&quot; title=&quot;Add explicit diagnostics when a task attempt is killed due to speculative execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5692&quot;&gt;&lt;del&gt;MAPREDUCE-5692&lt;/del&gt;&lt;/a&gt;. Add explicit diagnostics when a task attempt is killed due to speculative execution (Gera Shegalov via Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552797&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestSpeculativeExecutionWithMRApp.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13855017" author="hudson" created="Sun, 22 Dec 2013 00:36:26 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1645 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1645/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1645/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5692&quot; title=&quot;Add explicit diagnostics when a task attempt is killed due to speculative execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5692&quot;&gt;&lt;del&gt;MAPREDUCE-5692&lt;/del&gt;&lt;/a&gt;. Add explicit diagnostics when a task attempt is killed due to speculative execution (Gera Shegalov via Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552797&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestSpeculativeExecutionWithMRApp.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13855029" author="hudson" created="Sun, 22 Dec 2013 00:47:09 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1619 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1619/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1619/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5692&quot; title=&quot;Add explicit diagnostics when a task attempt is killed due to speculative execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5692&quot;&gt;&lt;del&gt;MAPREDUCE-5692&lt;/del&gt;&lt;/a&gt;. Add explicit diagnostics when a task attempt is killed due to speculative execution (Gera Shegalov via Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552797&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskImpl.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestSpeculativeExecutionWithMRApp.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619535" name="MAPREDUCE-5692.v01.patch" size="8644" author="jira.shegalov" created="Thu, 19 Dec 2013 12:18:51 +0000"/>
                            <attachment id="12619694" name="MAPREDUCE-5692.v02.patch" size="7954" author="jira.shegalov" created="Thu, 19 Dec 2013 23:33:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Dec 2013 14:12:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364646</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5691] Throttle shuffle&apos;s bandwidth utilization</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5691</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;In our hadoop cluster, a reducer of a big job can utilize all the bandwidth during shuffle phase. Then any task reading data from  the machine which running that reducer becomes very very slow.&lt;br/&gt;
It&apos;s better to move DataTransferThrottler from hadoop-hdfs to hadoop-common. And create a throttler for Shuffle to throttle each Fetcher.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685539">MAPREDUCE-5691</key>
            <summary>Throttle shuffle&apos;s bandwidth utilization</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="liangly">Liyin Liang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Dec 2013 07:16:01 +0000</created>
                <updated>Mon, 30 Dec 2013 02:31:45 +0000</updated>
                                            <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13854570" author="sandyr" created="Fri, 20 Dec 2013 21:21:46 +0000"  >&lt;p&gt;Would the throttling go on the server (NodeManager) side or the client (reducer) side?&lt;/p&gt;</comment>
                            <comment id="13855363" author="liangly" created="Mon, 23 Dec 2013 03:57:24 +0000"  >&lt;p&gt;Attach a ganglia network metics picture. The reducer utilizes all the input bandwidth. So the throttling should go on the reducer side.&lt;/p&gt;</comment>
                            <comment id="13857249" author="sandyr" created="Fri, 27 Dec 2013 02:08:47 +0000"  >&lt;p&gt;In that case, adding network IO as a YARN resource and limiting it using cgroups might be a way to solve this problem as well.&lt;/p&gt;</comment>
                            <comment id="13857251" author="jira.shegalov" created="Fri, 27 Dec 2013 02:18:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liangly&quot; class=&quot;user-hover&quot; rel=&quot;liangly&quot;&gt;Liyin Liang&lt;/a&gt; As a short-term relief, is it possible for you to reduce mapreduce.reduce.shuffle.parallelcopies for this job.&lt;/p&gt;</comment>
                            <comment id="13858531" author="liangly" created="Mon, 30 Dec 2013 02:31:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandyr&quot; class=&quot;user-hover&quot; rel=&quot;sandyr&quot;&gt;Sandy Ryza&lt;/a&gt; as a long-term work, limiting network IO using cgroups is a better way to solve this problem. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jira.shegalov&quot; class=&quot;user-hover&quot; rel=&quot;jira.shegalov&quot;&gt;Gera Shegalov&lt;/a&gt; Our cluster users run thousands of jobs every day. Its difficult for them to set parameters for specific job.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620122" name="ganglia-slave.jpg" size="41204" author="liangly" created="Mon, 23 Dec 2013 03:57:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Dec 2013 21:21:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5690] TestLocalMRNotification.testMR occasionally fails</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5690</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;TestLocalMRNotificationis occasionally failing with the error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-------------------------------------------------------------------------------
Test set: org.apache.hadoop.mapred.TestLocalMRNotification
-------------------------------------------------------------------------------
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 24.992 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.mapred.TestLocalMRNotification
testMR(org.apache.hadoop.mapred.TestLocalMRNotification)  Time elapsed: 24.881 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.io.IOException: Job cleanup didn&apos;t start in 20 seconds
        at org.apache.hadoop.mapred.UtilsForTests.runJobKill(UtilsForTests.java:685)
        at org.apache.hadoop.mapred.NotificationTestCase.testMR(NotificationTestCase.java:178)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at junit.framework.TestCase.runTest(TestCase.java:168)
        at junit.framework.TestCase.runBare(TestCase.java:134)
        at junit.framework.TestResult$1.protect(TestResult.java:110)
        at junit.framework.TestResult.runProtected(TestResult.java:128)
        at junit.framework.TestResult.run(TestResult.java:113)
        at junit.framework.TestCase.run(TestCase.java:124)
        at junit.framework.TestSuite.runTest(TestSuite.java:243)
        at junit.framework.TestSuite.run(TestSuite.java:238)
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:254)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:149)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12685502">MAPREDUCE-5690</key>
            <summary>TestLocalMRNotification.testMR occasionally fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="liangly">Liyin Liang</assignee>
                                    <reporter username="liangly">Liyin Liang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Dec 2013 02:25:03 +0000</created>
                <updated>Thu, 19 Dec 2013 05:08:18 +0000</updated>
                                            <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13852529" author="liangly" created="Thu, 19 Dec 2013 02:47:15 +0000"  >&lt;p&gt;The failure of TestLocalMRNotification.testMR is caused by UtilsForTests.runJobKill(). During UtilsForTests.runJobKill(), a job with KillMapper is submitted to LocalJobRunner. When the job is in RUNNING status, kill it by job.killJob(). Then wait the job to complete with 20 seconds timeout.&lt;br/&gt;
The problem is job.killJob() intends to interrupt the KillMapper, which will sleep for a long time. While if  job.killJob() is invoked before KillMapper is launched, the job will continue run the mapper with a long time.&lt;/p&gt;</comment>
                            <comment id="13852534" author="liangly" created="Thu, 19 Dec 2013 02:52:06 +0000"  >&lt;p&gt;This patch adds waiting job&apos;s map progress before job.killJob().&lt;/p&gt;</comment>
                            <comment id="13852616" author="hadoopqa" created="Thu, 19 Dec 2013 05:08:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619471/MAPREDUCE-5690.1.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619471/MAPREDUCE-5690.1.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4268//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4268//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4268//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4268//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619471" name="MAPREDUCE-5690.1.diff" size="1024" author="liangly" created="Thu, 19 Dec 2013 02:52:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Dec 2013 05:08:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364584</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5689] MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5689</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;We saw corner case where Jobs running on cluster were hung. Scenario was something like this. Job was running within a pool which was running at its capacity. All available containers were occupied by reducers and last 2 mappers. There were few more reducers waiting to be scheduled in pipeline. &lt;br/&gt;
At this point two mappers which were running failed and went back to scheduled state. two available containers were assigned to reducers, now whole pool was full of reducers waiting on two maps to be complete. 2 maps never got scheduled because pool was full.&lt;/p&gt;

&lt;p&gt;Ideally reducer preemption should have kicked in to make room for Mappers from this code in RMContaienrAllocator&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; completedMaps = getJob().getCompletedMaps();
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; completedTasks = completedMaps + getJob().getCompletedReduces();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lastCompletedTasks != completedTasks) {
      lastCompletedTasks = completedTasks;
      recalculateReduceSchedule = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (recalculateReduceSchedule) {
      preemptReducesIfNeeded();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But in this scenario lastCompletedTasks is always completedTasks because maps were never completed. This would cause job to hang forever. As workaround if we kill few reducers, mappers would get scheduled and caused job to complete.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12685418">MAPREDUCE-5689</key>
            <summary>MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lohit">Lohit Vijayarenu</assignee>
                                    <reporter username="lohit">Lohit Vijayarenu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Dec 2013 17:22:14 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:37 +0000</updated>
                            <resolved>Fri, 3 Jan 2014 17:32:53 +0000</resolved>
                                    <version>3.0.0</version>
                    <version>2.2.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13851936" author="lohit" created="Wed, 18 Dec 2013 17:28:45 +0000"  >&lt;p&gt;Attached is patch to make sure reducer schedule is forced to re-calculate if there are pending maps.&lt;/p&gt;</comment>
                            <comment id="13853152" author="hadoopqa" created="Thu, 19 Dec 2013 18:59:50 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619367/MAPREDUCE-5689.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619367/MAPREDUCE-5689.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4273//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4273//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4273//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4273//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13860814" author="kkambatl" created="Thu, 2 Jan 2014 21:44:14 +0000"  >&lt;p&gt;Patch looks good to me. Uploading the same patch with the --no-prefix option.&lt;/p&gt;
</comment>
                            <comment id="13861063" author="hadoopqa" created="Fri, 3 Jan 2014 01:18:55 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621159/MAPREDUCE-5689.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621159/MAPREDUCE-5689.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4297//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4297//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4297//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4297//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13861674" author="kkambatl" created="Fri, 3 Jan 2014 17:17:12 +0000"  >&lt;p&gt;+1. Will commit this shortly.&lt;/p&gt;</comment>
                            <comment id="13861695" author="kkambatl" created="Fri, 3 Jan 2014 17:32:53 +0000"  >&lt;p&gt;Thanks Lohit. Committed this to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13861698" author="hudson" created="Fri, 3 Jan 2014 17:35:54 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4954 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4954/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4954/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5689&quot; title=&quot;MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5689&quot;&gt;&lt;del&gt;MAPREDUCE-5689&lt;/del&gt;&lt;/a&gt;. MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled. (lohit via kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1555161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1555161&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/RMContainerAllocator.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRMContainerAllocator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13862262" author="hudson" created="Sat, 4 Jan 2014 10:58:36 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #442 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/442/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/442/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5689&quot; title=&quot;MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5689&quot;&gt;&lt;del&gt;MAPREDUCE-5689&lt;/del&gt;&lt;/a&gt;. MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled. (lohit via kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1555161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1555161&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/RMContainerAllocator.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRMContainerAllocator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13862299" author="hudson" created="Sat, 4 Jan 2014 13:25:20 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1634 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1634/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1634/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5689&quot; title=&quot;MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5689&quot;&gt;&lt;del&gt;MAPREDUCE-5689&lt;/del&gt;&lt;/a&gt;. MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled. (lohit via kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1555161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1555161&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/RMContainerAllocator.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRMContainerAllocator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13862318" author="hudson" created="Sat, 4 Jan 2014 14:46:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Mapreduce-trunk #1659 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1659/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1659/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5689&quot; title=&quot;MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5689&quot;&gt;&lt;del&gt;MAPREDUCE-5689&lt;/del&gt;&lt;/a&gt;. MRAppMaster does not preempt reducers when scheduled maps cannot be fulfilled. (lohit via kasha) (kasha: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1555161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1555161&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/RMContainerAllocator.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRMContainerAllocator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619367" name="MAPREDUCE-5689.1.patch" size="2708" author="lohit" created="Wed, 18 Dec 2013 17:28:45 +0000"/>
                            <attachment id="12621159" name="MAPREDUCE-5689.2.patch" size="2692" author="kkambatl" created="Thu, 2 Jan 2014 21:44:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Dec 2013 18:59:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5688] MRAppMaster causes TestStagingCleanup to fail intermittently with JDK7</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5688</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Due to random ordering ordering in JDK7, the test TestStagingCleanup#testDeletionofStagingOnKillLastTry is failing&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 4.231 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!
test(org.apache.hadoop.mapreduce.v2.app.TestStagingCleanup)  Time elapsed: 3882 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NullPointerException
	at org.apache.hadoop.mapreduce.jobhistory.JobHistoryEventHandler.serviceStop(JobHistoryEventHandler.java:349)
	at org.apache.hadoop.service.AbstractService.stop(AbstractService.java:221)
	at org.apache.hadoop.service.ServiceOperations.stop(ServiceOperations.java:52)
	at org.apache.hadoop.service.ServiceOperations.stopQuietly(ServiceOperations.java:80)
	at org.apache.hadoop.service.CompositeService.stop(CompositeService.java:159)
	at org.apache.hadoop.service.CompositeService.serviceStop(CompositeService.java:132)
	at org.apache.hadoop.service.AbstractService.stop(AbstractService.java:221)
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$MRAppMasterShutdownHook.run(MRAppMaster.java:1399)
	at org.apache.hadoop.mapreduce.v2.app.TestStagingCleanup.testDeletionofStagingOnKillLastTry(TestStagingCleanup.java:239)
	at org.apache.hadoop.mapreduce.v2.app.TestStagingCleanup.test(TestStagingCleanup.java:82)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at junit.framework.TestCase.runTest(TestCase.java:168)
	at junit.framework.TestCase.runBare(TestCase.java:134)
	at junit.framework.TestResult$1.protect(TestResult.java:110)
	at junit.framework.TestResult.runProtected(TestResult.java:128)
	at junit.framework.TestResult.run(TestResult.java:113)
	at junit.framework.TestCase.run(TestCase.java:124)
	at junit.framework.TestSuite.runTest(TestSuite.java:243)
	at junit.framework.TestSuite.run(TestSuite.java:238)
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:242)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:137)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12685408">MAPREDUCE-5688</key>
            <summary>MRAppMaster causes TestStagingCleanup to fail intermittently with JDK7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="mitdesai">Mit Desai</assignee>
                                    <reporter username="mitdesai">Mit Desai</reporter>
                        <labels>
                            <label>java7</label>
                    </labels>
                <created>Wed, 18 Dec 2013 16:27:05 +0000</created>
                <updated>Fri, 31 Jan 2014 21:25:24 +0000</updated>
                                            <version>3.0.0</version>
                    <version>2.3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13851885" author="mitdesai" created="Wed, 18 Dec 2013 16:28:44 +0000"  >&lt;p&gt;I am looking into the issue. Will be posting the patch soon.&lt;/p&gt;</comment>
                            <comment id="13881417" author="mitdesai" created="Fri, 24 Jan 2014 20:46:49 +0000"  >&lt;p&gt;patch attached for trunk and branch2&lt;/p&gt;</comment>
                            <comment id="13881701" author="hadoopqa" created="Sat, 25 Jan 2014 06:06:02 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625107/MAPREDUCE-5688.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625107/MAPREDUCE-5688.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4336//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4336//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4336//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4336//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13882850" author="mitdesai" created="Mon, 27 Jan 2014 14:49:24 +0000"  >&lt;p&gt;TestRMContainerAllocator does not fail due to this patch.&lt;br/&gt;
Just to double check, I ran the TestRMContainerAllocator test with and without the patch and I found that the test fails in both cases.&lt;/p&gt;</comment>
                            <comment id="13888045" author="jeagles" created="Fri, 31 Jan 2014 19:25:33 +0000"  >&lt;p&gt;Mit, thanks for the patch. Couple of minor nits.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Re-title this jira since this is not a test problem according to the patch, but a race condition in the MRAppMaster that is exposed most frequently via this test.&lt;/li&gt;
	&lt;li&gt;Add your analysis to the jira so that the actual problem is documented and captured for future use.&lt;/li&gt;
	&lt;li&gt;Please determine if the java7 label is still accurate based on your analysis&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13888185" author="mitdesai" created="Fri, 31 Jan 2014 21:25:24 +0000"  >&lt;p&gt;Thanks Jon for the Review!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Re-title this jira since this is not a test problem according to the patch, but a race condition in the MRAppMaster that is exposed most frequently via this test.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I have renamed this JIRA accordingly. I would like to make one clarification here. I do not see this problem as a race. The bug is exposed by this test running with JDK7 and its random ordering.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Add your analysis to the jira so that the actual problem is documented and captured for future use.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This failure is intermittent. It is only caused when the test TestStagingCleanup runs in a particular order. For example, testDeletionofStagingOnReboot() followed by testDeletionofStagingOnKillLastTry()&lt;/p&gt;

&lt;p&gt;The reason for the failure is due to the notifyIsLastAMRetry(). When this function is called, it calls setForcejobCompletion(). If the appMaster.stop() is called after the setForcejobCompletion(), it tries to stop the appMaster which was already forced to stop. As a result, it gets an NPE trying to stop the appMaster. If the appMaster.stop() is called in the first place, we won&apos;t get the NPE when it tries forceJobCompletion as there already is a null check before it proceeds.&lt;/p&gt;

&lt;p&gt;hook.run() is also called in testDeletionofStagingOnKill(). But we do not get the NPE in that case. The reason for this is, in this test, we have 4 app attempts. &lt;em&gt;MRAppMaster appMaster = new TestMRApp(attemptId, mockAlloc, 4);&lt;/em&gt;&lt;br/&gt;
where as in testDeletionofStagingOnKillLastTry() we have only 1 attempt to make sure there is no retry. &lt;em&gt;MRAppMaster appMaster = new TestMRApp(attemptId, mockAlloc, 1); //no retry&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Please determine if the java7 label is still accurate based on your analysis&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We still need the java7 label as the TestStagingCleanup will not always fail without this fix. It only fails when the tests run in a particular order.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625107" name="MAPREDUCE-5688.patch" size="936" author="mitdesai" created="Fri, 24 Jan 2014 20:46:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Jan 2014 06:06:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364490</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364485</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5687] TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5687</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;On trunk, I got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.049 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.mapred.TestYARNRunner
testResourceMgrDelegate(org.apache.hadoop.mapred.TestYARNRunner)  Time elapsed: 0.782 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.killApplication(YarnClientImpl.java:201)
	at org.apache.hadoop.mapred.ResourceMgrDelegate.killApplication(ResourceMgrDelegate.java:284)
	at org.apache.hadoop.mapred.TestYARNRunner.testResourceMgrDelegate(TestYARNRunner.java:212)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12685190">MAPREDUCE-5687</key>
            <summary>TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jianhe">Jian He</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Dec 2013 15:29:08 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:41 +0000</updated>
                            <resolved>Wed, 18 Dec 2013 00:16:13 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13850579" author="jlowe" created="Tue, 17 Dec 2013 15:42:25 +0000"  >&lt;p&gt;Caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1446&quot; title=&quot;Change killing application to wait until state store is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1446&quot;&gt;&lt;del&gt;YARN-1446&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13850823" author="jianhe" created="Tue, 17 Dec 2013 19:45:32 +0000"  >&lt;p&gt;patch uploaded&lt;/p&gt;</comment>
                            <comment id="13850979" author="hadoopqa" created="Tue, 17 Dec 2013 22:05:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619155/YARN-1511.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619155/YARN-1511.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;                                      The following test timeouts occurred in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.mapred.TestClientRedirect&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-YARN-Build/2680//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-YARN-Build/2680//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-YARN-Build/2680//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-YARN-Build/2680//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13850980" author="jianhe" created="Tue, 17 Dec 2013 22:07:10 +0000"  >&lt;p&gt;included TestClientRedirect fix as well &lt;/p&gt;</comment>
                            <comment id="13851025" author="jianhe" created="Tue, 17 Dec 2013 22:41:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5681&quot; title=&quot;TestJHSSecurity fails on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5681&quot;&gt;&lt;del&gt;MAPREDUCE-5681&lt;/del&gt;&lt;/a&gt; is tracking TestJHSSecurity test failure&lt;/p&gt;</comment>
                            <comment id="13851139" author="hadoopqa" created="Wed, 18 Dec 2013 00:06:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619174/YARN-1511.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619174/YARN-1511.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-YARN-Build/2683//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-YARN-Build/2683//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-YARN-Build/2683//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-YARN-Build/2683//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13851146" author="vinodkv" created="Wed, 18 Dec 2013 00:16:13 +0000"  >&lt;p&gt;I just committed this to trunk and branch-2. Thanks Jian!&lt;/p&gt;</comment>
                            <comment id="13851157" author="hudson" created="Wed, 18 Dec 2013 00:27:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4906 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4906/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4906/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5687&quot; title=&quot;TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5687&quot;&gt;&lt;del&gt;MAPREDUCE-5687&lt;/del&gt;&lt;/a&gt;. Fixed failure in TestYARNRunner caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1446&quot; title=&quot;Change killing application to wait until state store is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1446&quot;&gt;&lt;del&gt;YARN-1446&lt;/del&gt;&lt;/a&gt;. Contributed by Jian He. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551774&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551774&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestYARNRunner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13851193" author="hadoopqa" created="Wed, 18 Dec 2013 00:53:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619174/YARN-1511.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619174/YARN-1511.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4265//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4265//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4265//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4265//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13851598" author="hudson" created="Wed, 18 Dec 2013 11:09:10 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #425 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/425/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/425/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5687&quot; title=&quot;TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5687&quot;&gt;&lt;del&gt;MAPREDUCE-5687&lt;/del&gt;&lt;/a&gt;. Fixed failure in TestYARNRunner caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1446&quot; title=&quot;Change killing application to wait until state store is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1446&quot;&gt;&lt;del&gt;YARN-1446&lt;/del&gt;&lt;/a&gt;. Contributed by Jian He. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551774&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551774&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestYARNRunner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13851711" author="hudson" created="Wed, 18 Dec 2013 13:24:14 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1616 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1616/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1616/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5687&quot; title=&quot;TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5687&quot;&gt;&lt;del&gt;MAPREDUCE-5687&lt;/del&gt;&lt;/a&gt;. Fixed failure in TestYARNRunner caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1446&quot; title=&quot;Change killing application to wait until state store is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1446&quot;&gt;&lt;del&gt;YARN-1446&lt;/del&gt;&lt;/a&gt;. Contributed by Jian He. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551774&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551774&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestYARNRunner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13851818" author="hudson" created="Wed, 18 Dec 2013 14:58:27 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1642 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1642/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1642/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5687&quot; title=&quot;TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5687&quot;&gt;&lt;del&gt;MAPREDUCE-5687&lt;/del&gt;&lt;/a&gt;. Fixed failure in TestYARNRunner caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1446&quot; title=&quot;Change killing application to wait until state store is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1446&quot;&gt;&lt;del&gt;YARN-1446&lt;/del&gt;&lt;/a&gt;. Contributed by Jian He. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551774&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551774&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestYARNRunner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13851839" author="jlowe" created="Wed, 18 Dec 2013 15:33:07 +0000"  >&lt;p&gt;TestClientRedirect is still timing out after this fix.  It looks like the first version of the patch was committed instead of the most recent one.&lt;/p&gt;</comment>
                            <comment id="13852050" author="vinodkv" created="Wed, 18 Dec 2013 19:21:21 +0000"  >&lt;p&gt;&lt;b&gt;Sigh&lt;/b&gt; I didn&apos;t run that test. Let me run it on the latest patch and commit the fix.&lt;/p&gt;</comment>
                            <comment id="13852062" author="vinodkv" created="Wed, 18 Dec 2013 19:28:28 +0000"  >&lt;p&gt;Done.&lt;/p&gt;</comment>
                            <comment id="13852074" author="hudson" created="Wed, 18 Dec 2013 19:37:58 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4910 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4910/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4910/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5687&quot; title=&quot;TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5687&quot;&gt;&lt;del&gt;MAPREDUCE-5687&lt;/del&gt;&lt;/a&gt;. Correcting the previous commit by ushing the right patch. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552069&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552069&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestClientRedirect.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13853115" author="hudson" created="Thu, 19 Dec 2013 18:29:49 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #426 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/426/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/426/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5687&quot; title=&quot;TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5687&quot;&gt;&lt;del&gt;MAPREDUCE-5687&lt;/del&gt;&lt;/a&gt;. Correcting the previous commit by ushing the right patch. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552069&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552069&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestClientRedirect.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13853209" author="hudson" created="Thu, 19 Dec 2013 19:46:22 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1643 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1643/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1643/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5687&quot; title=&quot;TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5687&quot;&gt;&lt;del&gt;MAPREDUCE-5687&lt;/del&gt;&lt;/a&gt;. Correcting the previous commit by ushing the right patch. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552069&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552069&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestClientRedirect.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13853227" author="hudson" created="Thu, 19 Dec 2013 19:54:15 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1617 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1617/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1617/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5687&quot; title=&quot;TestYARNRunner#testResourceMgrDelegate fails with NPE after YARN-1446&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5687&quot;&gt;&lt;del&gt;MAPREDUCE-5687&lt;/del&gt;&lt;/a&gt;. Correcting the previous commit by ushing the right patch. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552069&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1552069&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestClientRedirect.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12681182">YARN-1446</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12619174" name="YARN-1511.patch" size="2570" author="jianhe" created="Tue, 17 Dec 2013 22:07:10 +0000"/>
                            <attachment id="12619155" name="YARN-1511.patch" size="1571" author="jianhe" created="Tue, 17 Dec 2013 19:45:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Dec 2013 15:42:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5686] Found Class org.apache.hadoop.mapreduce.TaskAttemptContext,but interface was excepted</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5686</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;hi,&lt;/p&gt;

&lt;p&gt;Iam using the hadoop version 0.20. &lt;/p&gt;

&lt;p&gt;Please suggest to fix the bug.&lt;/p&gt;

&lt;p&gt;Thanks in advance.&lt;/p&gt;

&lt;p&gt;Ranjini&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685117">MAPREDUCE-5686</key>
            <summary>Found Class org.apache.hadoop.mapreduce.TaskAttemptContext,but interface was excepted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ranjini rathinam">ranjini</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Dec 2013 07:30:51 +0000</created>
                <updated>Tue, 17 Dec 2013 14:15:13 +0000</updated>
                            <resolved>Tue, 17 Dec 2013 14:15:13 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13850312" author="stevel@apache.org" created="Tue, 17 Dec 2013 10:03:20 +0000"  >&lt;p&gt;Have you searched for this error string online to see if others have found it before?&lt;/p&gt;</comment>
                            <comment id="13850487" author="jlowe" created="Tue, 17 Dec 2013 14:15:13 +0000"  >&lt;p&gt;As pointed out on the other JIRAs you have filed, &lt;em&gt;please&lt;/em&gt; ask these kinds of questions on the &lt;a href=&quot;http://hadoop.apache.org/mailing_lists.html#User&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;user@ mailing list&lt;/a&gt;.  JIRA is for Hadoop developers to track bugs and is not a channel for general user support.  That is why the user@ mailing list exists.&lt;/p&gt;

&lt;p&gt;The problem here is the same type of problem you reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5666&quot; title=&quot;org/apache/hadoop/mapreduce/lib/input/FileInputFormat.java(org/apache/hadoop/mapreduce/lib/input:FileInputFormat.java):cannot find symbol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5666&quot;&gt;&lt;del&gt;MAPREDUCE-5666&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5668&quot; title=&quot;Exception in thread &amp;quot;main&amp;quot; java.lang.IncompatibleClassChangeError: Found class org.apache.hadoop.mapreduce.JobContext, but interface was expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5668&quot;&gt;&lt;del&gt;MAPREDUCE-5668&lt;/del&gt;&lt;/a&gt;.  It looks like you are compiling against a later version of Hadoop than you are running on, and that is not supported.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Dec 2013 10:03:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364199</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364194</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5685] getCacheFiles()  api doesn&apos;t work in WrappedReducer.java due to typo</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5685</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Typo in WrappedReducer.java which causes getCacheFiles() fucntions returns null&lt;/p&gt;

&lt;p&gt;Java File: hadoop-common / hadoop-mapreduce-project / hadoop-mapreduce-client / hadoop-mapreduce-client-core / src / main / java / org / apache / hadoop / mapreduce / lib / reduce / WrappedReducer.java &lt;/p&gt;

&lt;p&gt;line 140:&lt;br/&gt;
Error code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; reduceContext.getCacheArchives();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; reduceContext.getCacheFiles();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12684962">MAPREDUCE-5685</key>
            <summary>getCacheFiles()  api doesn&apos;t work in WrappedReducer.java due to typo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yisong">Yi Song</assignee>
                                    <reporter username="yisong">Yi Song</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Dec 2013 14:24:16 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:40 +0000</updated>
                            <resolved>Mon, 30 Dec 2013 21:15:34 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13849450" author="vinodkv" created="Mon, 16 Dec 2013 18:45:31 +0000"  >&lt;p&gt;Sigh, we fixed a similar bug in WrapperMapper but failed to look at this class.&lt;/p&gt;

&lt;p&gt;Y! Song, can you take up this ticket and provide a patch? It&apos;ll be great if you can follow &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5385&quot; title=&quot;JobContext cache files api are broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5385&quot;&gt;&lt;del&gt;MAPREDUCE-5385&lt;/del&gt;&lt;/a&gt; and put similar tests etc. Tx.&lt;/p&gt;</comment>
                            <comment id="13849991" author="yisong" created="Tue, 17 Dec 2013 01:52:13 +0000"  >&lt;p&gt;Sure, i will take up this ticket&lt;/p&gt;</comment>
                            <comment id="13850164" author="yisong" created="Tue, 17 Dec 2013 06:24:18 +0000"  >&lt;p&gt;I&apos;ve created the patch, please review. Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="13851267" author="hadoopqa" created="Wed, 18 Dec 2013 02:02:13 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619044/MAPREDUCE-5685.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619044/MAPREDUCE-5685.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4266//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4266//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4266//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4266//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13858097" author="vinodkv" created="Sat, 28 Dec 2013 18:46:58 +0000"  >&lt;p&gt;Patch looks good except for the code duplication in the test. Fixing that myself.&lt;/p&gt;</comment>
                            <comment id="13858098" author="vinodkv" created="Sat, 28 Dec 2013 18:47:38 +0000"  >&lt;p&gt;Same patch with reused code across Mapper and Reducer in the test.&lt;/p&gt;

&lt;p&gt;Will check it in once Jenkins says okay..&lt;/p&gt;</comment>
                            <comment id="13858134" author="hadoopqa" created="Sat, 28 Dec 2013 22:05:35 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620741/MAPREDUCE-5685.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620741/MAPREDUCE-5685.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4286//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4286//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4286//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4286//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13859090" author="vinodkv" created="Mon, 30 Dec 2013 21:15:34 +0000"  >&lt;p&gt;Committed this to trunk and branch-2. Thanks Yi!&lt;/p&gt;</comment>
                            <comment id="13859096" author="hudson" created="Mon, 30 Dec 2013 21:26:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4939 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4939/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4939/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5685&quot; title=&quot;getCacheFiles()  api doesn&amp;#39;t work in WrappedReducer.java due to typo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5685&quot;&gt;&lt;del&gt;MAPREDUCE-5685&lt;/del&gt;&lt;/a&gt;. Fixed a bug with JobContext getCacheFiles API inside the WrappedReducer class. Contributed by Yi Song. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1554320&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1554320&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapred/TestMRWithDistributedCache.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/reduce/WrappedReducer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13859440" author="hudson" created="Tue, 31 Dec 2013 11:00:45 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #438 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/438/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/438/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5685&quot; title=&quot;getCacheFiles()  api doesn&amp;#39;t work in WrappedReducer.java due to typo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5685&quot;&gt;&lt;del&gt;MAPREDUCE-5685&lt;/del&gt;&lt;/a&gt;. Fixed a bug with JobContext getCacheFiles API inside the WrappedReducer class. Contributed by Yi Song. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1554320&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1554320&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapred/TestMRWithDistributedCache.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/reduce/WrappedReducer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13859489" author="hudson" created="Tue, 31 Dec 2013 13:41:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1630 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1630/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1630/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5685&quot; title=&quot;getCacheFiles()  api doesn&amp;#39;t work in WrappedReducer.java due to typo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5685&quot;&gt;&lt;del&gt;MAPREDUCE-5685&lt;/del&gt;&lt;/a&gt;. Fixed a bug with JobContext getCacheFiles API inside the WrappedReducer class. Contributed by Yi Song. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1554320&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1554320&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapred/TestMRWithDistributedCache.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/reduce/WrappedReducer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13859510" author="hudson" created="Tue, 31 Dec 2013 14:45:12 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Mapreduce-trunk #1655 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1655/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1655/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5685&quot; title=&quot;getCacheFiles()  api doesn&amp;#39;t work in WrappedReducer.java due to typo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5685&quot;&gt;&lt;del&gt;MAPREDUCE-5685&lt;/del&gt;&lt;/a&gt;. Fixed a bug with JobContext getCacheFiles API inside the WrappedReducer class. Contributed by Yi Song. (vinodkv: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1554320&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1554320&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapred/TestMRWithDistributedCache.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/reduce/WrappedReducer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12657356">MAPREDUCE-5385</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12620741" name="MAPREDUCE-5685.1.patch" size="4596" author="vinodkv" created="Sat, 28 Dec 2013 18:47:38 +0000"/>
                            <attachment id="12619044" name="MAPREDUCE-5685.patch" size="5580" author="yisong" created="Tue, 17 Dec 2013 06:23:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Dec 2013 18:45:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5684] TestMRJobs.testFailingMapper occasionally fails</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5684</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;TestMRJobs is occasionally failing with the error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-------------------------------------------------------------------------------
Test set: org.apache.hadoop.mapreduce.v2.TestMRJobs
-------------------------------------------------------------------------------
Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 323.503 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.mapreduce.v2.TestMRJobs
testFailingMapper(org.apache.hadoop.mapreduce.v2.TestMRJobs)  Time elapsed: 15.657 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected:&amp;lt;TIPFAILED&amp;gt; but was:&amp;lt;FAILED&amp;gt;
        at org.junit.Assert.fail(Assert.java:93)
        at org.junit.Assert.failNotEquals(Assert.java:647)
        at org.junit.Assert.assertEquals(Assert.java:128)
        at org.junit.Assert.assertEquals(Assert.java:147)
        at org.apache.hadoop.mapreduce.v2.TestMRJobs.testFailingMapper(TestMRJobs.java:313)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12684912">MAPREDUCE-5684</key>
            <summary>TestMRJobs.testFailingMapper occasionally fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="liangly">Liyin Liang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Dec 2013 09:55:22 +0000</created>
                <updated>Thu, 19 Dec 2013 03:22:13 +0000</updated>
                                            <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13848985" author="liangly" created="Mon, 16 Dec 2013 10:00:02 +0000"  >&lt;p&gt;The failure happens when job.getTaskCompletionEvents(0, 2) is redirected to history server.  In the .jhist file all the failed attempts&apos; status is FAILED.&lt;/p&gt;</comment>
                            <comment id="13852356" author="jwang302" created="Thu, 19 Dec 2013 00:06:32 +0000"  >&lt;p&gt;Seeing the same issue. &lt;/p&gt;</comment>
                            <comment id="13852558" author="liangly" created="Thu, 19 Dec 2013 03:22:13 +0000"  >&lt;p&gt;This patch changes the assert to accept both TIPFAILED and FAILED status. verifyFailingMapperCounters(job) only if status is TIPFAILED.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619479" name="MAPREDUCE-5684-1.diff" size="1297" author="liangly" created="Thu, 19 Dec 2013 03:22:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Dec 2013 00:06:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363995</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363990</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5683] Expand documentation for yarn.app.mapreduce.am.resource.mb</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5683</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Could we please see some more documentation around the yarn.app.mapreduce.am.resource.mb parameter in mapred-site.xml?  Information about when (if ever) it would be appropriate to increase or decrease the value of this would be useful.  &lt;/p&gt;

&lt;p&gt;Is there a minimum value this needs to be set in order for MapReduce jobs to run under YARN? &lt;/p&gt;</description>
                <environment>&lt;p&gt;Any - Documentation issue only&lt;/p&gt;</environment>
        <key id="12684730">MAPREDUCE-5683</key>
            <summary>Expand documentation for yarn.app.mapreduce.am.resource.mb</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bartkersteter">Bart Kersteter</reporter>
                        <labels>
                            <label>documentation,</label>
                            <label>mapreduce</label>
                            <label>yarn</label>
                    </labels>
                <created>Sat, 14 Dec 2013 18:29:52 +0000</created>
                <updated>Sat, 14 Dec 2013 18:29:52 +0000</updated>
                                            <version>2.0.5-alpha</version>
                    <version>2.1.1-beta</version>
                                    <fixVersion>trunk</fixVersion>
                                    <component>documentation</component>
                    <component>mrv2</component>
                        <due>Mon, 31 Mar 2014 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12325050</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5682] Job Counters are not retrieved properly from web UI</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5682</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4962&quot; title=&quot;jobdetails.jsp uses display name instead of real name to get counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4962&quot;&gt;&lt;del&gt;MAPREDUCE-4962&lt;/del&gt;&lt;/a&gt;, most job counters are coming back as 0 because the web UI retrieves them using the name instead of displayName, which is what is expected: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Returns the value of the specified counter, or 0 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the counter does
     * not exist.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; getCounter(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; counterName) {
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(Counter counter: subcounters.values()) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (counter != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; counter.getDisplayName().equals(counterName)) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; counter.getValue();
        }
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0L;
    }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12684591">MAPREDUCE-5682</key>
            <summary>Job Counters are not retrieved properly from web UI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="mwagner">Mark Wagner</assignee>
                                    <reporter username="mwagner">Mark Wagner</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 Dec 2013 01:22:16 +0000</created>
                <updated>Sat, 14 Dec 2013 01:25:11 +0000</updated>
                                            <version>1.2.1</version>
                    <version>1.3.0</version>
                                                    <component>mrv1</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13848133" author="mwagner" created="Sat, 14 Dec 2013 01:25:11 +0000"  >&lt;p&gt;This patch reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4962&quot; title=&quot;jobdetails.jsp uses display name instead of real name to get counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4962&quot;&gt;&lt;del&gt;MAPREDUCE-4962&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12618741" name="MAPREDUCE-5682.1.patch" size="980" author="mwagner" created="Sat, 14 Dec 2013 01:25:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363668</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5681] TestJHSSecurity fails on trunk</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5681</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hadoop.mapreduce.security.TestJHSSecurity
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.763 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.mapreduce.security.TestJHSSecurity
testDelegationToken(org.apache.hadoop.mapreduce.security.TestJHSSecurity)  Time elapsed: 1.56 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at java.util.Hashtable.get(Hashtable.java:334)
	at java.util.Properties.getProperty(Properties.java:932)
	at org.apache.hadoop.conf.Configuration.get(Configuration.java:874)
	at org.apache.hadoop.http.HttpServer.initSpnego(HttpServer.java:892)
	at org.apache.hadoop.http.HttpServer.access$100(HttpServer.java:101)
	at org.apache.hadoop.http.HttpServer$Builder.build(HttpServer.java:323)
	at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:232)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryClientService.initializeWebApp(HistoryClientService.java:149)
	at org.apache.hadoop.mapreduce.v2.hs.HistoryClientService.serviceStart(HistoryClientService.java:118)
	at org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)
	at org.apache.hadoop.service.CompositeService.serviceStart(CompositeService.java:121)
	at org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer.serviceStart(JobHistoryServer.java:175)
	at org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)
	at org.apache.hadoop.mapreduce.security.TestJHSSecurity.testDelegationToken(TestJHSSecurity.java:100)


Results :

Tests in error: 
  TestJHSSecurity.testDelegationToken:100 ? NullPointer

Tests run: 1, Failures: 0, Errors: 1, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Did some preliminary investigation, in HistoryClientService:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        .withHttpSpnegoPrincipalKey(
            JHAdminConfig.MR_WEBAPP_SPNEGO_USER_NAME_KEY)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;MR_WEBAPP_SPNEGO_USER_NAME_KEY seems not to be in the configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12684576">MAPREDUCE-5681</key>
            <summary>TestJHSSecurity fails on trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zjshen">Zhijie Shen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Dec 2013 23:36:51 +0000</created>
                <updated>Sat, 14 Dec 2013 02:28:58 +0000</updated>
                            <resolved>Sat, 14 Dec 2013 02:28:58 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13848077" author="jeagles" created="Fri, 13 Dec 2013 23:53:13 +0000"  >&lt;p&gt;Can you confirm this isn&apos;t the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1463&quot; title=&quot;Tests should avoid starting http-server where possible or creates spnego keytab/principals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1463&quot;&gt;&lt;del&gt;YARN-1463&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13848166" author="zjshen" created="Sat, 14 Dec 2013 02:28:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeagles&quot; class=&quot;user-hover&quot; rel=&quot;jeagles&quot;&gt;Jonathan Eagles&lt;/a&gt;, thanks for the info. It looks like the same problem as that of &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1463&quot; title=&quot;Tests should avoid starting http-server where possible or creates spnego keytab/principals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1463&quot;&gt;&lt;del&gt;YARN-1463&lt;/del&gt;&lt;/a&gt;. Will close this ticket as duplicate.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12681912">YARN-1463</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Dec 2013 23:53:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363654</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5680] Reconsider limits</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5680</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Limits were first introduced in 0.20.2xx line with the main goal of protecting  jobtracker from rogue jobs. Now that problem no longer exists in yarn, where each job gets its own MR AM.  So, its good time now to revisit limits and see which of those still make sense.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12684296">MAPREDUCE-5680</key>
            <summary>Reconsider limits</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Dec 2013 16:32:54 +0000</created>
                <updated>Fri, 24 Jan 2014 18:08:19 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>applicationmaster</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13846428" author="ashutoshc" created="Thu, 12 Dec 2013 16:42:46 +0000"  >&lt;p&gt;Couple which I encountered while helping users are: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;1. Number of block locations for a given split.&lt;/li&gt;
	&lt;li&gt;2. Number of counters, counter-groups, length of name of counters.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;1.  Default for this currently is 10. In CombineSplits case which is very common in practice, number of block locations may easily surpass 10.&lt;br/&gt;
2. Default for this is total 50 counters across all counter-group with max length of name limited to 128.&lt;/p&gt;

&lt;p&gt;IMO, both of these limits are no longer required, since if a job is getting submitted with absurdly high number of these values, it will crash its own AM and it will crash and burn itself, no one else. With limits still existing, getBlockLocations() which reports 11 location for a combined split of 4 files fails to run or job which needs 51 counters fails to run.&lt;/p&gt;

&lt;p&gt;There might be more such limits which can be removed, I haven&apos;t looked extensively.&lt;/p&gt;</comment>
                            <comment id="13881227" author="ashutoshc" created="Fri, 24 Jan 2014 18:08:19 +0000"  >&lt;p&gt;Whats the word here? Default values are way too low because of reason I outlined above. If not removing checks altogether, we should atleast consider increasing these super-low limit values ?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12598759">MAPREDUCE-4443</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363373</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363374</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5679] TestJobHistoryParsing has race condition</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5679</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;org.apache.hadoop.mapreduce.v2.hs.TestJobHistoryParsing can fail because of race condition.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;testHistoryParsingWithParseErrors(org.apache.hadoop.mapreduce.v2.hs.TestJobHistoryParsing)  Time elapsed: 4.102 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.io.IOException: Unable to initialize History Viewer
        at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:520)
        at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:398)
        at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSInputChecker.&amp;lt;init&amp;gt;(ChecksumFileSystem.java:137)
        at org.apache.hadoop.fs.ChecksumFileSystem.open(ChecksumFileSystem.java:339)
        at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:798)
        at org.apache.hadoop.mapreduce.jobhistory.JobHistoryParser.&amp;lt;init&amp;gt;(JobHistoryParser.java:86)
        at org.apache.hadoop.mapreduce.jobhistory.HistoryViewer.&amp;lt;init&amp;gt;(HistoryViewer.java:85)
        at org.apache.hadoop.mapreduce.v2.hs.TestJobHistoryParsing.checkHistoryParsing(TestJobHistoryParsing.java:339)
        at org.apache.hadoop.mapreduce.v2.hs.TestJobHistoryParsing.testHistoryParsingWithParseErrors(TestJobHistoryParsing.java:125)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the checkHistoryParsing() function, after &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HistoryFileInfo fileInfo = jobHistory.getJobFileInfo(jobId);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;a thread named MoveIntermediateToDone will be launched to move history file from done_intermediate to done directory.&lt;br/&gt;
If the history file is moved, &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      HistoryViewer viewer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HistoryViewer(fc.makeQualified(
          fileInfo.getHistoryFile()).toString(), conf, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will throw IOException&#65292;because the history file is not found.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12684153">MAPREDUCE-5679</key>
            <summary>TestJobHistoryParsing has race condition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liangly">Liyin Liang</assignee>
                                    <reporter username="liangly">Liyin Liang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Dec 2013 03:12:57 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:39 +0000</updated>
                            <resolved>Tue, 17 Dec 2013 16:51:07 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13846054" author="liangly" created="Thu, 12 Dec 2013 04:11:13 +0000"  >&lt;p&gt;This patch  encapsulates &quot;test output for HistoryViewer&quot; with lock of fileInfo to avoid race condition.&lt;/p&gt;</comment>
                            <comment id="13846060" author="hadoopqa" created="Thu, 12 Dec 2013 04:38:34 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12618359/MAPREDUCE-5679.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12618359/MAPREDUCE-5679.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4259//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4259//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4259//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4259//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13846124" author="liangly" created="Thu, 12 Dec 2013 07:41:25 +0000"  >&lt;p&gt;testHistoryParsingForFailedAttempts() and testCountersForFailedTask() have the same race conditions.&lt;/p&gt;</comment>
                            <comment id="13846145" author="hadoopqa" created="Thu, 12 Dec 2013 08:15:43 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12618375/MAPREDUCE-5679-2.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12618375/MAPREDUCE-5679-2.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4260//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4260//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4260//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4260//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13846713" author="jlowe" created="Thu, 12 Dec 2013 20:36:30 +0000"  >&lt;p&gt;Thanks for the patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liangly&quot; class=&quot;user-hover&quot; rel=&quot;liangly&quot;&gt;Liyin Liang&lt;/a&gt;.  Patch looks good overall.  Would like to see the code properly indented within the synchronized blocks to match the Hadoop coding guidelines.&lt;/p&gt;

&lt;p&gt;Another minor nit is that the code is holding the locks longer than necessary (only need to lock fileinfo until data is parsed) but not a must-fix since it&apos;s just test code.&lt;/p&gt;</comment>
                            <comment id="13847082" author="liangly" created="Fri, 13 Dec 2013 02:39:52 +0000"  >&lt;p&gt;Incorporate Jason Lowe &apos;s comment. Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="13847094" author="hadoopqa" created="Fri, 13 Dec 2013 02:58:11 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12618527/MAPREDUCE-5679-3.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12618527/MAPREDUCE-5679-3.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4262//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4262//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4262//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4262//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13850648" author="jlowe" created="Tue, 17 Dec 2013 16:43:09 +0000"  >&lt;p&gt;+1 to the latest patch.  Committing this.&lt;/p&gt;</comment>
                            <comment id="13850654" author="jlowe" created="Tue, 17 Dec 2013 16:51:07 +0000"  >&lt;p&gt;Thanks, Liyin!  I committed this to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13850662" author="hudson" created="Tue, 17 Dec 2013 16:57:15 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4898 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4898/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4898/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5679&quot; title=&quot;TestJobHistoryParsing has race condition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5679&quot;&gt;&lt;del&gt;MAPREDUCE-5679&lt;/del&gt;&lt;/a&gt;. TestJobHistoryParsing has race condition. Contributed by Liyin Liang (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551616&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestJobHistoryParsing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13851596" author="hudson" created="Wed, 18 Dec 2013 11:09:10 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #425 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/425/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/425/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5679&quot; title=&quot;TestJobHistoryParsing has race condition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5679&quot;&gt;&lt;del&gt;MAPREDUCE-5679&lt;/del&gt;&lt;/a&gt;. TestJobHistoryParsing has race condition. Contributed by Liyin Liang (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551616&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestJobHistoryParsing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13851709" author="hudson" created="Wed, 18 Dec 2013 13:24:14 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1616 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1616/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1616/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5679&quot; title=&quot;TestJobHistoryParsing has race condition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5679&quot;&gt;&lt;del&gt;MAPREDUCE-5679&lt;/del&gt;&lt;/a&gt;. TestJobHistoryParsing has race condition. Contributed by Liyin Liang (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551616&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestJobHistoryParsing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13851816" author="hudson" created="Wed, 18 Dec 2013 14:58:27 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1642 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1642/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1642/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5679&quot; title=&quot;TestJobHistoryParsing has race condition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5679&quot;&gt;&lt;del&gt;MAPREDUCE-5679&lt;/del&gt;&lt;/a&gt;. TestJobHistoryParsing has race condition. Contributed by Liyin Liang (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551616&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestJobHistoryParsing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12618375" name="MAPREDUCE-5679-2.diff" size="3042" author="liangly" created="Thu, 12 Dec 2013 07:41:25 +0000"/>
                            <attachment id="12618527" name="MAPREDUCE-5679-3.diff" size="4857" author="liangly" created="Fri, 13 Dec 2013 02:39:52 +0000"/>
                            <attachment id="12618359" name="MAPREDUCE-5679.diff" size="957" author="liangly" created="Thu, 12 Dec 2013 04:11:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Dec 2013 04:38:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363230</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363231</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5678] Move junit to test scope in more projects</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5678</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5624&quot; title=&quot;move grizzly-test and junit dependencies to test scope&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5624&quot;&gt;&lt;del&gt;MAPREDUCE-5624&lt;/del&gt;&lt;/a&gt; moved junit to test scope for most projects but missed a few pom.xml&lt;/p&gt;

&lt;p&gt;This JIRA moves junit to test scope for the missed projects&lt;/p&gt;

&lt;p&gt;Thanks to Jeff Bowles who made the discovery&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683931">MAPREDUCE-5678</key>
            <summary>Move junit to test scope in more projects</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Dec 2013 22:51:02 +0000</created>
                <updated>Wed, 11 Dec 2013 00:07:23 +0000</updated>
                            <resolved>Wed, 11 Dec 2013 00:07:23 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13844803" author="hadoopqa" created="Tue, 10 Dec 2013 23:16:01 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12618131/mapreduce-5678.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12618131/mapreduce-5678.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4254//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4254//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4254//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4254//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13844840" author="jlowe" created="Tue, 10 Dec 2013 23:58:50 +0000"  >&lt;p&gt;This is essentially a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8738&quot; title=&quot;junit JAR is showing up in the distro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8738&quot;&gt;HADOOP-8738&lt;/a&gt; and has the same issues as the original version of that patch.  If this is committed then sample jobs like the sleep job and TestDFSIO which are run by QE and some users/admins will be broken since they rely on junit.&lt;/p&gt;

&lt;p&gt;To solve the general problem of test jar dependencies polluting the normal classpath I think we need something like &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9116&quot; title=&quot;test and source JARs should not be in cluster classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9116&quot;&gt;HADOOP-9116&lt;/a&gt;, where test jar dependencies are placed in separate locations outside of the normal classpath.&lt;/p&gt;</comment>
                            <comment id="13844845" author="yuzhihong@gmail.com" created="Wed, 11 Dec 2013 00:04:39 +0000"  >&lt;p&gt;Thanks for the info, Jason - I wasn&apos;t aware of that JIRA.&lt;/p&gt;

&lt;p&gt;Please resolve as dup.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12605160">HADOOP-8738</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12670007">HADOOP-9991</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12618131" name="mapreduce-5678.txt" size="1255" author="yuzhihong@gmail.com" created="Tue, 10 Dec 2013 22:55:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Dec 2013 23:16:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363008</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5677] Hadoop 2.2 historyviewer report NPE when read 0.23 fail job&apos;s history</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5677</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;2013-12-10 12:49:39,394 WARN org.apache.hadoop.yarn.webapp.GenericExceptionHandler: INTERNAL_SERVER_ERROR&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.mapreduce.jobhistory.EventReader.fromAvro(EventReader.java:174)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.jobhistory.TaskFailedEvent.setDatum(TaskFailedEvent.java:111)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.jobhistory.EventReader.getNextEvent(EventReader.java:156)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.jobhistory.JobHistoryParser.parse(JobHistoryParser.java:111)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.jobhistory.JobHistoryParser.parse(JobHistoryParser.java:153)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.jobhistory.JobHistoryParser.parse(JobHistoryParser.java:139)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.v2.hs.CompletedJob.loadFullHistoryData(CompletedJob.java:337)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.v2.hs.CompletedJob.&amp;lt;init&amp;gt;(CompletedJob.java:101)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.v2.hs.HistoryFileManager$HistoryFileInfo.loadJob(HistoryFileManager.java:410)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage.loadJob(CachedHistoryStorage.java:106)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage.getFullJob(CachedHistoryStorage.java:137)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.v2.hs.JobHistory.getJob(JobHistory.java:217)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.v2.app.webapp.AMWebServices.getJobFromJobIdString(AMWebServices.java:120)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.v2.hs.webapp.HsWebServices.getJob(HsWebServices.java:223)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)&lt;br/&gt;
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)&lt;br/&gt;
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)&lt;br/&gt;
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)&lt;br/&gt;
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)&lt;br/&gt;
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)&lt;br/&gt;
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)&lt;br/&gt;
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)&lt;br/&gt;
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)&lt;br/&gt;
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)&lt;br/&gt;
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)&lt;br/&gt;
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)&lt;br/&gt;
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)&lt;br/&gt;
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)&lt;br/&gt;
        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:886)&lt;br/&gt;
        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:834)&lt;br/&gt;
        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:795)&lt;br/&gt;
        at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163)&lt;br/&gt;
        at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58)&lt;br/&gt;
        at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)&lt;br/&gt;
        at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.apache.hadoop.http.lib.StaticUserWebFilter$StaticUserFilter.doFilter(StaticUserWebFilter.java:109)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:1310)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45)&lt;br/&gt;
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)&lt;br/&gt;
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)&lt;br/&gt;
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)&lt;br/&gt;
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)&lt;br/&gt;
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)&lt;br/&gt;
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
        at org.mortbay.jetty.Server.handle(Server.java:326)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)&lt;br/&gt;
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)&lt;br/&gt;
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)&lt;br/&gt;
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)&lt;br/&gt;
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683915">MAPREDUCE-5677</key>
            <summary>Hadoop 2.2 historyviewer report NPE when read 0.23 fail job&apos;s history</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="airbots">Chen He</assignee>
                                    <reporter username="airbots">Chen He</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Dec 2013 20:52:21 +0000</created>
                <updated>Wed, 8 Jan 2014 23:44:44 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>jobhistoryserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5676] Unable to view MRv1 jobs in the MRv2 job history server after upgrading Apache Hadoop 1.2.0 to Apache Hadoop 2.1.0-beta</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5676</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Unable to view MRv1 jobs in the MRv2 job history server after upgrading Apache Hadoop 1.2.0 to Apache Hadoop 2.1.0-beta.&lt;/p&gt;

&lt;p&gt;After successful upgrade from Apache Hadoop 1.2.0 to Apache Hadoop 2.1.0-beta I can now see the existing files in the HDFS that were used by earlier Map Reduce jobs(input files \generated output files) using Apache Hadoop-1.2.0.&lt;/p&gt;

&lt;p&gt;However, I cannot see the history of those Map Reduce jobs (MRv1) on the  JobHistory Server.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683791">MAPREDUCE-5676</key>
            <summary>Unable to view MRv1 jobs in the MRv2 job history server after upgrading Apache Hadoop 1.2.0 to Apache Hadoop 2.1.0-beta</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nirmal.hbti">Nirmal Kumar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Dec 2013 07:54:56 +0000</created>
                <updated>Tue, 10 Dec 2013 07:55:56 +0000</updated>
                                                                            <component>jobhistoryserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13844063" author="nirmal.hbti" created="Tue, 10 Dec 2013 07:55:56 +0000"  >&lt;p&gt;Assigning&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362868</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362869</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5675] krb5.conf is missing in some of the test resource folders</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5675</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;org.apache.hadoop.mapreduce.v2.hs.TestJobHistoryParsing.testPartialJob fail due to some timeout issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.Exception: test timed out after 1000 milliseconds
	at java.net.PlainDatagramSocketImpl.receive0(Native Method)
	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:145)
	at java.net.DatagramSocket.receive(DatagramSocket.java:786)
	at com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:411)
	at com.sun.jndi.dns.DnsClient.query(DnsClient.java:203)
	at com.sun.jndi.dns.Resolver.query(Resolver.java:81)
	at com.sun.jndi.dns.DnsContext.c_getAttributes(DnsContext.java:430)
	at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_getAttributes(ComponentDirContext.java:231)
	at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:139)
	at com.sun.jndi.toolkit.url.GenericURLDirContext.getAttributes(GenericURLDirContext.java:103)
	at sun.security.krb5.KrbServiceLocator.getKerberosService(KrbServiceLocator.java:87)
	at sun.security.krb5.Config.checkRealm(Config.java:1265)
	at sun.security.krb5.Config.getRealmFromDNS(Config.java:1238)
	at sun.security.krb5.Config.getDefaultRealm(Config.java:1132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.apache.hadoop.security.authentication.util.KerberosUtil.getDefaultRealm(KerberosUtil.java:75)
	at org.apache.hadoop.security.authentication.util.KerberosName.&amp;lt;clinit&amp;gt;(KerberosName.java:85)
	at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:225)
	at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
	at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:669)
	at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:571)
	at org.apache.hadoop.mapreduce.v2.hs.TestJobHistoryParsing.testPartialJob(TestJobHistoryParsing.java:721)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:62)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The same error also exist for the test org.apache.hadoop.mapred.TestJobClient.testIsJobDirValid&lt;br/&gt;
This is due to the missing of the krb5.conf file in the corresponding test resource folder; &lt;br/&gt;
The solution would be copy the krb5.conf file to the corresponding test resource dir:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cp ./hadoop-common-project/hadoop-common/src/test/resources/krb5.conf hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/resources/
cp ./hadoop-common-project/hadoop-common/src/test/resources/krb5.conf ./hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/resources/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Not sure if this exists on trunk also;&lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS6.4&lt;br/&gt;
JDK7u15&lt;/p&gt;</environment>
        <key id="12683790">MAPREDUCE-5675</key>
            <summary>krb5.conf is missing in some of the test resource folders</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stanley_shi">stanley shi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Dec 2013 07:47:55 +0000</created>
                <updated>Tue, 10 Dec 2013 07:49:26 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362868</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5674] Missing start and finish time in mapred.JobStatus</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5674</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;The JobStatus obtained from the JobClient or runningJob has no start or finish time for the job &amp;#8211; the start and finish time is always 0. This is a regression with respect to 1.0 mapreduce client and JobStatus API. This can also lead to regressions in downstream projects. For example, we discovered the problem in webhcat that the jobstatus for mapreduce job submmited to webhcat always reports start time as 0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683242">MAPREDUCE-5674</key>
            <summary>Missing start and finish time in mapred.JobStatus</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chuanliu">Chuan Liu</assignee>
                                    <reporter username="chuanliu">Chuan Liu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Dec 2013 01:48:09 +0000</created>
                <updated>Fri, 13 Dec 2013 14:47:07 +0000</updated>
                            <resolved>Thu, 12 Dec 2013 18:41:42 +0000</resolved>
                                    <version>3.0.0</version>
                    <version>2.2.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13842004" author="chuanliu" created="Sat, 7 Dec 2013 02:00:09 +0000"  >&lt;p&gt;Attach a patch.&lt;/p&gt;</comment>
                            <comment id="13842017" author="hadoopqa" created="Sat, 7 Dec 2013 02:25:13 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12617528/MAPREDUCE-5674.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12617528/MAPREDUCE-5674.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4247//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4247//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4247//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4247//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13845758" author="cnauroth" created="Wed, 11 Dec 2013 21:55:46 +0000"  >&lt;p&gt;Hi, Chuan.  There is another similar method in &lt;tt&gt;TypeConverter&lt;/tt&gt; that converts a YARN &lt;tt&gt;ApplicationReport&lt;/tt&gt; to a &lt;tt&gt;JobStatus&lt;/tt&gt;.  That one is setting start time, but not finish time.  Do you want to fix that one too?&lt;/p&gt;

&lt;p&gt;For the test, do you want to add an assertion that &lt;tt&gt;jobStatus.getFinishTime()&lt;/tt&gt; has the expected value?&lt;/p&gt;</comment>
                            <comment id="13845777" author="chuanliu" created="Wed, 11 Dec 2013 22:13:47 +0000"  >&lt;p&gt;Nice catch! I did not check the other method when preparing the first patch. Attach a new one that also fixes the other method and adds some more asserts to the tests.&lt;/p&gt;</comment>
                            <comment id="13845797" author="hadoopqa" created="Wed, 11 Dec 2013 22:36:59 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12618300/MAPREDUCE-5674.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12618300/MAPREDUCE-5674.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4257//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4257//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4257//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4257//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13846548" author="cnauroth" created="Thu, 12 Dec 2013 18:17:42 +0000"  >&lt;p&gt;+1 for the patch.  I&apos;ll commit this.&lt;/p&gt;</comment>
                            <comment id="13846565" author="hudson" created="Thu, 12 Dec 2013 18:37:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4873 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4873/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4873/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5674&quot; title=&quot;Missing start and finish time in mapred.JobStatus&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5674&quot;&gt;&lt;del&gt;MAPREDUCE-5674&lt;/del&gt;&lt;/a&gt;. Missing start and finish time in mapred.JobStatus. Contributed by Chuan Liu. (cnauroth: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550472&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550472&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/TypeConverter.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapreduce/TestTypeConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13846570" author="cnauroth" created="Thu, 12 Dec 2013 18:41:42 +0000"  >&lt;p&gt;I committed this to trunk, branch-2 and branch-2.3.  Chuan, thank you for providing this fix.&lt;/p&gt;</comment>
                            <comment id="13847405" author="hudson" created="Fri, 13 Dec 2013 10:59:55 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #420 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/420/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/420/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5674&quot; title=&quot;Missing start and finish time in mapred.JobStatus&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5674&quot;&gt;&lt;del&gt;MAPREDUCE-5674&lt;/del&gt;&lt;/a&gt;. Missing start and finish time in mapred.JobStatus. Contributed by Chuan Liu. (cnauroth: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550472&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550472&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/TypeConverter.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapreduce/TestTypeConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13847489" author="hudson" created="Fri, 13 Dec 2013 13:42:47 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1611 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1611/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1611/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5674&quot; title=&quot;Missing start and finish time in mapred.JobStatus&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5674&quot;&gt;&lt;del&gt;MAPREDUCE-5674&lt;/del&gt;&lt;/a&gt;. Missing start and finish time in mapred.JobStatus. Contributed by Chuan Liu. (cnauroth: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550472&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550472&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/TypeConverter.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapreduce/TestTypeConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13847551" author="hudson" created="Fri, 13 Dec 2013 14:47:07 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1637 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1637/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1637/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5674&quot; title=&quot;Missing start and finish time in mapred.JobStatus&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5674&quot;&gt;&lt;del&gt;MAPREDUCE-5674&lt;/del&gt;&lt;/a&gt;. Missing start and finish time in mapred.JobStatus. Contributed by Chuan Liu. (cnauroth: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550472&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550472&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/TypeConverter.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/test/java/org/apache/hadoop/mapreduce/TestTypeConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12618300" name="MAPREDUCE-5674.2.patch" size="4651" author="chuanliu" created="Wed, 11 Dec 2013 22:13:47 +0000"/>
                            <attachment id="12617528" name="MAPREDUCE-5674.patch" size="2871" author="chuanliu" created="Sat, 7 Dec 2013 02:00:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Dec 2013 02:25:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362499</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12320355</customfieldvalue>
    <customfieldvalue>12325257</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5673] It would be great if we can know which host(IP) the client submitted job in jobhistory web UI</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5673</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Current Hadoop jobhistory web UI cann&apos;t list which host(IP) the client submitted the job, and it would be great if we can know which host(IP) the client submitted job in jobhistory web UI.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683090">MAPREDUCE-5673</key>
            <summary>It would be great if we can know which host(IP) the client submitted job in jobhistory web UI</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="397090770">yangping wu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Dec 2013 09:59:57 +0000</created>
                <updated>Fri, 6 Dec 2013 15:40:25 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>jobhistoryserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="1728000">480h</timeoriginalestimate>
                            <timeestimate seconds="1728000">480h</timeestimate>
                                        <comments>
                            <comment id="13841294" author="jlowe" created="Fri, 6 Dec 2013 14:22:05 +0000"  >&lt;p&gt;Note that while this is not available on the front page of the UI it is available within the information for each job.  If you go to a job&apos;s configuration page and search for &quot;submithost&quot; then you&apos;ll find both the hostname and IP address of the submitting job client under mapreduce.job.submithostname and mapreduce.job.submithostaddress, respectively.&lt;/p&gt;

&lt;p&gt;Moving this to the MAPREDUCE project since I&apos;m assuming this is relating to the MapReduce JobHistory server and not the YARN application history server which isn&apos;t part of 2.2.0.&lt;/p&gt;</comment>
                            <comment id="13841358" author="397090770" created="Fri, 6 Dec 2013 15:40:25 +0000"  >&lt;p&gt;Hi Jason Lowe,Thank you for your attention. Although it can find in mapreduce.job.submithostname property, but I think it isn&apos;t convenient for client. If it can be found directly on the front page of the UI, it will be very nice.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Dec 2013 14:22:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362347</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5672] Provide optional RollingFileAppender for container log4j (syslog)</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5672</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;This JIRA is an alternative take on &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1130&quot; title=&quot;Improve the log flushing for tasks when mapred.userlog.limit.kb is set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1130&quot;&gt;&lt;del&gt;YARN-1130&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We propose providing an option of using a RollingFileAppender(RFA)-based implementation of container log appender as means of log size control via mapreduce.task.userlog.limit.kb. &lt;/p&gt;

&lt;p&gt;The idea is to use mapreduce.task.userlog.limit.kb as maximumFileSize of RFA. In addition yarn.app.mapreduce.container.log.backups (task attempt containers) and yarn.app.mapreduce.am.log.backups (MR-AM) are passed as maxBackupIndex.&lt;/p&gt;

&lt;p&gt;Both current ContainerLogAppender (CLA) and new ContainerRollingLogAppender (CRLA) co-exist. CLA is the default. CRLA is chosen when  mapreduce.task.userlog.limit.kb &amp;gt; 0 &amp;amp;&amp;amp; *.backups &amp;gt; 0.&lt;/p&gt;

&lt;p&gt;Pros: &lt;br/&gt;
1) CRLA output is visible in UI right away. CLA output with mapreduce.task.userlog.limit.kb &amp;gt; 0 is not visible until the task attempt finishes that prevents timely diagnostics. &lt;br/&gt;
2) Even with excessive logging and a large mapreduce.task.userlog.limit.kb, no space is taken from the JVM heap.&lt;br/&gt;
3) No UI impact, since YARN is already designed to deal with any log name beyond stderr/out, syslog, debug.out, profile.out&lt;/p&gt;

&lt;p&gt;Cons:&lt;br/&gt;
1) if the logging is excessive there will be more local filesystem metadata I/O due to roll. That should be negligible in the grand scheme.&lt;/p&gt;

&lt;p&gt;Furthermore, to improve log consistency and completeness in the case of JVM crashes and SIGTERMing by NM, we propose to restore the MRv1 behavior of periodic log syncing (every 5s) and having log sync as part of a shutdown hook.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12683018">MAPREDUCE-5672</key>
            <summary>Provide optional RollingFileAppender for container log4j (syslog)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jira.shegalov">Gera Shegalov</assignee>
                                    <reporter username="jira.shegalov">Gera Shegalov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Dec 2013 23:16:25 +0000</created>
                <updated>Sat, 1 Feb 2014 03:20:08 +0000</updated>
                            <resolved>Thu, 16 Jan 2014 23:18:33 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>mr-am</component>
                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13840840" author="hadoopqa" created="Fri, 6 Dec 2013 02:14:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12617260/MAPREDUCE-5672.v01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12617260/MAPREDUCE-5672.v01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;      &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 1546 javac compiler warnings (more than the trunk&apos;s current 1544 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRuntimeEstimators&lt;br/&gt;
                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4244//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4244//testReport/&lt;/a&gt;&lt;br/&gt;
Javac warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4244//artifact/trunk/patchprocess/diffJavacWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4244//artifact/trunk/patchprocess/diffJavacWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4244//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4244//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13841353" author="hadoopqa" created="Fri, 6 Dec 2013 15:35:17 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12617393/MAPREDUCE-5672.v02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12617393/MAPREDUCE-5672.v02.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;br/&gt;
                  org.apache.hadoop.mapreduce.v2.TestUberAM&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4245//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4245//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4245//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4245//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13841701" author="jira.shegalov" created="Fri, 6 Dec 2013 21:01:29 +0000"  >&lt;p&gt;Fixing MRAppMaster syncLogs life cycle&lt;/p&gt;</comment>
                            <comment id="13841861" author="hadoopqa" created="Fri, 6 Dec 2013 23:12:02 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12617470/MAPREDUCE-5672.v03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12617470/MAPREDUCE-5672.v03.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;br/&gt;
                  org.apache.hadoop.mapreduce.v2.TestUberAM&lt;br/&gt;
                  org.apache.hadoop.mapred.TestJobCleanup&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4246//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4246//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4246//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4246//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13842078" author="hadoopqa" created="Sat, 7 Dec 2013 05:04:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12617536/MAPREDUCE-5672.v03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12617536/MAPREDUCE-5672.v03.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;br/&gt;
                  org.apache.hadoop.mapreduce.v2.TestUberAM&lt;br/&gt;
                  org.apache.hadoop.mapred.TestJobCleanup&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4249//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4249//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4249//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4249//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13842380" author="jira.shegalov" created="Sun, 8 Dec 2013 03:04:38 +0000"  >&lt;p&gt;uber mode test fix&lt;/p&gt;</comment>
                            <comment id="13842416" author="hadoopqa" created="Sun, 8 Dec 2013 04:59:01 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12617605/MAPREDUCE-5672.v04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12617605/MAPREDUCE-5672.v04.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;br/&gt;
                  org.apache.hadoop.mapred.TestJobCleanup&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4250//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4250//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4250//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4250//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13842813" author="jira.shegalov" created="Mon, 9 Dec 2013 00:28:52 +0000"  >&lt;p&gt;Note that &lt;br/&gt;
org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;br/&gt;
and &lt;br/&gt;
org.apache.hadoop.mapred.TestJobCleanup are unrelated to the patch. Trunk fails them even without the patch applied.&lt;/p&gt;</comment>
                            <comment id="13853014" author="jlowe" created="Thu, 19 Dec 2013 16:33:04 +0000"  >&lt;p&gt;Thanks, Gera!   This looks like nice addition and a practical workaround for the lack of log limiting/monitoring at the YARN level.&lt;/p&gt;

&lt;p&gt;Patch looks quite good overall, but I&apos;d really like to see the rolling log and log syncing changes as separate JIRAs/patches.  They&apos;re not related other than they both involve logging, and it would be cleaner to review and integrate them separately.&lt;/p&gt;

&lt;p&gt;Other comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;YarnChild has a now unused import of LogManager&lt;/li&gt;
	&lt;li&gt;TaskLog has a duplicate StringUtils import&lt;/li&gt;
	&lt;li&gt;Should it be yarn.app.mapreduce.container.log.backups or something like yarn.app.mapreduce.task.log.backups or yarn.app.mapreduce.task.container.log.backups?  The AM often runs in a container and therefore the former may be misinterpreted to also cover the AM&apos;s container.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13853388" author="jira.shegalov" created="Thu, 19 Dec 2013 22:19:06 +0000"  >&lt;p&gt;Attaching &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5672&quot; title=&quot;Provide optional RollingFileAppender for container log4j (syslog)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5672&quot;&gt;&lt;del&gt;MAPREDUCE-5672&lt;/del&gt;&lt;/a&gt;.v05.patch that deals just with RFA. Log sync issue is now part of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5693&quot; title=&quot;Restore MRv1 behavior for log flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5693&quot;&gt;&lt;del&gt;MAPREDUCE-5693&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13853397" author="jira.shegalov" created="Thu, 19 Dec 2013 22:31:29 +0000"  >&lt;p&gt;Thanks for reviewing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;! I separated the issues of RFA and log sync. Unused/duplicate imports removed.&lt;/p&gt;

&lt;p&gt;As for conf names, just wanted to clarify that RFA is supported for both MR-AM and regular task attempts:&lt;br/&gt;
1) yarn.app.mapreduce.am.log.backups &amp;gt; 0 activates the feature for the MR-AM&lt;br/&gt;
2) yarn.app.mapreduce.container.log.backups &amp;gt; 0 activates the the feature for  task attempts&lt;/p&gt;

&lt;p&gt;Now I see that 2) is ambiguous because it conceptually includes 1). &lt;/p&gt;

&lt;p&gt;How about &lt;br/&gt;
yarn.app.mapreduce.am.container.log.backups for 1) and&lt;br/&gt;
yarn.app.mapreduce.task.container.log.backups for 2) ?&lt;/p&gt;
</comment>
                            <comment id="13853510" author="hadoopqa" created="Fri, 20 Dec 2013 00:28:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619676/MAPREDUCE-5672.v05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619676/MAPREDUCE-5672.v05.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;                                      The following test timeouts occurred in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.mapreduce.lib.jobcontrol.TestMapReduceJobControl&lt;/p&gt;

&lt;p&gt;                                      The test build failed in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api &lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4275//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4275//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4275//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4275//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13864453" author="jlowe" created="Tue, 7 Jan 2014 17:56:13 +0000"  >&lt;p&gt;Thanks for updating the patch, looks a lot cleaner now that it&apos;s focused on just the RFA feature.&lt;/p&gt;

&lt;p&gt;As for the configuration property names, I think your proposed names are fine.  However it does bring up the question I should have asked earlier as to whether they really need to be separate settings.  Will one want to set the AM to be rolling but not the tasks or vice-versa?  Having two properties to configure is worse than just one if there&apos;s no real reason to configure them differently.  Or if there is a legitimate reason then one might wonder why tasks aren&apos;t separated into maps vs. reduces so they could be configured independently as well.  I&apos;d prefer there to be simply one property to set, but I&apos;m wondering if there&apos;s a use-case for having them separate that I&apos;m missing.&lt;/p&gt;</comment>
                            <comment id="13864828" author="jira.shegalov" created="Tue, 7 Jan 2014 23:00:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;, thanks for the feedback. I removed the dedicated conf for MR-AM from this patch, and added some doc to mapred-default.xml. &lt;/p&gt;

&lt;p&gt;The point I would make for a dedicated conf for MR-AM is that there are much less AM containers than MR task attempt containers. You might be interested in always being able to see the full job in progress log,  but you would be fine with keeping just tails of task attempt logs. In MRv1, the job  log is in JT and would not be affected by mapreduce.task.userlog.limit.kb. However, since there is no dedicated limit.kb for AM (though it is certainly not userlog), this might be worth another JIRA dealing with both settings.&lt;/p&gt;</comment>
                            <comment id="13864930" author="hadoopqa" created="Wed, 8 Jan 2014 00:53:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621875/MAPREDUCE-5672.v06.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621875/MAPREDUCE-5672.v06.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The test build failed in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api &lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4305//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4305//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4305//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4305//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13867188" author="jlowe" created="Thu, 9 Jan 2014 22:32:34 +0000"  >&lt;p&gt;Thanks for the explanation, Gera.  Originally I was thinking this would be used to set relatively large limits to keep the entirety of most reasonable logs but avoid having runaway logging fill disks and cause troubles that way.  However I can see a lot of utility in tuning tasks logs to something relatively short (e.g.: to reduce log aggregation storage pressure or retain more non-aggregated logs on nodes) but still wanting to see the entirety (or at least a lot more) of the AM log in case there were issues early on in the job that only manifested much later.&lt;/p&gt;

&lt;p&gt;You&apos;ve convinced me that these really should be separately tunable.  I took the liberty of updating the latest patch to put back in the AM-specific config, using the proposed name from your earlier comment.  I also fixed a bug in the previous patch where the code expected the property to be yarn.app.mapreduce.container.log.backups but mapred-default.xml documented yarn.app.mapreduce.task.container.log.backups.  The code now uses the latter for tasks and yarn.app.mapreduce.am.container.log.backups for the AM.&lt;/p&gt;</comment>
                            <comment id="13867206" author="jira.shegalov" created="Thu, 9 Jan 2014 22:41:58 +0000"  >&lt;p&gt;Jason, thanks for taking the &quot;liberty&quot; and the time to fix the patch.  &lt;/p&gt;</comment>
                            <comment id="13867238" author="jlowe" created="Thu, 9 Jan 2014 23:06:25 +0000"  >&lt;p&gt;Well, I felt bad that you spent time combining the properties just as I started to understand why it can be important to leave them separated. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Apologies for not seeing it sooner.&lt;/p&gt;</comment>
                            <comment id="13867341" author="hadoopqa" created="Fri, 10 Jan 2014 00:38:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622271/MAPREDUCE-5672.v07.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622271/MAPREDUCE-5672.v07.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The test build failed in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api &lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4311//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4311//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4311//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4311//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13867374" author="jira.shegalov" created="Fri, 10 Jan 2014 01:05:20 +0000"  >&lt;p&gt;Jason, I&apos;ll take it from here wrt test failures.&lt;/p&gt;</comment>
                            <comment id="13869304" author="jira.shegalov" created="Mon, 13 Jan 2014 05:46:03 +0000"  >&lt;p&gt;re-uploading v07 to rule out intermittent issues.&lt;/p&gt;</comment>
                            <comment id="13869335" author="hadoopqa" created="Mon, 13 Jan 2014 07:40:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622583/MAPREDUCE-5672.v07.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622583/MAPREDUCE-5672.v07.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4316//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4316//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4316//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4316//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13869837" author="jira.shegalov" created="Mon, 13 Jan 2014 19:02:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;, looks like v07 was already fine. Test build failure in hadoop-yarn-api is gone. And org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator is failing on trunk.&lt;/p&gt;</comment>
                            <comment id="13873898" author="jlowe" created="Thu, 16 Jan 2014 20:34:48 +0000"  >&lt;p&gt;+1 lgtm.  Will commit this later today.&lt;/p&gt;</comment>
                            <comment id="13874116" author="hudson" created="Thu, 16 Jan 2014 23:06:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5013 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5013/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5013/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5672&quot; title=&quot;Provide optional RollingFileAppender for container log4j (syslog)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5672&quot;&gt;&lt;del&gt;MAPREDUCE-5672&lt;/del&gt;&lt;/a&gt;. Provide optional RollingFileAppender for container log4j (syslog). Contributed by Gera Shegalov (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558948&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558948&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/MapReduceChildJVM.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/util/MRApps.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/MRJobConfig.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/YARNRunner.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestMRJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/ContainerRollingLogAppender.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/resources/container-log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13874130" author="jlowe" created="Thu, 16 Jan 2014 23:18:33 +0000"  >&lt;p&gt;Thanks, Gera!  I committed this to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13874668" author="hudson" created="Fri, 17 Jan 2014 11:10:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #455 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/455/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/455/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5672&quot; title=&quot;Provide optional RollingFileAppender for container log4j (syslog)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5672&quot;&gt;&lt;del&gt;MAPREDUCE-5672&lt;/del&gt;&lt;/a&gt;. Provide optional RollingFileAppender for container log4j (syslog). Contributed by Gera Shegalov (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558948&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558948&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/MapReduceChildJVM.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/util/MRApps.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/MRJobConfig.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/YARNRunner.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestMRJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/ContainerRollingLogAppender.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/resources/container-log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13874765" author="hudson" created="Fri, 17 Jan 2014 13:27:28 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1647 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1647/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1647/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5672&quot; title=&quot;Provide optional RollingFileAppender for container log4j (syslog)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5672&quot;&gt;&lt;del&gt;MAPREDUCE-5672&lt;/del&gt;&lt;/a&gt;. Provide optional RollingFileAppender for container log4j (syslog). Contributed by Gera Shegalov (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558948&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558948&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/MapReduceChildJVM.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/util/MRApps.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/MRJobConfig.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/YARNRunner.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestMRJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/ContainerRollingLogAppender.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/resources/container-log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13874776" author="hudson" created="Fri, 17 Jan 2014 13:28:50 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1672 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1672/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1672/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5672&quot; title=&quot;Provide optional RollingFileAppender for container log4j (syslog)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5672&quot;&gt;&lt;del&gt;MAPREDUCE-5672&lt;/del&gt;&lt;/a&gt;. Provide optional RollingFileAppender for container log4j (syslog). Contributed by Gera Shegalov (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558948&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558948&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/MapReduceChildJVM.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/util/MRApps.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/MRJobConfig.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/YARNRunner.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestMRJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/ContainerRollingLogAppender.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/resources/container-log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12666407">YARN-1130</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12666407">YARN-1130</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12617260" name="MAPREDUCE-5672.v01.patch" size="21035" author="jira.shegalov" created="Thu, 5 Dec 2013 23:27:30 +0000"/>
                            <attachment id="12617393" name="MAPREDUCE-5672.v02.patch" size="27032" author="jira.shegalov" created="Fri, 6 Dec 2013 13:33:46 +0000"/>
                            <attachment id="12617536" name="MAPREDUCE-5672.v03.patch" size="27117" author="jira.shegalov" created="Sat, 7 Dec 2013 03:12:15 +0000"/>
                            <attachment id="12617605" name="MAPREDUCE-5672.v04.patch" size="27376" author="jira.shegalov" created="Sun, 8 Dec 2013 03:04:38 +0000"/>
                            <attachment id="12619676" name="MAPREDUCE-5672.v05.patch" size="17758" author="jira.shegalov" created="Thu, 19 Dec 2013 22:19:06 +0000"/>
                            <attachment id="12621875" name="MAPREDUCE-5672.v06.patch" size="19281" author="jira.shegalov" created="Tue, 7 Jan 2014 23:00:03 +0000"/>
                            <attachment id="12622583" name="MAPREDUCE-5672.v07.patch" size="20434" author="jira.shegalov" created="Mon, 13 Jan 2014 05:46:03 +0000"/>
                            <attachment id="12622271" name="MAPREDUCE-5672.v07.patch" size="20434" author="jlowe" created="Thu, 9 Jan 2014 22:32:34 +0000"/>
                            <attachment id="12617258" name="Screen Shot 2013-12-05 at 3.21.02 PM.png" size="56882" author="jira.shegalov" created="Thu, 5 Dec 2013 23:24:21 +0000"/>
                            <attachment id="12617259" name="Screen Shot 2013-12-05 at 3.23.33 PM.png" size="325306" author="jira.shegalov" created="Thu, 5 Dec 2013 23:25:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Dec 2013 02:14:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5671] NaN can be created by client and assign to Progress</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5671</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;MapReduce should filter &quot;illegal&quot; progress values that do not fall into (0,1) interval when the progress value is given.&lt;/p&gt;

&lt;p&gt;If it is Float.NaN, Float.NEGATIVE_INFINITY, or smaller than 0: set progress to be 0;&lt;br/&gt;
If its is Float.POSITIVE_INFINITY or larger than 1: set progress to be 1;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682957">MAPREDUCE-5671</key>
            <summary>NaN can be created by client and assign to Progress</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="airbots">Chen He</assignee>
                                    <reporter username="airbots">Chen He</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Dec 2013 17:39:50 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:44 +0000</updated>
                                                            <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13875209" author="hadoopqa" created="Fri, 17 Jan 2014 20:02:19 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623712/MR-5671.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623712/MR-5671.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4326//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4326//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4326//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4326//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623712" name="MR-5671.patch" size="3416" author="airbots" created="Fri, 17 Jan 2014 19:17:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Jan 2014 20:02:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362219</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362221</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5670] CombineFileRecordReader should report progress when moving to the next file</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5670</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;If a combine split consists of many &quot;empty&quot; files (i.e.: no record found by the underlying record reader) then theoretically a task can timeout due to lack of reported progress.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682956">MAPREDUCE-5670</key>
            <summary>CombineFileRecordReader should report progress when moving to the next file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="airbots">Chen He</assignee>
                                    <reporter username="jlowe">Jason Lowe</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Dec 2013 17:38:23 +0000</created>
                <updated>Sat, 25 Jan 2014 06:54:03 +0000</updated>
                                            <version>0.23.9</version>
                                                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13840323" author="jlowe" created="Thu, 5 Dec 2013 17:42:36 +0000"  >&lt;p&gt;CombineFileRecordReader.initNextRecordReader should report progress as it moves to the next file to indicate that the task is making progress even though no records are being read.  Some input formats already report progress when their record reader is created, but adding a progress indicator here will catch the cases where the underlying record reader does not report progress upon construction.&lt;/p&gt;</comment>
                            <comment id="13868331" author="hadoopqa" created="Fri, 10 Jan 2014 21:37:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622442/MR-5670.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622442/MR-5670.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;      &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 1547 javac compiler warnings (more than the trunk&apos;s current 1545 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4313//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4313//testReport/&lt;/a&gt;&lt;br/&gt;
Javac warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4313//artifact/trunk/patchprocess/diffJavacWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4313//artifact/trunk/patchprocess/diffJavacWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4313//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4313//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13868530" author="hadoopqa" created="Sat, 11 Jan 2014 00:35:49 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622452/MR-5670.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622452/MR-5670.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4314//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4314//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4314//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4314//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13877847" author="jlowe" created="Tue, 21 Jan 2014 20:55:47 +0000"  >&lt;p&gt;Thanks for picking this up, Chen!  Comments on the patch:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;org.apache.hadoop.mapred.lib.db.TestCombineFileRecordReader is in the wrong package, should be org.apache.hadoop.mapred.lib.TestCombineFileRecordReader&lt;/li&gt;
	&lt;li&gt;There&apos;s an unused Mockito import in one of the tests, and it seems like Mockito could save quite a bit of test code.  A mocked reporter with verify(mockReporter).progress() to verify the progress method was called would accomplish the same with much less code.  Did that not work for some reason?  The unused import implies that approach was probably attempted, so curious if that&apos;s the case why it didn&apos;t work out.&lt;/li&gt;
	&lt;li&gt;The original bug involves a bunch of empty files, so the test doesn&apos;t need to write any data to the test files and all the lengths should be zero.  Bonus points if the test calls next() on the record reader, verifies it returns false and verifies progress was called the correct number of times.&lt;/li&gt;
	&lt;li&gt;There&apos;s an unnecessary try...finally block in testInitNextRecordReader&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13879220" author="airbots" created="Wed, 22 Jan 2014 21:44:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;&lt;br/&gt;
  I followed your suggestion and make corresponding changes in the v2 patch:&lt;/p&gt;

   &lt;blockquote&gt;&lt;p&gt; org.apache.hadoop.mapred.lib.db.TestCombineFileRecordReader is in the wrong package, should be org.apache.hadoop.mapred.lib.TestCombineFileRecordReader &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;    TestCombineFileRecordReader has been moved under org.apache.hadoop.mapred.lib;&lt;/p&gt;
    &lt;blockquote&gt;&lt;p&gt;There&apos;s an unused Mockito import in one of the tests, and it seems like Mockito could save quite a bit of test code. A mocked reporter with verify(mockReporter).progress() to verify the progress method was called would accomplish the same with much less code. Did that not work for some reason? The unused import implies that approach was probably attempted, so curious if that&apos;s the case why it didn&apos;t work out. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;    Mockito is used and previous Reporter4Test class has been removed.&lt;/p&gt;
    &lt;blockquote&gt;&lt;p&gt; The original bug involves a bunch of empty files, so the test doesn&apos;t need to write any data to the test files and all the lengths should be zero. Bonus points if the test calls next() on the record reader, verifies it returns false and verifies progress was called the correct number of times.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;     The v2 patch will verify whether reporter.progress() is called right after the instantiation of CombineFileRecordReader. I also created 3 empty files in test directory to verify whether reporter.progress() is called exactly 3 times after processing these 3 empty files. These 3 files will be recycled after test is done.   &lt;/p&gt;
   &lt;blockquote&gt;&lt;p&gt; There&apos;s an unnecessary try...finally block in testInitNextRecordReader &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;     &quot;try...finally&quot; block is used for recycling files created during the test process.&lt;/p&gt;</comment>
                            <comment id="13879313" author="hadoopqa" created="Wed, 22 Jan 2014 22:52:58 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12624440/MR-5670v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12624440/MR-5670v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4335//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4335//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4335//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4335//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13880521" author="jlowe" created="Thu, 23 Jan 2014 23:47:53 +0000"  >&lt;p&gt;Thanks for updating the patch, looking better.  Couple of things on the latest patch:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;We should not loop for the record reader next() to return false.  Since we explicitly set up a bunch of empty files it should return false with only one invocation (we should assert for this), and progress should still be called a total of 3 times.  If it somehow doesn&apos;t return false in the first invocation then something is wrong, and continuing to loop is inviting a hung test if for some reason it never does return false. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;outDir should be unique between the two tests or we risk having them collide if the tests are run in parallel.  I suggest something like TestCombineFileRecordReader.class.getName() which will be different between the two tests.&lt;/li&gt;
	&lt;li&gt;Rather than loop to explicitly delete the individual files, we should just call FileUtil.fullyDelete on outDir.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13881338" author="airbots" created="Fri, 24 Jan 2014 19:26:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Patch has been updated following your suggestion.&lt;/p&gt;</comment>
                            <comment id="13881722" author="hadoopqa" created="Sat, 25 Jan 2014 06:54:03 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625094/MR-5670v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625094/MR-5670v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4338//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4338//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4338//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4338//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625094" name="MR-5670v3.patch" size="10151" author="airbots" created="Fri, 24 Jan 2014 19:24:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jan 2014 21:37:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362218</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362220</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12324663</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5668] Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError: Found class org.apache.hadoop.mapreduce.JobContext, but interface was expected</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5668</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;hi&lt;br/&gt;
 pl help&lt;/p&gt;

&lt;p&gt;i have wrote this code , at runtime i got this issue.&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError: Found class org.apache.hadoop.mapreduce.JobContext, but interface was expected&lt;br/&gt;
	at org.apache.hadoop.mapreduce.lib.input.CombineFileInputFormat.getSplits(CombineFileInputFormat.java:170)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:885)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:779)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Job.submit(Job.java:432)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:447)&lt;br/&gt;
	at MultiFileWordCount.run(MultiFileWordCount.java:395)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)&lt;br/&gt;
	at MultiFileWordCount.main(MultiFileWordCount.java:401)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
hduser@localhost:~$ &lt;/p&gt;


&lt;p&gt;I have attached the code.&lt;/p&gt;

&lt;p&gt;import java.io.DataInput;  &lt;/p&gt;

&lt;p&gt;import java.io.DataOutput;  &lt;/p&gt;

&lt;p&gt;import java.io.IOException;  &lt;/p&gt;

&lt;p&gt;import java.util.StringTokenizer;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.conf.Configured;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.fs.FSDataInputStream;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.fs.FileSystem;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.fs.Path;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.io.IntWritable;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.io.Text;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.io.WritableComparable;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.InputSplit;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.Job;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.Mapper;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.RecordReader;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.TaskAttemptContext;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.input.CombineFileInputFormat;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.input.CombineFileRecordReader;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.input.CombineFileSplit;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.reduce.IntSumReducer;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.util.LineReader;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.util.Tool;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.util.ToolRunner;  &lt;/p&gt;


&lt;p&gt; /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;MultiFileWordCount is an example to demonstrate the usage of&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;MultiFileInputFormat. This examples counts the occurrences of&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;words in the text files under the given input directory.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  */ &lt;/p&gt;

&lt;p&gt;public class MultiFileWordCount extends Configured implements Tool {  &lt;/p&gt;

&lt;p&gt;   /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;This record keeps &amp;lt;filename,offset&amp;gt; pairs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    */ &lt;/p&gt;

&lt;p&gt;public static class WordOffset implements WritableComparable {  &lt;/p&gt;

&lt;p&gt;   private long offset;  &lt;/p&gt;

&lt;p&gt;   private String fileName;  &lt;/p&gt;

&lt;p&gt;   public void readFields(DataInput in) throws IOException &lt;/p&gt;
{  

      this.offset = in.readLong();  

      this.fileName = Text.readString(in);  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     public void write(DataOutput out) throws IOException &lt;/p&gt;
{  

       out.writeLong(offset);  

       Text.writeString(out, fileName);  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;      public int compareTo(Object o) {  &lt;/p&gt;

&lt;p&gt;       WordOffset that = (WordOffset)o;  &lt;/p&gt;

&lt;p&gt;       int f = this.fileName.compareTo(that.fileName);  &lt;/p&gt;

&lt;p&gt;       if(f == 0) &lt;/p&gt;
{  

         return (int)Math.signum((double)(this.offset - that.offset));  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       return f;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;     @Override &lt;/p&gt;

&lt;p&gt;     public boolean equals(Object obj) &lt;/p&gt;
{  

       if(obj instanceof WordOffset)  

       return this.compareTo(obj) == 0;  

       return false;  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     @Override &lt;/p&gt;

&lt;p&gt;     public int hashCode() &lt;/p&gt;
{  

     assert false : &quot;hashCode not designed&quot;;  

     return 42; //an arbitrary constant  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;

&lt;p&gt;   /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;To use 
{@link CombineFileInputFormat}
&lt;p&gt;, one should extend it, to return a&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;(custom) 
{@link RecordReader}
&lt;p&gt;. CombineFileInputFormat uses&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;{@link CombineFileSplit}
&lt;p&gt;s.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    */ &lt;/p&gt;

&lt;p&gt;   public static class MyInputFormat   &lt;/p&gt;

&lt;p&gt;     extends CombineFileInputFormat  {  &lt;/p&gt;

&lt;p&gt;     public RecordReader createRecordReader(InputSplit split,  &lt;/p&gt;

&lt;p&gt;      TaskAttemptContext context) throws IOException &lt;/p&gt;
{  

       return new CombineFileRecordReader(  

         (CombineFileSplit)split, context, CombineFileLineRecordReader.class);  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;


&lt;p&gt;   /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;RecordReader is responsible from extracting records from a chunk&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;of the CombineFileSplit.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    */ &lt;/p&gt;

&lt;p&gt;   public static class CombineFileLineRecordReader   &lt;/p&gt;

&lt;p&gt;     extends RecordReader {  &lt;/p&gt;

&lt;p&gt;     private long startOffset; //offset of the chunk;  &lt;/p&gt;

&lt;p&gt;     private long end; //end of the chunk;  &lt;/p&gt;

&lt;p&gt;     private long pos; // current pos   &lt;/p&gt;

&lt;p&gt;     private FileSystem fs;  &lt;/p&gt;

&lt;p&gt;     private Path path;  &lt;/p&gt;

&lt;p&gt;     private WordOffset key;  &lt;/p&gt;

&lt;p&gt;     private Text value;  &lt;/p&gt;

&lt;p&gt;     private FSDataInputStream fileIn;  &lt;/p&gt;

&lt;p&gt;     private LineReader reader;  &lt;/p&gt;

&lt;p&gt;     public CombineFileLineRecordReader(CombineFileSplit split,  &lt;/p&gt;

&lt;p&gt;         TaskAttemptContext context, Integer index) throws IOException {  &lt;/p&gt;

&lt;p&gt;       this.path = split.getPath(index);  &lt;/p&gt;

&lt;p&gt;       fs = this.path.getFileSystem(context.getConfiguration());  &lt;/p&gt;

&lt;p&gt;       this.startOffset = split.getOffset(index);  &lt;/p&gt;

&lt;p&gt;       this.end = startOffset + split.getLength(index);  &lt;/p&gt;

&lt;p&gt;       boolean skipFirstLine = false;  &lt;/p&gt;

&lt;p&gt;       //open the file  &lt;/p&gt;

&lt;p&gt;       fileIn = fs.open(path);  &lt;/p&gt;

&lt;p&gt;       if (startOffset != 0) &lt;/p&gt;
{  

       skipFirstLine = true;  

         --startOffset;  

         fileIn.seek(startOffset);  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       reader = new LineReader(fileIn);  &lt;/p&gt;

&lt;p&gt;       if (skipFirstLine) &lt;/p&gt;
{  // skip first line and re-establish &quot;startOffset&quot;.  

        startOffset += reader.readLine(new Text(), 0,  

         (int)Math.min((long)Integer.MAX_VALUE, end - startOffset));  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       this.pos = startOffset;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;     public void initialize(InputSplit split, TaskAttemptContext context)  &lt;/p&gt;

&lt;p&gt;        throws IOException, InterruptedException {  &lt;/p&gt;

&lt;p&gt;     }&lt;br/&gt;
     public void close() throws IOException { }  &lt;/p&gt;

&lt;p&gt;     public float getProgress() throws IOException {  &lt;/p&gt;

&lt;p&gt;       if (startOffset == end) &lt;/p&gt;
{  

        return 0.0f;  

       }
&lt;p&gt; else &lt;/p&gt;
{  

       return Math.min(1.0f, (pos - startOffset) / (float)(end - startOffset));  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;    public boolean nextKeyValue() throws IOException {  &lt;/p&gt;

&lt;p&gt;       if (key == null) &lt;/p&gt;
{  

         key = new WordOffset();  

         key.fileName = path.getName();  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       key.offset = pos;  &lt;/p&gt;

&lt;p&gt;       if (value == null) &lt;/p&gt;
{  

       value = new Text();  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       int newSize = 0;  &lt;/p&gt;

&lt;p&gt;       if (pos &amp;lt; end) &lt;/p&gt;
{  

        newSize = reader.readLine(value);  

        pos += newSize;  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       if (newSize == 0) &lt;/p&gt;
{  

        key = null;  

        value = null;  

        return false;  

       }
&lt;p&gt; else &lt;/p&gt;
{  

        return true;  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;         public WordOffset getCurrentKey()   &lt;/p&gt;

&lt;p&gt;         throws IOException, InterruptedException &lt;/p&gt;
{  

          return key;  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;         public Text getCurrentValue() throws IOException, InterruptedException &lt;/p&gt;
{  

         return value;  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;


&lt;p&gt;   /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;This Mapper is similar to the one in 
{@link WordCount.MapClass}
&lt;p&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    */ &lt;/p&gt;

&lt;p&gt;   public static class MapClass extends  &lt;/p&gt;

&lt;p&gt;       Mapper {  &lt;/p&gt;

&lt;p&gt;     private final static IntWritable one = new IntWritable(1);  &lt;/p&gt;

&lt;p&gt;     private Text word = new Text();  &lt;/p&gt;

&lt;p&gt;     public void map(WordOffset key, Text value, Context context)  &lt;/p&gt;

&lt;p&gt;         throws IOException, InterruptedException {  &lt;/p&gt;

&lt;p&gt;       String line = value.toString();  &lt;/p&gt;

&lt;p&gt;       StringTokenizer itr = new StringTokenizer(line);  &lt;/p&gt;

&lt;p&gt;       while (itr.hasMoreTokens()) &lt;/p&gt;
{  

         word.set(itr.nextToken());  

         context.write(word, one);  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;

&lt;p&gt;   private void printUsage() &lt;/p&gt;
{  

     System.out.println(&quot;Usage : multifilewc  &quot; );  

   }
&lt;p&gt;  &lt;br/&gt;
   public int run(String[] args) throws Exception {  &lt;/p&gt;

&lt;p&gt;     if(args.length &amp;lt; 2) &lt;/p&gt;
{  

       printUsage();  

       return 2;  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     Job job = new Job(getConf());  &lt;/p&gt;

&lt;p&gt;     job.setJobName(&quot;MultiFileWordCount&quot;);  &lt;/p&gt;

&lt;p&gt;     job.setJarByClass(MultiFileWordCount.class);  &lt;/p&gt;

&lt;p&gt;     //set the InputFormat of the job to our InputFormat  &lt;/p&gt;

&lt;p&gt;     job.setInputFormatClass(MyInputFormat.class);  &lt;/p&gt;

&lt;p&gt;     // the keys are words (strings)  &lt;/p&gt;

&lt;p&gt;     job.setOutputKeyClass(Text.class);  &lt;/p&gt;

&lt;p&gt;     // the values are counts (ints)  &lt;/p&gt;

&lt;p&gt;     job.setOutputValueClass(IntWritable.class);  &lt;/p&gt;

&lt;p&gt;     //use the defined mapper  &lt;/p&gt;

&lt;p&gt;     job.setMapperClass(MapClass.class);  &lt;/p&gt;

&lt;p&gt;     //use the WordCount Reducer  &lt;/p&gt;

&lt;p&gt;     job.setCombinerClass(IntSumReducer.class);  &lt;/p&gt;

&lt;p&gt;     job.setReducerClass(IntSumReducer.class);  &lt;/p&gt;


&lt;p&gt;     FileInputFormat.addInputPaths(job, args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);  &lt;/p&gt;

&lt;p&gt;     FileOutputFormat.setOutputPath(job, new Path(args&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;));  &lt;/p&gt;

&lt;p&gt;     return job.waitForCompletion(true) ? 0 : 1;  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;

&lt;p&gt;   public static void main(String[] args) throws Exception &lt;/p&gt;
{  

     int ret = ToolRunner.run(new MultiFileWordCount(), args);  

     System.exit(ret);  

   }
&lt;p&gt;  &lt;/p&gt;


</description>
                <environment></environment>
        <key id="12682650">MAPREDUCE-5668</key>
            <summary>Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError: Found class org.apache.hadoop.mapreduce.JobContext, but interface was expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ranjini rathinam">ranjini</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Dec 2013 09:51:02 +0000</created>
                <updated>Wed, 4 Dec 2013 19:29:52 +0000</updated>
                            <resolved>Wed, 4 Dec 2013 14:38:46 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13838917" author="jlowe" created="Wed, 4 Dec 2013 14:17:09 +0000"  >&lt;p&gt;This is something more appropriately asked on the &lt;a href=&quot;http://hadoop.apache.org/mailing_lists.html#User&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;user@ mailing list&lt;/a&gt;.  JIRAs are for reporting bugs against Hadoop, and this does not appear to be a bug.  It looks like the code has been compiled against a 2.x release but then run against a 1.x release, as org.apache.hadoop.mapreduce.JobContext changed from a class to an interface between the 1.x and 2.x releases.&lt;/p&gt;

&lt;p&gt;The org.apache.hadoop.mapreduce.* API is only guaranteed to be source, not binary, compatible between the 1.x and 2.x releases.   See the &lt;a href=&quot;http://hadoop.apache.org/docs/r2.2.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduce_Compatibility_Hadoop1_Hadoop2.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;binary compatibility document&lt;/a&gt; for more details.  Also we cannot generally support compiling against a later release and then running on an earlier release, because new APIs could have been added and would not appear in the older release.&lt;/p&gt;</comment>
                            <comment id="13838934" author="jlowe" created="Wed, 4 Dec 2013 14:38:46 +0000"  >&lt;p&gt;Closing this as invalid based on the evidence from &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5667&quot; title=&quot;Error in runtime in mapreduce code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5667&quot;&gt;&lt;del&gt;MAPREDUCE-5667&lt;/del&gt;&lt;/a&gt;.  The code is being compiled against a later release but then run on an earlier release.  The code should be compiled against the Hadoop release being used or an earlier release, keeping in mind the binary compatibility document guidelines.&lt;/p&gt;</comment>
                            <comment id="13839249" author="stevel@apache.org" created="Wed, 4 Dec 2013 19:29:52 +0000"  >&lt;p&gt;See also: &lt;a href=&quot;http://wiki.apache.org/hadoop/InvalidJiraIssues&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/InvalidJiraIssues&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We aren&apos;t going to fix these problems as they aren&apos;t bugs in Hadoop, they are because you are running an out of date version and everytime something doesn&apos;t work coming to JIRA and asking for help. That help is not going to happen, all that will is that your issues will get ignored in future, which is dangerous if you ever come across a real bug &lt;b&gt;in an up to date version of Hadoop&lt;/b&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;upgrade to Hadoop 1.2 or 2.2&lt;/li&gt;
	&lt;li&gt;ask the user group if you encounter problems on these versions&lt;/li&gt;
	&lt;li&gt;if that isn&apos;t enough, look at who offers support for Hadoop and consider whether it is something you are prepared to pay for. If not, the source code is there for you to debug your problems&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Dec 2013 14:17:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5667] Error in runtime in mapreduce code</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5667</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;While executing the code taking input xml file in mapreduce.&lt;/p&gt;

&lt;p&gt;The error occurred is&lt;br/&gt;
Error: java.lang.ClassNotFoundException: org.jdom.input.SAXBuilder&lt;/p&gt;

&lt;p&gt;Error: java.lang.ClassNotFoundException: org.jdom.JDOMException&lt;/p&gt;

&lt;p&gt;I am using hadoop 0.20 and java 1.6&lt;/p&gt;

&lt;p&gt;I used jdom-1.0.jar but still error coming.&lt;/p&gt;

&lt;p&gt;Please help this issue suggest what version jar should i use.&lt;/p&gt;

&lt;p&gt;Thanks in advance.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12682632">MAPREDUCE-5667</key>
            <summary>Error in runtime in mapreduce code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ranjini rathinam">ranjini</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Dec 2013 07:29:07 +0000</created>
                <updated>Wed, 4 Dec 2013 09:02:03 +0000</updated>
                            <resolved>Wed, 4 Dec 2013 09:02:03 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13838751" author="stevel@apache.org" created="Wed, 4 Dec 2013 09:01:42 +0000"  >&lt;p&gt;Duplicate of the &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5664&quot; title=&quot;java.lang.RuntimeException: javax.xml.parsers.ParserConfigurationException:&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5664&quot;&gt;&lt;del&gt;MAPREDUCE-5664&lt;/del&gt;&lt;/a&gt; issue you filed yesterday. Please don&apos;t file multiple JIRAs. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12682350">MAPREDUCE-5664</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Dec 2013 09:01:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361894</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5666] org/apache/hadoop/mapreduce/lib/input/FileInputFormat.java(org/apache/hadoop/mapreduce/lib/input:FileInputFormat.java):cannot find symbol</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5666</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;hi &lt;/p&gt;

&lt;p&gt;I have written the below code , and facing the issue. i am using hadoop 0.20 vesion and java 1.6 the issue is &lt;/p&gt;

&lt;p&gt;org/apache/hadoop/mapreduce/lib/input/FileInputFormat.java(org/apache/hadoop/mapreduce/lib/input:FileInputFormat.java):232: cannot find symbol&lt;br/&gt;
symbol  : method isDirectory()&lt;br/&gt;
location: class org.apache.hadoop.fs.FileStatus&lt;br/&gt;
          if (globStat.isDirectory()) &lt;/p&gt;
{
                      ^
org/apache/hadoop/mapreduce/lib/output/FileOutputCommitter.java(org/apache/hadoop/mapreduce/lib/output:FileOutputCommitter.java):208: cannot find symbol
symbol  : method isDirectory()
location: class org.apache.hadoop.fs.FileStatus
    }
&lt;p&gt; else if(fs.getFileStatus(taskOutput).isDirectory()) {&lt;br/&gt;
                                          ^&lt;br/&gt;
org/apache/hadoop/mapred/JobConf.java(org/apache/hadoop/mapred:JobConf.java):433: cannot find symbol&lt;br/&gt;
symbol  : method getPattern(java.lang.String,java.util.regex.Pattern)&lt;br/&gt;
location: class org.apache.hadoop.mapred.JobConf&lt;br/&gt;
    return getPattern(JobContext.JAR_UNPACK_PATTERN, UNPACK_JAR_PATTERN_DEFAULT);&lt;br/&gt;
           ^&lt;br/&gt;
org/apache/hadoop/mapred/JobConf.java(org/apache/hadoop/mapred:JobConf.java):450: cannot find symbol&lt;br/&gt;
symbol  : method getTrimmedStrings(java.lang.String)&lt;br/&gt;
location: class org.apache.hadoop.mapred.JobConf&lt;br/&gt;
    return getTrimmedStrings(MRConfig.LOCAL_DIR);&lt;br/&gt;
           ^&lt;br/&gt;
org/apache/hadoop/mapred/FileInputFormat.java(org/apache/hadoop/mapred:FileInputFormat.java):165: cannot find symbol&lt;br/&gt;
symbol  : method isDirectory()&lt;br/&gt;
location: class org.apache.hadoop.fs.FileStatus&lt;br/&gt;
      if (stat.isDirectory()) {&lt;br/&gt;
              ^&lt;br/&gt;
org/apache/hadoop/mapred/FileInputFormat.java(org/apache/hadoop/mapred:FileInputFormat.java):215: cannot find symbol&lt;br/&gt;
symbol  : method isDirectory()&lt;br/&gt;
location: class org.apache.hadoop.fs.FileStatus&lt;br/&gt;
          if (globStat.isDirectory()) {&lt;br/&gt;
                      ^&lt;br/&gt;
org/apache/hadoop/mapred/FileInputFormat.java(org/apache/hadoop/mapred:FileInputFormat.java):218: cannot find symbol&lt;br/&gt;
symbol  : method isDirectory()&lt;br/&gt;
location: class org.apache.hadoop.fs.FileStatus&lt;br/&gt;
              if (recursive &amp;amp;&amp;amp; stat.isDirectory()) {&lt;br/&gt;
                                   ^&lt;br/&gt;
org/apache/hadoop/mapred/FileInputFormat.java(org/apache/hadoop/mapred:FileInputFormat.java):258: cannot find symbol&lt;br/&gt;
symbol  : method isDirectory()&lt;br/&gt;
location: class org.apache.hadoop.fs.FileStatus&lt;br/&gt;
      if (file.isDirectory()) &lt;/p&gt;
{
              ^
org/apache/hadoop/mapred/FileOutputCommitter.java(org/apache/hadoop/mapred:FileOutputCommitter.java):166: cannot find symbol
symbol  : method isDirectory()
location: class org.apache.hadoop.fs.FileStatus
    }
&lt;p&gt; else if(fs.getFileStatus(taskOutput).isDirectory()) {&lt;br/&gt;
                                          ^&lt;br/&gt;
org/apache/hadoop/mapred/LineRecordReader.java(org/apache/hadoop/mapred:LineRecordReader.java):100: incompatible types&lt;br/&gt;
found   : org.apache.hadoop.io.compress.SplitCompressionInputStream&lt;br/&gt;
required: org.apache.hadoop.fs.Seekable&lt;br/&gt;
        filePosition = cIn; // take pos from compressed stream&lt;br/&gt;
                       ^&lt;br/&gt;
org/apache/hadoop/mapreduce/lib/input/LineRecordReader.java(org/apache/hadoop/mapreduce/lib/input:LineRecordReader.java):98: incompatible types&lt;br/&gt;
found   : org.apache.hadoop.io.compress.SplitCompressionInputStream&lt;br/&gt;
required: org.apache.hadoop.fs.Seekable&lt;br/&gt;
        filePosition = cIn;&lt;/p&gt;



&lt;p&gt;I have attached the code &lt;/p&gt;

&lt;p&gt;import java.io.DataInput;  &lt;/p&gt;

&lt;p&gt;import java.io.DataOutput;  &lt;/p&gt;

&lt;p&gt;import java.io.IOException;  &lt;/p&gt;

&lt;p&gt;import java.util.StringTokenizer;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.conf.Configured;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.fs.FSDataInputStream;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.fs.FileSystem;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.fs.Path;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.io.IntWritable;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.io.Text;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.io.WritableComparable;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.InputSplit;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.Job;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.Mapper;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.RecordReader;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.TaskAttemptContext;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.input.CombineFileInputFormat;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.input.CombineFileRecordReader;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.input.CombineFileSplit;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.mapreduce.lib.reduce.IntSumReducer;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.util.LineReader;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.util.Tool;  &lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.util.ToolRunner;  &lt;/p&gt;


&lt;p&gt; /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;MultiFileWordCount is an example to demonstrate the usage of&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;MultiFileInputFormat. This examples counts the occurrences of&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;words in the text files under the given input directory.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  */ &lt;/p&gt;

&lt;p&gt;public class MultiFileWordCount extends Configured implements Tool {  &lt;/p&gt;

&lt;p&gt;   /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;This record keeps &amp;lt;filename,offset&amp;gt; pairs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    */ &lt;/p&gt;

&lt;p&gt;public static class WordOffset implements WritableComparable {  &lt;/p&gt;

&lt;p&gt;   private long offset;  &lt;/p&gt;

&lt;p&gt;   private String fileName;  &lt;/p&gt;

&lt;p&gt;   public void readFields(DataInput in) throws IOException &lt;/p&gt;
{  

      this.offset = in.readLong();  

      this.fileName = Text.readString(in);  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     public void write(DataOutput out) throws IOException &lt;/p&gt;
{  

       out.writeLong(offset);  

       Text.writeString(out, fileName);  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;      public int compareTo(Object o) {  &lt;/p&gt;

&lt;p&gt;       WordOffset that = (WordOffset)o;  &lt;/p&gt;

&lt;p&gt;       int f = this.fileName.compareTo(that.fileName);  &lt;/p&gt;

&lt;p&gt;       if(f == 0) &lt;/p&gt;
{  

         return (int)Math.signum((double)(this.offset - that.offset));  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       return f;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;     @Override &lt;/p&gt;

&lt;p&gt;     public boolean equals(Object obj) &lt;/p&gt;
{  

       if(obj instanceof WordOffset)  

       return this.compareTo(obj) == 0;  

       return false;  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     @Override &lt;/p&gt;

&lt;p&gt;     public int hashCode() &lt;/p&gt;
{  

     assert false : &quot;hashCode not designed&quot;;  

     return 42; //an arbitrary constant  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;

&lt;p&gt;   /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;To use 
{@link CombineFileInputFormat}
&lt;p&gt;, one should extend it, to return a&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;(custom) 
{@link RecordReader}
&lt;p&gt;. CombineFileInputFormat uses&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;{@link CombineFileSplit}
&lt;p&gt;s.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    */ &lt;/p&gt;

&lt;p&gt;   public static class MyInputFormat   &lt;/p&gt;

&lt;p&gt;     extends CombineFileInputFormat  {  &lt;/p&gt;

&lt;p&gt;     public RecordReader createRecordReader(InputSplit split,  &lt;/p&gt;

&lt;p&gt;      TaskAttemptContext context) throws IOException &lt;/p&gt;
{  

       return new CombineFileRecordReader(  

         (CombineFileSplit)split, context, CombineFileLineRecordReader.class);  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;


&lt;p&gt;   /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;RecordReader is responsible from extracting records from a chunk&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;of the CombineFileSplit.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    */ &lt;/p&gt;

&lt;p&gt;   public static class CombineFileLineRecordReader   &lt;/p&gt;

&lt;p&gt;     extends RecordReader {  &lt;/p&gt;

&lt;p&gt;     private long startOffset; //offset of the chunk;  &lt;/p&gt;

&lt;p&gt;     private long end; //end of the chunk;  &lt;/p&gt;

&lt;p&gt;     private long pos; // current pos   &lt;/p&gt;

&lt;p&gt;     private FileSystem fs;  &lt;/p&gt;

&lt;p&gt;     private Path path;  &lt;/p&gt;

&lt;p&gt;     private WordOffset key;  &lt;/p&gt;

&lt;p&gt;     private Text value;  &lt;/p&gt;

&lt;p&gt;     private FSDataInputStream fileIn;  &lt;/p&gt;

&lt;p&gt;     private LineReader reader;  &lt;/p&gt;

&lt;p&gt;     public CombineFileLineRecordReader(CombineFileSplit split,  &lt;/p&gt;

&lt;p&gt;         TaskAttemptContext context, Integer index) throws IOException {  &lt;/p&gt;

&lt;p&gt;       this.path = split.getPath(index);  &lt;/p&gt;

&lt;p&gt;       fs = this.path.getFileSystem(context.getConfiguration());  &lt;/p&gt;

&lt;p&gt;       this.startOffset = split.getOffset(index);  &lt;/p&gt;

&lt;p&gt;       this.end = startOffset + split.getLength(index);  &lt;/p&gt;

&lt;p&gt;       boolean skipFirstLine = false;  &lt;/p&gt;

&lt;p&gt;       //open the file  &lt;/p&gt;

&lt;p&gt;       fileIn = fs.open(path);  &lt;/p&gt;

&lt;p&gt;       if (startOffset != 0) &lt;/p&gt;
{  

       skipFirstLine = true;  

         --startOffset;  

         fileIn.seek(startOffset);  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       reader = new LineReader(fileIn);  &lt;/p&gt;

&lt;p&gt;       if (skipFirstLine) &lt;/p&gt;
{  // skip first line and re-establish &quot;startOffset&quot;.  

        startOffset += reader.readLine(new Text(), 0,  

         (int)Math.min((long)Integer.MAX_VALUE, end - startOffset));  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       this.pos = startOffset;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;     public void initialize(InputSplit split, TaskAttemptContext context)  &lt;/p&gt;

&lt;p&gt;        throws IOException, InterruptedException {  &lt;/p&gt;

&lt;p&gt;     }&lt;br/&gt;
     public void close() throws IOException { }  &lt;/p&gt;

&lt;p&gt;     public float getProgress() throws IOException {  &lt;/p&gt;

&lt;p&gt;       if (startOffset == end) &lt;/p&gt;
{  

        return 0.0f;  

       }
&lt;p&gt; else &lt;/p&gt;
{  

       return Math.min(1.0f, (pos - startOffset) / (float)(end - startOffset));  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;    public boolean nextKeyValue() throws IOException {  &lt;/p&gt;

&lt;p&gt;       if (key == null) &lt;/p&gt;
{  

         key = new WordOffset();  

         key.fileName = path.getName();  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       key.offset = pos;  &lt;/p&gt;

&lt;p&gt;       if (value == null) &lt;/p&gt;
{  

       value = new Text();  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       int newSize = 0;  &lt;/p&gt;

&lt;p&gt;       if (pos &amp;lt; end) &lt;/p&gt;
{  

        newSize = reader.readLine(value);  

        pos += newSize;  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;       if (newSize == 0) &lt;/p&gt;
{  

        key = null;  

        value = null;  

        return false;  

       }
&lt;p&gt; else &lt;/p&gt;
{  

        return true;  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;         public WordOffset getCurrentKey()   &lt;/p&gt;

&lt;p&gt;         throws IOException, InterruptedException &lt;/p&gt;
{  

          return key;  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;         public Text getCurrentValue() throws IOException, InterruptedException &lt;/p&gt;
{  

         return value;  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;


&lt;p&gt;   /**  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;This Mapper is similar to the one in 
{@link WordCount.MapClass}
&lt;p&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    */ &lt;/p&gt;

&lt;p&gt;   public static class MapClass extends  &lt;/p&gt;

&lt;p&gt;       Mapper {  &lt;/p&gt;

&lt;p&gt;     private final static IntWritable one = new IntWritable(1);  &lt;/p&gt;

&lt;p&gt;     private Text word = new Text();  &lt;/p&gt;

&lt;p&gt;     public void map(WordOffset key, Text value, Context context)  &lt;/p&gt;

&lt;p&gt;         throws IOException, InterruptedException {  &lt;/p&gt;

&lt;p&gt;       String line = value.toString();  &lt;/p&gt;

&lt;p&gt;       StringTokenizer itr = new StringTokenizer(line);  &lt;/p&gt;

&lt;p&gt;       while (itr.hasMoreTokens()) &lt;/p&gt;
{  

         word.set(itr.nextToken());  

         context.write(word, one);  

       }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     }  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;

&lt;p&gt;   private void printUsage() &lt;/p&gt;
{  

     System.out.println(&quot;Usage : multifilewc  &quot; );  

   }
&lt;p&gt;  &lt;br/&gt;
   public int run(String[] args) throws Exception {  &lt;/p&gt;

&lt;p&gt;     if(args.length &amp;lt; 2) &lt;/p&gt;
{  

       printUsage();  

       return 2;  

     }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt;     Job job = new Job(getConf());  &lt;/p&gt;

&lt;p&gt;     job.setJobName(&quot;MultiFileWordCount&quot;);  &lt;/p&gt;

&lt;p&gt;     job.setJarByClass(MultiFileWordCount.class);  &lt;/p&gt;

&lt;p&gt;     //set the InputFormat of the job to our InputFormat  &lt;/p&gt;

&lt;p&gt;     job.setInputFormatClass(MyInputFormat.class);  &lt;/p&gt;

&lt;p&gt;     // the keys are words (strings)  &lt;/p&gt;

&lt;p&gt;     job.setOutputKeyClass(Text.class);  &lt;/p&gt;

&lt;p&gt;     // the values are counts (ints)  &lt;/p&gt;

&lt;p&gt;     job.setOutputValueClass(IntWritable.class);  &lt;/p&gt;

&lt;p&gt;     //use the defined mapper  &lt;/p&gt;

&lt;p&gt;     job.setMapperClass(MapClass.class);  &lt;/p&gt;

&lt;p&gt;     //use the WordCount Reducer  &lt;/p&gt;

&lt;p&gt;     job.setCombinerClass(IntSumReducer.class);  &lt;/p&gt;

&lt;p&gt;     job.setReducerClass(IntSumReducer.class);  &lt;/p&gt;


&lt;p&gt;     FileInputFormat.addInputPaths(job, args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);  &lt;/p&gt;

&lt;p&gt;     FileOutputFormat.setOutputPath(job, new Path(args&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;));  &lt;/p&gt;

&lt;p&gt;     return job.waitForCompletion(true) ? 0 : 1;  &lt;/p&gt;

&lt;p&gt;   }  &lt;/p&gt;

&lt;p&gt;   public static void main(String[] args) throws Exception &lt;/p&gt;
{  

     int ret = ToolRunner.run(new MultiFileWordCount(), args);  

     System.exit(ret);  

   }
&lt;p&gt;  &lt;/p&gt;

&lt;p&gt; } &lt;/p&gt;</description>
                <environment></environment>
        <key id="12682621">MAPREDUCE-5666</key>
            <summary>org/apache/hadoop/mapreduce/lib/input/FileInputFormat.java(org/apache/hadoop/mapreduce/lib/input:FileInputFormat.java):cannot find symbol</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ranjini rathinam">ranjini</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Dec 2013 05:48:54 +0000</created>
                <updated>Wed, 4 Dec 2013 14:34:51 +0000</updated>
                            <resolved>Wed, 4 Dec 2013 14:34:51 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13838929" author="jlowe" created="Wed, 4 Dec 2013 14:34:51 +0000"  >&lt;p&gt;As I mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5668&quot; title=&quot;Exception in thread &amp;quot;main&amp;quot; java.lang.IncompatibleClassChangeError: Found class org.apache.hadoop.mapreduce.JobContext, but interface was expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5668&quot;&gt;&lt;del&gt;MAPREDUCE-5668&lt;/del&gt;&lt;/a&gt;, JIRA is not the avenue to use for questions like this.  Please use the &lt;a href=&quot;http://hadoop.apache.org/mailing_lists.html#User&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;user@ mailing list&lt;/a&gt; for questions like this.  If after discussing on the mailing list it ends up being a bug in Hadoop then a JIRA can be filed at that time.&lt;/p&gt;

&lt;p&gt;This is clearly a case of code being compiled against a release after 1.x but then run on a 0.20 or 1.x release.  The FileStatus.isDirectory() method was not present in the 0.20 or 1.x releases.  We cannot generally support compiling code against a later release and then running it on an earlier release because of new APIs that can be added.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Dec 2013 14:34:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361883</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361885</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5665] Add audience annotations to MiniMRYarnCluster and MiniMRCluster</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5665</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;We should make it clear whether these are public interfaces.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682527">MAPREDUCE-5665</key>
            <summary>Add audience annotations to MiniMRYarnCluster and MiniMRCluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sandyr">Sandy Ryza</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Tue, 3 Dec 2013 22:02:05 +0000</created>
                <updated>Tue, 3 Dec 2013 22:40:54 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361789</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5664] java.lang.RuntimeException: javax.xml.parsers.ParserConfigurationException:</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5664</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am using hadoop 0.21 vesrsion and java 1.6.  Please help me to fix the issue. What version jar should i put. &lt;/p&gt;

&lt;p&gt;The sample code with xml i have attached here.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;Company&amp;gt;
&amp;lt;Employee&amp;gt;
&amp;lt;id&amp;gt;100&amp;lt;/id&amp;gt;
&amp;lt;ename&amp;gt;ranjini&amp;lt;/ename&amp;gt;
&amp;lt;dept&amp;gt;IT&amp;lt;/dept&amp;gt;
&amp;lt;sal&amp;gt;123456&amp;lt;/sal&amp;gt;
&amp;lt;location&amp;gt;nextlevel&amp;lt;/location&amp;gt;
&amp;lt;/Employee&amp;gt;
&amp;lt;/Company&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.fs.Path;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.fs.FileSystem;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.conf.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.conf.Configuration;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.fs.FileStatus;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.io.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.mapred.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.util.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.mapred.lib.*;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.Reader;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.StringReader;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.jdom.Document;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.jdom.Element;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.jdom.JDOMException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.jdom.input.SAXBuilder;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class ParseXml {
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; class Map &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MapReduceBase &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt;
			Mapper&amp;lt;LongWritable, Text, Text, Text&amp;gt; {
		
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void map(LongWritable key, Text value,
				OutputCollector&amp;lt;Text, Text&amp;gt; output, Reporter reporter) 
				&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
			
			&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s=&quot;&quot;;
			FileSystem fs=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
			Configuration conf=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Configuration();
			conf.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;fs.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.name&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:4440/&quot;&lt;/span&gt;);
&lt;/span&gt;			Path srcpath=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/user/hduser/Ran/&quot;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
	
					&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; xmlString = value.toString();
             
             		SAXBuilder builder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SAXBuilder();
            		Reader in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(xmlString);
 					Document doc = builder.build(in);
           			 Element root = doc.getRootElement();
	

  s =root.getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;Employee&quot;&lt;/span&gt;).getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;).getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;ename&quot;&lt;/span&gt;).getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;dept&quot;&lt;/span&gt;).getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;sal&quot;&lt;/span&gt;).getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;location&quot;&lt;/span&gt;).getTextTrim();
 output.collect(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Text(&quot;&quot;),&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Text(s));
		
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
	e.printStackTrace();
    }

}
}
			
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; input=&lt;span class=&quot;code-quote&quot;&gt;&quot;/user/hduser/Ran/&quot;&lt;/span&gt;;
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileoutput=&lt;span class=&quot;code-quote&quot;&gt;&quot;/user/task/Sales/&quot;&lt;/span&gt;;
		JobConf conf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JobConf(ParseXml.class);
		conf.setJobName(&lt;span class=&quot;code-quote&quot;&gt;&quot;file&quot;&lt;/span&gt;);
		conf.setOutputKeyClass(Text.class);
		conf.setOutputValueClass(Text.class);
		conf.setNumReduceTasks(1);
		conf.setMapperClass(Map.class);
		conf.setInputFormat(TextInputFormat.class);
		conf.setOutputFormat(TextOutputFormat.class);
		FileInputFormat.setInputPaths(conf,input);
		Path outPath = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(fileoutput);
		FileOutputFormat.setOutputPath(conf, outPath);
		FileSystem dfs = FileSystem.get(outPath.toUri(), conf);
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dfs.exists(outPath)) {
				dfs.delete(outPath, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
			}
		&lt;span class=&quot;code-comment&quot;&gt;//conf.setOutputFormat(MultiFileOutput.class);
&lt;/span&gt;
		JobClient.runJob(conf);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When processing xml file as input via map reduce, the error occurred is &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
conf.Configuration: error parsing conf file: javax.xml.parsers.ParserConfigurationException: Feature &apos;http:&lt;span class=&quot;code-comment&quot;&gt;//apache.org/xml/features/xinclude&apos; is not recognized.
&lt;/span&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.RuntimeException: javax.xml.parsers.ParserConfigurationException: Feature &apos;http:&lt;span class=&quot;code-comment&quot;&gt;//apache.org/xml/features/xinclude&apos; is not recognized.
&lt;/span&gt;	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1171)
	at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1030)
	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:980)
	at org.apache.hadoop.conf.Configuration.get(Configuration.java:382)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:109)
Caused by: javax.xml.parsers.ParserConfigurationException: Feature &apos;http:&lt;span class=&quot;code-comment&quot;&gt;//apache.org/xml/features/xinclude&apos; is not recognized.
&lt;/span&gt;	at org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.newDocumentBuilder(Unknown Source)
	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1061)
	... 4 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please help to fix the issue&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.6&lt;/p&gt;</environment>
        <key id="12682350">MAPREDUCE-5664</key>
            <summary>java.lang.RuntimeException: javax.xml.parsers.ParserConfigurationException:</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ranjini rathinam">ranjini</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Dec 2013 10:11:43 +0000</created>
                <updated>Wed, 4 Dec 2013 09:06:49 +0000</updated>
                            <resolved>Wed, 4 Dec 2013 09:05:48 +0000</resolved>
                                    <version>0.21.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13837754" author="jeagles" created="Tue, 3 Dec 2013 14:45:58 +0000"  >&lt;p&gt;Could you please provide sample xml files for processing as well as job configuration and relevant part of the MapReduce class so this could be reproduced? Also, please set the hadoop version in the Affects Version of the JIRA. This will greatly help someone reproduce this issue quickly.&lt;/p&gt;</comment>
                            <comment id="13838002" author="stevel@apache.org" created="Tue, 3 Dec 2013 18:31:30 +0000"  >&lt;p&gt;Looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5254&quot; title=&quot;Xinclude setup results in a stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-5254&quot;&gt;&lt;del&gt;HADOOP-5254&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7462&quot; title=&quot;Feature &amp;#39;http://apache.org/xml/features/xinclude&amp;#39; is not recognized error in Hadoop 0.20.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7462&quot;&gt;HADOOP-7462&lt;/a&gt; has surfaced. Your classpath has an out of date XML parser on it, and this is being picked up in preference to the version of Xerces bundled with Java6 and Java7/&lt;/p&gt;

&lt;p&gt;#1 as Jonathan says, can you specify which version of Hadoop this is arising on. If it is not Hadoop 1.2 or Hadoop 2.2, it&apos;s not going to be treated as a bug, as these contain what should be fixes for this problem.&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5254&quot; title=&quot;Xinclude setup results in a stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-5254&quot;&gt;&lt;del&gt;HADOOP-5254&lt;/del&gt;&lt;/a&gt; includes details on how to go about tracking the underlying issue, which is very much a configuration problem&lt;/p&gt;</comment>
                            <comment id="13838754" author="stevel@apache.org" created="Wed, 4 Dec 2013 09:03:49 +0000"  >&lt;p&gt;You need to move up to a recent version of Hadoop: the fixes for your problem are already in the codebase. &lt;/p&gt;

&lt;p&gt;If you can&apos;t move up, look at &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5254&quot; title=&quot;Xinclude setup results in a stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-5254&quot;&gt;&lt;del&gt;HADOOP-5254&lt;/del&gt;&lt;/a&gt; for one route as to how to go about identifying and working round the XML parser versioning issue &lt;b&gt;on your own machine&lt;/b&gt;.&lt;/p&gt;</comment>
                            <comment id="13838755" author="stevel@apache.org" created="Wed, 4 Dec 2013 09:05:49 +0000"  >&lt;p&gt;Resolving as duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5254&quot; title=&quot;Xinclude setup results in a stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-5254&quot;&gt;&lt;del&gt;HADOOP-5254&lt;/del&gt;&lt;/a&gt; ; the issue here &quot;using out of date XML parser&quot; is handled in Hadoop 1.2+ . Upgrade Hadoop or configure the JVM to use the XML parser built in to java 1.6&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12414751">HADOOP-5254</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12682632">MAPREDUCE-5667</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12414751">HADOOP-5254</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Dec 2013 14:45:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5663] Add an interface to Input/Ouput Formats to obtain delegation tokens</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5663</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Currently, delegation tokens are obtained as part of the getSplits / checkOutputSpecs calls to the InputFormat / OutputFormat respectively.&lt;/p&gt;

&lt;p&gt;This works as long as the splits are generated on a node with kerberos credentials. For split generation elsewhere (AM for example), an explicit interface is required.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682266">MAPREDUCE-5663</key>
            <summary>Add an interface to Input/Ouput Formats to obtain delegation tokens</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="michaelweng">Michael Weng</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Dec 2013 00:07:18 +0000</created>
                <updated>Fri, 17 Jan 2014 22:37:14 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13845676" author="sseth" created="Wed, 11 Dec 2013 19:46:26 +0000"  >&lt;p&gt;Proposed API / Changes&lt;/p&gt;

&lt;p&gt;interface CredentialsProvider (in hadoop-common)&lt;br/&gt;
   void addCredentials(Configuration conf, Credentials credentials);&lt;/p&gt;

&lt;p&gt;Change at least FileInput/OutputFormats to implement this interface to return the tokens that will eventually be required. We can additional Input/OutputFormats as required.&lt;/p&gt;

&lt;p&gt;Any system (MR/Tez) which wants to do AM split generation - would need to check if the interface is implemented by the relevant Input/OutputFormat - and decide whether to generate splits on the client side or just get tokens on the client side when running on a secure cluster.&lt;/p&gt;</comment>
                            <comment id="13854686" author="michaelweng" created="Fri, 20 Dec 2013 23:49:14 +0000"  >&lt;p&gt;Attached the initial patch based on GA 2.2.0.&lt;/p&gt;</comment>
                            <comment id="13857207" author="michaelweng" created="Fri, 27 Dec 2013 00:39:59 +0000"  >&lt;p&gt;Update the patch with some fixes to xxxInputFormat and added changes for xxxOutputFormat.&lt;/p&gt;</comment>
                            <comment id="13857816" author="michaelweng" created="Fri, 27 Dec 2013 22:47:39 +0000"  >&lt;p&gt;Updated.&lt;/p&gt;</comment>
                            <comment id="13857850" author="sseth" created="Sat, 28 Dec 2013 00:03:10 +0000"  >&lt;p&gt;Thanks for taking this up &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michaelweng&quot; class=&quot;user-hover&quot; rel=&quot;michaelweng&quot;&gt;Michael Weng&lt;/a&gt;. , some comments on the patch.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;FileInputFormat - a new public getInputPaths(...) method should not be added. This could instead be a private getInputPathsInternal(...)&lt;/li&gt;
	&lt;li&gt;FileOutputFormat - path normalization, similar to what is done, in checkOutputSpecs is likely required.&lt;/li&gt;
	&lt;li&gt;CredentialsProvider - the JavaDoc should be a little more descriptive as to the purpose of this interface. Was thinking along the lines of
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
   * &amp;lt;code&amp;gt;CredentialsProvider&amp;lt;/code&amp;gt; is an &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; that can be implemented by
   * components that may need to obtain credentials, which may
   * be required to function on a secured cluster.
   * 
   * @param conf
   *          component specific {@link Configuration}.
   * @param credentials
   *          an instance of {@link Credentials} to which credentials
   *          will be added.
   *
/&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Could also do with some changes to the FIF/FOF unit tests.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13857927" author="sseth" created="Sat, 28 Dec 2013 03:30:27 +0000"  >&lt;p&gt;Updated patch after talking to Michael offline. Fixes stuff I&apos;d mentioned in the previous comment, and adds some unit tests.&lt;/p&gt;</comment>
                            <comment id="13857933" author="hadoopqa" created="Sat, 28 Dec 2013 04:04:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620710/MAPREDUCE-5663.4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620710/MAPREDUCE-5663.4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;        &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4285//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4285//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4285//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4285//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4285//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4285//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13860648" author="hadoopqa" created="Thu, 2 Jan 2014 19:37:10 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620710/MAPREDUCE-5663.4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620710/MAPREDUCE-5663.4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;        &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4294//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4294//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4294//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4294//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4294//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4294//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13860824" author="sseth" created="Thu, 2 Jan 2014 21:51:59 +0000"  >&lt;p&gt;Updated to fix the RAT warning - missing apache license in one file.&lt;/p&gt;</comment>
                            <comment id="13860949" author="hadoopqa" created="Thu, 2 Jan 2014 23:35:50 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621162/MAPREDUCE-5663.5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621162/MAPREDUCE-5663.5.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4296//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4296//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4296//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4296//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13869869" author="acmurthy" created="Mon, 13 Jan 2014 19:37:30 +0000"  >&lt;p&gt;+1, mostly lgtm.&lt;/p&gt;

&lt;p&gt;One nit: I&apos;d like to change the api to &apos;obtainCredentials&apos; rather than &apos;addCredentials&apos;. That threw me off a little. Last thing - a more descriptive javadoc would help too. Thanks.&lt;/p&gt;</comment>
                            <comment id="13869914" author="sseth" created="Mon, 13 Jan 2014 20:10:29 +0000"  >&lt;p&gt;Updated patch to rename the method to &apos;obtainCredentials&apos;, and added some more Javadoc. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acmurthy&quot; class=&quot;user-hover&quot; rel=&quot;acmurthy&quot;&gt;Arun C Murthy&lt;/a&gt;, please add additional javadocs if you think more is required. &lt;/p&gt;</comment>
                            <comment id="13869968" author="tucu00" created="Mon, 13 Jan 2014 20:52:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;Siddharth Seth&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acmurthy&quot; class=&quot;user-hover&quot; rel=&quot;acmurthy&quot;&gt;Arun C Murthy&lt;/a&gt;, why is this needed? if the AM has the corresponding delegation tokens, things work just fine, Oozie has been doing this for years; the splits are computed in the launcher job which does not have kerberos credentials.&lt;/p&gt;</comment>
                            <comment id="13869970" author="hadoopqa" created="Mon, 13 Jan 2014 20:54:21 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622693/MAPREDUCE-5663.6.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622693/MAPREDUCE-5663.6.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4317//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4317//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4317//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4317//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13870173" author="sseth" created="Tue, 14 Jan 2014 00:25:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;if the AM has the corresponding delegation tokens, things work just fine, Oozie has been doing this for years; the splits are computed in the launcher job which does not have kerberos credentials.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;Alejandro Abdelnur&lt;/a&gt;, My guess is the launcher job is able to compute splits because it already has access to the tokens. Do you know how Oozie ensures that job specific tokens are available to the launcher, without calling getSplits etc on the client node.&lt;br/&gt;
The intent of this JIRA is to be able to get the necessary tokens on the client (based on the Job Configuration), without actually invoking getSplits() and checkOutputSpecs. The token functionality is currently baked into these methods.&lt;/p&gt;</comment>
                            <comment id="13870187" author="vinodkv" created="Tue, 14 Jan 2014 00:42:53 +0000"  >&lt;p&gt;I suppose the scenario is &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-207&quot; title=&quot;Computing Input Splits on the MR Cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-207&quot;&gt;MAPREDUCE-207&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13870200" author="tucu00" created="Tue, 14 Jan 2014 00:51:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;Siddharth Seth&lt;/a&gt;, for MR this is fully cooked.&lt;/p&gt;

&lt;p&gt;It works something like this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;On the AM client side you collect all the tokens you need and write them to HDFS using the Credentials.writeTokenStorageFile() method to HDFS.&lt;/li&gt;
	&lt;li&gt;the HADOOP_TOKEN_FILE_LOCATION env variable pointing to such file is set to the AM environment.&lt;/li&gt;
	&lt;li&gt;Then when calling UGI.getLoginUser() on the AM, the UGI credentials should be populated with the contents of the token file writen by the AM client.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13870259" author="sseth" created="Tue, 14 Jan 2014 01:27:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;On the AM client side you collect all the tokens you need and write them to HDFS using the Credentials.writeTokenStorageFile() method to HDFS.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The question is on what basis are these tokens are collected. Once tokens are available - it&apos;s fairly straightforward to make them available elsewhere on the cluster.&lt;br/&gt;
Currently, tokens are automatically acquired when the MR JobClient calls getSplits() and checkOutputSpecs. How tokens are obtained in these method calls really depends upon the Input / OutputFormat being used.&lt;br/&gt;
As far as I know, Oozie doesn&apos;t actually call these methods on the client - I&apos;m not sure how it knows which tokens are required - guessing this is some additional Oozie configuration.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vinodkv&quot; class=&quot;user-hover&quot; rel=&quot;vinodkv&quot;&gt;Vinod Kumar Vavilapalli&lt;/a&gt;, yes &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-207&quot; title=&quot;Computing Input Splits on the MR Cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-207&quot;&gt;MAPREDUCE-207&lt;/a&gt; is a scenario for this, where we want to skip at least the getSplits() operation on the client.&lt;/p&gt;</comment>
                            <comment id="13870274" author="tucu00" created="Tue, 14 Jan 2014 01:39:14 +0000"  >&lt;p&gt;This is done in the MR &lt;tt&gt;JobSubmitter.java&lt;/tt&gt;, in the &lt;tt&gt;submitJobInternal(...)&lt;/tt&gt; method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-comment&quot;&gt;// get delegation token &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the dir
&lt;/span&gt;      TokenCache.obtainTokensForNamenodes(job.getCredentials(),
          &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path[] { submitJobDir }, conf);

      populateTokenCache(conf, job.getCredentials());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is this what you are after?&lt;/p&gt;</comment>
                            <comment id="13870282" author="sseth" created="Tue, 14 Jan 2014 01:48:21 +0000"  >&lt;p&gt;That&apos;s only for the submission directory. The tokens for the actual data may be different, and is tied to the I/OFormats. Does this code actually get invoked when submitting a job to Oozie (on the client machine) ?&lt;br/&gt;
What I don&apos;t understand is the following - When a job is submitted to Oozie, How does Oozie know which tokens it needs to obtain on the client machine ? (which namenodes will be used to execute the MR job / workflow, tokens from other sources ?, etc).&lt;/p&gt;</comment>
                            <comment id="13870375" author="tucu00" created="Tue, 14 Jan 2014 04:28:25 +0000"  >&lt;p&gt;This works out of the box for MR jobs because typically the same FileSystem where the IN/OUT data resides is he one used for the submission dir.&lt;/p&gt;

&lt;p&gt;If you need to use different FileSystems (i.e. distcp), this is achieved setting the &lt;tt&gt;MRJobConfig.JOB_NAMENODES&lt;/tt&gt; property in the job confguration, this is handled in the &lt;tt&gt;JobSubmitter.java&lt;/tt&gt; in the following code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-comment&quot;&gt;//get secret keys and tokens and store them into TokenCache
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void populateTokenCache(Configuration conf, Credentials credentials) 
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException{
    readTokensFromFiles(conf, credentials);
    &lt;span class=&quot;code-comment&quot;&gt;// add the delegation tokens from configuration
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; [] nameNodes = conf.getStrings(MRJobConfig.JOB_NAMENODES);
    LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;adding the following namenodes&apos; delegation tokens:&quot;&lt;/span&gt; + 
        Arrays.toString(nameNodes));
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(nameNodes != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      Path [] ps = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path[nameNodes.length];
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0; i&amp;lt; nameNodes.length; i++) {
        ps[i] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(nameNodes[i]);
      }
      TokenCache.obtainTokensForNamenodes(credentials, ps, conf);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13870396" author="sseth" created="Tue, 14 Jan 2014 05:06:48 +0000"  >&lt;p&gt;That&apos;s two sets of tokens that are obtained - for the working directory, and for any additional HDFS servers which the user may have configured.&lt;br/&gt;
In addition to this, tokens may be obtained by Input/OutputFormats&lt;/p&gt;

&lt;p&gt;From FileInputFormat&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Path[] dirs = getInputPaths(job);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dirs.length == 0) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;No input paths specified in job&quot;&lt;/span&gt;);
    }
    
    &lt;span class=&quot;code-comment&quot;&gt;// get tokens &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all the required FileSystems..
&lt;/span&gt;    TokenCache.obtainTokensForNamenodes(job.getCredentials(), dirs, 
                                        job.getConfiguration());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;getInputPaths reads the property &quot;mapreduce.input.fileinputformat.inputdir&quot; - which is specific to FIF. If the input paths reside on a different Namenode than the one on which the staging directory is, I don&apos;t think users must set MRJobConfig.JOB_NAMENODES. The tokens would just be picked up as part of client side split generation.&lt;/p&gt;

&lt;p&gt;In terms of Oozie, from what I understand, the JobSubmitter does not get invoked on a box with kerberos credentials - not for the main job anyway (maybe for the launcher) - so this code to obtain tokens doesn&apos;t kick in. If that&apos;s the case, my guess is Oozie has additional configuration, and explicitly goes out and fetches tokens before submitting the launcher.&lt;/p&gt;</comment>
                            <comment id="13870835" author="tucu00" created="Tue, 14 Jan 2014 15:56:23 +0000"  >&lt;p&gt;The Oozie server is responsible for obtaining all the tokens the main job may need:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;tokens to run the job (working dir, jobtokens)&lt;/li&gt;
	&lt;li&gt;tokens for the Input and Output data (typically HDFS tokens, but they can be for different file systems, for Hbase, for HCatalog, etc).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For the typical case of running an MR job (directly or via Pig/Hive), the tokens of launcher job are sufficient for the main job. They just need to be propagated. The Oozie server makes sure the &quot;mapreduce.job.complete.cancel.delegation.tokens&quot; property is set to FALSE for the launcher job (Oozie gets rid of the launcher job for MR jobs once the main job is running).&lt;/p&gt;

&lt;p&gt;For scenarios where the main job needs to interact with different services, Oozie must acquire them in advance. For HDFS this is done by simply setting the &quot;MRJobConfig.JOB_NAMENODES&quot; property, then the launcher job submission will get those tokens. For Hbase or HCatalog, Oozie has a CredentialsProvider that obtains those tokens (the requirement here is that Oozie is configured as proxy user in those services in order to get tokens for the user submitting the job).&lt;/p&gt;

&lt;p&gt;From what it seems you are after generalizing this. If think we should do it with a slightly twist from what you are proposing:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;DelegationTokens should be always requested by the client, security enabled or not, computing the splits on the client or not.&lt;/li&gt;
	&lt;li&gt;DelegationTokens fetching should be done regardless of the IF/OF implementation (take the case of talking with Hbase or HCatalog, job working dir service).&lt;/li&gt;
	&lt;li&gt;DelegationTokens fetching should not be tied to split computation.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We could have a utility class that we pass a UGI, list of service URIs and returns a populated Credentials with tokens for all the specified services.&lt;/p&gt;

&lt;p&gt;The IF/OF/Job would have to be able to extract the required URIs for the job.&lt;/p&gt;

&lt;p&gt;Also, this mechanism could be used to obtain ALL tokens the AM needs.&lt;/p&gt;</comment>
                            <comment id="13870997" author="sseth" created="Tue, 14 Jan 2014 18:35:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;DelegationTokens should be always requested by the client, security enabled or not, computing the splits on the client or not.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think the client requesting the required tokens is required (directly or indirectly). Whether this is done independent of security is something I&apos;m not too sure about - mainly from the perspective of services not handling getToken requests correctly if security is diabled. The JobClient currently doesn&apos;t do this, at least for HDFS.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;DelegationTokens fetching should be done regardless of the IF/OF implementation (take the case of talking with Hbase or HCatalog, job working dir service).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The intent of adding this interface is to be able to fetch tokens irrespective of the IF/OF - assuming the IF/OF implement the interface. For HBase / HCatalog sources which are outside of the IF/OF for a MR job - I don&apos;t think we have the capability for fetching tokens, and rely on the user providing them up front. That seems like a reasonable approach for now. Alternately, we could add a config specifying a list of classes which implement this interface - and can be invoked by the client code.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;DelegationTokens fetching should not be tied to split computation.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Completely agree with this. I don&apos;t think we can do this though - without making an incompatible change. We could explicitly fetch Credentials (if the interface is implemented), but at least some existing IF/OFs will continue to rely on getSplits / checkOutputSpecs for tokens.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We could have a utility class that we pass a UGI, list of service URIs and returns a populated Credentials with tokens for all the specified services. The IF/OF/Job would have to be able to extract the required URIs for the job.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Would this utility class know how to handle all kinds of URIs ? I think it&apos;s better to leave the implementation of the Credentials Fetching code to the specific system (MR / HBase / HCatalog). Configure a list of CredentialProviders - which know how to fetch Credentials for the specific system.&lt;/p&gt;</comment>
                            <comment id="13871000" author="sseth" created="Tue, 14 Jan 2014 18:46:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;DelegationTokens should be always requested by the client, security enabled or not, computing the splits on the client or not.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think the client requesting the required tokens is required (directly or indirectly). Whether this is done independent of security is something I&apos;m not too sure about - mainly from the perspective of services not handling getToken requests correctly if security is diabled. The JobClient currently doesn&apos;t do this, at least for HDFS.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;DelegationTokens fetching should be done regardless of the IF/OF implementation (take the case of talking with Hbase or HCatalog, job working dir service).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The intent of adding this interface is to be able to fetch tokens irrespective of the IF/OF - assuming the IF/OF implement the interface. For HBase / HCatalog sources which are outside of the IF/OF for a MR job - I don&apos;t think we have the capability for fetching tokens, and rely on the user providing them up front. That seems like a reasonable approach for now. Alternately, we could add a config specifying a list of classes which implement this interface - and can be invoked by the client code.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;DelegationTokens fetching should not be tied to split computation.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Completely agree with this. I don&apos;t think we can do this though - without making an incompatible change. We could explicitly fetch Credentials (if the interface is implemented), but at least some existing IF/OFs will continue to rely on getSplits / checkOutputSpecs for tokens.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We could have a utility class that we pass a UGI, list of service URIs and returns a populated Credentials with tokens for all the specified services. The IF/OF/Job would have to be able to extract the required URIs for the job.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Would this utility class know how to handle all kinds of URIs ? I think it&apos;s better to leave the implementation of the Credentials Fetching code to the specific system (MR / HBase / HCatalog). Configure a list of CredentialProviders - which know how to fetch Credentials for the specific system.&lt;/p&gt;</comment>
                            <comment id="13872390" author="sseth" created="Wed, 15 Jan 2014 18:32:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;Alejandro Abdelnur&lt;/a&gt;, do you have reservations on this approach - where components which need to provide Credentials implement this interface. Otherwise, I&apos;d like to move forward with this jira.&lt;/p&gt;</comment>
                            <comment id="13872404" author="tucu00" created="Wed, 15 Jan 2014 18:42:49 +0000"  >&lt;p&gt;planning to comment later this morning. sorry yesterday got caught on diff things. &lt;/p&gt;</comment>
                            <comment id="13872542" author="tucu00" created="Wed, 15 Jan 2014 20:16:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;... I&#8217;m not too sure about - mainly from the perspective of services not handling getToken requests correctly if security is disabled&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We are moving away from this, in Yarn we always use tokens, regardless of the security configuration. Oozie needs tokens to be there in order to work correctly.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... The JobClient currently doesn&apos;t do this, at least for HDFS.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, yes it does do this if you set the &lt;tt&gt;MRJobConfig.JOB_NAMENODES&lt;/tt&gt; property, this is done in the &lt;tt&gt;JobSubmitter#populateTokenCache()&lt;/tt&gt; method which is called by &lt;tt&gt;JobSubmitter#submitJobInternal()&lt;/tt&gt; which is called by &lt;tt&gt;JobSubmitter#submit()&lt;/tt&gt;. All this is done in the main execution path, thus always done when doing a submit. It is independent of split computations.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... For HBase / HCatalog sources which are outside of the IF/OF for a MR job - I don&apos;t think we have the capability for fetching tokens, and rely on the user providing them up front.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, we are fetching them upfront only because this was needed for MR jobs, but MR shouldn&#8217;t be a special case. Oozie has the concept of &lt;tt&gt;CredentialsProvider&lt;/tt&gt; for this very same reason. And I think with this JIRA we can fix this in a general case.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... Would this utility class know how to handle all kinds of URIs ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, based on registered handlers for different schemes, more on this follows.&lt;/p&gt;


&lt;p&gt;My thinking on how to address this is to use the same pattern we are doing today for loading/registering &lt;tt&gt;FileSystem&lt;/tt&gt;, &lt;tt&gt;CompressionCodec&lt;/tt&gt;, &lt;tt&gt;TokenRenewers&lt;/tt&gt;, &lt;tt&gt;SecurityInfo&lt;/tt&gt; implementations. Using JDK&#8217;s &lt;tt&gt;ServiceLoader&lt;/tt&gt; mechanism to load all available implementations of the following interface:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Implementations must be thread-safe.
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; CredentialsProvider {

 /**
  * Reports the scheme being supported by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; provider.
  */
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getScheme();

 /**
  * Obtains delegations tokens &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the provided URIs.
  *
  * @param conf configuration used to initialize the components that connect to the specified URIs.
  * @param uris URIs of services to obtain delegation tokens from.
  * @ param targetCredentials credentials to add the fetched delegation tokens.
  */
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void obtainCredentials(Configuration conf, URI[] uris, Credentials targetCredentials) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then we would have a &lt;tt&gt;CredentialsProvider&lt;/tt&gt; class that would use a &lt;tt&gt;ServiceLoader&lt;/tt&gt; to load all credentials available in the classpatch (via the ServiceLoader mechanism, the nice thing about this is that you drop a JAR file with a service implementation and you don&#8217;t have to configure anything, it just works provided you have the META-INF/services/... file for it). This would be done in a class static block initialization.&lt;/p&gt;

&lt;p&gt;the &lt;tt&gt;CredentialsProvider&lt;/tt&gt; would have a static method &lt;tt&gt;fetchCredentials(Configuration, URI[], Credentials)&lt;/tt&gt; which sorts out the URIs by scheme and then invokes the corresponding &lt;tt&gt;CredentialsProvider&lt;/tt&gt; impl for it.&lt;/p&gt;

&lt;p&gt;Then the different Yarn applications define a property in the conf to indicate the URIs of the services to get tokens and their client submission code does it (like the &lt;tt&gt;JobSubmitter&lt;/tt&gt; does with &lt;tt&gt;MRJobConfig.JOB_NAMENODES&lt;/tt&gt; but in a general way. Frameworks may chose to be smarter (in the case of MR get the URIS from the splits an the output dir and get the tokens automatically).&lt;/p&gt;</comment>
                            <comment id="13872944" author="sseth" created="Thu, 16 Jan 2014 01:50:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m not against this, just not sure how existing services function if they&apos;re asked for tokens with security disabled. HDFS, afaik, works just fine.&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;... JobSubmitter#populateTokenCache() method which is called by JobSubmitter#submitJobInternal() ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;All of these methods are invoked, but end up calling TokenCache.obtainTokensForNameNodeInternal - which short circuits the fetch based on the security settings.&lt;/p&gt;

&lt;p&gt;That&apos;s an interesting proposal. &lt;br/&gt;
Each application would have to figure out how it gets this list of URIs. MR, if it chooses can have Input/OutputFormats implement an interface to retrieve URIs instead of getting the Credentials directly.&lt;/p&gt;

&lt;p&gt;Spoke &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; on how this could work for HBase - I&apos;m not sure if all systems which provide credentials can have their information represented as a URI. In case of HBase, I believe this is a quorum, which is available in the Configuration. For HBase, this could potentially be faked by setting the URI as hbase://&lt;/p&gt;

&lt;p&gt;Alrternately, this could accept a list of Strings instead of URIs, or even a &amp;lt;String, URI&amp;gt; pair - where the first part represents the provider, and the second one is the URI - if applicable.&lt;/p&gt;</comment>
                            <comment id="13872989" author="devaraj" created="Thu, 16 Jan 2014 02:45:16 +0000"  >&lt;p&gt;Haven&apos;t read the issue in detail yet, but a quick comment on what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;Siddharth Seth&lt;/a&gt; said. In HBase, we have client talking to ZK (preconfigured quorum), and it locates the master from a specific znode (also preconfigured). The URI could be faked there (either as hbase:// and reading the ZK data from the configuration that is available in the context, or, hbase://quorum/znode as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; just noted).&lt;/p&gt;</comment>
                            <comment id="13874169" author="tucu00" created="Thu, 16 Jan 2014 23:46:03 +0000"  >&lt;p&gt;From what I understand, For HBase, or HDFS HA &amp;amp; Yarn HA, it is the corresponding client library the one that resolves the real host, so this would be taken care by the use of it (of the client library, hbase, hdfs, yarn) from within the &lt;tt&gt;CredentialsProvider&lt;/tt&gt; implementation for that service. I think an &lt;tt&gt;URI[]&lt;/tt&gt; (all of the same scheme being passed to a the corresponding &lt;tt&gt;CredentialsProvider&lt;/tt&gt; impl should be enough, no?&lt;/p&gt;</comment>
                            <comment id="13875343" author="sseth" created="Fri, 17 Jan 2014 22:37:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think an URI[] (all of the same scheme being passed to a the corresponding CredentialsProvider impl should be enough, no?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As long as it&apos;s possible to represent services as URIs, which seems possible - it&apos;ll likely just be for the purpose of fetching credentials for hbase, hcat etc.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620710" name="MAPREDUCE-5663.4.txt" size="38957" author="sseth" created="Sat, 28 Dec 2013 03:30:27 +0000"/>
                            <attachment id="12621162" name="MAPREDUCE-5663.5.txt" size="39382" author="sseth" created="Thu, 2 Jan 2014 21:51:59 +0000"/>
                            <attachment id="12622693" name="MAPREDUCE-5663.6.txt" size="40287" author="sseth" created="Mon, 13 Jan 2014 20:10:29 +0000"/>
                            <attachment id="12619935" name="MAPREDUCE-5663.patch.txt" size="7641" author="michaelweng" created="Fri, 20 Dec 2013 23:49:14 +0000"/>
                            <attachment id="12620569" name="MAPREDUCE-5663.patch.txt2" size="12882" author="michaelweng" created="Fri, 27 Dec 2013 00:39:59 +0000"/>
                            <attachment id="12620672" name="MAPREDUCE-5663.patch.txt3" size="12313" author="michaelweng" created="Fri, 27 Dec 2013 22:47:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Dec 2013 23:49:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361528</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361531</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12325257</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5662] implement the support for using the shared cache for the job jar and libjars</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5662</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description></description>
                <environment></environment>
        <key id="12682208">MAPREDUCE-5662</key>
            <summary>implement the support for using the shared cache for the job jar and libjars</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="sjlee0">Sangjin Lee</assignee>
                                    <reporter username="sjlee0">Sangjin Lee</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Dec 2013 19:35:38 +0000</created>
                <updated>Mon, 2 Dec 2013 19:39:25 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12652263">YARN-1492</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12682207">YARN-1465</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5661] ShuffleHandler using yarn.nodemanager.local-dirs instead of mapreduce.cluster.local.dir</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5661</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;While debugging an issue where a MapReduce job is failing due to running out of disk space, I noticed that the &lt;tt&gt;ShuffleHandler&lt;/tt&gt; uses &lt;tt&gt;yarn.nodemanager.local-dirs&lt;/tt&gt; for its &lt;tt&gt;LocalDirAllocator&lt;/tt&gt; whereas all of the other MapReduce classes use &lt;tt&gt;mapreduce.cluster.local.dir&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ find hadoop-mapreduce-project/hadoop-mapreduce-client/*/src/main/java/ -name &quot;*.java&quot; | xargs grep &quot;new LocalDirAllocator(&quot;
hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/YarnChild.java:    LocalDirAllocator lDirAlloc = new LocalDirAllocator(MRConfig.LOCAL_DIR);
hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/YarnOutputFiles.java:    new LocalDirAllocator(MRConfig.LOCAL_DIR);
hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapred/LocalDistributedCacheManager.java:      new LocalDirAllocator(MRConfig.LOCAL_DIR);
hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/BackupStore.java:      this.lDirAlloc = new LocalDirAllocator(MRConfig.LOCAL_DIR);
hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/MROutputFiles.java:    new LocalDirAllocator(MRConfig.LOCAL_DIR);
hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/Merger.java:    new LocalDirAllocator(MRConfig.LOCAL_DIR);
hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/Task.java:    this.lDirAlloc = new LocalDirAllocator(MRConfig.LOCAL_DIR);

*****hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java:      new LocalDirAllocator(YarnConfiguration.NM_LOCAL_DIRS);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This inconsistency feels like something that is likely to confuse admins.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12682142">MAPREDUCE-5661</key>
            <summary>ShuffleHandler using yarn.nodemanager.local-dirs instead of mapreduce.cluster.local.dir</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sirianni">Eric Sirianni</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Dec 2013 14:30:20 +0000</created>
                <updated>Thu, 5 Dec 2013 21:32:08 +0000</updated>
                            <resolved>Thu, 5 Dec 2013 21:32:08 +0000</resolved>
                                    <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13836652" author="jlowe" created="Mon, 2 Dec 2013 16:22:05 +0000"  >&lt;p&gt;Note that YarnChild.configureLocalDirs sets this property based on an environment variable, which is itself derived from yarn.nodemanager.local-dirs, and therefore most of the other references are really coming from what was specified in yarn.nodemanager.local-dirs and not what was configured by an admin.  The notable exception would be jobs run in local mode.&lt;/p&gt;

&lt;p&gt;Also note that the shuffle handler is a bit special in that it is the one piece of MapReduce code that runs as part of the YARN nodemanager process and not as part of a job or a client.  It is more likely yarn.nodemanager.local-dirs is configured on a particular YARN node than mapreduce.cluster.local.dir, so I think it&apos;s appropriate that variable is used in the shuffle handler case.  I don&apos;t think mapreduce.cluster.local.dir is even set on some of our clusters, as the MapReduce framework configures this variable for tasks when running under YARN.  I wouldn&apos;t expect it to have to be configured by admins at all unless supporting jobs in local mode and for some reason the default isn&apos;t sufficient.&lt;/p&gt;</comment>
                            <comment id="13836758" author="sirianni" created="Mon, 2 Dec 2013 18:29:27 +0000"  >&lt;p&gt;The description for &lt;tt&gt;mapreduce.cluster.local.dir&lt;/tt&gt; implies that that directory will receive significant load:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;mapreduce.cluster.local.dir&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;${hadoop.tmp.dir}/mapred/local&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;description&amp;gt;&lt;/span&gt;
      The local directory where MapReduce stores intermediate
      data files.  May be a comma-separated list of
      directories on different devices in order to spread disk i/o.
      Directories that do not exist are ignored.
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/description&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since you are suggesting that the default (typically in /tmp) is sufficient, perhaps that description should be altered?  I&apos;m observing that the shuffle is creating the majority of the disk I/O in my MapReduce jobs, which is using the &lt;tt&gt;yarn.nodemanager.local-dirs&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13836779" author="jlowe" created="Mon, 2 Dec 2013 18:48:17 +0000"  >&lt;p&gt;Yes, in a YARN cluster the majority of the I/O on a node for MapReduce should be in the yarn.nodemanager.local-dirs directories.  Those settings are replicated to mapreduce.cluster.local.dir during task startup under YARN, so admins don&apos;t normally have to configure mapreduce.cluster.local.dir.  I would expect an explicit setting of mapreduce.cluster.local.dir to only take effect when running a job in local mode, which usually isn&apos;t a very big job and therefore the default of somewhere under /tmp is probably fine for most of those cases.&lt;/p&gt;

&lt;p&gt;So to sum up, tasks are using mapreduce.cluster.local.dir but the directories listed there are derived from yarn.nodemanager.local-dirs in a YARN cluster.  Setting mapreduce.cluster.local.dir in mapred-site.xml would have no effect for most MapReduce jobs in a YARN cluster.&lt;/p&gt;</comment>
                            <comment id="13836792" author="sirianni" created="Mon, 2 Dec 2013 18:58:37 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Note that YarnChild.configureLocalDirs sets this property based on an environment variable&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah.  I see now.  I didn&apos;t realize that &quot;this property&quot; meant &lt;tt&gt;mapreduce.cluster.local.dir&lt;/tt&gt;.  Got it, thanks.&lt;/p&gt;</comment>
                            <comment id="13840460" author="sirianni" created="Thu, 5 Dec 2013 19:33:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;, given the explanation above, should this JIRA be closed?&lt;/p&gt;</comment>
                            <comment id="13840593" author="jlowe" created="Thu, 5 Dec 2013 21:32:08 +0000"  >&lt;p&gt;Closing as shufflehandler should continue to use the yarn property since it&apos;s part of the nodemanager process.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Dec 2013 16:22:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5660] Log info about possible thrashing (when using memory-based scheduling in Capacity Scheduler) is not printed</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5660</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;There is a tiny, but confusing when troubleshooting, bug in TaskTracker code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (totalMemoryAllottedForTasks &amp;gt; totalPhysicalMemoryOnTT) {
  LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;totalMemoryAllottedForTasks &amp;gt; totalPhysicalMemoryOnTT.&quot;&lt;/span&gt;
      + &lt;span class=&quot;code-quote&quot;&gt;&quot; Thrashing might happen.&quot;&lt;/span&gt;);
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (totalMemoryAllottedForTasks &amp;gt; totalVirtualMemoryOnTT) {
  LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;totalMemoryAllottedForTasks &amp;gt; totalVirtualMemoryOnTT.&quot;&lt;/span&gt;
      + &lt;span class=&quot;code-quote&quot;&gt;&quot; Thrashing might happen.&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;totalMemoryAllottedForTasks is calculated in megabytes, while totalPhysicalMemoryOnTT (and totalVirtualMemoryOnTT) is calculated in bytes. totalMemoryAllottedForTasks should be converted to bytes for a correct comparison.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681998">MAPREDUCE-5660</key>
            <summary>Log info about possible thrashing (when using memory-based scheduling in Capacity Scheduler) is not printed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kawaa">Adam Kawa</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Dec 2013 14:09:32 +0000</created>
                <updated>Sun, 1 Dec 2013 22:52:42 +0000</updated>
                                            <version>1.2.1</version>
                                                    <component>capacity-sched</component>
                    <component>mrv1</component>
                    <component>tasktracker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13836136" author="hadoopqa" created="Sun, 1 Dec 2013 22:52:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12616489/MAPREDUCE-5660.1.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12616489/MAPREDUCE-5660.1.patch.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4234//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4234//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12616489" name="MAPREDUCE-5660.1.patch.txt" size="1108" author="kawaa" created="Sun, 1 Dec 2013 22:50:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 1 Dec 2013 22:52:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361264</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5658] JHS API and other changes to support tags</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5658</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1399&quot; title=&quot;Allow users to annotate an application with multiple tags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1399&quot;&gt;YARN-1399&lt;/a&gt; introduces support for adding tags to an application. The JHS should use this and support querying MR jobs with particular tags set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681843">MAPREDUCE-5658</key>
            <summary>JHS API and other changes to support tags</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kkambatl">Karthik Kambatla</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Nov 2013 07:13:14 +0000</created>
                <updated>Fri, 29 Nov 2013 07:13:40 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>jobhistoryserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12678613">YARN-1399</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361112</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361114</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5657] [JDK8] Fix Javadoc errors caused by incorrect or illegal tags in doc comments</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5657</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Javadoc is more strict by default in JDK8 and will error out on malformed or illegal tags found in doc comments. Although tagged as JDK8 all of the required changes are generic Javadoc cleanups.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681663">MAPREDUCE-5657</key>
            <summary>[JDK8] Fix Javadoc errors caused by incorrect or illegal tags in doc comments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Nov 2013 21:17:13 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:45 +0000</updated>
                                            <version>3.0.0</version>
                    <version>2.3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13834714" author="hadoopqa" created="Thu, 28 Nov 2013 10:56:47 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12616125/5657-branch-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12616125/5657-branch-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-examples hadoop-tools/hadoop-distcp hadoop-tools/hadoop-extras hadoop-tools/hadoop-gridmix:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4233//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4233//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4233//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4233//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13862107" author="apurtell" created="Sat, 4 Jan 2014 01:05:13 +0000"  >&lt;p&gt;Updated patches refreshed to latest trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13862142" author="hadoopqa" created="Sat, 4 Jan 2014 01:56:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621435/5657-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621435/5657-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-examples hadoop-tools/hadoop-distcp hadoop-tools/hadoop-extras hadoop-tools/hadoop-gridmix hadoop-tools/hadoop-openstack hadoop-tools/hadoop-rumen.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4301//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4301//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4301//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4301//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12681661">HADOOP-10134</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12621434" name="5657-branch-2.patch" size="112616" author="apurtell" created="Sat, 4 Jan 2014 01:05:13 +0000"/>
                            <attachment id="12616125" name="5657-branch-2.patch" size="99513" author="apurtell" created="Wed, 27 Nov 2013 21:18:00 +0000"/>
                            <attachment id="12621435" name="5657-trunk.patch" size="113311" author="apurtell" created="Sat, 4 Jan 2014 01:05:13 +0000"/>
                            <attachment id="12616124" name="5657-trunk.patch" size="100473" author="apurtell" created="Wed, 27 Nov 2013 21:18:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Nov 2013 10:56:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360932</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360934</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5656] bzip2 codec can drop records when reading data in splits</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5656</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Bzip2Codec.BZip2CompressionInputStream can cause records to be dropped when reading them in splits based on where record delimiters occur relative to compression block boundaries.&lt;/p&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;Koji Noguchi&lt;/a&gt; for discovering this problem while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3251&quot; title=&quot;Bzip2TextInputFormat requires double the memory of maximum record size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3251&quot;&gt;PIG-3251&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12651208">MAPREDUCE-5656</key>
            <summary>bzip2 codec can drop records when reading data in splits</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlowe">Jason Lowe</assignee>
                                    <reporter username="jlowe">Jason Lowe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Jun 2013 21:54:22 +0100</created>
                <updated>Tue, 28 Jan 2014 23:33:41 +0000</updated>
                            <resolved>Mon, 9 Dec 2013 23:42:41 +0000</resolved>
                                    <version>2.0.4-alpha</version>
                    <version>0.23.8</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13676373" author="jlowe" created="Wed, 5 Jun 2013 22:33:14 +0100"  >&lt;p&gt;Attaching a testcase for the problem, which requires the same input file as used in one of Pig&apos;s bzip2 unit tests, &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12438881/blockEndingInCR.txt.bz2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;blockEndingInCR.txt.bz2&lt;/a&gt;.  Drop the file into hadoop-common-project/hadoop-common/src/test/resources/ and the unit test can be run via Maven.&lt;/p&gt;

&lt;p&gt;I&apos;ve also manually verified the loss of records via a simple streaming job:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hadoop jar hadoop-*/share/hadoop/tools/lib/hadoop-streaming*.jar -Dmapreduce.input.fileinputformat.split.minsize=136498 -Dmapreduce.job.maps=3 -input blockEndingInCR.txt.bz2 -output streamout -mapper cat -reducer NONE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Examining the output of the job shows that the record after the carriage return in the file was dropped.  Running a similar streaming job with only one map (no splits) shows the record is not dropped.&lt;/p&gt;</comment>
                            <comment id="13677571" author="jlowe" created="Thu, 6 Jun 2013 22:57:01 +0100"  >&lt;p&gt;This is a bit tricky to get right, as I ran into &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3352&quot; title=&quot;Bzip2TextInputFormat can duplicate records across splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3352&quot;&gt;PIG-3352&lt;/a&gt; while investigating it.  &lt;/p&gt;

&lt;p&gt;However I think we can detect these CR/LF/CRLF boundary conditions properly, if the line reader that is building the record reads the data byte-by-byte and notices the exact character where the reported position goes past the end of the split.  At that point it can decide which of the cases it is in and react properly.  That would also solve similar problems that exist for custom, multi-byte delimiters that span block boundaries.&lt;/p&gt;

&lt;p&gt;Currently the line reader is buffered, and it would be a shame to have to give that up.  I think we can still use buffered reads from the codec stream with one critical assumption: the codec will &lt;b&gt;never&lt;/b&gt; return data spanning two blocks in a single read.  I&apos;m assuming that&apos;s the case today, since failure to do that would break the existing LineRecordReader-&amp;gt;LineReader-&amp;gt;SplittableCompressionCodec relationship today.  LineReader is buffering data from the codec, but LineRecordReader is checking the codec&apos;s position after each record returned.&lt;/p&gt;</comment>
                            <comment id="13678536" author="jlowe" created="Fri, 7 Jun 2013 23:46:44 +0100"  >&lt;p&gt;Attaching a draft of a patch that I believe will fix the issue.  Comments welcome.&lt;/p&gt;

&lt;p&gt;I no longer believe this is a codec issue, since the codec doesn&apos;t know anything about record delimiters.  The codec is properly reporting when the next split has started to be read.  The problem actually lies between the LineRecordReader and LineReader when the codec is involved, as the LineRecordReader is relying solely on the codec to report when the split has completed, oblivious to the buffering and peeking going on in LineReader.  If others agree, I can move this to a MAPREDUCE JIRA.&lt;/p&gt;

&lt;p&gt;The patch makes the LineRecordReader aware of the fact that the split ended in the middle of a delimiter, so it can decide to read another record after the codec reports the split ended.&lt;/p&gt;

&lt;p&gt;Added some unit tests which uses a couple of test files that I&apos;m also attaching.  These need to be dropped into hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/ so the unit tests can find them.&lt;/p&gt;

&lt;p&gt;Any feedback is appreciated.  I&apos;ll also work on some tests with multi-byte custom delimiters where the split ends in the middle of the delimiter.&lt;/p&gt;</comment>
                            <comment id="13681668" author="nroberts" created="Wed, 12 Jun 2013 22:36:45 +0100"  >&lt;p&gt;Looked over patch and approach seems reasonable. I&apos;m not sure there is much else you can do without changing the codecs themselves, or forcing everything to move one byte at a time (so that we can know precisely when the codec moves beyond the split). &lt;/p&gt;

&lt;p&gt;It might help to add some comments somewhere in the code which specifically illustrate the boundary conditions. As you said it&apos;s tricky (clearly since both pig and MR got it wrong in slightly different edge cases), it certainly couldn&apos;t hurt to add some more commentary in this area.&lt;/p&gt;</comment>
                            <comment id="13682521" author="jlowe" created="Thu, 13 Jun 2013 19:30:15 +0100"  >&lt;p&gt;Added a discussion of the various use cases and assumption on how compressed input streams read blocks to CompressSplitLineReader.&lt;/p&gt;</comment>
                            <comment id="13687158" author="nroberts" created="Tue, 18 Jun 2013 21:40:10 +0100"  >&lt;p&gt;Thanks for adding the detailed comment. Well explained!&lt;br/&gt;
+1 for the patch.&lt;/p&gt;</comment>
                            <comment id="13814580" author="jeagles" created="Wed, 6 Nov 2013 03:46:18 +0000"  >&lt;p&gt;Looks like this patch is ready to go in as it still applies and the tests still pass. Is there anything else needed before this can go in?&lt;/p&gt;</comment>
                            <comment id="13824444" author="chris.douglas" created="Sat, 16 Nov 2013 11:24:14 +0000"  >&lt;p&gt;+1 The unit test clearly demonstrates the bug and dropping records is severe enough that this case should be fixed.&lt;/p&gt;

&lt;p&gt;The comment is helpful, thanks for including it. &lt;tt&gt;inDelimiter&lt;/tt&gt; is insufficient because &lt;tt&gt;LineReader::readDefaultLine&lt;/tt&gt; will match \n, while &lt;tt&gt;LineReader::readCustomLine&lt;/tt&gt; would consider a partial match incomplete and require an extra line? I looked briefly at the custom delimiter code, and I&apos;m not seeing how it handles splits that start in the middle of a delimiter. I must be missing something obvious...&lt;/p&gt;</comment>
                            <comment id="13825854" author="jlowe" created="Mon, 18 Nov 2013 22:23:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;tt&gt;inDelimiter&lt;/tt&gt; is insufficient because &lt;tt&gt;LineReader::readDefaultLine&lt;/tt&gt; will match \n, while &lt;tt&gt;LineReader::readCustomLine&lt;/tt&gt; would consider a partial match incomplete and require an extra line?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, the crux of the issue is the default delimiter supports a subset of the delimiter as a valid delimiter (i.e.: \r\n is a delimiter but so is \r or \n).  The custom delimiter support does not allow a subset of the specified delimiter to be a valid delimiter as well, so it won&apos;t recognize the start of the characters as a delimiter and will read an extra line before starting.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I looked briefly at the custom delimiter code, and I&apos;m not seeing how it handles splits that start in the middle of a delimiter. I must be missing something obvious...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, it does look like there&apos;s a problem with the handling of custom record delimiters on uncompressed input.  For this to work properly we need the consumer of the previous split to handle all bytes up to and including the first full record delimiter that starts at or after its split ends.  With this patch I think we have this case covered for compressed input due to the needAdditionalRecordAfterSplit logic.  However since the custom delimiter line reader seems to be returning the size of the record and subsequent delimiter bytes as the bytes consumed, I think we will end up reporting the end of the split too early to the LineRecordReader for uncompressed data in the case where the delimiter straddles the split boundary.&lt;/p&gt;

&lt;p&gt;To verify there&apos;s a problem, I ran a simple wordcount on the following input data:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
abcxxx
defxxx
ghixxx
jklxxx
mnoxxx
pqrxxx
stuxxx
vw xxx
xyzxxx
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then I ran it with the options &lt;tt&gt;-Dmapreduce.input.fileinputformat.split.maxsize=34 -Dtextinputformat.record.delimiter=xxx&lt;/tt&gt;.  The resulting output looked like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;abc	1
def	1
ghi	1
jkl	1
mno	1
stu	1
vw	1
xyz	1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So we dropped the &quot;pqr&quot; record.  Not good.&lt;/p&gt;

&lt;p&gt;I&apos;m tempted to handle this as a separate JIRA since I believe this will be an issue only with uncompressed inputs after this patch.&lt;/p&gt;</comment>
                            <comment id="13826352" author="chris.douglas" created="Tue, 19 Nov 2013 09:49:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m tempted to handle this as a separate JIRA since I believe this will be an issue only with uncompressed inputs after this patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, that makes sense. Particularly since this issue covers the codec and the custom delimiter bug is in in the text processing. Thanks for looking into it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;With this patch I think we have this case covered for compressed input due to the needAdditionalRecordAfterSplit logic.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I... think that&apos;s true. We can think about it in the followup.&lt;/p&gt;</comment>
                            <comment id="13826706" author="jlowe" created="Tue, 19 Nov 2013 17:24:46 +0000"  >&lt;p&gt;Turns out there&apos;s already a followup for multibyte custom delimiters at &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9867&quot; title=&quot;org.apache.hadoop.mapred.LineRecordReader does not handle multibyte record delimiters well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9867&quot;&gt;HADOOP-9867&lt;/a&gt;, so I&apos;ll add the testcase and relevant details to that JIRA.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Chris.  Given your earlier +1 I think this is now ready to go as-is.  If there are no objections I&apos;ll commit this in the next few days.&lt;/p&gt;</comment>
                            <comment id="13828448" author="vinayrpet" created="Thu, 21 Nov 2013 03:13:30 +0000"  >&lt;p&gt;Thanks Jason for the patch for this tricky issue.&lt;br/&gt;
Patch looks good to me.&lt;/p&gt;

&lt;p&gt;One small nit.&lt;br/&gt;
There are already two Test classes TestLineRecordReader in mapred and mapreduce.lib.input packages in hadoop-mapreduce-client-jobclient project. It will be better to move included tests to these classes instead of creating multiple classes.&lt;/p&gt;</comment>
                            <comment id="13828993" author="jlowe" created="Thu, 21 Nov 2013 14:59:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;There are already two Test classes TestLineRecordReader in mapred and mapreduce.lib.input packages in hadoop-mapreduce-client-jobclient project. It will be better to move included tests to these classes instead of creating multiple classes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d much rather keep the unit tests for LineRecordReader in the same package as the code, that way when the code is updated Jenkins will run the tests to catch errors.  If we move these unit tests to the jobclient module then if a patch touches only LineRecordReader in the core module we won&apos;t run the unit tests since they&apos;re in a different module.&lt;/p&gt;

&lt;p&gt;Instead I&apos;d rather rename the TestLineRecordReader tests in the jobclient module to something like TestLineRecordReaderJobs.  Those tests are really integration tests rather than unit tests, since they&apos;re running a job for each test rather than just the LineRecordReader in isolation.&lt;/p&gt;</comment>
                            <comment id="13829028" author="vinayrpet" created="Thu, 21 Nov 2013 15:33:45 +0000"  >&lt;p&gt;Thats sounds better jason. &lt;br/&gt;
+1 for the existing patch then.&lt;/p&gt;</comment>
                            <comment id="13832969" author="jlowe" created="Tue, 26 Nov 2013 20:02:13 +0000"  >&lt;p&gt;Cleanup work in preparation for commit.  Moving this JIRA to MAPREDUCE since it&apos;s primarily changes in that project.  Also uploading a binary patch that can be applied with git-apply as reference of what will be committed (same patch as before with binary test files added).&lt;/p&gt;

&lt;p&gt;Awating Jenkins confirmation and commit of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5640&quot; title=&quot;Rename TestLineRecordReader in jobclient module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5640&quot;&gt;&lt;del&gt;MAPREDUCE-5640&lt;/del&gt;&lt;/a&gt; to avoid test name conflicts.&lt;/p&gt;</comment>
                            <comment id="13833031" author="hadoopqa" created="Tue, 26 Nov 2013 20:44:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615899/MAPREDUCE-5656.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615899/MAPREDUCE-5656.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapred.TestLineRecordReader&lt;br/&gt;
                  org.apache.hadoop.mapreduce.lib.input.TestLineRecordReader&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4232//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4232//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4232//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4232//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13833051" author="jlowe" created="Tue, 26 Nov 2013 21:00:41 +0000"  >&lt;p&gt;The two failed tests are expected because test-patch doesn&apos;t handle binary patches properly.  The new binary test files weren&apos;t added so the tests that need them failed.&lt;/p&gt;</comment>
                            <comment id="13834433" author="vinayrpet" created="Thu, 28 Nov 2013 01:14:45 +0000"  >&lt;p&gt;One small nit here,&lt;br/&gt;
SplitLineReader is not formatted with 2 whitespaces.&lt;/p&gt;</comment>
                            <comment id="13834447" author="vinayrpet" created="Thu, 28 Nov 2013 01:53:57 +0000"  >&lt;p&gt;I have one doubt here,&lt;/p&gt;

&lt;p&gt;Say, last record ended between delimiters and &lt;tt&gt;needAdditionalRecord&lt;/tt&gt; is true and one more record is read to buffer.&lt;br/&gt;
What if this record also ended between delimiters..? &lt;br/&gt;
Now also &lt;tt&gt;needAdditionalRecord&lt;/tt&gt; will be true and this will try to read one more record right..? This will be duplicated in next split.&lt;/p&gt;

&lt;p&gt;may be we need to set &lt;tt&gt;needAdditionalRecord&lt;/tt&gt; only if its not already been set to true. Right?&lt;/p&gt;</comment>
                            <comment id="13836600" author="jlowe" created="Mon, 2 Dec 2013 15:28:10 +0000"  >&lt;p&gt;That case is what the &lt;tt&gt;finished&lt;/tt&gt; flag in CompressedSplitLineReader is intended to catch.  Here&apos;s the scenario:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;LineRecordReader calls readLine&lt;/li&gt;
	&lt;li&gt;The line processing causes us to fetch the next compressed block beyond the split (i.e.: fillBuffer is called).  Let&apos;s say this causes us to set needAdditionalRecord=true.&lt;/li&gt;
	&lt;li&gt;LineRecordReader will process another iteration of the loop and call readLine again&lt;/li&gt;
	&lt;li&gt;readLine will notice that we are starting at a position past the end of the split and set finished=true.&lt;/li&gt;
	&lt;li&gt;At that point the needAdditionalRecordAfterSplit method will always return false and LineRecordReader should not read more than at most one record beyond the end of the split.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The key is needAdditionalRecordAfterSplit() will always return false once readLine() is invoked at a position after the split ends.&lt;/p&gt;</comment>
                            <comment id="13836610" author="jlowe" created="Mon, 2 Dec 2013 15:40:46 +0000"  >&lt;p&gt;Slightly updated patch to fix the spacing issue in SplitLineReader.&lt;/p&gt;</comment>
                            <comment id="13836644" author="hadoopqa" created="Mon, 2 Dec 2013 16:15:04 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12616562/MAPREDUCE-5656-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12616562/MAPREDUCE-5656-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapred.TestLineRecordReader&lt;br/&gt;
                  org.apache.hadoop.mapreduce.lib.input.TestLineRecordReader&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4235//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4235//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4235//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4235//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13840146" author="jlowe" created="Thu, 5 Dec 2013 15:06:51 +0000"  >&lt;p&gt;As before, test failures are expected because test-patch.sh isn&apos;t dealing with the binary patch correctly.  The tests pass when I run them locally.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vinayrpet&quot; class=&quot;user-hover&quot; rel=&quot;vinayrpet&quot;&gt;Vinay&lt;/a&gt;, do you have any further concerns or is this ready to go as-is?&lt;/p&gt;</comment>
                            <comment id="13840777" author="vinayrpet" created="Fri, 6 Dec 2013 01:12:53 +0000"  >&lt;p&gt;Thanks Jason for the update.&lt;br/&gt;
I think patch is ready to go in. +1&lt;/p&gt;</comment>
                            <comment id="13843705" author="jlowe" created="Mon, 9 Dec 2013 23:42:41 +0000"  >&lt;p&gt;Thanks to Nathan, Chris, and Vinay for the reviews!  I committed this to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13843715" author="hudson" created="Mon, 9 Dec 2013 23:48:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4856 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4856/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4856/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5656&quot; title=&quot;bzip2 codec can drop records when reading data in splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5656&quot;&gt;&lt;del&gt;MAPREDUCE-5656&lt;/del&gt;&lt;/a&gt;. bzip2 codec can drop records when reading data in splits. Contributed by Jason Lowe (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1549705&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1549705&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/LineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/LineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/SplitLineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/blockEndingInCR.txt.bz2&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/blockEndingInCRThenLF.txt.bz2&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13844187" author="hudson" created="Tue, 10 Dec 2013 11:01:07 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #417 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/417/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/417/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5656&quot; title=&quot;bzip2 codec can drop records when reading data in splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5656&quot;&gt;&lt;del&gt;MAPREDUCE-5656&lt;/del&gt;&lt;/a&gt;. bzip2 codec can drop records when reading data in splits. Contributed by Jason Lowe (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1549705&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1549705&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/LineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/LineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/SplitLineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/blockEndingInCR.txt.bz2&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/blockEndingInCRThenLF.txt.bz2&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13844269" author="hudson" created="Tue, 10 Dec 2013 13:39:29 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1608 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1608/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1608/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5656&quot; title=&quot;bzip2 codec can drop records when reading data in splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5656&quot;&gt;&lt;del&gt;MAPREDUCE-5656&lt;/del&gt;&lt;/a&gt;. bzip2 codec can drop records when reading data in splits. Contributed by Jason Lowe (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1549705&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1549705&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/LineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/LineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/SplitLineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/blockEndingInCR.txt.bz2&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/blockEndingInCRThenLF.txt.bz2&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13844304" author="hudson" created="Tue, 10 Dec 2013 14:43:12 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1634 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1634/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1634/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5656&quot; title=&quot;bzip2 codec can drop records when reading data in splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5656&quot;&gt;&lt;del&gt;MAPREDUCE-5656&lt;/del&gt;&lt;/a&gt;. bzip2 codec can drop records when reading data in splits. Contributed by Jason Lowe (jlowe: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1549705&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1549705&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/LineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/LineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/SplitLineReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/blockEndingInCR.txt.bz2&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/resources/blockEndingInCRThenLF.txt.bz2&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12663407">HADOOP-9867</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12637674">PIG-3251</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12587679" name="HADOOP-9622-2.patch" size="28597" author="jlowe" created="Thu, 13 Jun 2013 19:30:15 +0100"/>
                            <attachment id="12586393" name="HADOOP-9622-testcase.patch" size="2947" author="jlowe" created="Wed, 5 Jun 2013 22:33:14 +0100"/>
                            <attachment id="12586824" name="HADOOP-9622.patch" size="24092" author="jlowe" created="Fri, 7 Jun 2013 23:46:44 +0100"/>
                            <attachment id="12616562" name="MAPREDUCE-5656-2.patch" size="378926" author="jlowe" created="Mon, 2 Dec 2013 15:40:46 +0000"/>
                            <attachment id="12615899" name="MAPREDUCE-5656.patch" size="378956" author="jlowe" created="Tue, 26 Nov 2013 20:02:13 +0000"/>
                            <attachment id="12586822" name="blockEndingInCR.txt.bz2" size="136623" author="jlowe" created="Fri, 7 Jun 2013 23:46:44 +0100"/>
                            <attachment id="12586823" name="blockEndingInCRThenLF.txt.bz2" size="136623" author="jlowe" created="Fri, 7 Jun 2013 23:46:44 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Jun 2013 21:36:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331551</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5655] Remote job submit from windows to a linux hadoop cluster fails due to wrong classpath</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5655</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;I was trying to run a java class on my client, windows 7 developer environment, which submits a job to the remote Hadoop cluster, initiates a mapreduce there, and then downloads the results back to the local machine.&lt;/p&gt;

&lt;p&gt;General use case is to use hadoop services from a web application installed on a non-cluster computer, or as part of a developer environment.&lt;/p&gt;

&lt;p&gt;The problem was, that the ApplicationMaster&apos;s startup shell script (launch_container.sh) was generated with wrong CLASSPATH entry. Together with the java process call on the bottom of the file, these entries were generated in windows style, using % as shell variable marker and ; as the CLASSPATH delimiter.&lt;/p&gt;

&lt;p&gt;I tracked down the root cause, and found that the MrApps.java, and the YarnRunner.java classes create these entries, and is passed forward to the ApplicationMaster, assuming that the OS that runs these classes will match the one running the ApplicationMaster. But it&apos;s not the case, these are in 2 different jvm, and also the OS can be different, the strings are generated based on the client/submitter side&apos;s OS.&lt;/p&gt;

&lt;p&gt;I made some workaround changes to these 2 files, so i could launch my job, however there may be more problems ahead.&lt;/p&gt;

&lt;p&gt;update&lt;br/&gt;
 error message:&lt;br/&gt;
13/12/04 16:33:15 INFO mapreduce.Job: Job job_1386170530016_0001 failed with state FAILED due to: Application application_1386170530016_0001 failed 2 times due to AM Container for appattempt_1386170530016_0001_000002 exited with  exitCode: 1 due to: Exception from container-launch: &lt;br/&gt;
org.apache.hadoop.util.Shell$ExitCodeException: /bin/bash: line 0: fg: no job control&lt;/p&gt;

&lt;p&gt;at org.apache.hadoop.util.Shell.runCommand(Shell.java:464)&lt;br/&gt;
	at org.apache.hadoop.util.Shell.run(Shell.java:379)&lt;br/&gt;
	at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:589)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:195)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:283)&lt;br/&gt;
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:79)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:724)&lt;/p&gt;

&lt;p&gt;update2: &lt;br/&gt;
 It also reqires to add the following property to &lt;br/&gt;
 mapred-site.xml (or mapred-default.xml), on the windows box, so that the job launcher knows, that the job runner will be a linux:&lt;br/&gt;
  &amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;mapred.remote.os&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;Linux&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;Remote MapReduce framework&apos;s OS, can be either Linux or Windows&amp;lt;/description&amp;gt;&lt;br/&gt;
 &amp;lt;/property&lt;/p&gt;

&lt;p&gt;without this entry, the patched jar does the same as the unpatched, so it&apos;s required to work!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Client machine is a Windows 7 box, with Eclipse&lt;br/&gt;
Remote: there is a multi node hadoop cluster, installed on Ubuntu boxes (any linux)&lt;/p&gt;</environment>
        <key id="12681259">MAPREDUCE-5655</key>
            <summary>Remote job submit from windows to a linux hadoop cluster fails due to wrong classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="padisah">Attila Pados</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Nov 2013 13:16:16 +0000</created>
                <updated>Tue, 17 Dec 2013 10:08:07 +0000</updated>
                            <resolved>Mon, 2 Dec 2013 18:35:29 +0000</resolved>
                                    <version>2.2.0</version>
                                                    <component>client</component>
                    <component>job submission</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13832593" author="padisah" created="Tue, 26 Nov 2013 13:48:14 +0000"  >&lt;p&gt;I wanted to upload 2 patch files, however the jira tool&apos;s Submit Patch dialog was instead a &quot;Submit bug&quot; dialog, without any patch upload input field whatever, so i skipped it.&lt;br/&gt;
If someone helps me to find the correct way to upload them i will do it, though this is a workaround, and should not mean a long term solution.&lt;/p&gt;</comment>
                            <comment id="13832638" author="devaraj.k" created="Tue, 26 Nov 2013 15:03:15 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4052&quot; title=&quot;Windows eclipse cannot submit job from Windows client to Linux/Unix Hadoop cluster.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4052&quot;&gt;MAPREDUCE-4052&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13832751" author="padisah" created="Tue, 26 Nov 2013 16:46:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4052&quot; title=&quot;Windows eclipse cannot submit job from Windows client to Linux/Unix Hadoop cluster.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4052&quot;&gt;MAPREDUCE-4052&lt;/a&gt; affects 0.23.1, and the relevant codes are also different, &lt;br/&gt;
this bug is for version 2.2.0&lt;/p&gt;

&lt;p&gt;also, in this case the java process call was referring to the java_home as %JAVA_HOME%, which wasn&apos;t mentioned in that bug, and here part of the problem&lt;/p&gt;
</comment>
                            <comment id="13836763" author="cnauroth" created="Mon, 2 Dec 2013 18:35:29 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=padisah&quot; class=&quot;user-hover&quot; rel=&quot;padisah&quot;&gt;Attila Pados&lt;/a&gt;.  Thanks for the bug report.&lt;/p&gt;

&lt;p&gt;I do think this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4052&quot; title=&quot;Windows eclipse cannot submit job from Windows client to Linux/Unix Hadoop cluster.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4052&quot;&gt;MAPREDUCE-4052&lt;/a&gt;.  The 0.23.x code line is similar to the 2.2.x code line.  It&apos;s often the case that a bug in 2.2.x is also a bug in 0.23.x.  I&apos;ve just updated &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4052&quot; title=&quot;Windows eclipse cannot submit job from Windows client to Linux/Unix Hadoop cluster.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4052&quot;&gt;MAPREDUCE-4052&lt;/a&gt; to make the title clearer and indicate that it also affects version 2.2.0.&lt;/p&gt;

&lt;p&gt;I recommend that your participate on &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4052&quot; title=&quot;Windows eclipse cannot submit job from Windows client to Linux/Unix Hadoop cluster.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4052&quot;&gt;MAPREDUCE-4052&lt;/a&gt;.  There is a patch attached to that issue, but it&apos;s a few months old, so it&apos;s likely to be out-of-date at this point.  Seeing your latest patch would be valuable.  You can upload your patch by clicking the More button at the top and then going through the Attach Files dialog.  The Submit Patch button is used to submit your patch to Jenkins for a test run against current trunk.&lt;/p&gt;

&lt;p&gt;Thanks again!&lt;/p&gt;</comment>
                            <comment id="13838899" author="padisah" created="Wed, 4 Dec 2013 13:44:57 +0000"  >&lt;p&gt;These 2 patches intend to fix different jobLaunch/jobExecution OS problems with MapReduce. It also reqires to add the following property to &lt;br/&gt;
mapred-site.xml (or mapred-default.xml):&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;mapred.remote.os&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;Linux&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;Remote MapReduce framework&apos;s OS, can be either Linux or Windows&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&lt;/p&gt;

&lt;p&gt;This is used when job launched from windows, executed in Linux.&lt;/p&gt;</comment>
                            <comment id="13838908" author="padisah" created="Wed, 4 Dec 2013 14:07:12 +0000"  >&lt;p&gt;I checked the patches of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4052&quot; title=&quot;Windows eclipse cannot submit job from Windows client to Linux/Unix Hadoop cluster.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4052&quot;&gt;MAPREDUCE-4052&lt;/a&gt;, the patch for ContainerLaunch.java finds the part to modify in the 136th line. The same code in the 2.2.0 version begins at 173th line. So, i think the patch for 0.23.x is not compatible with 2.2.0, and vice versa. The 2 bugs originate from the same problem, but they are also different, the first problem i faced was that the launch_container.sh tried to start java with %JAVA_HOME% and i got  a &quot;task returned with -1&quot; or similar error, because the shell script could not be executed. &lt;/p&gt;

&lt;p&gt;My patch fixes this issue too.&lt;/p&gt;

&lt;p&gt;There is a config entry in mapred-default.xml:&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;...&amp;lt;/description&amp;gt;&lt;br/&gt;
   &amp;lt;name&amp;gt;mapreduce.application.classpath&amp;lt;/name&amp;gt;&lt;br/&gt;
   &amp;lt;value&amp;gt;$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*,&lt;br/&gt;
  $HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*.&amp;lt;/value&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;This probably needs to be altered also, due to the $ - %-&lt;del&gt;% difference between windows&lt;/del&gt; linux as well.&lt;br/&gt;
If you set up your environment to run the job in local/windows, you need to set it it to %, but when the job will run on a linux cluster, it must be set back to the $ which is the default i think.&lt;/p&gt;

&lt;p&gt;The patch may cause the failure of a unit test, if the mapred.remote.os is set, and the test runs a job in local mode. This is not tested by me, because i had several other issues with running the unit tests, so i skipped this.&lt;/p&gt;

&lt;p&gt;I have to repeat, that this is merely a workaround, probably more deep changes would be needed, that the launch_container.sh would be created by a java component running on the cluster side instead of the client side, but i don&apos;t feel myself capable of doing that. &lt;/p&gt;</comment>
                            <comment id="13838923" author="padisah" created="Wed, 4 Dec 2013 14:21:45 +0000"  >&lt;p&gt;the vice versa case: linux client, windows cluster is not handled by this patch&lt;/p&gt;</comment>
                            <comment id="13839082" author="cnauroth" created="Wed, 4 Dec 2013 17:19:24 +0000"  >&lt;p&gt;Regarding the &lt;tt&gt;mapreduce.application.classpath&lt;/tt&gt; configuration property, this part was already fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5442&quot; title=&quot;$HADOOP_MAPRED_HOME/$HADOOP_CONF_DIR setting not working on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5442&quot;&gt;&lt;del&gt;MAPREDUCE-5442&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12547545">MAPREDUCE-4052</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12616981" name="MRApps.patch" size="5258" author="padisah" created="Wed, 4 Dec 2013 13:44:57 +0000"/>
                            <attachment id="12616982" name="YARNRunner.patch" size="720" author="padisah" created="Wed, 4 Dec 2013 13:44:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Nov 2013 15:03:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360531</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5654] blacklist is not propagated from AM to RM</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5654</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;I was trying to blacklist some nodes. I added a set of hosts as strings into blacklistAdditions list and propagated into RMContainerRequestor#makeRemoteRequest to the RM. &lt;/p&gt;

&lt;p&gt;However the blacklist is received empty at RM. I logged the path for blacklist in AM and I found that in ApplicationMasterProtocolPBClientImpl#allocate, this list is lost. &lt;/p&gt;

&lt;p&gt;I print request.getResourceBlacklistRequest().getBlacklistAdditions().toString() at the beginning of ApplicationMasterProtocolPBClientImpl#allocate and the blacklisted additions are there. &lt;/p&gt;

&lt;p&gt;After AllocateRequestProto requestProto is created based on this request, and I print again requestProto.getBlacklistRequest().getBlacklistAdditionsList().toString(), the blacklist additions is empty now.&lt;/p&gt;

&lt;p&gt;I looked even further and log what happened. At some point in yarn-api, I was lost with my logging as that code was regenerated every time I recompiled yarn-api. &lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
robert&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681114">MAPREDUCE-5654</key>
            <summary>blacklist is not propagated from AM to RM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rgrandl">Robert Grandl</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Nov 2013 19:29:00 +0000</created>
                <updated>Tue, 3 Dec 2013 00:35:26 +0000</updated>
                                                                            <component>applicationmaster</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13832052" author="bikassaha" created="Mon, 25 Nov 2013 23:19:37 +0000"  >&lt;p&gt;Are you using AMRMClient/AMRMClientAsync or writing against the protocol API&apos;s directly? If its the later, then can you please try using the AMRMClient libraries. If the issue does not repro with the client libraries then it could be a bug in your code.&lt;/p&gt;</comment>
                            <comment id="13832068" author="rgrandl" created="Mon, 25 Nov 2013 23:36:29 +0000"  >&lt;p&gt;I am not sure I fully understand what are you saying. What I did was to force to blacklist some node in RMContainerRequestor#computeIgnoreBlacklisting. So I saw in RMContainerRequest#makeRemoteRequest that I have for the ResourceRequest from the ask list, a blackAddition element with the name of the host I blacklisted. Unfortunately this list is not propagated to RM. &lt;/p&gt;

&lt;p&gt;I am not doing any writing against the protocol API I believe. I simply logged the blacklist in different files on the path from AM to RM. But this list is populated in computeIgnoreBlacklisting as default, not doing any fancy things. &lt;/p&gt;
</comment>
                            <comment id="13832070" author="bikassaha" created="Mon, 25 Nov 2013 23:42:56 +0000"  >&lt;p&gt;What is RMContainerRequestor? AFAIK, this is an internal implementation class of the MR App master and not part of the YARN API. Are you writing your own app or reporting a bug in the MR App master. If its the latter, then this bug needs to move to the MAPREDUCE project.&lt;/p&gt;</comment>
                            <comment id="13832075" author="rgrandl" created="Mon, 25 Nov 2013 23:49:36 +0000"  >&lt;p&gt;This happened in MR App master. However, it is not clear if the bug is due to MR implementation or Yarn API. From my side, the blacklist is NOT propagated from MR AM to RM. But as far as I did the tracing, it goes correctly to YARN-API. &lt;/p&gt;

&lt;p&gt;If this may need to be moved to MAPREDUCE project, can you take care of that ? Thanks. &lt;/p&gt;</comment>
                            <comment id="13832089" author="zjshen" created="Mon, 25 Nov 2013 23:59:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgrandl&quot; class=&quot;user-hover&quot; rel=&quot;rgrandl&quot;&gt;Robert Grandl&lt;/a&gt;, according to the description, the problem happens on MR  AppMaster.&lt;/p&gt;</comment>
                            <comment id="13832102" author="vinodkv" created="Tue, 26 Nov 2013 00:07:14 +0000"  >&lt;p&gt;Let&apos;s investigate if it turns out to be a bug in YARN before moving this to MR.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgrandl&quot; class=&quot;user-hover&quot; rel=&quot;rgrandl&quot;&gt;Robert Grandl&lt;/a&gt;, you are forcing the blacklist by changing MR code and running your own modified MR App?&lt;/p&gt;

&lt;p&gt;Also you are saying that you put logs in ApplicationMasterProtocolPBClientImpl? Can you put more logs in ResourceBlacklistRequestPBImpl and see where it is breaking?&lt;/p&gt;</comment>
                            <comment id="13832113" author="rgrandl" created="Tue, 26 Nov 2013 00:15:52 +0000"  >&lt;p&gt;Vinod, yes, I am forcing blacklisting by changing MR code. What I basically did, is whenever computeIgnoreBlacklisting() is first called, I ensure that blacklistAdditions.addAll(blacklistNodes) is called, where I enforce blacklistedNodes to have a host.(blacklistedNodes is a set of string, so I guess is nothing bad if I do a blacklistedNodes.add(&quot;host_name&quot;)). &lt;/p&gt;

&lt;p&gt;I was tracing before till yarn-api but I did not saved the log calls. I will do again and let you know guys till where I am able to trace. thanks. &lt;/p&gt;</comment>
                            <comment id="13833233" author="rgrandl" created="Tue, 26 Nov 2013 23:47:23 +0000"  >&lt;p&gt;I did some logging in ResourceBlacklistRequestPBImpl. In function &lt;br/&gt;
public ResourceBlacklistRequestProto.getProto() &lt;/p&gt;
{    
   mergeLocalProto();
  LOG.info(&#8220;black_a=&#8221;+blacklistAdditions.toString());  // IT SHOWS CORRECTLY

   proto = viaProto ? proto : builder.build();
   viaProto = true;
   LOG.info(&#8220;black_aa=&#8221;+proto.getBlacklistAdditionsList().toString()); // IS EMPTY
  return proto;
}
&lt;p&gt;and viaProto seems to be true, so proto = proto which is a ResourceBlacklistRequestProto. ResourceBlacklistRequestProto is defined in hadoop-yarn-api/YarnProtos.java, where the source is regenerated so cannot log. I believe the problem is somewhere here in encoding blacklistAdditions/removals. I believe that also because release containers are propagated correctly and seems they are not using any YarnProtos.java related stuff.&lt;/p&gt;</comment>
                            <comment id="13837146" author="rgrandl" created="Tue, 3 Dec 2013 00:35:26 +0000"  >&lt;p&gt;Do you have any thoughts with this guys ? &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Nov 2013 23:19:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360386</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5653] DistCp does not honour config-overrides for mapreduce.[map,reduce].memory.mb</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5653</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;When a DistCp job is run through Oozie (through a Java action that launches DistCp), one sees that mapred.child.java.opts as set from the caller is honoured by DistCp. But, DistCp doesn&apos;t seem to honour any overrides for configs mapreduce.&lt;span class=&quot;error&quot;&gt;&amp;#91;map,reduce&amp;#93;&lt;/span&gt;.memory.mb.&lt;/p&gt;

&lt;p&gt;Problem has been identified. I&apos;ll post a patch shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681160">MAPREDUCE-5653</key>
            <summary>DistCp does not honour config-overrides for mapreduce.[map,reduce].memory.mb</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="mithun">Mithun Radhakrishnan</assignee>
                                    <reporter username="mithun">Mithun Radhakrishnan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Nov 2013 23:11:05 +0000</created>
                <updated>Tue, 26 Nov 2013 17:05:47 +0000</updated>
                                            <version>trunk</version>
                    <version>0.23.9</version>
                    <version>2.2.0</version>
                                                    <component>distcp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13832050" author="mithun" created="Mon, 25 Nov 2013 23:17:00 +0000"  >&lt;p&gt;addResources(DISTCP_DEFAULT_XML) was incorrect. I now add it in if it&apos;s not already been set.&lt;/p&gt;</comment>
                            <comment id="13832160" author="hadoopqa" created="Tue, 26 Nov 2013 01:17:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615710/MAPREDUCE-5653.branch-0.23.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615710/MAPREDUCE-5653.branch-0.23.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-tools/hadoop-distcp.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4231//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4231//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4231//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4231//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13832741" author="jlowe" created="Tue, 26 Nov 2013 16:33:10 +0000"  >&lt;p&gt;Thanks for the patch, Mithun.  Was there a reason addDefaultResource(DISTCP_DEFAULT_XML) wasn&apos;t used?  I think that should accomplish the same goal without explicit config iteration on DistCp&apos;s part, but haven&apos;t tried it to verify.  Is there a concern that distcp-default.xml could pollute other configurations if DistCp is not used in isolation?&lt;/p&gt;</comment>
                            <comment id="13832763" author="jlowe" created="Tue, 26 Nov 2013 17:05:47 +0000"  >&lt;p&gt;Thinking about this further, I see why addDefaultResource() will not work.  distcp-default.xml and mapred-site.xml will often overlap, and it&apos;s likely mapred-site.xml will be loaded first then distcp-default.xml will later stomp any overlapping values when it&apos;s loaded.&lt;/p&gt;

&lt;p&gt;So I&apos;d like to see a comment for the property iteration loop explaining why we can&apos;t use addDefaultResource.  Also a unit test would be nice to verify it&apos;s working as-intended.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615710" name="MAPREDUCE-5653.branch-0.23.patch" size="1205" author="mithun" created="Mon, 25 Nov 2013 23:17:00 +0000"/>
                            <attachment id="12615709" name="MAPREDUCE-5653.branch-2.patch" size="1205" author="mithun" created="Mon, 25 Nov 2013 23:17:00 +0000"/>
                            <attachment id="12615708" name="MAPREDUCE-5653.trunk.patch" size="1205" author="mithun" created="Mon, 25 Nov 2013 23:17:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Nov 2013 01:17:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360430</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360432</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5652] ShuffleHandler should handle NM restarts</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5652</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;ShuffleHandler should work across NM restarts and not require re-running map-tasks. On NM restart, the map outputs are cleaned up requiring re-execution of map tasks and should be avoided.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681128">MAPREDUCE-5652</key>
            <summary>ShuffleHandler should handle NM restarts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jlowe">Jason Lowe</assignee>
                                    <reporter username="kkambatl">Karthik Kambatla</reporter>
                        <labels>
                            <label>shuffle</label>
                    </labels>
                <created>Mon, 25 Nov 2013 21:06:53 +0000</created>
                <updated>Fri, 10 Jan 2014 23:26:14 +0000</updated>
                                            <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13836088" author="tucu00" created="Sun, 1 Dec 2013 18:41:21 +0000"  >&lt;p&gt;BTW, the &lt;tt&gt;ShuffleHandler&lt;/tt&gt; is not aware of the cleanup. The clean up is done in the &lt;tt&gt;ResourceLocalizationService.java&lt;/tt&gt; &lt;tt&gt;serviceInit()&lt;/tt&gt; method.&lt;/p&gt;</comment>
                            <comment id="13866655" author="jlowe" created="Thu, 9 Jan 2014 14:02:34 +0000"  >&lt;p&gt;I&apos;ve largely implemented this as part of the prototype for &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1336&quot; title=&quot;Work-preserving nodemanager restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1336&quot;&gt;YARN-1336&lt;/a&gt;.  I actually have two versions, one that uses FileSystem to store the shuffle tokens and job-to-user mappings and another that uses leveldb.  (The prototype currently has a  leveldb back-end store to simplify some of the race conditions during store and recovery.)  It shouldn&apos;t be too much effort to extricate just the ShuffleHandler changes, although there aren&apos;t any unit tests for it yet.&lt;/p&gt;

&lt;p&gt;As Alejandro pointed out it also needs some help from the NodeManager to keep it from cleaning up the local directories and removing the shuffle output after restarting.  That&apos;s also been done as part of the prototype and is relatively straightforward, but we&apos;re still missing a mechanism for distinguishing the restart case vs. shutdown/decommission case and some other cleanup.&lt;/p&gt;</comment>
                            <comment id="13867302" author="kkambatl" created="Thu, 9 Jan 2014 23:49:56 +0000"  >&lt;p&gt;Thanks for the update, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;Jason Lowe&lt;/a&gt;. Glad to know this is being handled as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1336&quot; title=&quot;Work-preserving nodemanager restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1336&quot;&gt;YARN-1336&lt;/a&gt;. Looks like it is better to just wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1336&quot; title=&quot;Work-preserving nodemanager restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1336&quot;&gt;YARN-1336&lt;/a&gt; to be done, and address any remaining items here. Please feel free to take this over too. &lt;/p&gt;

&lt;p&gt;Curious - is there a branch for the &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1336&quot; title=&quot;Work-preserving nodemanager restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1336&quot;&gt;YARN-1336&lt;/a&gt; changes I can take an early peek at? &lt;/p&gt;</comment>
                            <comment id="13867835" author="jlowe" created="Fri, 10 Jan 2014 14:28:07 +0000"  >&lt;p&gt;No branch yet, just an ugly internal prototype that needs a bit of cleanup before publishing.  I meant to post either a branch or sets of draft patches to the JIRAs last month but got swamped with other stuff.  I&apos;ll try to get some things posted i the next week or so.&lt;/p&gt;</comment>
                            <comment id="13868254" author="vinodkv" created="Fri, 10 Jan 2014 20:24:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ve largely implemented this as part of the prototype for &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1336&quot; title=&quot;Work-preserving nodemanager restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1336&quot;&gt;YARN-1336&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can this be closed as duplicate then? Or make it a sub-task if there isn&apos;t a corresponding child under &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1336&quot; title=&quot;Work-preserving nodemanager restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1336&quot;&gt;YARN-1336&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13868458" author="jlowe" created="Fri, 10 Jan 2014 23:26:14 +0000"  >&lt;p&gt;There&apos;s no corresponding sub-task under &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1336&quot; title=&quot;Work-preserving nodemanager restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1336&quot;&gt;YARN-1336&lt;/a&gt; since these are changes specific to the ShuffleHandler in MapReduce.  Since JIRA doesn&apos;t let us mark this as a subtask of a different JIRA project, I think it&apos;s best to mark it as related and leave it for tracking the MapReduce-specific changes.  Alternate suggestions for tracking the MR-specific changes related to &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1336&quot; title=&quot;Work-preserving nodemanager restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1336&quot;&gt;YARN-1336&lt;/a&gt;?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12675101">YARN-1336</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 1 Dec 2013 18:41:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360400</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5651] Backport Fair Scheduler queue placement policies to branch-1</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5651</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1392&quot; title=&quot;Allow sophisticated app-to-queue placement policies in the Fair Scheduler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1392&quot;&gt;&lt;del&gt;YARN-1392&lt;/del&gt;&lt;/a&gt; introduced general policies for assigning applications to queues in the YARN fair scheduler.  This functionality would be useful and minimally invasive in MR1 as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681078">MAPREDUCE-5651</key>
            <summary>Backport Fair Scheduler queue placement policies to branch-1</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="malaskat">Ted Malaska</assignee>
                                    <reporter username="sandyr">Sandy Ryza</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Nov 2013 16:28:49 +0000</created>
                <updated>Tue, 7 Jan 2014 23:53:59 +0000</updated>
                            <resolved>Tue, 7 Jan 2014 23:39:58 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>scheduler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13831619" author="ted.m" created="Mon, 25 Nov 2013 16:50:49 +0000"  >&lt;p&gt;Thx Sandy,  I will down load the code tonight and hopefully have something my thx giving.&lt;/p&gt;</comment>
                            <comment id="13855324" author="ted.m" created="Mon, 23 Dec 2013 01:17:13 +0000"  >&lt;p&gt;Ported the code but not the documentation yet.&lt;/p&gt;

&lt;p&gt;M       src/core/org/apache/hadoop/security/GroupMappingServiceProvider.java&lt;br/&gt;
M       src/contrib/fairscheduler/src/test/org/apache/hadoop/mapred/TestFairScheduler.java&lt;br/&gt;
A       src/contrib/fairscheduler/src/test/org/apache/hadoop/mapred/TestQueuePlacementPolicy.java&lt;br/&gt;
M       src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/PoolManager.java&lt;br/&gt;
A       src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/QueuePlacementRule.java&lt;br/&gt;
A       src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/SimpleGroupsMapping.java&lt;br/&gt;
M       src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/FairScheduler.java&lt;br/&gt;
A       src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/QueuePlacementPolicy.java&lt;/p&gt;</comment>
                            <comment id="13857256" author="sandyr" created="Fri, 27 Dec 2013 02:29:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=malaskat&quot; class=&quot;user-hover&quot; rel=&quot;malaskat&quot;&gt;Ted Malaska&lt;/a&gt;, the patch is looking good.  A few comments:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class TestFairScheduler &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; TestCase {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Unnecessary new line&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+
+
+    placementPolicyConfig.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;user.name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;user1&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Only need one line here&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    scheduler.getPoolManager().placementPolicy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; QueuePlacementPolicy(
+        rules, queues, conf);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can we save the pool manager in a variable instead of calling scheduler.getPoolManager() each time we use it in the test.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {
+    configuredQueues.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;someuser&quot;&lt;/span&gt;);
+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Put this in the BeforeClass method&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; EXPLICIT_POOL_PROPERTY = &lt;span class=&quot;code-quote&quot;&gt;&quot;mapred.fairscheduler.pool&quot;&lt;/span&gt;;
+  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Unnecessary newline&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; placementPolicy.assignAppToQueue(queueName, user);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ioe) {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Pool.DEFAULT_POOL_NAME;
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To mirror the YARN behavior, we should log an error and reject the app if we hit an IOException.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+
+      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;queue:&quot;&lt;/span&gt; + queue + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + rule);
+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Take this out.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;  USER_AS_DEFAULT_QUEUE = 
+    &lt;span class=&quot;code-quote&quot;&gt;&quot;mapred.fairscheduler.user.as.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.queue&quot;&lt;/span&gt;;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; DEFAULT_USER_AS_DEFAULT_QUEUE = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;No need to add this property, which only exists in MR2, in MR1.  Instead, if a pool placement policy isn&apos;t specified, we should fall back to the MR1 default, which is determining the pool from mapred.fairscheduler.poolnameproperty.&lt;/p&gt;

&lt;p&gt;MR1 refers to &quot;pools&quot; instead of &quot;queues&quot;.  We should change QueuePlacementRule to PoolPlacementRule, assignAppToQueue to assignAppToPool, the queuePlacementPolicy XML element to poolPlacementPolicy, etc.&lt;/p&gt;</comment>
                            <comment id="13859585" author="ted.m" created="Tue, 31 Dec 2013 17:35:34 +0000"  >&lt;p&gt;Made changes requested by Sandy.&lt;/p&gt;</comment>
                            <comment id="13859648" author="sandyr" created="Tue, 31 Dec 2013 20:00:11 +0000"  >&lt;p&gt;Thanks Ted.  A few more comments:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-comment&quot;&gt;//CommonConfigurationKeys.HADOOP_SECURITY_GROUP_MAPPING,
&lt;/span&gt;+    placementPolicyConfig.setClass(&lt;span class=&quot;code-quote&quot;&gt;&quot;hadoop.security.group.mapping&quot;&lt;/span&gt;,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can take out the comment and just use CommonConfigurationKeys.HADOOP_SECURITY_GROUP_MAPPING as the argument?&lt;/p&gt;

&lt;p&gt;All mentions of &quot;queue&quot; should still be replaced with mentions of &quot;pool&quot;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    rules.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; QueuePlacementRule.Specified().initialize(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In simple placement rules, create param on the &quot;specified&quot; rule should only be true if allow undeclared pools property is true.&lt;/p&gt;</comment>
                            <comment id="13859675" author="ted.m" created="Tue, 31 Dec 2013 20:32:08 +0000"  >&lt;p&gt;Will do now thanks sandy&lt;/p&gt;</comment>
                            <comment id="13859771" author="ted.m" created="Tue, 31 Dec 2013 23:12:41 +0000"  >&lt;p&gt;Removed the commit and changed &quot;queue&quot; to &quot;pool&quot; and &quot;app&quot; to &quot;job&quot;.&lt;/p&gt;</comment>
                            <comment id="13860701" author="sandyr" created="Thu, 2 Jan 2014 20:13:09 +0000"  >&lt;p&gt;Thanks Ted.  getSimplePlacementRules still needs the change at the bottom of my last comment.  After that, the patch looks good to me. &lt;/p&gt;</comment>
                            <comment id="13860703" author="ted.m" created="Thu, 2 Jan 2014 20:14:25 +0000"  >&lt;p&gt;Thank you Sandy.  I will get on that now.&lt;/p&gt;</comment>
                            <comment id="13860759" author="ted.m" created="Thu, 2 Jan 2014 21:12:21 +0000"  >&lt;p&gt;Updated the getSimplePlacementRules function to change the Specified create option based on ALLOW_UNDECLARED_POOLS_KEY&lt;/p&gt;</comment>
                            <comment id="13860762" author="ted.m" created="Thu, 2 Jan 2014 21:13:43 +0000"  >&lt;p&gt;Wait I want to make that call cleaner.  One minute.&lt;/p&gt;</comment>
                            <comment id="13860771" author="ted.m" created="Thu, 2 Jan 2014 21:17:41 +0000"  >&lt;p&gt;Did a little clean up&lt;/p&gt;</comment>
                            <comment id="13863837" author="sandyr" created="Tue, 7 Jan 2014 02:28:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13863910" author="sandyr" created="Tue, 7 Jan 2014 05:05:33 +0000"  >&lt;p&gt;One more thing: have you checked that all the tests in TestFairScheduler pass?&lt;/p&gt;</comment>
                            <comment id="13864541" author="ted.m" created="Tue, 7 Jan 2014 18:52:57 +0000"  >&lt;p&gt;Just ran it again to double check:&lt;/p&gt;

&lt;p&gt;/home/cloudera/svn/hadoop-branch-1/src/contrib/fairscheduler&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@localhost fairscheduler&amp;#93;&lt;/span&gt;# ant test&lt;br/&gt;
Buildfile: build.xml                    &lt;/p&gt;

&lt;p&gt;check-contrib:&lt;/p&gt;

&lt;p&gt;init:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; contrib: fairscheduler&lt;/p&gt;

&lt;p&gt;init-contrib:&lt;/p&gt;

&lt;p&gt;ivy-download:&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;get&amp;#93;&lt;/span&gt; Getting: &lt;a href=&quot;http://repo2.maven.org/maven2/org/apache/ivy/ivy/2.1.0/ivy-2.1.0.jar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo2.maven.org/maven2/org/apache/ivy/ivy/2.1.0/ivy-2.1.0.jar&lt;/a&gt;&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;get&amp;#93;&lt;/span&gt; To: /home/cloudera/svn/hadoop-branch-1/ivy/ivy-2.1.0.jar                     &lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;get&amp;#93;&lt;/span&gt; Not modified - so not downloaded                                             &lt;/p&gt;

&lt;p&gt;ivy-probe-antlib:&lt;/p&gt;

&lt;p&gt;ivy-init-antlib:&lt;/p&gt;

&lt;p&gt;ivy-init:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:configure&amp;#93;&lt;/span&gt; :: Ivy 2.1.0 - 20090925235825 :: &lt;a href=&quot;http://ant.apache.org/ivy/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ant.apache.org/ivy/&lt;/a&gt; ::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:configure&amp;#93;&lt;/span&gt; :: loading settings :: file = /home/cloudera/svn/hadoop-branch-1/ivy/ivysettings.xml&lt;/p&gt;

&lt;p&gt;ivy-resolve-common:&lt;/p&gt;

&lt;p&gt;ivy-retrieve-common:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:cachepath&amp;#93;&lt;/span&gt; DEPRECATED: &apos;ivy.conf.file&apos; is deprecated, use &apos;ivy.settings.file&apos; instead&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:cachepath&amp;#93;&lt;/span&gt; :: loading settings :: file = /home/cloudera/svn/hadoop-branch-1/ivy/ivysettings.xml&lt;/p&gt;

&lt;p&gt;compile:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; contrib: fairscheduler&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 1 source file to /home/cloudera/svn/hadoop-branch-1/build/contrib/fairscheduler/classes&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Note: /home/cloudera/svn/hadoop-branch-1/src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/PoolManager.java uses or overrides a deprecated API.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Note: Recompile with -Xlint:deprecation for details.&lt;/p&gt;

&lt;p&gt;compile-examples:&lt;/p&gt;

&lt;p&gt;compile-test:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; contrib: fairscheduler&lt;/p&gt;

&lt;p&gt;test:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; contrib: fairscheduler&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;delete&amp;#93;&lt;/span&gt; Deleting directory /home/cloudera/svn/hadoop-branch-1/build/contrib/fairscheduler/test/logs&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;mkdir&amp;#93;&lt;/span&gt; Created dir: /home/cloudera/svn/hadoop-branch-1/build/contrib/fairscheduler/test/logs&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestCapBasedLoadManager&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.419 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestComputeFairShares&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 10, Failures: 0, Errors: 0, Time elapsed: 0.108 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestFairScheduler&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 39, Failures: 0, Errors: 0, Time elapsed: 9.944 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestFairSchedulerEventLog&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.26 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestFairSchedulerPoolNames&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 22.126 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestFairSchedulerSystem&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 45.947 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestPoolPlacementPolicy&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.133 sec&lt;/p&gt;

&lt;p&gt;checkfailure:&lt;/p&gt;

&lt;p&gt;BUILD SUCCESSFUL&lt;br/&gt;
Total time: 1 minute 23 seconds&lt;/p&gt;</comment>
                            <comment id="13864868" author="sandyr" created="Tue, 7 Jan 2014 23:39:58 +0000"  >&lt;p&gt;I just committed this to branch-1.  Thanks Ted!&lt;/p&gt;</comment>
                            <comment id="13864878" author="ted.m" created="Tue, 7 Jan 2014 23:53:59 +0000"  >&lt;p&gt;Thx u Sandy.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620950" name="MAPREDUCE-5651.2.patch" size="29045" author="ted.m" created="Tue, 31 Dec 2013 17:35:34 +0000"/>
                            <attachment id="12620994" name="MAPREDUCE-5651.3.patch" size="28768" author="ted.m" created="Tue, 31 Dec 2013 23:12:41 +0000"/>
                            <attachment id="12621150" name="MAPREDUCE-5651.4.patch" size="28963" author="ted.m" created="Thu, 2 Jan 2014 21:12:21 +0000"/>
                            <attachment id="12621152" name="MAPREDUCE-5651.5.patch" size="28927" author="ted.m" created="Thu, 2 Jan 2014 21:17:41 +0000"/>
                            <attachment id="12620109" name="MAPREDUCE-5651.patch" size="29684" author="ted.m" created="Mon, 23 Dec 2013 01:17:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Nov 2013 16:50:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5650] Job fails when hprof mapreduce.task.profile.map/reduce.params is specified</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5650</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;When one uses dedicated hprof mapreduce.task.profile.map.params or mapreduce.task.profile.reduce.params, the profiled tasks will fail to launch because hprof parameters are supplied to the child jvm twice.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680974">MAPREDUCE-5650</key>
            <summary>Job fails when hprof mapreduce.task.profile.map/reduce.params is specified</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jira.shegalov">Gera Shegalov</assignee>
                                    <reporter username="jira.shegalov">Gera Shegalov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Nov 2013 07:06:34 +0000</created>
                <updated>Sat, 18 Jan 2014 13:27:06 +0000</updated>
                            <resolved>Fri, 17 Jan 2014 17:54:00 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13831289" author="hadoopqa" created="Mon, 25 Nov 2013 09:00:59 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615545/MAPREDUCE-5650.v01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615545/MAPREDUCE-5650.v01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;      &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 1545 javac compiler warnings (more than the trunk&apos;s current 1544 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;br/&gt;
                  org.apache.hadoop.mapred.TestSequenceFileInputFormat&lt;br/&gt;
                  org.apache.hadoop.mapred.TestJobCleanup&lt;/p&gt;

&lt;p&gt;                                      The following test timeouts occurred in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.mapred.TestMultiFileInputFormat&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4228//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4228//testReport/&lt;/a&gt;&lt;br/&gt;
Javac warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4228//artifact/trunk/patchprocess/diffJavacWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4228//artifact/trunk/patchprocess/diffJavacWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4228//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4228//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13831795" author="jira.shegalov" created="Mon, 25 Nov 2013 19:17:01 +0000"  >&lt;p&gt;fixing javac deprecated warning&lt;/p&gt;</comment>
                            <comment id="13831897" author="hadoopqa" created="Mon, 25 Nov 2013 21:01:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615647/MAPREDUCE-5650.v02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615647/MAPREDUCE-5650.v02.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;br/&gt;
                  org.apache.hadoop.mapred.TestJobCleanup&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4230//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4230//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4230//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4230//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13850985" author="sandyr" created="Tue, 17 Dec 2013 22:10:44 +0000"  >&lt;p&gt;If I understand correctly, the issue is that the default (mapreduce.task.profile.params) params will be supplied even when more specific params are specified.  Was the behavior different in MR1?  Want to make sure this is not an incompatible change.&lt;/p&gt;</comment>
                            <comment id="13852682" author="jira.shegalov" created="Thu, 19 Dec 2013 07:01:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandyr&quot; class=&quot;user-hover&quot; rel=&quot;sandyr&quot;&gt;Sandy Ryza&lt;/a&gt; thanks for taking a look at the patch. Your understanding is correct. In MRv1 (branch-1),  there are no task-type-specific profile params. The change is compatible. If the task-type-oblivious mapreduce.task.profile.params is specified then this value is used in the absence of a more specific key. &lt;/p&gt;</comment>
                            <comment id="13853061" author="sandyr" created="Thu, 19 Dec 2013 17:39:14 +0000"  >&lt;p&gt;In that case I agree with you that this is a bug.  MapReduce properties that have specific versions map/reduce versions (e.g mapreduce.map.java.opts) should ignore the generic version (e.g. mapred.child.java.opts) when the specific versions are specified.  I&apos;d like to get some other opinions on whether this is compatible before committing it though.&lt;/p&gt;</comment>
                            <comment id="13853065" author="sandyr" created="Thu, 19 Dec 2013 17:44:05 +0000"  >&lt;p&gt;For reference, here is the JIRA where these options were added: &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3426&quot; title=&quot;uber-jobs tried to write outputs into wrong dir&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3426&quot;&gt;&lt;del&gt;MAPREDUCE-3426&lt;/del&gt;&lt;/a&gt;.  It seems unrelated to them.&lt;/p&gt;</comment>
                            <comment id="13854066" author="tomwhite" created="Fri, 20 Dec 2013 15:35:28 +0000"  >&lt;p&gt;I can&apos;t see how mapreduce.task.profile.map/reduce.params could ever work since mapreduce.task.profile.params is always passed as a JVM parameter to the task JVM regardless of whether the more specific parameters are set. So I agree it&apos;s a bug, and the fix looks good.&lt;/p&gt;</comment>
                            <comment id="13854074" author="tomwhite" created="Fri, 20 Dec 2013 15:46:20 +0000"  >&lt;p&gt;Actually, I noticed a problem with the patch - it doesn&apos;t do interpolation of the profile filename (i.e. &lt;tt&gt;%s&lt;/tt&gt; is replaced by the actual filename). Interpolation should be carried out for all three properties.&lt;/p&gt;

&lt;p&gt;Also, I noticed these properties are not in mapred-default.xml, so they should be added there.&lt;/p&gt;</comment>
                            <comment id="13854637" author="jira.shegalov" created="Fri, 20 Dec 2013 22:43:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomwhite&quot; class=&quot;user-hover&quot; rel=&quot;tomwhite&quot;&gt;Tom White&lt;/a&gt;, thanks for reviewing the patch. I added the profile.params properties to mapred-default, and fixed my traditional code style mistakes regarding whitespace on the second line.&lt;/p&gt;

&lt;p&gt;If I understand your interpolation comment correctly, the previous v02 version of the patch is already taking care of it. The string relevant for the current task attempt is first stored into profileParams and then we call.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        vargs.add(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(profileParams,
            getTaskLogFile(TaskLog.LogName.PROFILE)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s covered by the unit test in the patch. Please elaborate in more detail if I am missing something.&lt;/p&gt;</comment>
                            <comment id="13854844" author="hadoopqa" created="Sat, 21 Dec 2013 11:36:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12619925/MAPREDUCE-5650.v03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12619925/MAPREDUCE-5650.v03.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;br/&gt;
                  org.apache.hadoop.conf.TestJobConf&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4278//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4278//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4278//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4278//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13862996" author="tomwhite" created="Mon, 6 Jan 2014 13:57:02 +0000"  >&lt;p&gt;Gera - sorry I somehow missed the interpolation part of your previous patch. +1 for the latest patch.&lt;/p&gt;</comment>
                            <comment id="13874409" author="jira.shegalov" created="Fri, 17 Jan 2014 04:10:33 +0000"  >&lt;p&gt;TestJobConf#testProfileParamsDefaults does not allow a default value for profile.params in mapred-default.xml. Removing it.&lt;/p&gt;</comment>
                            <comment id="13874484" author="hadoopqa" created="Fri, 17 Jan 2014 06:15:10 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623576/MAPREDUCE-5650.v04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623576/MAPREDUCE-5650.v04.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4325//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4325//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4325//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4325//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13874611" author="jira.shegalov" created="Fri, 17 Jan 2014 09:54:04 +0000"  >&lt;p&gt;Test failure TestRMContainerAllocator#testCompletedTasksRecalculateSchedule is reported &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5726&quot; title=&quot;TestRMContainerAllocator#testCompletedTasksRecalculateSchedule fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5726&quot;&gt;&lt;del&gt;MAPREDUCE-5726&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13875010" author="sandyr" created="Fri, 17 Jan 2014 17:54:00 +0000"  >&lt;p&gt;I just committed this to trunk, branch-2, and branch-2.3.  Thanks Gera!&lt;/p&gt;</comment>
                            <comment id="13875012" author="hudson" created="Fri, 17 Jan 2014 17:55:17 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #5017 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5017/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5017/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5650&quot; title=&quot;Job fails when hprof mapreduce.task.profile.map/reduce.params is specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5650&quot;&gt;&lt;del&gt;MAPREDUCE-5650&lt;/del&gt;&lt;/a&gt;. Job fails when hprof mapreduce.task.profile.map/reduce.params is specified (Gera Shegalov via Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559201&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559201&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/MapReduceChildJVM.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestMRJobsWithProfiler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875622" author="hudson" created="Sat, 18 Jan 2014 11:08:49 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #456 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/456/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/456/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5650&quot; title=&quot;Job fails when hprof mapreduce.task.profile.map/reduce.params is specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5650&quot;&gt;&lt;del&gt;MAPREDUCE-5650&lt;/del&gt;&lt;/a&gt;. Job fails when hprof mapreduce.task.profile.map/reduce.params is specified (Gera Shegalov via Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559201&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559201&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/MapReduceChildJVM.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestMRJobsWithProfiler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875650" author="hudson" created="Sat, 18 Jan 2014 13:26:07 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1648 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1648/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1648/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5650&quot; title=&quot;Job fails when hprof mapreduce.task.profile.map/reduce.params is specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5650&quot;&gt;&lt;del&gt;MAPREDUCE-5650&lt;/del&gt;&lt;/a&gt;. Job fails when hprof mapreduce.task.profile.map/reduce.params is specified (Gera Shegalov via Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559201&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559201&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/MapReduceChildJVM.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestMRJobsWithProfiler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875658" author="hudson" created="Sat, 18 Jan 2014 13:27:06 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1673 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1673/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1673/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5650&quot; title=&quot;Job fails when hprof mapreduce.task.profile.map/reduce.params is specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5650&quot;&gt;&lt;del&gt;MAPREDUCE-5650&lt;/del&gt;&lt;/a&gt;. Job fails when hprof mapreduce.task.profile.map/reduce.params is specified (Gera Shegalov via Sandy Ryza) (sandy: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559201&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1559201&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapred/MapReduceChildJVM.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/v2/TestMRJobsWithProfiler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615545" name="MAPREDUCE-5650.v01.patch" size="10807" author="jira.shegalov" created="Mon, 25 Nov 2013 07:09:42 +0000"/>
                            <attachment id="12615647" name="MAPREDUCE-5650.v02.patch" size="10856" author="jira.shegalov" created="Mon, 25 Nov 2013 19:17:01 +0000"/>
                            <attachment id="12619925" name="MAPREDUCE-5650.v03.patch" size="12648" author="jira.shegalov" created="Fri, 20 Dec 2013 22:32:28 +0000"/>
                            <attachment id="12623576" name="MAPREDUCE-5650.v04.patch" size="12707" author="jira.shegalov" created="Fri, 17 Jan 2014 04:10:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Nov 2013 09:00:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5649] Reduce cannot use more than 2G memory  for the final merge</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5649</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;In the org.apache.hadoop.mapreduce.task.reduce.MergeManagerImpl.java file, in the finalMerge method: &lt;/p&gt;

&lt;p&gt; int maxInMemReduce = (int)Math.min(&lt;br/&gt;
        Runtime.getRuntime().maxMemory() * maxRedPer, Integer.MAX_VALUE);&lt;/p&gt;

&lt;p&gt;This means no matter how much memory user has, reducer will not retain more than 2G data in memory before the reduce phase starts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680962">MAPREDUCE-5649</key>
            <summary>Reduce cannot use more than 2G memory  for the final merge</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stanley_shi">stanley shi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Nov 2013 05:32:19 +0000</created>
                <updated>Tue, 28 Jan 2014 05:10:47 +0000</updated>
                                            <version>trunk</version>
                                                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13841409" author="milindb" created="Fri, 6 Dec 2013 16:51:22 +0000"  >&lt;p&gt;Folks, is there any reason behind limiting this amount of memory to 2GB ?&lt;/p&gt;</comment>
                            <comment id="13843317" author="vgogate@gopivotal.com" created="Mon, 9 Dec 2013 16:56:47 +0000"  >&lt;p&gt;I changed the code to make it long and it lowered the disk spills considerably when enough memory is given to reducers. There are some other places where Interger.MAX_VALUE is used which need be corrected. &lt;/p&gt;

&lt;p&gt;In MergeManagerImpl.java following code is changed to use Long value,&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;int maxInMemReduce = (int)Math.min(&lt;/li&gt;
	&lt;li&gt;Runtime.getRuntime().maxMemory() * maxRedPer, Integer.MAX_VALUE);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+long maxInMemReduce = Math.min(&lt;br/&gt;
+        (long)(Runtime.getRuntime().maxMemory() * maxRedPer), Long.MAX_VALUE);&lt;/p&gt;

&lt;p&gt;I will submit the patch soon. &lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12624226">MAPREDUCE-4883</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Dec 2013 16:51:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360232</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360234</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5648] Allow user-specified diagnostics for killed tasks and jobs</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5648</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Our users and tools want to be able to supply additional custom diagnostic messages to mapreduce ClientProtocol killTask.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680895">MAPREDUCE-5648</key>
            <summary>Allow user-specified diagnostics for killed tasks and jobs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jira.shegalov">Gera Shegalov</assignee>
                                    <reporter username="jira.shegalov">Gera Shegalov</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Nov 2013 19:07:17 +0000</created>
                <updated>Mon, 30 Dec 2013 21:16:51 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>client</component>
                    <component>mr-am</component>
                    <component>mrv2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13830744" author="jira.shegalov" created="Sat, 23 Nov 2013 19:15:07 +0000"  >&lt;p&gt;Job history after &lt;br/&gt;
mapred job -fail-task &amp;lt;taskAttemptID&amp;gt; &quot;a bad reason&quot;&lt;br/&gt;
and subsequent speculative execution.&lt;/p&gt;</comment>
                            <comment id="13830748" author="jira.shegalov" created="Sat, 23 Nov 2013 19:26:18 +0000"  >&lt;p&gt;patch for review&lt;/p&gt;</comment>
                            <comment id="13830775" author="hadoopqa" created="Sat, 23 Nov 2013 21:10:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615469/MAPREDUCE-5648.v01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615469/MAPREDUCE-5648.v01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.app.TestRMContainerAllocator&lt;br/&gt;
                  org.apache.hadoop.mapred.TestJobCleanup&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4227//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4227//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4227//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4227//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13850972" author="sandyr" created="Tue, 17 Dec 2013 21:55:33 +0000"  >&lt;p&gt;Can we split this into two JIRAs, one for the speculation change and one for the user-specified reason?  I think the former is likely to be far less controversial than the latter.&lt;/p&gt;</comment>
                            <comment id="13852867" author="jira.shegalov" created="Thu, 19 Dec 2013 12:43:54 +0000"  >&lt;p&gt;patch focussing just on user-specified messages, as suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandyr&quot; class=&quot;user-hover&quot; rel=&quot;sandyr&quot;&gt;Sandy Ryza&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13856673" author="kkambatl" created="Wed, 25 Dec 2013 22:35:42 +0000"  >&lt;p&gt;Patch looks good overall. Minor comments/ nits:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Instead of calling the underlying method directly, should probably call the new version of killTask
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; killTask(TaskAttemptID arg0, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; arg1) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException,
       InterruptedException {
-    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; clientCache.getClient(arg0.getJobID()).killTask(arg0, arg1);
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; clientCache.getClient(arg0.getJobID()).killTask(arg0, arg1, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
+  }
+
+  @Override
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; killTask(TaskAttemptID arg0, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; arg1, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; arg2) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException,
+    InterruptedException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Can move throws to the line above
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; killTask(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; TaskAttemptID taskId, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shouldFail,
+    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason)
+    &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;The following method signature can be fit in two lines
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  /** Throws {@link UnsupportedOperationException} */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; killTask(org.apache.hadoop.mapreduce.TaskAttemptID taskId,
                          &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shouldFail,
                          &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnsupportedOperationException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Killing tasks in &quot;&lt;/span&gt; +
      &lt;span class=&quot;code-quote&quot;&gt;&quot;LocalJobRunner is not supported&quot;&lt;/span&gt;);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Unit tests to verify the new code?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13858658" author="jira.shegalov" created="Mon, 30 Dec 2013 08:26:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkambatl&quot; class=&quot;user-hover&quot; rel=&quot;kkambatl&quot;&gt;Karthik Kambatla&lt;/a&gt;, thanks for reviewing. Here is the new version v03. I added similar functionality for killJob. This is useful when an upper-level project kills job&apos;s to terminate some DAG. killJob requires changes to YarnClient.killApplication for completeness. YARN-related changes will be done via a separate JIRA. &lt;/p&gt;</comment>
                            <comment id="13858660" author="hadoopqa" created="Mon, 30 Dec 2013 08:37:31 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620815/MAPREDUCE-5648.v03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620815/MAPREDUCE-5648.v03.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;&lt;/font&gt;-1 javac&lt;font color=&quot;red&quot;&gt;&lt;/font&gt;.  The patch appears to cause the build to fail.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4287//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4287//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13858716" author="hadoopqa" created="Mon, 30 Dec 2013 11:23:57 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620818/MAPREDUCE-5648.v03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620818/MAPREDUCE-5648.v03.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapred.TestYARNRunner&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4288//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4288//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4288//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4288//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13858851" author="hadoopqa" created="Mon, 30 Dec 2013 14:57:01 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620840/MAPREDUCE-5648.v04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620840/MAPREDUCE-5648.v04.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.v2.TestUberAM&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4289//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4289//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4289//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4289//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12686749">YARN-1551</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12615469" name="MAPREDUCE-5648.v01.patch" size="25135" author="jira.shegalov" created="Sat, 23 Nov 2013 19:26:18 +0000"/>
                            <attachment id="12619541" name="MAPREDUCE-5648.v02.patch" size="19501" author="jira.shegalov" created="Thu, 19 Dec 2013 12:43:54 +0000"/>
                            <attachment id="12620818" name="MAPREDUCE-5648.v03.patch" size="45752" author="jira.shegalov" created="Mon, 30 Dec 2013 09:39:50 +0000"/>
                            <attachment id="12620840" name="MAPREDUCE-5648.v04.patch" size="46613" author="jira.shegalov" created="Mon, 30 Dec 2013 13:10:24 +0000"/>
                            <attachment id="12615468" name="Screen Shot 2013-11-23 at 11.12.15 AM.png" size="186816" author="jira.shegalov" created="Sat, 23 Nov 2013 19:15:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 23 Nov 2013 21:10:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360165</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360167</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5647] no property for changing ShuffleHandler binding host</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5647</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;org.apache.hadoop.mapred.ShuffleHandler has a property &quot;mapreduce.shuffle.port&quot; with the default value &quot;13562&quot;, though there is no &quot;mapreduce.shuffle.host&quot;.&lt;/p&gt;

&lt;p&gt;Thus ShuffleHandler always binds to 0.0.0.0 and it is thus impossible to make hadoop completely bind to localhost if desired. This setting is in contrast available for all other port bindings.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680887">MAPREDUCE-5647</key>
            <summary>no property for changing ShuffleHandler binding host</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="subes">subes</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Nov 2013 17:39:13 +0000</created>
                <updated>Sat, 23 Nov 2013 17:39:13 +0000</updated>
                                            <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360157</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5646] Option to shuffle splits of equal size</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5646</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Mapreduce split calculation has the following base logic (via JobClient and the major InputFormat implementations ):&lt;br/&gt;
&#9726;enumerate input files in natural (aka linear) order.&lt;br/&gt;
&#9726;create one split for each &apos;block-size&apos; of each input. Apart from rack-awareness, combining and so on, the input file order remains in its natural order.&lt;br/&gt;
&#9726;sort the splits by size using a stable sort based on splitsize.&lt;/p&gt;

&lt;p&gt;When data from multiple storage services are used in a single hadoop job, we get better I/O utilization if the list of splits does round-robin or random-access across the services. &lt;br/&gt;
The particular scenario arises in Azure HDInsight where jobs can easily read from many storage accounts and each storage account has hard limits on throughtput.  Concurrent access to the accounts is substantially better than &lt;/p&gt;

&lt;p&gt;Two common scenarios can cause non-ideal access pattern:&lt;br/&gt;
 1. many/all input files are the same size&lt;br/&gt;
 2. files have different sizes, but many/all input files have size&amp;gt;blocksize.&lt;br/&gt;
 In the second scenario, for each file will have one or more splits with size exactly equal to block size so it basically degenerates to the first scenario.&lt;/p&gt;

&lt;p&gt;There are various ways to solve the problem but the simplest is to alter the mapreduce JobClient to sort splits by size &lt;em&gt;and&lt;/em&gt; randomize the order of splits with equal size. This keeps the old behavior effectively unchanged while also fixing both common problematic scenarios.&lt;/p&gt;

&lt;p&gt;Some rare scenarios will still suffer bad access patterns due. For example if two storage accounts are used and the files from one storage account are all smaller than from the other then problems can arise. Addressing these scenarios would be further work, perhaps by completely randomizing the split order. These problematic scenarios are considered rare and not requiring immediate attention.&lt;/p&gt;

&lt;p&gt;If further algorithms for split ordering are necessary, the implementation in JobClient will change to being interface-based (eg interface splitOrderer) with various standard implementations.  At this time there is only the need for two implementations and so simple Boolean flag and if/then logic is used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680828">MAPREDUCE-5646</key>
            <summary>Option to shuffle splits of equal size</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="mikeliddell">Mike Liddell</assignee>
                                    <reporter username="mikeliddell">Mike Liddell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Nov 2013 22:34:10 +0000</created>
                <updated>Thu, 23 Jan 2014 19:45:51 +0000</updated>
                            <resolved>Thu, 23 Jan 2014 19:45:51 +0000</resolved>
                                    <version>trunk</version>
                    <version>1-win</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13830371" author="mikeliddell" created="Fri, 22 Nov 2013 22:36:27 +0000"  >&lt;p&gt;patch added.&lt;br/&gt;
new flag to govern use of new logic: mapred.submit.shuffle.equalsized.splits. Default=false. &lt;br/&gt;
If flag is true, JobClient will shuffle the splits that share a common size.&lt;/p&gt;</comment>
                            <comment id="13830384" author="sureshms" created="Fri, 22 Nov 2013 22:50:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikeliddell&quot; class=&quot;user-hover&quot; rel=&quot;mikeliddell&quot;&gt;Mike Liddell&lt;/a&gt;, can you please set the Affects Version/s? I think you want this in branch-1. Also is this functionality relevant for trunk?&lt;/p&gt;

&lt;p&gt;I am going to move this to MapReduce project.&lt;/p&gt;</comment>
                            <comment id="13831845" author="mikeliddell" created="Mon, 25 Nov 2013 19:53:13 +0000"  >&lt;p&gt;TODO: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;port the patch to trunk codebase.&lt;/li&gt;
	&lt;li&gt;add unit tests&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13880275" author="mikeliddell" created="Thu, 23 Jan 2014 19:45:26 +0000"  >&lt;p&gt;This jira is being closed as the proposed change is not compatible with existing users of JobClient that take a dependency on deterministic split generation, such as Pig Rank, Pig MergeJoin.  Use of the option by clients that expect deterministic output can cause errorneous behavior.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615656" name="MAPREDUCE-5646.branch-1-win.1.patch" size="7243" author="mikeliddell" created="Mon, 25 Nov 2013 19:52:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Nov 2013 22:50:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360100</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5645] TestFixedLengthInputFormat fails with native libs</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5645</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;mvn clean install -Pnative -DskipTests&lt;br/&gt;
hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient&lt;br/&gt;
mvn clean test -Dtest=TestFixedLengthInputFormat&lt;/p&gt;

&lt;p&gt;Running org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat&lt;br/&gt;
Tests run: 8, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 39.957 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat&lt;br/&gt;
testGzipWithTwoInputs(org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat)  Time elapsed: 0.029 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.hadoop.io.compress.zlib.ZlibFactory.isNativeZlibLoaded(ZlibFactory.java:65)&lt;br/&gt;
	at org.apache.hadoop.io.compress.GzipCodec.createOutputStream(GzipCodec.java:162)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat.writeFile(TestFixedLengthInputFormat.java:397)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat.testGzipWithTwoInputs(TestFixedLengthInputFormat.java:229)&lt;/p&gt;

&lt;p&gt;testFormatCompressedIn(org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat)  Time elapsed: 0.01 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.hadoop.io.compress.zlib.ZlibFactory.isNativeZlibLoaded(ZlibFactory.java:65)&lt;br/&gt;
	at org.apache.hadoop.io.compress.GzipCodec.createOutputStream(GzipCodec.java:162)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat.createFile(TestFixedLengthInputFormat.java:261)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat.runRandomTests(TestFixedLengthInputFormat.java:314)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat.testFormatCompressedIn(TestFixedLengthInputFormat.java:96)&lt;/p&gt;

&lt;p&gt;Running org.apache.hadoop.mapred.TestFixedLengthInputFormat&lt;br/&gt;
Tests run: 8, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 46.151 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.mapred.TestFixedLengthInputFormat&lt;br/&gt;
testPartialRecordCompressedIn(org.apache.hadoop.mapred.TestFixedLengthInputFormat)  Time elapsed: 0.031 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.hadoop.io.compress.zlib.ZlibFactory.isNativeZlibLoaded(ZlibFactory.java:65)&lt;br/&gt;
	at org.apache.hadoop.io.compress.GzipCodec.createOutputStream(GzipCodec.java:162)&lt;br/&gt;
	at org.apache.hadoop.mapred.TestFixedLengthInputFormat.writeFile(TestFixedLengthInputFormat.java:357)&lt;br/&gt;
	at org.apache.hadoop.mapred.TestFixedLengthInputFormat.runPartialRecordTest(TestFixedLengthInputFormat.java:386)&lt;br/&gt;
	at org.apache.hadoop.mapred.TestFixedLengthInputFormat.testPartialRecordCompressedIn(TestFixedLengthInputFormat.java:182)&lt;/p&gt;

&lt;p&gt;testGzipWithTwoInputs(org.apache.hadoop.mapred.TestFixedLengthInputFormat)  Time elapsed: 0.009 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.hadoop.io.compress.zlib.ZlibFactory.isNativeZlibLoaded(ZlibFactory.java:65)&lt;br/&gt;
	at org.apache.hadoop.io.compress.GzipCodec.createOutputStream(GzipCodec.java:162)&lt;br/&gt;
	at org.apache.hadoop.mapred.TestFixedLengthInputFormat.writeFile(TestFixedLengthInputFormat.java:357)&lt;br/&gt;
	at org.apache.hadoop.mapred.TestFixedLengthInputFormat.testGzipWithTwoInputs(TestFixedLengthInputFormat.java:201)&lt;/p&gt;

&lt;p&gt;testFormatCompressedIn(org.apache.hadoop.mapred.TestFixedLengthInputFormat)  Time elapsed: 0.017 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.hadoop.io.compress.zlib.ZlibFactory.isNativeZlibLoaded(ZlibFactory.java:65)&lt;br/&gt;
	at org.apache.hadoop.io.compress.GzipCodec.createOutputStream(GzipCodec.java:162)&lt;br/&gt;
	at org.apache.hadoop.mapred.TestFixedLengthInputFormat.createFile(TestFixedLengthInputFormat.java:234)&lt;br/&gt;
	at org.apache.hadoop.mapred.TestFixedLengthInputFormat.runRandomTests(TestFixedLengthInputFormat.java:287)&lt;br/&gt;
	at org.apache.hadoop.mapred.TestFixedLengthInputFormat.testFormatCompressedIn(TestFixedLengthInputFormat.java:90)&lt;/p&gt;


&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests in error: &lt;br/&gt;
  TestFixedLengthInputFormat.testGzipWithTwoInputs:229-&amp;gt;writeFile:397 &#187; NullPointer&lt;br/&gt;
  TestFixedLengthInputFormat.testFormatCompressedIn:96-&amp;gt;runRandomTests:314-&amp;gt;createFile:261 &#187; NullPointer&lt;br/&gt;
  TestFixedLengthInputFormat.testPartialRecordCompressedIn:182-&amp;gt;runPartialRecordTest:386-&amp;gt;writeFile:357 &#187; NullPointer&lt;br/&gt;
  TestFixedLengthInputFormat.testGzipWithTwoInputs:201-&amp;gt;writeFile:357 &#187; NullPointer&lt;br/&gt;
  TestFixedLengthInputFormat.testFormatCompressedIn:90-&amp;gt;runRandomTests:287-&amp;gt;createFile:234 &#187; NullPointer&lt;/p&gt;

&lt;p&gt;Tests run: 16, Failures: 0, Errors: 5, Skipped: 0&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680813">MAPREDUCE-5645</key>
            <summary>TestFixedLengthInputFormat fails with native libs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mitdesai">Mit Desai</assignee>
                                    <reporter username="jeagles">Jonathan Eagles</reporter>
                        <labels>
                            <label>native</label>
                    </labels>
                <created>Fri, 22 Nov 2013 21:12:28 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:41 +0000</updated>
                            <resolved>Tue, 3 Dec 2013 22:55:03 +0000</resolved>
                                    <version>3.0.0</version>
                    <version>2.3.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13837890" author="mitdesai" created="Tue, 3 Dec 2013 16:47:26 +0000"  >&lt;p&gt;Attaching the patch for trunk&lt;/p&gt;</comment>
                            <comment id="13837903" author="mitdesai" created="Tue, 3 Dec 2013 17:03:37 +0000"  >&lt;p&gt;Also applies to branch 2&lt;/p&gt;</comment>
                            <comment id="13837987" author="hadoopqa" created="Tue, 3 Dec 2013 18:18:29 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12616814/MAPREDUCE-5645.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12616814/MAPREDUCE-5645.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapreduce.security.TestJHSSecurity&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4242//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4242//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4242//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4242//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13838245" author="mitdesai" created="Tue, 3 Dec 2013 22:07:52 +0000"  >&lt;p&gt;The test failure is not related to the change in the patch. The test  TestJHSSecurity fails because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-5545&quot; title=&quot;Allow specifying endpoints for listeners in HttpServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-5545&quot;&gt;&lt;del&gt;HDFS-5545&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13838261" author="mitdesai" created="Tue, 3 Dec 2013 22:25:17 +0000"  >&lt;p&gt;This test failure caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-5545&quot; title=&quot;Allow specifying endpoints for listeners in HttpServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-5545&quot;&gt;&lt;del&gt;HDFS-5545&lt;/del&gt;&lt;/a&gt; is being tracked by &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1463&quot; title=&quot;Tests should avoid starting http-server where possible or creates spnego keytab/principals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1463&quot;&gt;&lt;del&gt;YARN-1463&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13838273" author="jeagles" created="Tue, 3 Dec 2013 22:42:51 +0000"  >&lt;p&gt;+1. Looks good to me.&lt;/p&gt;</comment>
                            <comment id="13838291" author="hudson" created="Tue, 3 Dec 2013 22:57:23 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4821 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4821/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4821/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5645&quot; title=&quot;TestFixedLengthInputFormat fails with native libs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5645&quot;&gt;&lt;del&gt;MAPREDUCE-5645&lt;/del&gt;&lt;/a&gt;. TestFixedLengthInputFormat fails with native libs (Mit Desai via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547624&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547624&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestFixedLengthInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestFixedLengthInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13838807" author="hudson" created="Wed, 4 Dec 2013 11:00:01 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #411 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/411/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/411/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5645&quot; title=&quot;TestFixedLengthInputFormat fails with native libs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5645&quot;&gt;&lt;del&gt;MAPREDUCE-5645&lt;/del&gt;&lt;/a&gt;. TestFixedLengthInputFormat fails with native libs (Mit Desai via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547624&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547624&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestFixedLengthInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestFixedLengthInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13838872" author="hudson" created="Wed, 4 Dec 2013 13:27:41 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1628 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1628/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1628/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5645&quot; title=&quot;TestFixedLengthInputFormat fails with native libs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5645&quot;&gt;&lt;del&gt;MAPREDUCE-5645&lt;/del&gt;&lt;/a&gt;. TestFixedLengthInputFormat fails with native libs (Mit Desai via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547624&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547624&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestFixedLengthInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestFixedLengthInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13838890" author="hudson" created="Wed, 4 Dec 2013 13:39:00 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1602 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1602/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1602/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5645&quot; title=&quot;TestFixedLengthInputFormat fails with native libs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5645&quot;&gt;&lt;del&gt;MAPREDUCE-5645&lt;/del&gt;&lt;/a&gt;. TestFixedLengthInputFormat fails with native libs (Mit Desai via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547624&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547624&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestFixedLengthInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestFixedLengthInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12616814" name="MAPREDUCE-5645.patch" size="6700" author="mitdesai" created="Tue, 3 Dec 2013 16:47:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Dec 2013 16:47:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360085</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12320355</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5644] error while querying the HDFS (hdfs dfs -ls) [local and destination host is not matching]</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5644</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;I have installed the hive on the local machine and hadoop started to gave error. It was not giving error before Hive installation while query hdfs dfs -ls. Below is the error&lt;/p&gt;

&lt;p&gt;&quot;local host is: &quot;ubuntu/127.0.1.1&quot;; destination host is: &quot;localhost&quot;:9000&quot;&lt;/p&gt;

&lt;p&gt;i am trying to setup the single node on my laptop runnin gubuntu. I tried alot after chaning IP address in the host file but couldn&apos;t able to get rid out of this error. My host file entries as below&lt;/p&gt;

&lt;p&gt;127.0.0.1 localhost&lt;br/&gt;
127.0.1.1 ubuntu&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680802">MAPREDUCE-5644</key>
            <summary>error while querying the HDFS (hdfs dfs -ls) [local and destination host is not matching]</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asif">Asif</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Nov 2013 19:45:38 +0000</created>
                <updated>Fri, 22 Nov 2013 19:45:38 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360072</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5643] DynamicMR: A Dynamic Slot Utilization Optimization Framework for Hadoop MRv1</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5643</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Hadoop MRv1 uses the slot-based resource model with the static configuration of map/reduce slots. There is a strict utility constrain that map tasks can only run on map slots and reduce tasks can only use reduce slots. Due to the rigid execution order between map and reduce tasks in a MapReduce environment, slots can be severely under-utilized, which significantly degrades the performance. &lt;/p&gt;

&lt;p&gt;In contrast to YARN that gives up the slot-based resource model and propose a container-based model to maximize the resource utilization via unawareness of the types of map/reduce tasks, we keep the slot-based model and propose a dynamic slot utilization optimization system called DynamicMR to improve the performance of Hadoop by maximizing the slots utilization as well as slot utilization efficiency while guaranteeing the fairness across pools. It consists of three types of scheduling components, namely, Dynamic Hadoop Fair Scheduler (DHFS), Dynamic Speculative Task Scheduler (DSTS), and Data Locality Maximization Scheduler (DLMS).&lt;/p&gt;

&lt;p&gt;Our tests show that DynamicMR outperforms YARN for MapReduce workloads with multiple jobs, especially when the number of jobs is large. The explanation is that, given a certain number of resources, it is obvious that the performance for the case with a ratio control of concurrently running map and reduce tasks is better than without control. Because without control, it easily occurs that there are too many reduce tasks running, causing the network to be a bottleneck seriously. For YARN, both map and reduce tasks can run on any idle container. There is no control mechanism for the ratio of resource allocation between map and reduce tasks. It means that when there are pending reduce tasks, the idle container will be most likely possessed by them. In contrast, DynamicMR follows the traditional slot-based model. In contrast to the &#8217;hard&#8217; constrain of slot allocation that map slots have to be allocated to map tasks and reduce tasks should be dispatched to reduce tasks, DynamicMR obeys a &#8217;soft&#8217; constrain of slot allocation to allow that map slot can be allocated to reduce task and vice versa. But whenever there are pending map tasks, the map slot should be given to map tasks first, and the rule is similar for reduce tasks. It means that, the traditional way of static map/reduce slot configuration for the ratio control of running map/reduce tasks still works for DynamicMR. In comparison to YARN which maximizes the resource utilization only, DynamicMR can maximize the slot resource utilization and meanwhile dynamically control the ratio of running map/reduce tasks via map/reduce slot configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680707">MAPREDUCE-5643</key>
            <summary>DynamicMR: A Dynamic Slot Utilization Optimization Framework for Hadoop MRv1</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="tashj">tang shanjiang</assignee>
                                    <reporter username="tashj">tang shanjiang</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Fri, 22 Nov 2013 09:10:46 +0000</created>
                <updated>Fri, 22 Nov 2013 09:42:23 +0000</updated>
                                            <version>1.2.1</version>
                                                    <component>contrib/fair-share</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13829820" author="hadoopqa" created="Fri, 22 Nov 2013 09:26:55 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615310/README&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615310/README&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4225//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4225//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615309" name="DynamicMR-0.1.1-patch" size="846787" author="tashj" created="Fri, 22 Nov 2013 09:20:39 +0000"/>
                            <attachment id="12615310" name="README" size="8259" author="tashj" created="Fri, 22 Nov 2013 09:20:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Nov 2013 09:26:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359977</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359979</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>HFS, DynamicMR, Slot Utilization</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12324149</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5642] TestMiniMRChildTask fails on Windows</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5642</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;The test fails on Windows as a regression from &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5451&quot; title=&quot;MR uses LD_LIBRARY_PATH which doesn&amp;#39;t mean anything in Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5451&quot;&gt;&lt;del&gt;MAPREDUCE-5451&lt;/del&gt;&lt;/a&gt;. In &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5451&quot; title=&quot;MR uses LD_LIBRARY_PATH which doesn&amp;#39;t mean anything in Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5451&quot;&gt;&lt;del&gt;MAPREDUCE-5451&lt;/del&gt;&lt;/a&gt;, we set default config of &quot;mapreduce.admin.user.env&quot; to &quot;PATH=%PATH%;%HADOOP_COMMON_HOME%&lt;br class=&quot;atl-forced-newline&quot; /&gt;bin&quot; on Windows. In the test, we set &quot;PATH=%PATH%;tmp&quot; for &quot;mapreduce.map.env&quot; and &quot;mapreduce.map.env&quot;. Because the the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5451&quot; title=&quot;MR uses LD_LIBRARY_PATH which doesn&amp;#39;t mean anything in Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5451&quot;&gt;&lt;del&gt;MAPREDUCE-5451&lt;/del&gt;&lt;/a&gt;, PATH will be set twice now and the value we get in the child tasks no longer matches the previous expected value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680665">MAPREDUCE-5642</key>
            <summary>TestMiniMRChildTask fails on Windows</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="chuanliu">Chuan Liu</assignee>
                                    <reporter username="chuanliu">Chuan Liu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Nov 2013 02:06:56 +0000</created>
                <updated>Thu, 9 Jan 2014 01:10:12 +0000</updated>
                                            <version>3.0.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13829582" author="chuanliu" created="Fri, 22 Nov 2013 02:11:38 +0000"  >&lt;p&gt;Attach a patch.&lt;/p&gt;</comment>
                            <comment id="13829658" author="hadoopqa" created="Fri, 22 Nov 2013 05:19:33 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615255/MAPREDUCE-5642.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615255/MAPREDUCE-5642.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4224//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4224//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4224//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4224//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12650061">MAPREDUCE-5451</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12615255" name="MAPREDUCE-5642.patch" size="2313" author="chuanliu" created="Fri, 22 Nov 2013 02:11:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Nov 2013 05:19:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359935</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359937</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5641] History for failed Application Masters should be made available to the Job History Server</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5641</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Currently, the JHS has no information about jobs whose AMs have failed.  This is because the History is written by the AM to the intermediate folder just before finishing, so when it fails for any reason, this information isn&apos;t copied there.  However, it is not lost as its in the AM&apos;s staging directory.  To make the History available in the JHS, all we need to do is have another mechanism to move the History from the staging directory to the intermediate directory.  The AM also writes a &quot;Summary&quot; file before exiting normally, which is also unavailable when the AM fails.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12680625">MAPREDUCE-5641</key>
            <summary>History for failed Application Masters should be made available to the Job History Server</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rkanter">Robert Kanter</assignee>
                                    <reporter username="rkanter">Robert Kanter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Nov 2013 22:35:49 +0000</created>
                <updated>Fri, 13 Dec 2013 14:49:32 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>applicationmaster</component>
                    <component>jobhistoryserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13830213" author="rkanter" created="Fri, 22 Nov 2013 18:41:12 +0000"  >&lt;p&gt;I propose we solve this issue by doing the following:&lt;br/&gt;
The Resource Manager is aware when the AM fails; when an AM fails, the RM can write a flag file to a new &#8220;fail&#8221; directory. The JHS periodically scans the &quot;fail&quot; dir for these flag files. When it sees one, it then looks for the History for that failed AM; if found, it copies/moves the History to the intermediate directory, where it will be processed by the JHS normally. If not found, it does nothing. Once done, the JHS can then delete the flag file.&lt;br/&gt;
For the Summary file, most of it is static, so we can simply have the AM write that file out at startup (with 0 or &quot;N/A&quot; for dynamic fields) and then overwrite it at shutdown to get the values for the dynamic fields as it does now. If the AM fails, then the JHS will at least be able to pickup the first version of the Summary file.&lt;/p&gt;</comment>
                            <comment id="13846967" author="kkambatl" created="Fri, 13 Dec 2013 00:24:45 +0000"  >&lt;p&gt;Proposal makes sense to me. Do you want to open a YARN JIRA for the YARN-specific changes? &lt;/p&gt;</comment>
                            <comment id="13847554" author="jlowe" created="Fri, 13 Dec 2013 14:49:32 +0000"  >&lt;p&gt;How will the JHS copy the file to the intermediate directory?  It likely won&apos;t have access to the staging directory containing the jhist file.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Dec 2013 00:24:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359897</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5640] Rename TestLineRecordReader in jobclient module</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5640</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5656&quot; title=&quot;bzip2 codec can drop records when reading data in splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5656&quot;&gt;&lt;del&gt;HADOOP-9622&lt;/del&gt;&lt;/a&gt; proposes to add new unit tests for LineRecordReader in the mapreduce-client-core module alongside the code.  The existing LineRecordReader tests in the mapreduce-client-jobclient module should be renamed to something like TestLineRecordReaderJobs to avoid a name conflict and to better indicate these are integration tests using full jobs rather than unit tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680532">MAPREDUCE-5640</key>
            <summary>Rename TestLineRecordReader in jobclient module</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlowe">Jason Lowe</assignee>
                                    <reporter username="jlowe">Jason Lowe</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Nov 2013 15:04:32 +0000</created>
                <updated>Tue, 28 Jan 2014 23:33:42 +0000</updated>
                            <resolved>Mon, 2 Dec 2013 19:17:32 +0000</resolved>
                                    <version>0.23.9</version>
                    <version>2.2.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>0.23.10</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13829102" author="jlowe" created="Thu, 21 Nov 2013 17:13:16 +0000"  >&lt;p&gt;Patch to rename TestLineRecordReader to TestLineRecordReaderJobs.  Also cleaned up tests for junit4 by removing TestCase inheritance and unused imports.&lt;/p&gt;</comment>
                            <comment id="13829207" author="hadoopqa" created="Thu, 21 Nov 2013 18:48:24 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615146/MAPREDUCE-5640.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615146/MAPREDUCE-5640.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.mapred.TestJobCleanup&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4223//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4223//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4223//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4223//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13829298" author="jlowe" created="Thu, 21 Nov 2013 20:15:21 +0000"  >&lt;p&gt;TestJobCleanup failure is unrelated.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5623&quot; title=&quot;TestJobCleanup fails because of RejectedExecutionException and NPE.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5623&quot;&gt;&lt;del&gt;MAPREDUCE-5623&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13836800" author="jeagles" created="Mon, 2 Dec 2013 19:06:01 +0000"  >&lt;p&gt;+1. Changes look good, Jason. Checking this in shortly.&lt;/p&gt;</comment>
                            <comment id="13836810" author="hudson" created="Mon, 2 Dec 2013 19:16:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4814 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4814/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4814/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5640&quot; title=&quot;Rename TestLineRecordReader in jobclient module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5640&quot;&gt;&lt;del&gt;MAPREDUCE-5640&lt;/del&gt;&lt;/a&gt;. Rename TestLineRecordReader in jobclient module (Jason Lowe via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547149&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReaderJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReaderJobs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13837575" author="hudson" created="Tue, 3 Dec 2013 11:00:09 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #410 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/410/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/410/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5640&quot; title=&quot;Rename TestLineRecordReader in jobclient module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5640&quot;&gt;&lt;del&gt;MAPREDUCE-5640&lt;/del&gt;&lt;/a&gt;. Rename TestLineRecordReader in jobclient module (Jason Lowe via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547149&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReaderJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReaderJobs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13837597" author="hudson" created="Tue, 3 Dec 2013 11:33:49 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-0.23-Build #809 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/809/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/809/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5640&quot; title=&quot;Rename TestLineRecordReader in jobclient module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5640&quot;&gt;&lt;del&gt;MAPREDUCE-5640&lt;/del&gt;&lt;/a&gt;. Rename TestLineRecordReader in jobclient module (Jason Lowe via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547157&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547157&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReaderJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReaderJobs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13837673" author="hudson" created="Tue, 3 Dec 2013 13:29:05 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1627 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1627/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1627/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5640&quot; title=&quot;Rename TestLineRecordReader in jobclient module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5640&quot;&gt;&lt;del&gt;MAPREDUCE-5640&lt;/del&gt;&lt;/a&gt;. Rename TestLineRecordReader in jobclient module (Jason Lowe via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547149&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReaderJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReaderJobs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13837687" author="hudson" created="Tue, 3 Dec 2013 13:37:29 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1601 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1601/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1601/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5640&quot; title=&quot;Rename TestLineRecordReader in jobclient module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5640&quot;&gt;&lt;del&gt;MAPREDUCE-5640&lt;/del&gt;&lt;/a&gt;. Rename TestLineRecordReader in jobclient module (Jason Lowe via jeagles) (jeagles: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1547149&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestLineRecordReaderJobs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapreduce/lib/input/TestLineRecordReaderJobs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615146" name="MAPREDUCE-5640.patch" size="20667" author="jlowe" created="Thu, 21 Nov 2013 17:13:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Nov 2013 18:48:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359804</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12324662</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5639] Port DistCp2 document to trunk</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5639</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Port DistCp2 document (&lt;a href=&quot;http://hadoop.apache.org/docs/r1.2.1/distcp2.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/docs/r1.2.1/distcp2.html&lt;/a&gt;)  to trunk.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680466">MAPREDUCE-5639</key>
            <summary>Port DistCp2 document to trunk</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12557037">MAPREDUCE-4282</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ajisakaa">Akira AJISAKA</assignee>
                                    <reporter username="ajisakaa">Akira AJISAKA</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Nov 2013 08:54:30 +0000</created>
                <updated>Wed, 22 Jan 2014 10:47:32 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13878497" author="ajisakaa" created="Wed, 22 Jan 2014 10:24:19 +0000"  >&lt;p&gt;Attaching a patch.&lt;/p&gt;</comment>
                            <comment id="13878515" author="hadoopqa" created="Wed, 22 Jan 2014 10:47:32 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12624319/MAPREDUCE-5639.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12624319/MAPREDUCE-5639.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4332//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4332//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4332//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4332//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624319" name="MAPREDUCE-5639.patch" size="26044" author="ajisakaa" created="Wed, 22 Jan 2014 10:24:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Jan 2014 10:47:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5638] Port Hadoop Archives document to trunk</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5638</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Now Hadoop Archive document exists only in branch-1. Let&apos;s port Hadoop Archives document to trunk.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680465">MAPREDUCE-5638</key>
            <summary>Port Hadoop Archives document to trunk</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12557037">MAPREDUCE-4282</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ajisakaa">Akira AJISAKA</assignee>
                                    <reporter username="ajisakaa">Akira AJISAKA</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Nov 2013 08:52:13 +0000</created>
                <updated>Tue, 14 Jan 2014 06:02:34 +0000</updated>
                                                                            <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13828902" author="stevel@apache.org" created="Thu, 21 Nov 2013 13:12:36 +0000"  >&lt;p&gt;Hadoop supports markdown too -I&apos;d recommend that for better tooling and automatic rendering on github&lt;/p&gt;</comment>
                            <comment id="13831520" author="ajisakaa" created="Mon, 25 Nov 2013 15:02:06 +0000"  >&lt;p&gt;Attaching a patch.&lt;/p&gt;</comment>
                            <comment id="13831546" author="hadoopqa" created="Mon, 25 Nov 2013 15:28:04 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615602/MAPREDUCE-5638.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615602/MAPREDUCE-5638.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4229//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4229//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4229//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4229//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13866413" author="ajisakaa" created="Thu, 9 Jan 2014 07:32:00 +0000"  >&lt;p&gt;Attaching a patch to apply markdown style. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;Steve Loughran&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="13866424" author="hadoopqa" created="Thu, 9 Jan 2014 07:57:28 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622128/MAPREDUCE-5638-md.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622128/MAPREDUCE-5638-md.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4308//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4308//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4308//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4308//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13870424" author="ajisakaa" created="Tue, 14 Jan 2014 06:02:34 +0000"  >&lt;p&gt;The patch is now ready to review.&lt;br/&gt;
GitHub version is here: &lt;a href=&quot;https://github.com/aajisaka/hadoop-document/blob/master/mapreduce/HadoopArchives.md&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/aajisaka/hadoop-document/blob/master/mapreduce/HadoopArchives.md&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622128" name="MAPREDUCE-5638-md.patch" size="6312" author="ajisakaa" created="Thu, 9 Jan 2014 07:32:00 +0000"/>
                            <attachment id="12615602" name="MAPREDUCE-5638.patch" size="5949" author="ajisakaa" created="Mon, 25 Nov 2013 15:02:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Nov 2013 13:12:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5637] Convert Hadoop Streaming document to APT</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5637</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Convert Hadoop Streaming document from forrest to APT.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680464">MAPREDUCE-5637</key>
            <summary>Convert Hadoop Streaming document to APT</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12557037">MAPREDUCE-4282</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ajisakaa">Akira AJISAKA</assignee>
                                    <reporter username="ajisakaa">Akira AJISAKA</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Nov 2013 08:49:20 +0000</created>
                <updated>Thu, 21 Nov 2013 09:54:47 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13828629" author="ajisakaa" created="Thu, 21 Nov 2013 09:23:11 +0000"  >&lt;p&gt;Attaching a patch split from &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4282&quot; title=&quot;Convert Forrest docs to APT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4282&quot;&gt;MAPREDUCE-4282&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13828655" author="hadoopqa" created="Thu, 21 Nov 2013 09:54:47 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615088/MAPREDUCE-5637.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615088/MAPREDUCE-5637.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4222//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4222//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4222//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4222//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615088" name="MAPREDUCE-5637.patch" size="32518" author="ajisakaa" created="Thu, 21 Nov 2013 09:23:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Nov 2013 09:54:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359734</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5636] Convert MapReduce Tutorial document to APT</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5636</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Convert MapReduce Tutorial document from forrest to APT.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680463">MAPREDUCE-5636</key>
            <summary>Convert MapReduce Tutorial document to APT</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12557037">MAPREDUCE-4282</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png">Patch Available</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ajisakaa">Akira AJISAKA</assignee>
                                    <reporter username="ajisakaa">Akira AJISAKA</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Nov 2013 08:47:58 +0000</created>
                <updated>Thu, 21 Nov 2013 09:54:44 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13828627" author="ajisakaa" created="Thu, 21 Nov 2013 09:19:37 +0000"  >&lt;p&gt;Attaching a patch split from &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4282&quot; title=&quot;Convert Forrest docs to APT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4282&quot;&gt;MAPREDUCE-4282&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13828654" author="hadoopqa" created="Thu, 21 Nov 2013 09:54:44 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615086/MAPREDUCE-5636.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615086/MAPREDUCE-5636.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4221//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4221//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4221//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4221//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615086" name="MAPREDUCE-5636.patch" size="74212" author="ajisakaa" created="Thu, 21 Nov 2013 09:19:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Nov 2013 09:54:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5635] FileInputFormat does not specify how the file is split</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5635</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>

&lt;p&gt;Here is what the TextInputFormat javadoc says:&lt;br/&gt;
&lt;a href=&quot;http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/lib/input/TextInputFormat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TextInputFormat&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;An InputFormat for plain text files. Files are broken into lines. Either linefeed or carriage-return are used to signal end of line. Keys are the position in the file, and values are the line of text..&lt;/p&gt;

&lt;p&gt;FileInputFormat should say the same on&lt;br/&gt;
&lt;a href=&quot;http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/lib/input/FileInputFormat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FileInputFormat&lt;/a&gt;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Does not matter.&lt;/p&gt;</environment>
        <key id="12680393">MAPREDUCE-5635</key>
            <summary>FileInputFormat does not specify how the file is split</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="varma.pranay">Pranay Varma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Nov 2013 22:59:19 +0000</created>
                <updated>Thu, 5 Dec 2013 16:59:36 +0000</updated>
                            <resolved>Thu, 5 Dec 2013 15:24:00 +0000</resolved>
                                    <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13828281" author="jlowe" created="Wed, 20 Nov 2013 23:26:06 +0000"  >&lt;p&gt;FileInputFormat does not require that the file is a plain text file broken into lines with carriage-return or linefeed used as line delimiters.  That&apos;s what TextInputFormat is for.&lt;/p&gt;

&lt;p&gt;FileInputFormat is an abstract class that makes no assumptions about how the data in the file is formatted.  Concrete implementations that derive from FileInputFormat must implement the getRecordReader method which will dictate how the records are read from the file and therefore what the format must be for that particular input format.&lt;/p&gt;</comment>
                            <comment id="13840159" author="jlowe" created="Thu, 5 Dec 2013 15:24:00 +0000"  >&lt;p&gt;Closing this as FileInputFormat is not supposed to specify the specifics on the file format per the previous comment.&lt;/p&gt;</comment>
                            <comment id="13840273" author="varma.pranay" created="Thu, 5 Dec 2013 16:59:36 +0000"  >&lt;p&gt;Please add your comments to the javadoc.&lt;br/&gt;
That will help people understand the class better.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5635?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAPREDUCE-5635?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel&lt;/a&gt;]&lt;br/&gt;
on the file format per the previous comment.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5635&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAPREDUCE-5635&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/lib/input/TextInputFormat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/lib/input/TextInputFormat.html&lt;/a&gt;&lt;br/&gt;
]&lt;br/&gt;
Either linefeed or carriage-return are used to signal end of line. Keys are&lt;br/&gt;
the position in the file, and values are the line of text..&lt;br/&gt;
&lt;a href=&quot;http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/lib/input/FileInputFormat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/lib/input/FileInputFormat.html&lt;/a&gt;&lt;br/&gt;
]&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Nov 2013 23:26:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359665</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5634] Documentation for FileInputFormat-&gt;listStatus seems to be wrong</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5634</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description>&lt;p&gt;Take a look at &lt;a href=&quot;http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/FileInputFormat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/FileInputFormat.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Javadoc says:&lt;br/&gt;
listStatus(JobConf job) &lt;br/&gt;
          List input directories &lt;br/&gt;
whereas it returns FileStatus[]. &lt;br/&gt;
Java doc should say, it returns an array containing information about the input directories.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Does not matter. &lt;/p&gt;</environment>
        <key id="12680384">MAPREDUCE-5634</key>
            <summary>Documentation for FileInputFormat-&gt;listStatus seems to be wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png">Open</status>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="varma.pranay">Pranay Varma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Nov 2013 22:02:33 +0000</created>
                <updated>Thu, 21 Nov 2013 19:08:57 +0000</updated>
                                            <version>2.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13829227" author="sarutak" created="Thu, 21 Nov 2013 19:08:57 +0000"  >&lt;p&gt;Similar to what you reported, the document has some inconsistence of terms. For example, &apos;list&apos; and &apos;array&apos; as a return value.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Nov 2013 19:08:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359654</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>

<item>
            <title>[MAPREDUCE-5633] Can Hadoop use multi-cores of a processor under single machine</title>
                <link>https://issues.apache.org/jira/browse/MAPREDUCE-5633</link>
                <project id="12310941" key="MAPREDUCE">Hadoop Map/Reduce</project>
                    <description></description>
                <environment></environment>
        <key id="12680360">MAPREDUCE-5633</key>
            <summary>Can Hadoop use multi-cores of a processor under single machine</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asif">Asif</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Nov 2013 19:57:59 +0000</created>
                <updated>Wed, 20 Nov 2013 20:18:38 +0000</updated>
                            <resolved>Wed, 20 Nov 2013 20:18:38 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13828065" author="hitesh" created="Wed, 20 Nov 2013 20:18:38 +0000"  >&lt;p&gt;Please ask such questions on the user list. &lt;a href=&quot;http://hadoop.apache.org/mailing_lists.html#User&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/mailing_lists.html#User&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Nov 2013 20:18:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>